(self.webpackChunkitiReport=self.webpackChunkitiReport||[]).push([[792],{76:(zt,St,ee)=>{"use strict";ee.d(St,{Am:()=>yh,Bd:()=>W,FA:()=>Ze,Fy:()=>be,I9:()=>ia,Im:()=>Ma,Ku:()=>_l,Ll:()=>Pe,T9:()=>ht,Uj:()=>K,XA:()=>We,ZQ:()=>ie,bD:()=>ra,cY:()=>ft,eX:()=>ye,g:()=>Ce,gR:()=>ar,hp:()=>Ep,jZ:()=>M,lT:()=>cn,lV:()=>Ut,nr:()=>ue,p7:()=>bt,sr:()=>Et,tD:()=>Eo,u:()=>G,zW:()=>ce,zw:()=>te});const ae=function(B){const j=[];let J=0;for(let Ae=0;Ae<B.length;Ae++){let le=B.charCodeAt(Ae);le<128?j[J++]=le:le<2048?(j[J++]=le>>6|192,j[J++]=63&le|128):55296==(64512&le)&&Ae+1<B.length&&56320==(64512&B.charCodeAt(Ae+1))?(le=65536+((1023&le)<<10)+(1023&B.charCodeAt(++Ae)),j[J++]=le>>18|240,j[J++]=le>>12&63|128,j[J++]=le>>6&63|128,j[J++]=63&le|128):(j[J++]=le>>12|224,j[J++]=le>>6&63|128,j[J++]=63&le|128)}return j},tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,j){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let le=0;le<B.length;le+=3){const nt=B[le],Vt=le+1<B.length,dn=Vt?B[le+1]:0,Oi=le+2<B.length,ur=Oi?B[le+2]:0;let Ki=(15&dn)<<2|ur>>6,Ao=63&ur;Oi||(Ao=64,Vt||(Ki=64)),Ae.push(J[nt>>2],J[(3&nt)<<4|dn>>4],J[Ki],J[Ao])}return Ae.join("")},encodeString(B,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(B):this.encodeByteArray(ae(B),j)},decodeString(B,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(B):function(B){const j=[];let J=0,Ae=0;for(;J<B.length;){const le=B[J++];if(le<128)j[Ae++]=String.fromCharCode(le);else if(le>191&&le<224){const nt=B[J++];j[Ae++]=String.fromCharCode((31&le)<<6|63&nt)}else if(le>239&&le<365){const Oi=((7&le)<<18|(63&B[J++])<<12|(63&B[J++])<<6|63&B[J++])-65536;j[Ae++]=String.fromCharCode(55296+(Oi>>10)),j[Ae++]=String.fromCharCode(56320+(1023&Oi))}else{const nt=B[J++],Vt=B[J++];j[Ae++]=String.fromCharCode((15&le)<<12|(63&nt)<<6|63&Vt)}}return j.join("")}(this.decodeStringToByteArray(B,j))},decodeStringToByteArray(B,j){this.init_();const J=j?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let le=0;le<B.length;){const nt=J[B.charAt(le++)],dn=le<B.length?J[B.charAt(le)]:0;++le;const ur=le<B.length?J[B.charAt(le)]:64;++le;const qt=le<B.length?J[B.charAt(le)]:64;if(++le,null==nt||null==dn||null==ur||null==qt)throw new lt;Ae.push(nt<<2|dn>>4),64!==ur&&(Ae.push(dn<<4&240|ur>>2),64!==qt&&Ae.push(ur<<6&192|qt))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class lt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K=function(B){return function(B){const j=ae(B);return tt.encodeByteArray(j,!0)}(B).replace(/\./g,"")},G=function(B){try{return tt.decodeString(B,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function te(B,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return j}for(const J in j)!j.hasOwnProperty(J)||!ge(J)||(B[J]=te(B[J],j[J]));return B}function ge(B){return"__proto__"!==B}const vt=()=>{try{return function $e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=B&&G(B[1]);return j&&JSON.parse(j)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},ht=()=>{var B;return null===(B=vt())||void 0===B?void 0:B.config},We=B=>{var j;return null===(j=vt())||void 0===j?void 0:j[`_${B}`]};class ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,J)=>{this.resolve=j,this.reject=J})}wrapCallback(j){return(J,Ae)=>{J?this.reject(J):this.resolve(Ae),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(J):j(J,Ae))}}}function be(B,j){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=j||"demo-project",le=B.iat||0,nt=B.sub||B.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Vt=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:le,exp:le+3600,auth_time:le,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},B);return[K(JSON.stringify({alg:"none",type:"JWT"})),K(JSON.stringify(Vt)),""].join(".")}function ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function M(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ie())}function Pe(){var B;const j=null===(B=vt())||void 0===B?void 0:B.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function W(){return typeof window<"u"||bt()}function bt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Et(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ut(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function cn(){const B=ie();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function ue(){return!Pe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){try{return"object"==typeof indexedDB}catch{return!1}}function ye(){return new Promise((B,j)=>{try{let J=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(Ae);le.onsuccess=()=>{le.result.close(),J||self.indexedDB.deleteDatabase(Ae),B(!0)},le.onupgradeneeded=()=>{J=!1},le.onerror=()=>{var nt;j((null===(nt=le.error)||void 0===nt?void 0:nt.message)||"")}}catch(J){j(J)}})}class Ce extends Error{constructor(j,J,Ae){super(J),this.code=j,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(j,J,Ae){this.service=j,this.serviceName=J,this.errors=Ae}create(j,...J){const Ae=J[0]||{},le=`${this.service}/${j}`,nt=this.errors[j],Vt=nt?function an(B,j){return B.replace(Oe,(J,Ae)=>{const le=j[Ae];return null!=le?String(le):`<${Ae}?>`})}(nt,Ae):"Error";return new Ce(le,`${this.serviceName}: ${Vt} (${le}).`,Ae)}}const Oe=/\{\$([^}]+)}/g;function ar(B,j){return Object.prototype.hasOwnProperty.call(B,j)}function Ma(B){for(const j in B)if(Object.prototype.hasOwnProperty.call(B,j))return!1;return!0}function ra(B,j){if(B===j)return!0;const J=Object.keys(B),Ae=Object.keys(j);for(const le of J){if(!Ae.includes(le))return!1;const nt=B[le],Vt=j[le];if(gl(nt)&&gl(Vt)){if(!ra(nt,Vt))return!1}else if(nt!==Vt)return!1}for(const le of Ae)if(!J.includes(le))return!1;return!0}function gl(B){return null!==B&&"object"==typeof B}function yh(B){const j=[];for(const[J,Ae]of Object.entries(B))Array.isArray(Ae)?Ae.forEach(le=>{j.push(encodeURIComponent(J)+"="+encodeURIComponent(le))}):j.push(encodeURIComponent(J)+"="+encodeURIComponent(Ae));return j.length?"&"+j.join("&"):""}function ia(B){const j={};return B.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[le,nt]=Ae.split("=");j[decodeURIComponent(le)]=decodeURIComponent(nt)}}),j}function Ep(B){const j=B.indexOf("?");if(!j)return"";const J=B.indexOf("#",j);return B.substring(j,J>0?J:void 0)}function Eo(B,j){const J=new To(B,j);return J.subscribe.bind(J)}class To{constructor(j,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{j(this)}).catch(Ae=>{this.error(Ae)})}next(j){this.forEachObserver(J=>{J.next(j)})}error(j){this.forEachObserver(J=>{J.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,J,Ae){let le;if(void 0===j&&void 0===J&&void 0===Ae)throw new Error("Missing Observer.");le=function Tp(B,j){if("object"!=typeof B||null===B)return!1;for(const J of j)if(J in B&&"function"==typeof B[J])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:J,complete:Ae},void 0===le.next&&(le.next=Va),void 0===le.error&&(le.error=Va),void 0===le.complete&&(le.complete=Va);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch{}}),this.observers.push(le),nt}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,j)}sendOne(j,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{J(this.observers[j])}catch(Ae){typeof console<"u"&&console.error&&console.error(Ae)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Va(){}function _l(B){return B&&B._delegate?B._delegate:B}},104:(zt,St,ee)=>{"use strict";var P={};ee.r(P),ee.d(P,{browserFiles:()=>UCe,browserHTTPRequest:()=>WCe,concatenateArrayBuffers:()=>HM,copyModel:()=>NCe,decodeWeights:()=>qK,encodeWeights:()=>sCe,fromMemory:()=>QCe,fromMemorySync:()=>f7,getLoadHandlers:()=>gCe,getModelArtifactsForJSON:()=>zM,getModelArtifactsForJSONSync:()=>JK,getModelArtifactsInfoForJSON:()=>Nb,getSaveHandlers:()=>mCe,getWeightSpecs:()=>YK,http:()=>s2,isHTTPScheme:()=>i2,listModels:()=>SCe,loadWeights:()=>HCe,moveModel:()=>PCe,registerLoadRouter:()=>pCe,registerSaveRouter:()=>fCe,removeModel:()=>DCe,weightsLoaderFactory:()=>l7,withSaveHandler:()=>JCe,withSaveHandlerSync:()=>YCe});var rt={};ee.r(rt),ee.d(rt,{conv2d:()=>Wke,depthwiseConv2d:()=>Zke,matMul:()=>txe});var Ne={};ee.r(Ne),ee.d(Ne,{json:()=>$Re});var ae={};ee.r(ae),ee.d(ae,{json:()=>jRe});var dt={};ee.r(dt),ee.d(dt,{json:()=>BRe});var tt={};ee.r(tt),ee.d(tt,{json:()=>URe});var lt={};ee.r(lt),ee.d(lt,{json:()=>HRe});var ze={};ee.r(ze),ee.d(ze,{json:()=>zRe});var K={};ee.r(K),ee.d(K,{json:()=>GRe});var G={};ee.r(G),ee.d(G,{json:()=>qRe});var ne={};ee.r(ne),ee.d(ne,{json:()=>WRe});var te={};ee.r(te),ee.d(te,{json:()=>KRe});var ge={};ee.r(ge),ee.d(ge,{json:()=>QRe});var $e={};ee.r($e),ee.d($e,{json:()=>JRe});var qe={};ee.r(qe),ee.d(qe,{json:()=>YRe});var mt={};ee.r(mt),ee.d(mt,{json:()=>XRe});var ct={};ee.r(ct),ee.d(ct,{json:()=>ZRe});var vt={};ee.r(vt),ee.d(vt,{json:()=>eOe});var Dn={};ee.r(Dn),ee.d(Dn,{json:()=>tOe});var Rn={};ee.r(Rn),ee.d(Rn,{json:()=>nOe});var ht={};ee.r(ht),ee.d(ht,{json:()=>rOe});var We={};function ft(t,e){return Object.is(t,e)}ee.r(We),ee.d(We,{OP_SCOPE_SUFFIX:()=>GK,abs:()=>Ia,acos:()=>eSe,acosh:()=>nSe,add:()=>xi,addN:()=>sSe,all:()=>aSe,any:()=>lSe,argMax:()=>dSe,argMin:()=>fSe,asin:()=>mSe,asinh:()=>ySe,atan:()=>vSe,atan2:()=>wSe,atanh:()=>TSe,avgPool:()=>m7,avgPool3d:()=>OSe,basicLSTMCell:()=>USe,batchNorm:()=>LC,batchNorm2d:()=>WSe,batchNorm3d:()=>QSe,batchNorm4d:()=>YSe,batchToSpaceND:()=>g7,bincount:()=>y7,booleanMaskAsync:()=>Ike,broadcastArgs:()=>eDe,broadcastTo:()=>$C,buffer:()=>dc,cast:()=>ki,ceil:()=>rDe,clipByValue:()=>sDe,clone:()=>Zd,complex:()=>Jd,concat:()=>Es,concat1d:()=>aDe,concat2d:()=>lDe,concat3d:()=>dDe,concat4d:()=>fDe,conv1d:()=>gDe,conv2d:()=>BC,conv2dTranspose:()=>vDe,conv3d:()=>wDe,conv3dTranspose:()=>ADe,cos:()=>SDe,cosh:()=>NDe,cosineWindow:()=>C2,cumprod:()=>kDe,cumsum:()=>RDe,denseBincount:()=>MDe,depthToSpace:()=>VDe,depthwiseConv2d:()=>l2,diag:()=>jDe,dilation2d:()=>UDe,div:()=>Ts,divNoNan:()=>JDe,dot:()=>XDe,dropout:()=>Bke,einsum:()=>e1e,elu:()=>w7,enclosingPowerOfTwo:()=>W7,equal:()=>b7,erf:()=>r1e,euclideanNorm:()=>f1e,exp:()=>Qf,expandDims:()=>Jf,expm1:()=>y1e,eye:()=>I7,fft:()=>b2,fill:()=>jC,floor:()=>A7,floorDiv:()=>v7,fused:()=>rt,gather:()=>C7,gatherND:()=>Lke,greater:()=>GC,greaterEqual:()=>S7,ifft:()=>XC,imag:()=>qC,image:()=>RRe,inTopKAsync:()=>Hke,irfft:()=>H7,isFinite:()=>C1e,isInf:()=>D1e,isNaN:()=>P1e,leakyRelu:()=>D7,less:()=>R1e,lessEqual:()=>p2,linalg:()=>ORe,linspace:()=>M1e,localResponseNormalization:()=>V1e,log:()=>kb,log1p:()=>N7,logSigmoid:()=>H1e,logSoftmax:()=>q1e,logSumExp:()=>k7,logicalAnd:()=>KC,logicalNot:()=>x7,logicalOr:()=>R7,logicalXor:()=>X1e,losses:()=>MRe,lowerBound:()=>eNe,matMul:()=>Qn,max:()=>py,maxPool:()=>O7,maxPool3d:()=>rNe,maxPoolWithArgmax:()=>sNe,maximum:()=>aNe,mean:()=>JC,meshgrid:()=>lNe,min:()=>d2,minimum:()=>M7,mirrorPad:()=>hNe,mod:()=>pNe,moments:()=>gNe,movingAverage:()=>Nke,mul:()=>sn,multiRNNCell:()=>_Ne,multinomial:()=>bNe,neg:()=>fc,norm:()=>zC,notEqual:()=>F7,oneHot:()=>TNe,ones:()=>Yf,onesLike:()=>ANe,op:()=>H,outerProduct:()=>SNe,pad:()=>xb,pad1d:()=>PNe,pad2d:()=>xNe,pad3d:()=>ONe,pad4d:()=>FNe,pool:()=>BNe,pow:()=>h2,prelu:()=>L7,print:()=>s7,prod:()=>zNe,raggedGather:()=>qNe,raggedTensorToTensor:()=>KNe,rand:()=>JNe,randomGamma:()=>rPe,randomNormal:()=>$7,randomStandardNormal:()=>oPe,randomUniform:()=>j7,range:()=>Rb,real:()=>Ob,reciprocal:()=>cPe,relu:()=>YC,relu6:()=>B7,reshape:()=>ke,reverse:()=>Xf,reverse1d:()=>mPe,reverse2d:()=>yPe,reverse3d:()=>vPe,reverse4d:()=>wPe,rfft:()=>w2,round:()=>U7,rsqrt:()=>IPe,scalar:()=>Un,scatterND:()=>Rke,searchSorted:()=>m2,selu:()=>CPe,separableConv2d:()=>DPe,setdiff1dAsync:()=>PPe,sigmoid:()=>hy,sign:()=>xPe,signal:()=>xRe,sin:()=>OPe,sinh:()=>FPe,slice:()=>ir,slice1d:()=>LPe,slice2d:()=>jPe,slice3d:()=>UPe,slice4d:()=>zPe,softmax:()=>qPe,softplus:()=>P7,spaceToBatchND:()=>V7,sparse:()=>FRe,sparseToDense:()=>Fke,spectral:()=>kRe,split:()=>Mb,sqrt:()=>f2,square:()=>HC,squaredDifference:()=>z7,squeeze:()=>E2,stack:()=>pc,step:()=>G7,stridedSlice:()=>rke,string:()=>VRe,sub:()=>Cn,sum:()=>mr,tan:()=>ske,tanh:()=>u2,tensor:()=>ol,tensor1d:()=>Aa,tensor2d:()=>Zf,tensor3d:()=>oke,tensor4d:()=>ake,tensor5d:()=>uke,tensor6d:()=>lke,tile:()=>Pb,topk:()=>dke,transpose:()=>A2,truncatedNormal:()=>fke,unique:()=>mke,unsortedSegmentSum:()=>yke,unstack:()=>ep,upperBound:()=>vke,variable:()=>bke,where:()=>fy,whereAsync:()=>q7,zeros:()=>my,zerosLike:()=>c2});let be=null,ie=!1,M=1;const Pe=Symbol("SIGNAL");function W(t){const e=be;return be=t,e}const pn={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cn(t){if(ie)throw new Error("");if(null===be)return;be.consumerOnSignalRead(t);const e=be.nextProducerIndex++;Re(be),e<be.producerNode.length&&be.producerNode[e]!==t&&ve(be)&&Oe(be.producerNode[e],be.producerIndexOfThis[e]),be.producerNode[e]!==t&&(be.producerNode[e]=t,be.producerIndexOfThis[e]=ve(be)?an(t,be,e):0),be.producerLastReadVersion[e]=t.version}function Tn(t){if((!ve(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==M)){if(!t.producerMustRecompute(t)&&!Ce(t))return t.dirty=!1,void(t.lastCleanEpoch=M);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=M}}function ue(t){if(void 0===t.liveConsumerNode)return;const e=ie;ie=!0;try{for(const n of t.liveConsumerNode)n.dirty||ye(n)}finally{ie=e}}function ce(){return!1!==be?.consumerAllowSignalWrites}function ye(t){t.dirty=!0,ue(t),t.consumerMarkedDirty?.(t)}function we(t){return t&&(t.nextProducerIndex=0),W(t)}function Be(t,e){if(W(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ve(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Oe(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ce(t){Re(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Tn(n),r!==n.version))return!0}return!1}function Ze(t){if(Re(t),ve(t))for(let e=0;e<t.producerNode.length;e++)Oe(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function an(t,e,n){if(it(t),0===t.liveConsumerNode.length&&Qt(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=an(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Oe(t,e){if(it(t),1===t.liveConsumerNode.length&&Qt(t))for(let r=0;r<t.producerNode.length;r++)Oe(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Re(i),i.producerIndexOfThis[r]=e}}function ve(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Re(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function it(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Qt(t){return void 0!==t.producerNode}const un=Symbol("UNSET"),mn=Symbol("COMPUTING"),ar=Symbol("ERRORED"),Wr={...pn,value:un,dirty:!0,error:null,equal:ft,producerMustRecompute:t=>t.value===un||t.value===mn,producerRecomputeValue(t){if(t.value===mn)throw new Error("Detected cycle in computations.");const e=t.value;t.value=mn;const n=we(t);let r;try{r=t.computation()}catch(i){r=ar,t.error=i}finally{Be(t,n)}e!==un&&e!==ar&&r!==ar&&t.equal(e,r)?t.value=e:(t.value=r,t.version++)}};let na=function Ma(){throw new Error};function ra(){na()}let Fa=null;function cs(t,e){ce()||ra(),t.equal(t.value,e)||(t.value=e,function Tp(t){t.version++,function or(){M++}(),ue(t),Fa?.()}(t))}const sa={...pn,equal:ft,value:void 0};function Nn(t){return"function"==typeof t}function Wi(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Su=Wi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function fi(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Kr{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Nn(r))try{r()}catch(s){e=s instanceof Su?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{$a(s)}catch(o){e=e??[],o instanceof Su?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Su(e)}}add(e){var n;if(e&&e!==this)if(this.closed)$a(e);else{if(e instanceof Kr){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fi(n,e)}remove(e){const{_finalizers:n}=this;n&&fi(n,e),e instanceof Kr&&e._removeParent(this)}}Kr.EMPTY=(()=>{const t=new Kr;return t.closed=!0,t})();const Du=Kr.EMPTY;function oa(t){return t instanceof Kr||t&&"closed"in t&&Nn(t.remove)&&Nn(t.add)&&Nn(t.unsubscribe)}function $a(t){Nn(t)?t():t.unsubscribe()}const Io={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ja={setTimeout(t,e,...n){const{delegate:r}=ja;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=ja;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function _h(t){ja.setTimeout(()=>{const{onUnhandledError:e}=Io;if(!e)throw t;e(t)})}function Ba(){}const _l=J("C",void 0,void 0);function J(t,e,n){return{kind:t,value:e,error:n}}let Ae=null;function le(t){if(Io.useDeprecatedSynchronousErrorHandling){const e=!Ae;if(e&&(Ae={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ae;if(Ae=null,n)throw r}}else t()}class Vt extends Kr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,oa(e)&&e.add(this)):this.destination=vl}static create(e,n,r){return new _r(e,n,r)}next(e){this.isStopped?Ao(function j(t){return J("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ao(function B(t){return J("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ao(_l,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dn=Function.prototype.bind;function Oi(t,e){return dn.call(t,e)}class ur{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qt(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qt(r)}else qt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qt(n)}}}class _r extends Vt{constructor(e,n,r){let i;if(super(),Nn(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Io.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Oi(e.next,s),error:e.error&&Oi(e.error,s),complete:e.complete&&Oi(e.complete,s)}):i=e}this.destination=new ur(i)}}function qt(t){Io.useDeprecatedSynchronousErrorHandling?function nt(t){Io.useDeprecatedSynchronousErrorHandling&&Ae&&(Ae.errorThrown=!0,Ae.error=t)}(t):_h(t)}function Ao(t,e){const{onStoppedNotification:n}=Io;n&&ja.setTimeout(()=>n(t,e))}const vl={closed:!0,next:Ba,error:function Ki(t){throw t},complete:Ba},Vc="function"==typeof Symbol&&Symbol.observable||"@@observable";function xs(t){return t}function vh(t){return 0===t.length?xs:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let On=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function re(t){return t&&t instanceof Vt||function pe(t){return t&&Nn(t.next)&&Nn(t.error)&&Nn(t.complete)}(t)&&oa(t)}(n)?n:new _r(n,r,i);return le(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ua(r))((i,s)=>{const o=new _r({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Vc](){return this}pipe(...n){return vh(n)(this)}toPromise(n){return new(n=Ua(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Ua(t){var e;return null!==(e=t??Io.Promise)&&void 0!==e?e:Promise}const De=Wi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let je=(()=>{class t extends On{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new jt(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new De}next(n){le(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){le(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){le(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Du:(this.currentObservers=null,s.push(n),new Kr(()=>{this.currentObservers=null,fi(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new On;return n.source=this,n}}return t.create=(e,n)=>new jt(e,n),t})();class jt extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Du}}class gt extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Yt(t){return Nn(t?.lift)}function Ot(t){return e=>{if(Yt(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pt(t,e,n,r,i){return new Rs(t,e,n,r,i)}class Rs extends Vt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function pt(t,e){return Ot((n,r)=>{let i=0;n.subscribe(Pt(r,s=>{r.next(t.call(e,s,i++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const nE="https://g.co/ng/security#xss";class fe extends Error{constructor(e,n){super(function El(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Wa(t){return{toString:t}.toString()}const ku="__parameters__";function zc(t,e,n){return Wa(()=>{const r=function Dh(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,c){const h=u.hasOwnProperty(ku)?u[ku]:Object.defineProperty(u,ku,{value:[]})[ku];for(;h.length<=c;)h.push(null);return(h[c]=h[c]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const Gn=globalThis;function In(t){for(let e in t)if(t[e]===In)return e;throw Error("Could not find renamed property on target object.")}function UD(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Lr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Lr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function p_(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const HD=In({__forward_ref__:In});function $n(t){return t.__forward_ref__=$n,t.toString=function(){return Lr(this())},t}function xt(t){return Rp(t)?t():t}function Rp(t){return"function"==typeof t&&t.hasOwnProperty(HD)&&t.__forward_ref__===$n}function Ye(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jr(t){return{providers:t.providers||[],imports:t.imports||[]}}function ua(t){return cE(t,g_)||cE(t,dE)}function cE(t,e){return t.hasOwnProperty(e)?t[e]:null}function Op(t){return t&&(t.hasOwnProperty(y_)||t.hasOwnProperty(__))?t[y_]:null}const g_=In({\u0275prov:In}),y_=In({\u0275inj:In}),dE=In({ngInjectableDef:In}),__=In({ngInjectorDef:In});class Fe{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ye({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function I_(t){return t&&!!t.\u0275providers}const Ph=In({\u0275cmp:In}),Il=In({\u0275dir:In}),A_=In({\u0275pipe:In}),$r=In({\u0275mod:In}),Qa=In({\u0275fac:In}),Al=In({__NG_ELEMENT_ID__:In}),hE=In({__NG_ENV_ID__:In});function Lt(t){return"string"==typeof t?t:null==t?"":String(t)}function Cl(t,e){throw new fe(-201,!1)}var Jt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Jt||{});let S_;function Mp(){return S_}function Ji(t){const e=S_;return S_=t,e}function Fp(t,e,n){const r=ua(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Jt.Optional?null:void 0!==e?e:void Cl()}const qc={},D_="__NG_DI_FLAG__",Vp="ngTempTokenPath",Wc=/\n/gm,gE="__source";let Kc;function xu(t){const e=Kc;return Kc=t,e}function Lp(t,e=Jt.Default){if(void 0===Kc)throw new fe(-203,!1);return null===Kc?Fp(t,void 0,e):Kc.get(t,e&Jt.Optional?null:void 0,e)}function Se(t,e=Jt.Default){return(Mp()||Lp)(xt(t),e)}function Te(t,e=Jt.Default){return Se(t,Qc(e))}function Qc(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function N_(t){const e=[];for(let n=0;n<t.length;n++){const r=xt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new fe(900,!1);let i,s=Jt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=YD(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Se(i,s))}else e.push(Se(r))}return e}function kh(t,e){return t[D_]=e,t.prototype[D_]=e,t}function YD(t){return t[D_]}const xh=kh(zc("Optional"),8),Jc=kh(zc("SkipSelf"),4);function Ja(t,e){return t.hasOwnProperty(Qa)?t[Qa]:null}function Yc(t,e){t.forEach(n=>Array.isArray(n)?Yc(n,e):e(n))}function $p(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Sl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Yi(t,e,n){let r=td(t,e);return r>=0?t[1|r]=n:(r=~r,function Zc(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function k_(t,e){const n=td(t,e);if(n>=0)return t[1|n]}function td(t,e){return function jp(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const So={},_n=[],Do=new Fe(""),Bp=new Fe("",-1),x_=new Fe("");class nd{get(e,n=qc){if(n===qc){const r=new Error(`NullInjectorError: No provider for ${Lr(e)}!`);throw r.name="NullInjectorError",r}return n}}var Up=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Up||{}),Os=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Os||{}),la=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(la||{});function r1(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Dl(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];wE(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function bE(t){return 3===t||4===t||6===t}function wE(t){return 64===t.charCodeAt(0)}function Nl(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Hp(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Hp(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const zp="ng-template";function i1(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==r1(e[i+1].toLowerCase(),n,0))return!0}else if(Rh(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===n)return!0}return!1}function Rh(t){return 4===t.type&&t.value!==zp}function EE(t,e,n){return e===(4!==t.type||n?t.value:zp)}function TE(t,e,n){let r=4;const i=t.attrs,s=null!==i?function a1(t){for(let e=0;e<t.length;e++)if(bE(t[e]))return e;return t.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!EE(t,u,n)||""===u&&1===e.length){if(No(r))return!1;o=!0}}else if(8&r){if(null===i||!i1(t,i,u,n)){if(No(r))return!1;o=!0}}else{const l=e[++a],c=s1(u,i,Rh(t),n);if(-1===c){if(No(r))return!1;o=!0;continue}if(""!==l){let h;if(h=c>s?"":i[c+1].toLowerCase(),2&r&&l!==h){if(No(r))return!1;o=!0}}}}else{if(!o&&!No(r)&&!No(u))return!1;if(o&&No(u))continue;o=!1,r=u|1&r}}return No(r)||o}function No(t){return!(1&t)}function s1(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function R_(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Gp(t,e,n=!1){for(let r=0;r<e.length;r++)if(TE(t,e[r],n))return!0;return!1}function IE(t,e){return t?":not("+e.trim()+")":e}function O_(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!No(o)&&(e+=IE(s,i),i=""),r=o,s=s||!No(r);n++}return""!==i&&(e+=IE(s,i)),e}function Ya(t){return Wa(()=>{const e=SE(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Up.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Os.Emulated,styles:t.styles||_n,_:null,schemas:t.schemas||null,tView:null,id:""};DE(n);const r=t.dependencies;return n.directiveDefs=rd(r,!1),n.pipeDefs=rd(r,!0),n.id=function d1(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function F_(t){return Xt(t)||ii(t)}function AE(t){return null!==t}function ri(t){return Wa(()=>({type:t.type,bootstrap:t.bootstrap||_n,declarations:t.declarations||_n,imports:t.imports||_n,exports:t.exports||_n,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function CE(t,e){if(null==t)return So;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let s,o,a=la.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==la.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Mt(t){return Wa(()=>{const e=SE(t);return DE(e),e})}function Xi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Xt(t){return t[Ph]||null}function ii(t){return t[Il]||null}function pi(t){return t[A_]||null}function Fi(t,e){const n=t[$r]||null;if(!n&&!0===e)throw new Error(`Type ${Lr(t)} does not have '\u0275mod' property.`);return n}function SE(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||So,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||_n,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:CE(t.inputs,e),outputs:CE(t.outputs),debugInfo:null}}function DE(t){t.features?.forEach(e=>e(t))}function rd(t,e){if(!t)return null;const n=e?pi:F_;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(AE)}function Pl(t){return{\u0275providers:t}}function h1(...t){return{\u0275providers:id(0,t),\u0275fromNgModule:!0}}function id(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Yc(e,o=>{const a=o;qp(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&NE(i,s),n}function NE(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];V_(i,s=>{e(s,r)})}}function qp(t,e,n,r){if(!(t=xt(t)))return!1;let i=null,s=Op(t);const o=!s&&Xt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Op(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)qp(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{Yc(s.imports,c=>{qp(c,e,n,r)&&(l||=[],l.push(c))})}finally{}void 0!==l&&NE(l,e)}if(!a){const l=Ja(i)||(()=>new i);e({provide:i,useFactory:l,deps:_n},i),e({provide:x_,useValue:i,multi:!0},i),e({provide:Do,useValue:()=>Se(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=t;V_(u,c=>{e(c,l)})}}}return i!==t&&void 0!==t.providers}function V_(t,e){for(let n of t)I_(n)&&(n=n.\u0275providers),Array.isArray(n)?V_(n,e):e(n)}const f1=In({provide:String,useValue:In});function L_(t){return null!==t&&"object"==typeof t&&f1 in t}function Xa(t){return"function"==typeof t}const $_=new Fe(""),Wp={},m1={};let j_;function Oh(){return void 0===j_&&(j_=new nd),j_}class Zi{}class sd extends Zi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qp(e,o=>this.processProvider(o)),this.records.set(Bp,Ru(void 0,this)),i.has("environment")&&this.records.set(Zi,Ru(void 0,this));const s=this.records.get($_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(x_,_n,Jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=W(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),W(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=xu(this),r=Ji(void 0);try{return e()}finally{xu(n),Ji(r)}}get(e,n=qc,r=Jt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(hE))return e[hE](this);r=Qc(r);const s=xu(this),o=Ji(void 0);try{if(!(r&Jt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function v1(t){return"function"==typeof t||"object"==typeof t&&t instanceof Fe}(e)&&ua(e);u=l&&this.injectableDefInScope(l)?Ru(B_(e),Wp):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Jt.Self?Oh():this.parent).get(e,n=r&Jt.Optional&&n===qc?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Vp]=a[Vp]||[]).unshift(Lr(e)),s)throw a;return function XD(t,e,n,r){const i=t[Vp];throw e[gE]&&i.unshift(e[gE]),t.message=function _E(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Lr(e);if(Array.isArray(e))i=e.map(Lr).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Lr(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Wc,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Vp]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Ji(o),xu(s)}}resolveInjectorInitializers(){const e=W(null),n=xu(this),r=Ji(void 0);try{const s=this.get(Do,_n,Jt.Self);for(const o of s)o()}finally{xu(n),Ji(r),W(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Lr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(e){let n=Xa(e=xt(e))?e:xt(e&&e.provide);const r=function y1(t){return L_(t)?Ru(void 0,t.useValue):Ru(Kp(t),Wp)}(e);if(!Xa(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Ru(void 0,Wp,!0),i.factory=()=>N_(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=W(null);try{return n.value===Wp&&(n.value=m1,n.value=n.factory()),"object"==typeof n.value&&n.value&&function U_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{W(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=xt(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function B_(t){const e=ua(t),n=null!==e?e.factory:Ja(t);if(null!==n)return n;if(t instanceof Fe)throw new fe(204,!1);if(t instanceof Function)return function g1(t){if(t.length>0)throw new fe(204,!1);const n=function qD(t){return t&&(t[g_]||t[dE])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new fe(204,!1)}function Kp(t,e,n){let r;if(Xa(t)){const i=xt(t);return Ja(i)||B_(i)}if(L_(t))r=()=>xt(t.useValue);else if(function kE(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...N_(t.deps||[]));else if(function PE(t){return!(!t||!t.useExisting)}(t))r=()=>Se(xt(t.useExisting));else{const i=xt(t&&(t.useClass||t.provide));if(!function _1(t){return!!t.deps}(t))return Ja(i)||B_(i);r=()=>new i(...N_(t.deps))}return r}function Ru(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Qp(t,e){for(const n of t)Array.isArray(n)?Qp(n,e):n&&I_(n)?Qp(n.\u0275providers,e):e(n)}function no(t,e){t instanceof sd&&t.assertNotDestroyed();const r=xu(t),i=Ji(void 0);try{return e()}finally{xu(r),Ji(i)}}function Jp(){return void 0!==Mp()||null!=function JD(){return Kc}()}const Pn=0,Ue=1,Ct=2,Dr=3,Po=4,si=5,es=6,od=7,jn=8,Yr=9,da=10,kt=11,Vh=12,FE=13,ad=14,lr=15,kl=16,xl=17,ko=18,ud=19,VE=20,ha=21,ld=22,ro=23,yt=25,cd=1,fa=7,Rl=9,jr=10;var em=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(em||{});function mi(t){return Array.isArray(t)&&"object"==typeof t[cd]}function Vi(t){return Array.isArray(t)&&!0===t[cd]}function Ol(t){return!!(4&t.flags)}function Ml(t){return t.componentOffset>-1}function $h(t){return!(1&~t.flags)}function xo(t){return!!t.template}function jh(t){return!!(512&t[Ct])}class hs{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function sm(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function fs(){return BE}function BE(t){return t.type.prototype.ngOnChanges&&(t.setInput=Bh),eu}function eu(){const t=K_(this),e=t?.current;if(e){const n=t.previous;if(n===So)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Bh(t,e,n,r,i){const s=this.declaredInputs[r],o=K_(t)||function P1(t,e){return t[W_]=e}(t,{previous:So,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new hs(l&&l.currentValue,n,u===So),sm(t,e,i,n)}fs.ngInherit=!0;const W_="__ngSimpleChanges__";function K_(t){return t[W_]||null}const pa=function(t,e,n){};function m(t){for(;Array.isArray(t);)t=t[Pn];return t}function f(t,e){return m(e[t])}function y(t,e){return m(e[t.index])}function C(t,e){return t.data[e]}function Q(t,e){const n=e[t];return mi(n)?n:n[Pn]}function Ge(t){return!(128&~t[Ct])}function Ke(t,e){return null==e?null:t[e]}function cr(t){t[xl]=0}function oo(t){1024&t[Ct]||(t[Ct]|=1024,Ge(t)&&Gh(t))}function dd(t){return!!(9216&t[Ct]||t[ro]?.dirty)}function zh(t){t[da].changeDetectionScheduler?.notify(7),64&t[Ct]&&(t[Ct]|=1024),dd(t)&&Gh(t)}function Gh(t){t[da].changeDetectionScheduler?.notify(0);let e=ma(t);for(;null!==e&&!(8192&e[Ct])&&(e[Ct]|=8192,Ge(e));)e=ma(e)}function qh(t,e){if(!(256&~t[Ct]))throw new fe(911,!1);null===t[ha]&&(t[ha]=[]),t[ha].push(e)}function ma(t){const e=t[Dr];return Vi(e)?e[Dr]:e}const Rt={lFrame:c3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let zE=!1;function e3(){return Rt.bindingsEnabled}function Ee(){return Rt.lFrame.lView}function ln(){return Rt.lFrame.tView}function Fl(t){return Rt.lFrame.contextLView=t,t[jn]}function Vl(t){return Rt.lFrame.contextLView=null,t}function qn(){let t=t3();for(;null!==t&&64===t.type;)t=t.parent;return t}function t3(){return Rt.lFrame.currentTNode}function tu(t,e){const n=Rt.lFrame;n.currentTNode=t,n.isParent=e}function R1(){return Rt.lFrame.isParent}function O1(){Rt.lFrame.isParent=!1}function i3(){return zE}function s3(t){zE=t}function Ms(){const t=Rt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function nu(){return Rt.lFrame.bindingIndex++}function $l(t){const e=Rt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Dte(t,e){const n=Rt.lFrame;n.bindingIndex=n.bindingRootIndex=t,M1(e)}function M1(t){Rt.lFrame.currentDirectiveIndex=t}function F1(t){const e=Rt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function V1(){return Rt.lFrame.currentQueryIndex}function qE(t){Rt.lFrame.currentQueryIndex=t}function Pte(t){const e=t[Ue];return 2===e.type?e.declTNode:1===e.type?t[si]:null}function u3(t,e,n){if(n&Jt.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Jt.Host||(i=Pte(s),null===i||(s=s[ad],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Rt.lFrame=l3();return r.currentTNode=e,r.lView=t,!0}function L1(t){const e=l3(),n=t[Ue];Rt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function l3(){const t=Rt.lFrame,e=null===t?null:t.child;return null===e?c3(t):e}function c3(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function d3(){const t=Rt.lFrame;return Rt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const h3=d3;function $1(){const t=d3();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ts(){return Rt.lFrame.selectedIndex}function Qh(t){Rt.lFrame.selectedIndex=t}function dr(){const t=Rt.lFrame;return C(t.tView,t.selectedIndex)}let p3=!0;function J_(){return p3}function Ou(t){p3=t}function WE(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=c&&(t.destroyHooks??=[]).push(n,c)}}function KE(t,e,n){m3(t,e,3,n)}function QE(t,e,n,r){(3&t[Ct])===n&&m3(t,e,n,r)}function j1(t,e){let n=t[Ct];(3&n)===e&&(n&=16383,n+=1,t[Ct]=n)}function m3(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[xl]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[xl]+=65536),(a<s||-1==s)&&(Vte(t,n,e,u),t[xl]=(4294901760&t[xl])+u+2),u++}function g3(t,e){pa(4,t,e);const n=W(null);try{e.call(t)}finally{W(n),pa(5,t,e)}}function Vte(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ct]>>14<t[xl]>>16&&(3&t[Ct])===e&&(t[Ct]+=16384,g3(a,s)):g3(a,s)}const am=-1;class Y_{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}const U1={};class Jh{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Qc(r);const i=this.injector.get(e,U1,r);return i!==U1||n===U1?i:this.parentInjector.get(e,n,r)}}function H1(t){return t!==am}function X_(t){return 32767&t}function Z_(t,e){let n=function Bte(t){return t>>16}(t),r=e;for(;n>0;)r=r[ad],n--;return r}let z1=!0;function JE(t){const e=z1;return z1=t,e}const _3=255,v3=5;let Hte=0;const Mu={};function YE(t,e){const n=b3(t,e);if(-1!==n)return n;const r=e[Ue];r.firstCreatePass&&(t.injectorIndex=e.length,G1(r.data,t),G1(e,null),G1(r.blueprint,null));const i=XE(t,e),s=t.injectorIndex;if(H1(i)){const o=X_(i),a=Z_(i,e),u=a[Ue].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function G1(t,e){t.push(0,0,0,0,0,0,0,0,e)}function b3(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function XE(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=S3(i),null===r)return am;if(n++,i=i[ad],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return am}function q1(t,e,n){!function zte(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Al)&&(r=n[Al]),null==r&&(r=n[Al]=Hte++);const i=r&_3;e.data[t+(i>>v3)]|=1<<i}(t,e,n)}function w3(t,e,n){if(n&Jt.Optional||void 0!==t)return t;Cl()}function E3(t,e,n,r){if(n&Jt.Optional&&void 0===r&&(r=null),!(n&(Jt.Self|Jt.Host))){const i=t[Yr],s=Ji(void 0);try{return i?i.get(e,r,n&Jt.Optional):Fp(e,r,n&Jt.Optional)}finally{Ji(s)}}return w3(r,0,n)}function T3(t,e,n,r=Jt.Default,i){if(null!==t){if(2048&e[Ct]&&!(r&Jt.Self)){const o=function Qte(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ct]&&!(512&o[Ct]);){const a=I3(s,o,n,r|Jt.Self,Mu);if(a!==Mu)return a;let u=s.parent;if(!u){const l=o[VE];if(l){const c=l.get(n,Mu,r);if(c!==Mu)return c}u=S3(o),o=o[ad]}s=u}return i}(t,e,n,r,Mu);if(o!==Mu)return o}const s=I3(t,e,n,r,Mu);if(s!==Mu)return s}return E3(e,n,r,i)}function I3(t,e,n,r,i){const s=function Wte(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Al)?t[Al]:void 0;return"number"==typeof e?e>=0?e&_3:Kte:e}(n);if("function"==typeof s){if(!u3(e,t,r))return r&Jt.Host?w3(i,0,r):E3(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Jt.Optional)return o;Cl()}finally{h3()}}else if("number"==typeof s){let o=null,a=b3(t,e),u=am,l=r&Jt.Host?e[lr][si]:null;for((-1===a||r&Jt.SkipSelf)&&(u=-1===a?XE(t,e):e[a+8],u!==am&&C3(r,!1)?(o=e[Ue],a=X_(u),e=Z_(u,e)):a=-1);-1!==a;){const c=e[Ue];if(A3(s,a,c.data)){const h=qte(a,e,n,o,r,l);if(h!==Mu)return h}u=e[a+8],u!==am&&C3(r,e[Ue].data[a+8]===l)&&A3(s,a,e)?(o=c,a=X_(u),e=Z_(u,e)):a=-1}}return i}function qte(t,e,n,r,i,s){const o=e[Ue],a=o.data[t+8],c=ZE(a,o,n,null==r?Ml(a)&&z1:r!=o&&!!(3&a.type),i&Jt.Host&&s===a);return null!==c?Yh(e,o,c,a):Mu}function ZE(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,g=i?a+c:t.directiveEnd;for(let _=r?a:a+c;_<g;_++){const v=o[_];if(_<u&&n===v||_>=u&&v.type===n)return _}if(i){const _=o[u];if(_&&xo(_)&&_.type===n)return u}return null}function Yh(t,e,n,r){let i=t[n];const s=e.data;if(function Lte(t){return t instanceof Y_}(i)){const o=i;o.resolving&&function KD(t,e){throw e&&e.join(" > "),new fe(-200,t)}(function An(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Lt(t)}(s[n]));const a=JE(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ji(o.injectImpl):null;u3(t,r,Jt.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Fte(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=BE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Ji(l),JE(a),o.resolving=!1,h3()}}return i}function A3(t,e,n){return!!(n[e+(t>>v3)]&1<<t)}function C3(t,e){return!(t&Jt.Self||t&Jt.Host&&e)}class Ei{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return T3(this._tNode,this._lView,e,Qc(r),n)}}function Kte(){return new Ei(qn(),Ee())}function Li(t){return Wa(()=>{const e=t.prototype.constructor,n=e[Qa]||W1(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Qa]||W1(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function W1(t){return Rp(t)?()=>{const e=W1(xt(t));return e&&e()}:Ja(t)}function S3(t){const e=t[Ue],n=e.type;return 2===n?e.declTNode:1===n?t[si]:null}function x3(t,e=null,n=null,r){const i=R3(t,e,n,r);return i.resolveInjectorInitializers(),i}function R3(t,e=null,n=null,r,i=new Set){const s=[n||_n,h1(t)];return r=r||("object"==typeof t?void 0:Lr(t)),new sd(s,e||Oh(),r||null,i)}class Br{static#e=this.THROW_IF_NOT_FOUND=qc;static#t=this.NULL=new nd;static create(e,n){if(Array.isArray(e))return x3({name:""},n,e,"");{const r=e.name??"";return x3({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Ye({token:Br,providedIn:"any",factory:()=>Se(Bp)});static#r=this.__NG_ELEMENT_ID__=-1}new Fe("").__NG_ELEMENT_ID__=t=>{const e=qn();if(null===e)throw new fe(204,!1);if(2&e.type)return e.value;if(t&Jt.Optional)return null;throw new fe(204,!1)};function Q1(t){return t.ngOriginalError}class ga{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Q1(e);for(;n&&Q1(n);)n=Q1(n);return n||null}}const M3=new Fe("",{providedIn:"root",factory:()=>Te(ga).handleError.bind(void 0)});let tv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=sne;static#t=this.__NG_ENV_ID__=n=>n}return t})();class ine extends tv{constructor(e){super(),this._lView=e}onDestroy(e){return qh(this._lView,e),()=>function Wh(t,e){if(null===t[ha])return;const n=t[ha].indexOf(e);-1!==n&&t[ha].splice(n,1)}(this._lView,e)}}function sne(){return new ine(Ee())}function one(){return cm(qn(),Ee())}function cm(t,e){return new Ro(y(t,e))}let Ro=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=one}return t})();function V3(t){return t instanceof Ro?t.nativeElement:t}let jl=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:()=>new t})}return t})();const Xr=class ane extends je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Jp()&&(this.destroyRef=Te(tv,{optional:!0})??void 0,this.pendingTasks=Te(jl,{optional:!0})??void 0)}emit(e){const n=W(null);try{super.next(e)}finally{W(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Kr&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(n),void 0!==r&&this.pendingTasks?.remove(r)})}}};function une(){return this._results[Symbol.iterator]()}class J1{static#e=Symbol.iterator;get changes(){return this._changes??=new Xr}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const n=J1.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=une)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function Mi(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function n1(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function tT(t){return!(128&~t.flags)}const Y1=new Map;let cne=0;const rT="__ngContext__";function ps(t,e){mi(e)?(t[rT]=e[ud],function hne(t){Y1.set(t[ud],t)}(e)):t[rT]=e}function W3(t){return Q3(t[Vh])}function K3(t){return Q3(t[Po])}function Q3(t){for(;null!==t&&!Vi(t);)t=t[Po];return t}let Z1;function fd(){if(void 0!==Z1)return Z1;if(typeof document<"u")return document;throw new fe(210,!1)}const hm=new Fe("",{providedIn:"root",factory:()=>Pne}),Pne="ng",r$=new Fe(""),ya=new Fe("",{providedIn:"platform",factory:()=>"unknown"}),i$=new Fe(""),s$=new Fe("",{providedIn:"root",factory:()=>fd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let o$=()=>null;function oN(t,e,n=!1){return o$(t,e,n)}const p$=new Fe("",{providedIn:"root",factory:()=>!1});let hT,fT;function mm(t){return function dN(){if(void 0===hT&&(hT=null,Gn.trustedTypes))try{hT=Gn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return hT}()?.createHTML(t)||t}function hN(){if(void 0===fT&&(fT=null,Gn.trustedTypes))try{fT=Gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return fT}function y$(t){return hN()?.createHTML(t)||t}function v$(t){return hN()?.createScriptURL(t)||t}class Xh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nE})`}}class zne extends Xh{getTypeName(){return"HTML"}}class Gne extends Xh{getTypeName(){return"Style"}}class qne extends Xh{getTypeName(){return"Script"}}class Wne extends Xh{getTypeName(){return"URL"}}class Kne extends Xh{getTypeName(){return"ResourceURL"}}function Oo(t){return t instanceof Xh?t.changingThisBreaksApplicationSecurity:t}function Fu(t,e){const n=function Qne(t){return t instanceof Xh&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nE})`)}return n===e}class tre{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(mm(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class nre{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=mm(e),n}}const ire=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pT(t){return(t=String(t)).match(ire)?t:"unsafe:"+t}function Bl(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function lv(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const w$=Bl("area,br,col,hr,img,wbr"),E$=Bl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),T$=Bl("rp,rt"),fN=lv(w$,lv(E$,Bl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lv(T$,Bl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lv(T$,E$)),pN=Bl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),I$=lv(pN,Bl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sre=Bl("script,style,template");class ore{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)i.push(n),n=lre(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=ure(n);if(s){n=s;break}n=i.pop()}return this.buf.join("")}startElement(e){const n=A$(e).toLowerCase();if(!fN.hasOwnProperty(n))return this.sanitizedSomething=!0,!sre.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!I$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;pN[a]&&(u=pT(u)),this.buf.push(" ",o,'="',S$(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=A$(e).toLowerCase();fN.hasOwnProperty(n)&&!w$.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(S$(e))}}function ure(t){const e=t.nextSibling;if(e&&t!==e.previousSibling)throw C$(e);return e}function lre(t){const e=t.firstChild;if(e&&function are(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,e))throw C$(e);return e}function A$(t){const e=t.nodeName;return"string"==typeof e?e:"FORM"}function C$(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const cre=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dre=/([^\#-~ |!])/g;function S$(t){return t.replace(/&/g,"&amp;").replace(cre,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(dre,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mT;function D$(t,e){let n=null;try{mT=mT||function b$(t){const e=new nre(t);return function rre(){try{return!!(new window.DOMParser).parseFromString(mm(""),"text/html")}catch{return!1}}()?new tre(e):e}(t);let r=e?String(e):"";n=mT.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=mT.getInertBodyElement(r)}while(r!==s);return mm((new ore).sanitizeChildren(mN(n)||n))}finally{if(n){const r=mN(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function mN(t){return"content"in t&&function hre(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Mo=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Mo||{});function gT(t){const e=cv();return e?y$(e.sanitize(Mo.HTML,t)||""):Fu(t,"HTML")?y$(Oo(t)):D$(fd(),Lt(t))}function N$(t){const e=cv();return e?e.sanitize(Mo.URL,t)||"":Fu(t,"URL")?Oo(t):pT(Lt(t))}function P$(t){const e=cv();if(e)return v$(e.sanitize(Mo.RESOURCE_URL,t)||"");if(Fu(t,"ResourceURL"))return v$(Oo(t));throw new fe(904,!1)}function cv(){const t=Ee();return t&&t[da].sanitizer}const _re=/^>|^->|<!--|-->|--!>|<!-$/g,vre=/(<|>)/g,bre="\u200b$1\u200b";function Fo(t){return t instanceof Function?t():t}var pd=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(pd||{});let _N;function vN(t,e){return _N(t,e)}function ym(t,e,n,r,i){if(null!=r){let s,o=!1;Vi(r)?s=r:mi(r)&&(o=!0,r=r[Pn]);const a=m(r);0===t&&null!==n?null==i?z$(e,n,a):Zh(e,n,a,i||null,!0):1===t&&null!==n?Zh(e,n,a,i||null,!0):2===t?function hv(t,e,n){const r=wT(t,e);r&&function Lre(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function Bre(t,e,n,r,i){const s=n[fa];s!==m(n)&&ym(e,t,r,s,i);for(let a=jr;a<n.length;a++){const u=n[a];TT(u[Ue],u,t,e,r,s)}}(e,t,s,n,i)}}function wN(t,e){return t.createComment(function x$(t){return t.replace(_re,e=>e.replace(vre,bre))}(e))}function vT(t,e,n){return t.createElement(e,n)}function B$(t,e){e[da].changeDetectionScheduler?.notify(8),TT(t,e,e[kt],2,null,null)}function U$(t,e){const n=t[Rl],r=e[Dr];(mi(r)||e[lr]!==r[Dr][lr])&&(t[Ct]|=em.HasTransplantedViews),null===n?t[Rl]=[e]:n.push(e)}function EN(t,e){const n=t[Rl],r=n.indexOf(e);n.splice(r,1)}function dv(t,e){if(t.length<=jr)return;const n=jr+e,r=t[n];if(r){const i=r[kl];null!==i&&i!==t&&EN(i,r),e>0&&(t[n-1][Po]=r[Po]);const s=Sl(t,jr+e);!function xre(t,e){B$(t,e),e[Pn]=null,e[si]=null}(r[Ue],r);const o=s[ko];null!==o&&o.detachView(s[Ue]),r[Dr]=null,r[Po]=null,r[Ct]&=-129}return r}function bT(t,e){if(!(256&e[Ct])){const n=e[kt];n.destroyNode&&TT(t,e,n,3,null,null),function Ore(t){let e=t[Vh];if(!e)return TN(t[Ue],t);for(;e;){let n=null;if(mi(e))n=e[Vh];else{const r=e[jr];r&&(n=r)}if(!n){for(;e&&!e[Po]&&e!==t;)mi(e)&&TN(e[Ue],e),e=e[Dr];null===e&&(e=t),mi(e)&&TN(e[Ue],e),n=e&&e[Po]}e=n}}(e)}}function TN(t,e){if(256&e[Ct])return;const n=W(null);try{e[Ct]&=-129,e[Ct]|=256,e[ro]&&Ze(e[ro]),function Vre(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Y_)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];pa(4,a,u);try{u.call(a)}finally{pa(5,a,u)}}else{pa(4,i,s);try{s.call(i)}finally{pa(5,i,s)}}}}}(t,e),function Fre(t,e){const n=t.cleanup,r=e[od];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[od]=null);const i=e[ha];if(null!==i){e[ha]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[Ue].type&&e[kt].destroy();const r=e[kl];if(null!==r&&Vi(e[Dr])){r!==e[Dr]&&EN(r,e);const i=e[ko];null!==i&&i.detachView(t)}!function fne(t){Y1.delete(t[ud])}(e)}finally{W(n)}}function IN(t,e,n){return function H$(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[Pn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Os.None||s===Os.Emulated)return null}return y(r,n)}}(t,e.parent,n)}function Zh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function z$(t,e,n){t.appendChild(e,n)}function G$(t,e,n,r,i){null!==r?Zh(t,e,n,r,i):z$(t,e,n)}function wT(t,e){return t.parentNode(e)}let AN,K$=function W$(t,e,n){return 40&t.type?y(t,n):null};function ET(t,e,n,r){const i=IN(t,r,e),s=e[kt],a=function q$(t,e,n){return K$(t,e,n)}(r.parent||e[si],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)G$(s,i,n[u],a,!1);else G$(s,i,n,a,!1);void 0!==AN&&AN(s,r,e,n,i)}function _m(t,e){if(null!==e){const n=e.type;if(3&n)return y(e,t);if(4&n)return CN(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return _m(t,r);{const i=t[e.index];return Vi(i)?CN(-1,i):m(i)}}if(32&n)return vN(e,t)()||m(t[e.index]);{const r=J$(t,e);return null!==r?Array.isArray(r)?r[0]:_m(ma(t[lr]),r):_m(t,e.next)}}return null}function J$(t,e){return null!==e?t[lr][si].projection[e.projection]:null}function CN(t,e){const n=jr+t+1;if(n<e.length){const r=e[n],i=r[Ue].firstChild;if(null!==i)return _m(r,i)}return e[fa]}function SN(t,e,n,r,i,s,o){for(;null!=n;){if(128===n.type){n=n.next;continue}const a=r[n.index],u=n.type;if(o&&0===e&&(a&&ps(m(a),r),n.flags|=2),32&~n.flags)if(8&u)SN(t,e,n.child,r,i,s,!1),ym(e,t,i,a,s);else if(32&u){const l=vN(n,r);let c;for(;c=l();)ym(e,t,i,c,s);ym(e,t,i,a,s)}else 16&u?X$(t,e,r,n,i,s):ym(e,t,i,a,s);n=o?n.projectionNext:n.next}}function TT(t,e,n,r,i,s){SN(n,r,t.firstChild,e,i,s,!1)}function X$(t,e,n,r,i,s){const o=n[lr],u=o[si].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)ym(e,t,i,u[l],s);else{let l=u;const c=o[Dr];tT(r)&&(l.flags|=128),SN(t,e,l,c,i,s,!0)}}function Z$(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ej(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Dl(t,e,r),null!==i&&Z$(t,e,i),null!==s&&function Hre(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const Gt={};function fn(t=1){tj(ln(),Ee(),ts()+t,!1)}function tj(t,e,n,r){if(!r)if(3&~e[Ct]){const s=t.preOrderHooks;null!==s&&QE(e,s,0,n)}else{const s=t.preOrderCheckHooks;null!==s&&KE(e,s,n)}Qh(n)}function Ve(t,e=Jt.Default){const n=Ee();return null===n?Se(t,e):T3(qn(),n,xt(t),e)}function rj(t,e,n,r,i,s){const o=W(null);try{let a=null;i&la.SignalBased&&(a=e[r][Pe]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&la.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),null!==t.setInput?t.setInput(e,a,s,n,r):sm(e,a,r,s)}finally{W(o)}}function IT(t,e,n,r,i,s,o,a,u,l,c){const h=e.blueprint.slice();return h[Pn]=i,h[Ct]=204|r,(null!==l||t&&2048&t[Ct])&&(h[Ct]|=2048),cr(h),h[Dr]=h[ad]=t,h[jn]=n,h[da]=o||t&&t[da],h[kt]=a||t&&t[kt],h[Yr]=u||t&&t[Yr]||null,h[si]=s,h[ud]=function dne(){return cne++}(),h[es]=c,h[VE]=l,h[lr]=2==e.type?t[lr]:h,h}function ef(t,e,n,r,i){let s=t.data[e];if(null===s)s=function DN(t,e,n,r,i){const s=t3(),o=R1(),u=t.data[e]=function Yre(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Kh(){return null!==Rt.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function Ste(){return Rt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Q_(){const t=Rt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return tu(s,!0),s}function fv(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ij(t,e,n,r,i){const s=ts(),o=2&r;try{Qh(-1),o&&e.length>yt&&tj(t,e,yt,!1),pa(o?2:0,i),n(r,i)}finally{Qh(s),pa(o?3:1,i)}}function NN(t,e,n){if(Ol(e)){const r=W(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{W(r)}}}function PN(t,e,n){e3()&&(function iie(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Ml(n)&&function die(t,e,n){const r=y(e,t),i=sj(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=AT(t,IT(t,i,null,o,r,e,null,t[da].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||YE(n,e),ps(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=Yh(e,t,a,n);ps(l,e),null!==o&&hie(0,a-i,l,u,0,o),xo(u)&&(Q(n.index,e)[jn]=Yh(e,t,a,n))}}(t,e,n,y(n,e)),!(64&~n.flags)&&cj(t,e,n))}function kN(t,e,n=y){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function sj(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=xN(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function xN(t,e,n,r,i,s,o,a,u,l,c){const h=yt+r,g=h+i,_=function Gre(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Gt);return n}(h,g),v="function"==typeof l?l():l;return _[Ue]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1,ssrId:c}}let oj=()=>null;function aj(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,u=la.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(null!==i){if(!i.hasOwnProperty(s))continue;l=i[s]}0===t?uj(r,n,l,a,u):uj(r,n,l,a)}return r}function uj(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],void 0!==i&&s.push(i)}function lo(t,e,n,r,i,s,o,a){const u=y(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(VN(t,n,c,r,i),Ml(e)&&function eie(t,e){const n=Q(e,t);16&n[Ct]||(n[Ct]|=64)}(n,e.index)):3&e.type&&(r=function Zre(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function RN(t,e,n,r){if(e3()){const i=null===r?null:{"":-1},s=function oie(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Gp(e,o.selectors,!1))if(r||(r=[]),xo(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),ON(t,e,a.length)}else r.unshift(o),ON(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&lj(t,e,n,o,i,a),i&&function aie(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new fe(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Nl(n.mergedAttrs,n.attrs)}function lj(t,e,n,r,i,s){for(let l=0;l<r.length;l++)q1(YE(n,e),t,r[l].type);!function lie(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const c=r[l];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,u=fv(t,e,r.length,null);for(let l=0;l<r.length;l++){const c=r[l];n.mergedAttrs=Nl(n.mergedAttrs,c.hostAttrs),cie(t,n,e,u,c),uie(u,c,i),null!==c.contentQueries&&(n.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=64);const h=c.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function Xre(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,l=null;for(let c=e.directiveStart;c<i;c++){const h=s[c],g=n?n.get(h):null,v=g?g.outputs:null;u=aj(0,h.inputs,c,u,g?g.inputs:null),l=aj(1,h.outputs,c,l,v);const w=null===u||null===o||Rh(e)?null:fie(u,c,o);a.push(w)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,s)}function cj(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Nte(){return Rt.lFrame.currentDirectiveIndex}();try{Qh(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];M1(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&sie(u,l)}}finally{Qh(-1),M1(o)}}function sie(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ON(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function uie(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;xo(e)&&(n[""]=t)}}function cie(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Ja(i.type)),o=new Y_(s,xo(i),Ve);t.blueprint[r]=o,n[r]=o,function nie(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function rie(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,fv(t,n,i.hostVars,Gt),i)}function Vu(t,e,n,r,i,s){const o=y(t,e);!function MN(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Lt(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[kt],o,s,t.value,n,r,i)}function hie(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)rj(r,n,o[a++],o[a++],o[a++],o[a++])}function fie(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function dj(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function hj(t,e){const n=t.contentQueries;if(null!==n){const r=W(null);try{for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const a=t.data[o];qE(n[i]),a.contentQueries(2,e[o],o)}}}finally{W(r)}}}function AT(t,e){return t[Vh]?t[FE][Po]=e:t[Vh]=e,t[FE]=e,e}function FN(t,e,n){qE(0);const r=W(null);try{e(t,n)}finally{W(r)}}function fj(t){return t[od]??=[]}function pj(t){return t.cleanup??=[]}function mj(t,e,n){return(null===t||xo(t))&&(n=function d(t){for(;Array.isArray(t);){if("object"==typeof t[cd])return t;t=t[Pn]}return null}(n[e.index])),n[kt]}function CT(t,e){const n=t[Yr],r=n?n.get(ga,null):null;r&&r.handleError(e)}function VN(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=n[s++];rj(t.data[o],e[o],r,a,u,i)}}function pie(t,e){const n=Q(e,t),r=n[Ue];!function mie(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Pn];null!==i&&null===n[es]&&(n[es]=oN(i,n[Yr])),LN(r,n,n[jn])}function LN(t,e,n){L1(e);try{const r=t.viewQuery;null!==r&&FN(1,r,n);const i=t.template;null!==i&&ij(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ko]?.finishViewCreation(t),t.staticContentQueries&&hj(t,e),t.staticViewQueries&&FN(2,t.viewQuery,n);const s=t.components;null!==s&&function gie(t,e){for(let n=0;n<e.length;n++)pie(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ct]&=-5,$1()}}function tf(t,e){return!e||null===e.firstChild||tT(t)}function pv(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const s=e[n.index];null!==s&&r.push(m(s)),Vi(s)&&yj(s,r);const o=n.type;if(8&o)pv(t,e,n.child,r);else if(32&o){const a=vN(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=J$(e,n);if(Array.isArray(a))r.push(...a);else{const u=ma(e[lr]);pv(u[Ue],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function yj(t,e){for(let n=jr;n<t.length;n++){const r=t[n],i=r[Ue].firstChild;null!==i&&pv(r[Ue],r,i,e)}t[fa]!==t[Pn]&&e.push(t[fa])}let _j=[];const bie={...pn,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Gh(t.lView)},consumerOnSignalRead(){this.lView[ro]=this}},Eie={...pn,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ma(t.lView);for(;e&&!vj(e[Ue]);)e=ma(e);e&&oo(e)},consumerOnSignalRead(){this.lView[ro]=this}};function vj(t){return 2!==t.type}const Tie=100;function ST(t,e=!0,n=0){const r=t[da],i=r.rendererFactory;i.begin?.();try{!function Iie(t,e){const n=i3();try{s3(!0),jN(t,e);let r=0;for(;dd(t);){if(r===Tie)throw new fe(103,!1);r++,jN(t,1)}}finally{s3(n)}}(t,n)}catch(o){throw e&&CT(t,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function Aie(t,e,n,r){const i=e[Ct];if(!(256&~i))return;e[da].inlineEffectRunner?.flush(),L1(e);let a=!0,u=null,l=null;vj(t)?(l=function yie(t){return t[ro]??function _ie(t){const e=_j.pop()??Object.create(bie);return e.lView=t,e}(t)}(e),u=we(l)):null===function bt(){return be}()?(a=!1,l=function wie(t){const e=t[ro]??Object.create(Eie);return e.lView=t,e}(e),u=we(l)):e[ro]&&(Ze(e[ro]),e[ro]=null);try{cr(e),function o3(t){return Rt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&ij(t,e,n,2,r);const c=!(3&~i);if(c){const _=t.preOrderCheckHooks;null!==_&&KE(e,_,null)}else{const _=t.preOrderHooks;null!==_&&QE(e,_,0,null),j1(e,0)}if(function Cie(t){for(let e=W3(t);null!==e;e=K3(e)){if(!(e[Ct]&em.HasTransplantedViews))continue;const n=e[Rl];for(let r=0;r<n.length;r++)oo(n[r])}}(e),wj(e,0),null!==t.contentQueries&&hj(t,e),c){const _=t.contentCheckHooks;null!==_&&KE(e,_)}else{const _=t.contentHooks;null!==_&&QE(e,_,1),j1(e,1)}!function zre(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Qh(~i);else{const s=i,o=n[++r],a=n[++r];Dte(o,s),a(2,e[s])}}}finally{Qh(-1)}}(t,e);const h=t.components;null!==h&&Tj(e,h,0);const g=t.viewQuery;if(null!==g&&FN(2,g,r),c){const _=t.viewCheckHooks;null!==_&&KE(e,_)}else{const _=t.viewHooks;null!==_&&QE(e,_,2),j1(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[ld]){for(const _ of e[ld])_();e[ld]=null}e[Ct]&=-73}catch(c){throw Gh(e),c}finally{null!==l&&(Be(l,u),a&&function vie(t){t.lView[ro]!==t&&(t.lView=null,_j.push(t))}(l)),$1()}}function wj(t,e){for(let n=W3(t);null!==n;n=K3(n))for(let r=jr;r<n.length;r++)Ej(n[r],e)}function Sie(t,e,n){Ej(Q(e,t),n)}function Ej(t,e){Ge(t)&&jN(t,e)}function jN(t,e){const r=t[Ue],i=t[Ct],s=t[ro];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!Ce(s)),o||=!1,s&&(s.dirty=!1),t[Ct]&=-9217,o)Aie(r,t,r.template,t[jn]);else if(8192&i){wj(t,1);const a=r.components;null!==a&&Tj(t,a,1)}}function Tj(t,e,n){for(let r=0;r<e.length;r++)Sie(t,e[r],n)}function mv(t,e){const n=i3()?64:1088;for(t[da].changeDetectionScheduler?.notify(e);t;){t[Ct]|=n;const r=ma(t);if(jh(t)&&!r)return t;t=r}return null}class gv{get rootNodes(){const e=this._lView,n=e[Ue];return pv(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(e){this._lView[jn]=e}get destroyed(){return!(256&~this._lView[Ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Dr];if(Vi(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(dv(e,r),Sl(n,r))}this._attachedToViewContainer=!1}bT(this._lView[Ue],this._lView)}onDestroy(e){qh(this._lView,e)}markForCheck(){mv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ct]&=-129}reattach(){zh(this._lView),this._lView[Ct]|=128}detectChanges(){this._lView[Ct]|=1024,ST(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=jh(this._lView),n=this._lView[kl];null!==n&&!e&&EN(n,this._lView),B$(this._lView[Ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=e;const n=jh(this._lView),r=this._lView[kl];null!==r&&!n&&U$(r,this._lView),zh(this._lView)}}let Hl=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Pie}return t})();const Die=Hl,Nie=class extends Die{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function vm(t,e,n,r){const i=W(null);try{const s=e.tView,u=IT(t,s,n,4096&t[Ct]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[kl]=t[e.index];const c=t[ko];return null!==c&&(u[ko]=c.createEmbeddedView(s)),LN(s,u,n),u}finally{W(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new gv(i)}};function Pie(){return DT(qn(),Ee())}function DT(t,e){return 4&t.type?new Nie(e,t,cm(t,e)):null}class Em{}const Iv=new Fe("",{providedIn:"root",factory:()=>!1}),Gj=new Fe("");class Ese{}class qj{}class Ise{resolveComponentFactory(e){throw function Tse(t){const e=Error(`No component factory found for ${Lr(t)}.`);return e.ngComponent=t,e}(e)}}class Av{static#e=this.NULL=new Ise}class OT{}let zl=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Ase(){const t=Ee(),n=Q(qn().index,t);return(mi(n)?n:t)[kt]}()}return t})(),Cse=(()=>{class t{static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:()=>null})}return t})();const Kj=new Set;function Fs(t){Kj.has(t)||(Kj.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Qj(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),"function"==typeof Gn.requestAnimationFrame&&Gn.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function Jj(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function Yj(...t){}class en{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xr(!1),this.onMicrotaskEmpty=new Xr(!1),this.onStable=new Xr(!1),this.onError=new Xr(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,function Nse(t){const e=()=>{!function Dse(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{Qj(()=>{t.callbackScheduled=!1,XN(t),t.isCheckStableRunning=!0,YN(t),t.isCheckStableRunning=!1})}),XN(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function Pse(t){return eB(t,"__ignore_ng_zone__")}(a))return n.invokeTask(i,s,o,a);try{return Xj(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Zj(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Xj(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function kse(t){return eB(t,"__scheduler_tick__")}(a)&&e(),Zj(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,XN(t),YN(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!en.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(en.isInAngularZone())throw new fe(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Sse,Yj,Yj);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Sse={};function YN(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function XN(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function Xj(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Zj(t){t._nesting--,YN(t)}class ZN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xr,this.onMicrotaskEmpty=new Xr,this.onStable=new Xr,this.onError=new Xr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function eB(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}var Vs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Vs||{});const tB={destroy(){}};function nB(t,e){!e&&function Yp(t){if(!Jp())throw new fe(-203,!1)}();const n=e?.injector??Te(Br);return function uo(t){return"browser"===(t??Te(Br)).get(ya)}(n)?(Fs("NgAfterNextRender"),function rB(t,e,n,r){const i=function Ose(t,e){if(t instanceof Function)switch(e){case Vs.EarlyRead:return{earlyRead:t};case Vs.Write:return{write:t};case Vs.MixedReadWrite:return{mixedReadWrite:t};case Vs.Read:return{read:t}}return t}(t,r),s=e.get(MT),o=s.handler??=new Fse,a=[],u=[],l=()=>{for(const _ of u)o.unregister(_);c()},c=e.get(tv).onDestroy(l);let h=0;const g=(_,v)=>{if(!v)return;const w=n?(...S)=>(h--,h<1&&l(),v(...S)):v,I=no(e,()=>new Mse(_,a,w));o.register(I),u.push(I),h++};return g(Vs.EarlyRead,i.earlyRead),g(Vs.Write,i.write),g(Vs.MixedReadWrite,i.mixedReadWrite),g(Vs.Read,i.read),{destroy:l}}(t,n,!0,e?.phase??Vs.MixedReadWrite)):tB}class Mse{constructor(e,n,r){this.phase=e,this.pipelinedArgs=n,this.callbackFn=r,this.zone=Te(en),this.errorHandler=Te(ga,{optional:!0}),Te(Em,{optional:!0})?.notify(6)}invoke(){try{const e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}}class Fse{constructor(){this.executingCallbacks=!1,this.buckets={[Vs.EarlyRead]:new Set,[Vs.Write]:new Set,[Vs.MixedReadWrite]:new Set,[Vs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let MT=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:()=>new t})}return t})();function VT(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=p_(i,a):2==s&&(r=p_(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class oB extends Av{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Xt(e);return new Dv(n,this.ngModule)}}function aB(t,e){const n=[];for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;n.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:la.None)&la.SignalBased)}:{propName:o,templateName:r})}return n}class Dv extends qj{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=aB(e.inputs,!0);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return aB(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function l1(t){return t.map(O_).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const s=W(null);try{let o=(i=i||this.ngModule)instanceof Zi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Jh(e,o):e,u=a.get(OT,null);if(null===u)throw new fe(407,!1);const l=a.get(Cse,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(MT,null),changeDetectionScheduler:a.get(Em,null)},_=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?function qre(t,e,n,r){const s=r.get(p$,!1)||n===Os.ShadowDom,o=t.selectRootElement(e,s);return function Wre(t){oj(t)}(o),o}(_,r,this.componentDef.encapsulation,a):vT(_,v,function $se(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v));let I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let S=null;null!==w&&(S=oN(w,a,!0));const x=xN(0,null,null,1,0,null,null,null,null,null,null),O=IT(null,x,null,I,null,null,g,_,a,null,S);let U,he;L1(O);try{const de=this.componentDef;let R,k=null;de.findHostDirectiveDefs?(R=[],k=new Map,de.findHostDirectiveDefs(de,R,k),R.push(de)):R=[de];const F=function Bse(t,e){const n=t[Ue],r=yt;return t[r]=e,ef(n,r,2,"#host",null)}(O,w),z=function Use(t,e,n,r,i,s,o){const a=i[Ue];!function Hse(t,e,n,r){for(const i of t)e.mergedAttrs=Nl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(VT(e,e.mergedAttrs,!0),null!==n&&ej(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=oN(e,i[Yr]));const l=s.rendererFactory.createRenderer(e,n);let c=16;n.signals?c=4096:n.onPush&&(c=64);const h=IT(i,sj(n),null,c,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&ON(a,t,r.length-1),AT(i,h),i[t.index]=h}(F,w,de,R,O,g,_);he=C(x,yt),w&&function Gse(t,e,n,r){if(r)Dl(t,n,["ng-version","18.1.2"]);else{const{attrs:i,classes:s}=function M_(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!No(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Dl(t,n,i),s&&s.length>0&&Z$(t,n,s.join(" "))}}(_,de,w,r),void 0!==n&&function qse(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(he,this.ngContentSelectors,n),U=function zse(t,e,n,r,i,s){const o=qn(),a=i[Ue],u=y(o,i);lj(a,i,o,n,null,r);for(let c=0;c<n.length;c++)ps(Yh(i,a,o.directiveStart+c,o),i);cj(a,i,o),u&&ps(u,i);const l=Yh(i,a,o.directiveStart+o.componentOffset,o);if(t[jn]=i[jn]=l,null!==s)for(const c of s)c(l,e);return NN(a,o,i),l}(z,de,R,k,O,[Wse]),LN(x,O,null)}finally{$1()}return new jse(this.componentType,U,cm(he,O),O,he)}finally{W(s)}}}class jse extends Ese{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new gv(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;VN(s[Ue],s,i,e,n),this.previousInputValues.set(e,n),mv(Q(this._tNode.index,s),1)}}get injector(){return new Ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Wse(){const t=qn();WE(Ee()[Ue],t)}let ru=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Kse}return t})();function Kse(){return cB(qn(),Ee())}const Qse=ru,uB=class extends Qse{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return cm(this._hostTNode,this._hostLView)}get injector(){return new Ei(this._hostTNode,this._hostLView)}get parentInjector(){const e=XE(this._hostTNode,this._hostLView);if(H1(e)){const n=Z_(e,this._hostLView),r=X_(e);return new Ei(n[Ue].data[r+8],n)}return new Ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=lB(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-jr}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,tf(this._hostTNode,null)),a}createComponent(e,n,r,i,s){const o=e&&!function Fh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const v=n||{};a=v.index,r=v.injector,i=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef}const u=o?e:new Dv(Xt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const w=(o?l:this.parentInjector).get(Zi,null);w&&(s=w)}Xt(u.componentType??{});const _=u.create(l,i,null,s);return this.insertImpl(_.hostView,a,tf(this._hostTNode,null)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function ot(t){return Vi(t[Dr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[Dr],l=new uB(u,u[si],u[Dr]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;return function bm(t,e,n,r=!0){const i=e[Ue];if(function Mre(t,e,n,r){const i=jr+r,s=n.length;r>0&&(n[i-1][Po]=e),r<s-jr?(e[Po]=n[i],$p(n,jr+r,e)):(n.push(e),e[Po]=null),e[Dr]=n;const o=e[kl];null!==o&&n!==o&&U$(o,e);const a=e[ko];null!==a&&a.insertView(t),zh(e),e[Ct]|=128}(i,e,t,n),r){const o=CN(n,t),a=e[kt],u=wT(a,t[fa]);null!==u&&function Rre(t,e,n,r,i,s){r[Pn]=i,r[si]=e,TT(t,r,n,1,i,s)}(i,t[si],a,e,u,o)}const s=e[es];null!==s&&null!==s.firstChild&&(s.firstChild=null)}(o,i,s,r),e.attachToViewContainerRef(),$p(rP(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=lB(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=dv(this._lContainer,n);r&&(Sl(rP(this._lContainer),n),bT(r[Ue],r))}detach(e){const n=this._adjustIndex(e,-1),r=dv(this._lContainer,n);return r&&null!=Sl(rP(this._lContainer),n)?new gv(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function lB(t){return t[8]}function rP(t){return t[8]||(t[8]=[])}function cB(t,e){let n;const r=e[t.index];return Vi(r)?n=r:(n=dj(r,e,null,t),e[t.index]=n,AT(e,n)),dB(n,e,t,r),new uB(n,t,e)}let dB=function fB(t,e,n,r){if(t[fa])return;let i;i=8&n.type?m(r):function Jse(t,e){const n=t[kt],r=n.createComment(""),i=y(e,t);return Zh(n,wT(n,i),r,function $re(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[fa]=i},iP=()=>!1;class sP{constructor(e){this.queryList=e,this.matches=null}clone(){return new sP(this.queryList)}setDirty(){this.queryList.setDirty()}}class oP{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const o=n.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new oP(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==dP(e,n).matches&&this.queries[n].setDirty()}}class pB{constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function ioe(t){return t.split(",").map(e=>e.trim())}(e):e}}class aP{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new aP(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class uP{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new uP(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,n,eoe(n,s)),this.matchTNodeWithReadOption(e,n,ZE(n,e,s,!1,!1))}else r===Hl?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ZE(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ro||i===ru||i===Hl&&4&n.type)this.addMatch(n.index,-2);else{const s=ZE(n,e,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function eoe(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function noe(t,e,n,r){return-1===n?function toe(t,e){return 11&t.type?cm(t,e):4&t.type?DT(t,e):null}(e,t):-2===n?function roe(t,e,n){return n===Ro?cm(e,t):n===Hl?DT(e,t):n===ru?cB(e,t):void 0}(t,e,r):Yh(t,t[Ue],n,e)}function mB(t,e,n,r){const i=e[ko].queries[r];if(null===i.matches){const s=t.data,o=n.matches,a=[];for(let u=0;null!==o&&u<o.length;u+=2){const l=o[u];a.push(l<0?null:noe(e,s[l],o[u+1],n.metadata.read))}i.matches=a}return i.matches}function lP(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=mB(t,e,i,n);for(let a=0;a<s.length;a+=2){const u=s[a];if(u>0)r.push(o[a/2]);else{const l=s[a+1],c=e[-u];for(let h=jr;h<c.length;h++){const g=c[h];g[kl]===g[Dr]&&lP(g[Ue],g,l,r)}if(null!==c[Rl]){const h=c[Rl];for(let g=0;g<h.length;g++){const _=h[g];lP(_[Ue],_,l,r)}}}}}return r}function gB(t,e,n){const r=new J1(!(4&~n));return function Jre(t,e,n,r){const i=fj(e);i.push(n),t.firstCreatePass&&pj(t).push(r,i.length-1)}(t,e,r,r.destroy),(e[ko]??=new oP).queries.push(new sP(r))-1}function vB(t,e,n){null===t.queries&&(t.queries=new aP),t.queries.track(new uP(e,n))}function dP(t,e){return t.queries.getByIndex(e)}function bB(t,e){const n=t[Ue],r=dP(n,e);return r.crossesNgTemplate?lP(n,t,e,[]):mB(n,t,r,e)}function Lu(t,e){Fs("NgSignals");const n=function yh(t){const e=Object.create(sa);e.value=t;const n=()=>(cn(e),e.value);return n[Pe]=e,n}(t),r=n[Pe];return e?.equal&&(r.equal=e.equal),n.set=i=>cs(r,i),n.update=i=>function Eo(t,e){ce()||ra(),cs(t,e(t.value))}(r,i),n.asReadonly=EB.bind(n),n}function EB(){const t=this[Pe];if(void 0===t.readonlyFn){const e=()=>this();e[Pe]=t,t.readonlyFn=e}return t.readonlyFn}function TB(t){return function wB(t){return"function"==typeof t&&void 0!==t[Pe]}(t)&&"function"==typeof t.set}function Wn(t){let e=function OB(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(xo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new fe(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=$T(t.inputs),o.inputTransforms=$T(t.inputTransforms),o.declaredInputs=$T(t.declaredInputs),o.outputs=$T(t.outputs);const a=i.hostBindings;a&&voe(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&yoe(t,u),l&&_oe(t,l),moe(t,i),UD(t.outputs,i.outputs),xo(i)&&i.data.animation){const c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Wn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function goe(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Nl(i.hostAttrs,n=Nl(n,i.hostAttrs))}}(r)}function moe(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];if(void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function $T(t){return t===So?{}:t===_n?[]:t}function yoe(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function _oe(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function voe(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function LB(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}class sf{}class $B{}class fP extends sf{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new oB(this);const i=Fi(e);this._bootstrapComponents=Fo(i.bootstrap),this._r3Injector=R3(e,n,[{provide:sf,useValue:this},{provide:Av,useValue:this.componentFactoryResolver},...r],Lr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class pP extends $B{constructor(e){super(),this.moduleType=e}create(e){return new fP(this.moduleType,e,[])}}class jB extends sf{constructor(e){super(),this.componentFactoryResolver=new oB(this),this.instance=null;const n=new sd([...e.providers,{provide:sf,useValue:this},{provide:Av,useValue:this.componentFactoryResolver}],e.parent||Oh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function jT(t,e,n=null){return new jB({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function BT(t){return!!function mP(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function $u(t,e,n){return t[e]=n}function oi(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function af(t,e,n,r){const i=oi(t,e,n);return oi(t,e+1,r)||i}function kv(t,e,n,r,i,s,o,a,u,l){const c=n+yt,h=e.firstCreatePass?function koe(t,e,n,r,i,s,o,a,u){const l=e.consts,c=ef(e,t,4,o||null,a||null);RN(e,n,c,Ke(l,u)),WE(e,c);const h=c.tView=xN(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,e,t,r,i,s,o,a,u):e.data[c];tu(h,!1);const g=BB(e,t,h,n);J_()&&ET(e,t,g,h),ps(g,t);const _=dj(g,t,g,h);return t[c]=_,AT(t,_),function hB(t,e,n){return iP(t,e,n)}(_,h,t),$h(h)&&PN(e,t,h),null!=u&&kN(t,h,l),h}function iu(t,e,n,r,i,s,o,a){const u=Ee(),l=ln();return kv(u,l,t,e,n,r,i,Ke(l.consts,s),o,a),iu}let BB=function UB(t,e,n,r){return Ou(!0),e[kt].createComment("")};function ns(t,e,n,r){const i=Ee();return oi(i,nu(),e)&&(ln(),Vu(dr(),i,t,e,n,r)),ns}function KT(t,e){return t<<17|e<<2}function _d(t){return t>>17&32767}function CP(t){return 2|t}function lf(t){return(131068&t)>>2}function SP(t,e){return-131069&t|e<<2}function DP(t){return 1|t}function vU(t,e,n,r){const i=t[n+1],s=null===e;let o=r?_d(i):lf(i),a=!1;for(;0!==o&&(!1===a||s);){const l=t[o+1];gae(t[o],e)&&(a=!0,t[o+1]=r?DP(l):CP(l)),o=r?_d(l):lf(l)}a&&(t[n+1]=r?CP(i):DP(i))}function gae(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&td(t,e)>=0}const Ti={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bU(t){return t.substring(Ti.key,Ti.keyEnd)}function wU(t,e){const n=Ti.textEnd;return n===e?-1:(e=Ti.keyEnd=function bae(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ti.key=e,n),jm(t,e,n))}function jm(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Bn(t,e,n){const r=Ee();return oi(r,nu(),e)&&lo(ln(),dr(),r,t,e,r[kt],n,!1),Bn}function NP(t,e,n,r,i){const o=i?"class":"style";VN(t,n,e.inputs[o],o,r)}function Bm(t,e,n){return su(t,e,n,!1),Bm}function QT(t,e){return su(t,e,null,!0),QT}function Gl(t){!function ou(t,e,n,r){const i=ln(),s=$l(2);i.firstUpdatePass&&SU(i,null,s,r);const o=Ee();if(n!==Gt&&oi(o,s,n)){const a=i.data[ts()];if(kU(a,r)&&!CU(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=p_(u,n||"")),NP(i,a,o,n,r)}else!function Pae(t,e,n,r,i,s,o,a){i===Gt&&(i=_n);let u=0,l=0,c=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==c||null!==h;){const g=u<i.length?i[u+1]:void 0,_=l<s.length?s[l+1]:void 0;let w,v=null;c===h?(u+=2,l+=2,g!==_&&(v=h,w=_)):null===h||null!==c&&c<h?(u+=2,v=c):(l+=2,v=h,w=_),null!==v&&NU(t,e,n,r,v,w,o,a),c=u<i.length?i[u]:null,h=l<s.length?s[l]:null}}(i,a,o,o[kt],o[s+1],o[s+1]=function Dae(t,e,n){if(null==n||""===n)return _n;const r=[],i=Oo(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,s)}}(Nae,Bu,t,!0)}function Bu(t,e){for(let n=function _ae(t){return function TU(t){Ti.key=0,Ti.keyEnd=0,Ti.value=0,Ti.valueEnd=0,Ti.textEnd=t.length}(t),wU(t,jm(t,0,Ti.textEnd))}(e);n>=0;n=wU(e,n))Yi(t,bU(e),!0)}function su(t,e,n,r){const i=Ee(),s=ln(),o=$l(2);s.firstUpdatePass&&SU(s,t,o,r),e!==Gt&&oi(i,o,e)&&NU(s,s.data[ts()],i,i[kt],t,i[o+1]=function kae(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Lr(Oo(t)))),t}(e,n),r,o)}function CU(t,e){return e>=t.expandoStartIndex}function SU(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[ts()],o=CU(t,n);kU(s,r)&&null===e&&!o&&(e=!1),e=function Iae(t,e,n,r){const i=F1(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Mv(n=PP(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=PP(i,t,e,n,r),null===s){let u=function Aae(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==lf(r))return t[_d(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=PP(null,t,e,u[1],r),u=Mv(u,e.attrs,r),function Cae(t,e,n,r){t[_d(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function Sae(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Mv(r,t[s].hostAttrs,n);return Mv(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function pae(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=_d(o),u=lf(o);t[r]=n;let c,l=!1;if(Array.isArray(n)?(c=n[1],(null===c||td(n,c)>0)&&(l=!0)):c=n,i)if(0!==u){const g=_d(t[a+1]);t[r+1]=KT(g,a),0!==g&&(t[g+1]=SP(t[g+1],r)),t[a+1]=function hae(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=KT(a,0),0!==a&&(t[a+1]=SP(t[a+1],r)),a=r;else t[r+1]=KT(u,0),0===a?a=r:t[u+1]=SP(t[u+1],r),u=r;l&&(t[r+1]=CP(t[r+1])),vU(t,c,r,!0),vU(t,c,r,!1),function mae(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&td(s,e)>=0&&(n[r+1]=DP(n[r+1]))}(e,c,t,r,s),o=KT(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function PP(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Mv(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Mv(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Yi(t,o,!!n||e[++s]))}return void 0===t?null:t}function Nae(t,e,n){const r=String(e);""!==r&&!r.includes(" ")&&Yi(t,r,n)}function NU(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],c=function fae(t){return!(1&~t)}(l)?PU(u,e,n,i,lf(l),o):void 0;JT(c)||(JT(s)||function dae(t){return!(2&~t)}(l)&&(s=PU(u,null,n,i,a,o)),function Ure(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:pd.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=pd.Important),t.setStyle(n,r,i,s))}}(r,o,f(ts(),n),i,s))}function PU(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),c=l?u[1]:u,h=null===c;let g=n[i+1];g===Gt&&(g=h?_n:void 0);let _=h?k_(g,r):c===r?g:void 0;if(l&&!JT(_)&&(_=k_(u,r)),JT(_)&&(a=_,o))return a;const v=t[i+1];i=o?_d(v):lf(v)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=k_(u,r))}return a}function JT(t){return void 0!==t}function kU(t,e){return!!(t.flags&(e?8:16))}function $t(t,e,n,r){const i=Ee(),s=ln(),o=yt+t,a=i[kt],u=s.firstCreatePass?function eue(t,e,n,r,i,s){const o=e.consts,u=ef(e,t,2,r,Ke(o,i));return RN(e,n,u,Ke(o,s)),null!==u.attrs&&VT(u,u.attrs,!1),null!==u.mergedAttrs&&VT(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],l=MU(s,i,u,a,e,t);i[o]=l;const c=$h(u);return tu(u,!0),ej(a,l,u),!function Im(t){return!(32&~t.flags)}(u)&&J_()&&ET(s,i,l,u),0===function x1(){return Rt.lFrame.elementDepthCount}()&&ps(l,i),function bte(){Rt.lFrame.elementDepthCount++}(),c&&(PN(s,i,u),NN(s,u,i)),null!==r&&kN(i,u),$t}function tn(){let t=qn();R1()?O1():(t=t.parent,tu(t,!1));const e=t;(function Ete(t){return Rt.skipHydrationRootTNode===t})(e)&&function Cte(){Rt.skipHydrationRootTNode=null}(),function wte(){Rt.lFrame.elementDepthCount--}();const n=ln();return n.firstCreatePass&&(WE(n,t),Ol(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function $te(t){return!!(8&t.flags)}(e)&&NP(n,e,Ee(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jte(t){return!!(16&t.flags)}(e)&&NP(n,e,Ee(),e.stylesWithoutHost,!1),tn}function vr(t,e,n,r){return $t(t,e,n,r),tn(),vr}let MU=(t,e,n,r,i,s)=>(Ou(!0),vT(r,i,function f3(){return Rt.lFrame.currentNamespace}()));function Fv(t,e,n){const r=Ee(),i=ln(),s=t+yt,o=i.firstCreatePass?function rue(t,e,n,r,i){const s=e.consts,o=Ke(s,r),a=ef(e,t,8,"ng-container",o);return null!==o&&VT(a,o,!0),RN(e,n,a,Ke(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];tu(o,!0);const a=VU(i,r,o,t);return r[s]=a,J_()&&ET(i,r,a,o),ps(a,r),$h(o)&&(PN(i,r,o),NN(i,o,r)),null!=n&&kN(r,o),Fv}function Vv(){let t=qn();const e=ln();return R1()?O1():(t=t.parent,tu(t,!1)),e.firstCreatePass&&(WE(e,t),Ol(t)&&e.queries.elementEnd(t)),Vv}let VU=(t,e,n,r)=>(Ou(!0),wN(e[kt],""));function Lv(){return Ee()}function OP(t,e,n){const r=Ee();if(oi(r,nu(),e)){const s=ln(),o=dr();lo(s,o,r,t,e,mj(F1(s.data),o,r),n,!0)}return OP}const Hm="en-US";let BU=Hm;let o4=(t,e,n)=>{};function li(t,e,n,r){const i=Ee(),s=ln(),o=qn();return VP(s,i,i[kt],o,t,e,r),li}function VP(t,e,n,r,i,s,o){const a=$h(r),l=t.firstCreatePass&&pj(t),c=e[jn],h=fj(e);let g=!0;if(3&r.type||o){const w=y(r,e),I=o?o(w):w,S=h.length,x=o?U=>o(m(U[r.index])):r.index;let O=null;if(!o&&a&&(O=function Que(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[od],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==O)(O.__ngLastListenerFn__||O).__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,g=!1;else{s=c4(r,e,c,s),o4(w,i,s);const U=n.listen(I,i,s);h.push(s,U),l&&l.push(i,x,S,S+1)}}else s=c4(r,e,c,s);const _=r.outputs;let v;if(g&&null!==_&&(v=_[i])){const w=v.length;if(w)for(let I=0;I<w;I+=2){const he=e[v[I]][v[I+1]].subscribe(s),de=h.length;h.push(s,he),l&&l.push(i,r.index,de,-(de+1))}}}function l4(t,e,n,r){const i=W(null);try{return pa(6,e,n),!1!==n(r)}catch(s){return CT(t,s),!1}finally{pa(7,e,n),W(i)}}function c4(t,e,n,r){return function i(s){if(s===Function)return r;mv(t.componentOffset>-1?Q(t.index,e):e,5);let a=l4(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=l4(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function Ii(t=1){return function kte(t){return(Rt.lFrame.contextLView=function Hh(t,e){for(;t>0;)e=e[ad],t--;return e}(t,Rt.lFrame.contextLView))[jn]}(t)}function b4(t,e,n,r){!function _B(t,e,n,r){const i=ln();if(i.firstCreatePass){const s=qn();vB(i,new pB(e,n,r),s.index),function soe(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),!(2&~n)&&(i.staticContentQueries=!0)}return gB(i,Ee(),n)}(t,e,n,r)}function w4(t,e,n){!function yB(t,e,n){const r=ln();return r.firstCreatePass&&(vB(r,new pB(t,e,n),-1),!(2&~e)&&(r.staticViewQueries=!0)),gB(r,Ee(),e)}(t,e,n)}function $P(t){const e=Ee(),n=ln(),r=V1();qE(r+1);const i=dP(n,r);if(t.dirty&&function Ie(t){return!(4&~t[Ct])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const s=bB(e,r);t.reset(s,V3),t.notifyOnChanges()}return!0}return!1}function jP(){return function cP(t,e){return t[ko].queries[e].queryList}(Ee(),V1())}function Fn(t,e=""){const n=Ee(),r=ln(),i=t+yt,s=r.firstCreatePass?ef(r,i,1,e,null):r.data[i],o=k4(r,n,s,e,t);n[i]=o,J_()&&ET(r,n,o,s),tu(s,!1)}let k4=(t,e,n,r,i)=>(Ou(!0),function bN(t,e){return t.createText(e)}(e[kt],r));function zm(t){return ql("",t,""),zm}function ql(t,e,n){const r=Ee(),i=function xm(t,e,n,r){return oi(t,nu(),n)?e+Lt(n)+r:Gt}(r,t,e,n);return i!==Gt&&function Ul(t,e,n){const r=f(e,t);!function j$(t,e,n){t.setValue(e,n)}(t[kt],r,n)}(r,ts(),i),ql}function UP(t,e,n){TB(e)&&(e=e());const r=Ee();return oi(r,nu(),e)&&lo(ln(),dr(),r,t,e,r[kt],n,!1),UP}function HP(t,e){const n=Ee(),r=ln(),i=qn();return VP(r,n,n[kt],i,t,e),HP}function zP(t,e,n,r,i){if(t=xt(t),Array.isArray(t))for(let s=0;s<t.length;s++)zP(t[s],e,n,r,i);else{const s=ln(),o=Ee(),a=qn();let u=Xa(t)?t:xt(t.provide);const l=Kp(t),c=1048575&a.providerIndexes,h=a.directiveStart,g=a.providerIndexes>>20;if(Xa(t)||!t.multi){const _=new Y_(l,i,Ve),v=qP(u,e,i?c:c+g,h);-1===v?(q1(YE(a,o),s,u),GP(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[v]=_,o[v]=_)}else{const _=qP(u,e,c+g,h),v=qP(u,e,c,c+g),I=v>=0&&n[v];if(i&&!I||!i&&!(_>=0&&n[_])){q1(YE(a,o),s,u);const S=function ble(t,e,n,r,i){const s=new Y_(t,n,Ve);return s.multi=[],s.index=e,s.componentProviders=0,H4(s,i,r&&!n),s}(i?vle:_le,n.length,i,r,l);!i&&I&&(n[v].providerFactory=S),GP(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(S),o.push(S)}else GP(s,t,_>-1?_:v,H4(n[i?v:_],l,!i&&r));!i&&r&&I&&n[v].componentProviders++}}}function GP(t,e,n,r){const i=Xa(e),s=function p1(t){return!!t.useClass}(e);if(i||s){const u=(s?xt(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const c=l.indexOf(n);-1===c?l.push(n,[r,u]):l[c+1].push(r,u)}else l.push(n,u)}}}function H4(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function qP(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function _le(t,e,n,r){return WP(this.multi,[])}function vle(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Yh(n,n[Ue],this.providerFactory.index,r);s=a.slice(0,o),WP(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],WP(i,s);return s}function WP(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Nr(t,e=[]){return n=>{n.providersResolver=(r,i)=>function yle(t,e,n){const r=ln();if(r.firstCreatePass){const i=xo(t);zP(n,r.data,r.blueprint,i,!0),zP(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let wle=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=id(0,n.type),i=r.length>0?jT([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ye({token:t,providedIn:"environment",factory:()=>new t(Se(Zi))})}return t})();function zv(t){Fs("NgStandalone"),t.getStandaloneInjector=e=>e.get(wle).getOrCreateStandaloneInjector(t)}function W4(t,e,n,r,i){return function J4(t,e,n,r,i,s,o){const a=e+n;return af(t,a,i,s)?$u(t,a+2,o?r.call(o,i,s):r(i,s)):Gv(t,a+2)}(Ee(),Ms(),t,e,n,r,i)}function K4(t,e,n,r,i,s){return function Y4(t,e,n,r,i,s,o,a){const u=e+n;return function UT(t,e,n,r,i){const s=af(t,e,n,r);return oi(t,e+2,i)||s}(t,u,i,s,o)?$u(t,u+3,a?r.call(a,i,s,o):r(i,s,o)):Gv(t,u+3)}(Ee(),Ms(),t,e,n,r,i,s)}function Gv(t,e){const n=t[e];return n===Gt?void 0:n}function KP(t,e){const n=ln();let r;const i=t+yt;n.firstCreatePass?(r=function xle(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Ja(r.type)),a=Ji(Ve);try{const u=JE(!1),l=s();return JE(u),function BP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ee(),i,l),l}finally{Ji(a)}}function QP(t,e,n){const r=t+yt,i=Ee(),s=function V(t,e){return t[e]}(i,r);return function qv(t,e){return t[Ue].data[e].pure}(i,r)?function Q4(t,e,n,r,i,s){const o=e+n;return oi(t,o,i)?$u(t,o+1,s?r.call(s,i):r(i)):Gv(t,o+1)}(i,Ms(),e,s.transform,n,s):s.transform(n)}class Wm{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const sce=new Wm("18.1.2");let mH=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const bH=new Fe(""),sI=new Fe("");let rk,tk=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,rk||(function kce(t){rk=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{en.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n()},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(Se(en),Se(nk),Se(sI))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})(),nk=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return rk?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Qv(t){return!!t&&"function"==typeof t.then}function wH(t){return!!t&&"function"==typeof t.subscribe}const ik=new Fe("");let sk=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Te(ik,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(Qv(s))n.push(s);else if(wH(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const oI=new Fe("");function IH(t,e){return Array.isArray(e)?e.reduce(IH,t):{...t,...e}}let Lo=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Te(M3),this.afterRenderEffectManager=Te(MT),this.zonelessEnabled=Te(Iv),this.externalTestViews=new Set,this.beforeRender=new je,this.afterTick=new je,this.componentTypes=[],this.components=[],this.isStable=Te(jl).hasPendingTasks.pipe(pt(n=>!n)),this._injector=Te(Zi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof qj;if(!this._injector.get(sk).done)throw!i&&function ca(t){const e=Xt(t)||ii(t)||pi(t);return null!==e&&e.standalone}(n),new fe(405,!1);let o;o=i?n:this._injector.get(Av).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function xce(t){return t.isBoundToModule}(o)?void 0:this._injector.get(sf),l=o.create(Br.NULL,[],r||o.selector,a),c=l.location.nativeElement,h=l.injector.get(bH,null);return h?.registerApplication(c),l.onDestroy(()=>{this.detachView(l.hostView),aI(this.components,l),h?.unregisterApplication(c)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new fe(101,!1);const r=W(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,W(r),this.afterTick.next()}}detectChangesInAttachedViews(n){let r=null;this._injector.destroyed||(r=this._injector.get(OT,null,{optional:!0}));let i=0;const s=this.afterRenderEffectManager;for(;i<10;){const o=0===i;if(n||!o){this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)Oce(a,u,o,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(i++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>dd(a))&&(s.execute(),!this.allViews.some(({_lView:a})=>dd(a))))break}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;aI(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(oI,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>aI(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new fe(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Oce(t,e,n,r){(n||dd(t))&&ST(t,e,n&&!r?0:1)}class Mce{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let CH=(()=>{class t{compileModuleSync(n){return new pP(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Fo(Fi(n).declarations).reduce((o,a)=>{const u=Xt(a);return u&&o.push(new Dv(u)),o},[]);return new Mce(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lce=(()=>{class t{constructor(){this.zone=Te(en),this.changeDetectionScheduler=Te(Em),this.applicationRef=Te(Lo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ok({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new en(ak()),[{provide:en,useFactory:t},{provide:Do,multi:!0,useFactory:()=>{const n=Te(Lce,{optional:!0});return()=>n.initialize()}},{provide:Do,multi:!0,useFactory:()=>{const n=Te(Bce);return()=>{n.initialize()}}},{provide:M3,useFactory:jce},!0===e?{provide:Gj,useValue:!0}:[]]}function jce(){const t=Te(en),e=Te(ga);return n=>t.runOutsideAngular(()=>e.handleError(n))}function ak(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let Bce=(()=>{class t{constructor(){this.subscription=new Kr,this.initialized=!1,this.zone=Te(en),this.pendingTasks=Te(jl)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{en.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{en.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jv=(()=>{class t{constructor(){this.appRef=Te(Lo),this.taskService=Te(jl),this.ngZone=Te(en),this.zonelessEnabled=Te(Iv),this.disableScheduling=Te(Gj,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Kr,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ZN||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;switch(n){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?Jj:Qj;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&en.isInAngularZone())}tick(n){if(this.runningTick||this.appRef.destroyed)return;const r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(n)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Jj(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Wl=new Fe("",{providedIn:"root",factory:()=>Te(Wl,Jt.Optional|Jt.SkipSelf)||function Uce(){return typeof $localize<"u"&&$localize.locale||Hm}()}),lk=new Fe("");let PH=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function xse(t="zone.js",e){return"noop"===t?new ZN:"zone.js"===t?new en(e):t}(r?.ngZone,ak({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=r?.ignoreChangesOutsideZone,o=function Coe(t,e,n){return new fP(t,e,n)}(n.moduleType,this.injector,[...ok({ngZoneFactory:()=>i,ignoreChangesOutsideZone:s}),{provide:Em,useExisting:Jv}]),a=o.injector.get(ga,null);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{aI(this._modules,o),u.unsubscribe()})}),function TH(t,e,n){try{const r=n();return Qv(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,i,()=>{const u=o.injector.get(sk);return u.runInitializers(),u.donePromise.then(()=>(function UU(t){"string"==typeof t&&(BU=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Wl,Hm)||Hm),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=IH({},r);return function Vce(t,e,n){const r=new pP(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Lo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new fe(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(lk,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(Se(Br))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),vd=null;const kH=new Fe("");function xH(t,e,n=[]){const r=`Platform: ${e}`,i=new Fe(r);return(s=[])=>{let o=ck();if(!o||o.injector.get(kH,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Gce(t){if(vd&&!vd.get(kH,!1))throw new fe(400,!1);(function EH(){!function gl(t){na=t}(()=>{throw new fe(600,!1)})})(),vd=t;const e=t.get(PH);(function OH(t){t.get(r$,null)?.forEach(n=>n())})(t)}(function RH(t=[],e){return Br.create({name:e,providers:[{provide:$_,useValue:"platform"},{provide:lk,useValue:new Set([()=>vd=null])},...t]})}(a,r))}return function qce(t){const e=ck();if(!e)throw new fe(401,!1);return e}()}}function ck(){return vd?.get(PH)??null}let Yv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Kce}return t})();function Kce(t){return function Qce(t,e,n){if(Ml(t)&&!n){const r=Q(t.index,e);return new gv(r,r)}return 175&t.type?new gv(e[lr],e):null}(qn(),Ee(),!(16&~t))}class jH{constructor(){}supports(e){return BT(e)}create(e){return new ede(e)}}const Zce=(t,e)=>e;class ede{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Zce}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<UH(r,i,s)?n:r,a=UH(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,c=u-i;if(l!=c){for(let g=0;g<l;g++){const _=g<s.length?s[g]:s[g]=0,v=_+g;c<=v&&v<l&&(s[g]=_+1)}s[o.previousIndex]=c-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!BT(e))throw new fe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function Noe(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new tde(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new BH),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BH),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class tde{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nde{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class BH{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new nde,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UH(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function zH(){return new mk([new jH])}let mk=(()=>{class t{static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:zH});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||zH()),deps:[[t,new Jc,new xh]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new fe(901,!1)}}return t})();const ade=xH(null,"core",[]);let ude=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(Se(Lo))};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({})}return t})();const uz=new Fe("");function Km(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function t0(t,e){Fs("NgSignals");const n=function Nt(t){const e=Object.create(Wr);e.computation=t;const n=()=>{if(Tn(e),cn(e),e.value===ar)throw e.error;return e.value};return n[Pe]=e,n}(t);return e?.equal&&(n[Pe].equal=e.equal),n}function Uu(t){const e=W(null);try{return t()}finally{W(e)}}let _z=null;function bd(){return _z}class Yde{}const $i=new Fe("");let vk=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>Te(Zde),providedIn:"platform"})}return t})();const Xde=new Fe("");let Zde=(()=>{class t extends vk{constructor(){super(),this._doc=Te($i),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bd().getBaseHref(this._doc)}onPopState(n){const r=bd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=bd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function bk(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function vz(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Kl(t){return t&&"?"!==t[0]?"?"+t:t}let hf=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>Te(wz),providedIn:"root"})}return t})();const bz=new Fe("");let wz=(()=>{class t extends hf{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Te($i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return bk(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Kl(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Kl(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Kl(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Se(vk),Se(bz,8))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ehe=(()=>{class t extends hf{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=bk(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Kl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Kl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Se(vk),Se(bz,8))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})(),n0=(()=>{class t{constructor(n){this._subject=new Xr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function rhe(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(vz(Ez(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Kl(r))}normalize(n){return t.stripTrailingSlash(function nhe(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Ez(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Kl(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Kl(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Kl;static#t=this.joinWithSlash=bk;static#n=this.stripTrailingSlash=vz;static#r=this.\u0275fac=function(r){return new(r||t)(Se(hf))};static#i=this.\u0275prov=Ye({token:t,factory:()=>function the(){return new n0(Se(hf))}(),providedIn:"root"})}return t})();function Ez(t){return t.replace(/\/index.html$/,"")}function kz(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const Pk=/\s+/,xz=[];let Rz=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=xz,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Pk):xz}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Pk):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Pk).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(Ro),Ve(zl))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class Uhe{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mz=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Uhe(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Fz(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Fz(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(ru),Ve(Hl),Ve(mk))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function Fz(t,e){t.context.$implicit=e.item}let NI=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Hhe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Vz("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Vz("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(ru),Ve(Hl))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class Hhe{constructor(){this.$implicit=null,this.ngIf=null}}function Vz(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Lr(e)}'.`)}class qhe{createSubscription(e,n){return Uu(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Uu(()=>e.unsubscribe())}}class Whe{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const Khe=new Whe,Qhe=new qhe;let $z=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Qv(n))return Khe;if(wH(n))return Qhe;throw function uu(t,e){return new fe(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(Yv,16))};static#t=this.\u0275pipe=Xi({name:"async",type:t,pure:!1,standalone:!0})}return t})(),Mk=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({})}return t})();const Bz="browser";function PI(t){return"server"===t}let mfe=(()=>{class t{static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:()=>function pfe(t){return t===Bz}(Te(ya))?new gfe(Te($i),window):new _fe})}return t})();class gfe{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function yfe(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class _fe{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Uz{}class qfe extends Yde{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $k extends qfe{static makeCurrent(){!function Jde(t){_z??=t}(new $k)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Wfe(){return a0=a0||document.querySelector("base"),a0?a0.getAttribute("href"):null}();return null==n?null:function Kfe(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){a0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kz(document.cookie,e)}}let a0=null,Jfe=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const OI=new Fe("");let Xz=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(Se(OI),Se(en))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();class jk{constructor(e){this._doc=e}}const Bk="ng-app-id";let Zz=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=PI(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Bk}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Bk),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Bk,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i),Se(hm),Se(s$,8),Se(ya))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const Uk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hk=/%COMP%/g,epe=new Fe("",{providedIn:"root",factory:()=>!0});function tG(t,e){return e.map(n=>n.replace(Hk,t))}let zk=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=PI(a),this.defaultRenderer=new Gk(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Os.ShadowDom&&(r={...r,encapsulation:Os.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof rG?i.applyToHost(n):i instanceof qk&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Os.Emulated:s=new rG(u,l,r,this.appId,c,o,a,h);break;case Os.ShadowDom:return new ipe(u,l,n,r,o,a,this.nonce,h);default:s=new qk(u,l,r,c,o,a,h)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(Se(Xz),Se(Zz),Se(hm),Se(epe),Se($i),Se(ya),Se(en),Se(s$))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();class Gk{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Uk[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(nG(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(nG(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new fe(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Uk[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Uk[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(pd.DashCase|pd.Important)?e.style.setProperty(n,r,i&pd.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&pd.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=bd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function nG(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class ipe extends Gk{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=tG(i.id,i.styles);for(const c of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class qk extends Gk{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?tG(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class rG extends qk{constructor(e,n,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=function tpe(t){return"_ngcontent-%COMP%".replace(Hk,t)}(l),this.hostAttr=function npe(t){return"_nghost-%COMP%".replace(Hk,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let spe=(()=>{class t extends jk{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})(),ope=(()=>{class t extends jk{constructor(n){super(n),this.delegate=Te(uz,{optional:!0})}supports(n){return!!this.delegate&&this.delegate.supports(n)}addEventListener(n,r,i){return this.delegate.addEventListener(n,r,i)}removeEventListener(n,r,i){return this.delegate.removeEventListener(n,r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const iG=["alt","control","meta","shift"],ape={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},upe={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lpe=(()=>{class t extends jk{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bd().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),iG.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=ape[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),iG.forEach(o=>{o!==i&&(0,upe[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const oG=[{provide:ya,useValue:Bz},{provide:r$,useValue:function cpe(){$k.makeCurrent()},multi:!0},{provide:$i,useFactory:function hpe(){return function Nne(t){Z1=t}(document),document},deps:[]}],fpe=xH(ade,"browser",oG),ppe=new Fe(""),aG=[{provide:sI,useClass:class Qfe{addToWindow(e){Gn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new fe(5103,!1);return s},Gn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Gn.getAllAngularRootElements=()=>e.getAllRootElements(),Gn.frameworkStabilizers||(Gn.frameworkStabilizers=[]),Gn.frameworkStabilizers.push(r=>{const i=Gn.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?bd().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:bH,useClass:tk,deps:[en,nk,sI]},{provide:tk,useClass:tk,deps:[en,nk,sI]}],uG=[{provide:$_,useValue:"root"},{provide:ga,useFactory:function dpe(){return new ga},deps:[]},{provide:OI,useClass:spe,multi:!0,deps:[$i,en,ya]},{provide:OI,useClass:lpe,multi:!0,deps:[$i]},{provide:OI,useClass:ope,multi:!0},zk,Zz,Xz,{provide:OT,useExisting:zk},{provide:Uz,useClass:Jfe,deps:[]},[]];let lG=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:hm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Se(ppe,12))};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({providers:[...uG,...aG],imports:[Mk,ude]})}return t})(),mpe=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:function(r){let i=null;return i=r?new(r||t):Se(vpe),i},providedIn:"root"})}return t})(),vpe=(()=>{class t extends hG{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case Mo.NONE:return r;case Mo.HTML:return Fu(r,"HTML")?Oo(r):D$(this._doc,String(r)).toString();case Mo.STYLE:return Fu(r,"Style")?Oo(r):r;case Mo.SCRIPT:if(Fu(r,"Script"))return Oo(r);throw new fe(5200,!1);case Mo.URL:return Fu(r,"URL")?Oo(r):pT(String(r));case Mo.RESOURCE_URL:if(Fu(r,"ResourceURL"))return Oo(r);throw new fe(5201,!1);default:throw new fe(5202,!1)}}bypassSecurityTrustHtml(n){return function Jne(t){return new zne(t)}(n)}bypassSecurityTrustStyle(n){return function Yne(t){return new Gne(t)}(n)}bypassSecurityTrustScript(n){return function Xne(t){return new qne(t)}(n)}bypassSecurityTrustUrl(n){return function Zne(t){return new Wne(t)}(n)}bypassSecurityTrustResourceUrl(n){return function ere(t){return new Kne(t)}(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ym=ee(635);const fG=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function pG(t){return Nn(t?.then)}function mG(t){return Nn(t[Vc])}function gG(t){return Symbol.asyncIterator&&Nn(t?.[Symbol.asyncIterator])}function yG(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _G=function wpe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function vG(t){return Nn(t?.[_G])}function bG(t){return(0,Ym.AQ)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ym.N3)(n.read());if(i)return yield(0,Ym.N3)(void 0);yield yield(0,Ym.N3)(r)}}finally{n.releaseLock()}})}function wG(t){return Nn(t?.getReader)}function Bs(t){if(t instanceof On)return t;if(null!=t){if(mG(t))return function Epe(t){return new On(e=>{const n=t[Vc]();if(Nn(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(fG(t))return function Tpe(t){return new On(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(pG(t))return function Ipe(t){return new On(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,_h)})}(t);if(gG(t))return EG(t);if(vG(t))return function Ape(t){return new On(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(wG(t))return function Cpe(t){return EG(bG(t))}(t)}throw yG(t)}function EG(t){return new On(e=>{(function Spe(t,e){var n,r,i,s;return(0,Ym.sH)(this,void 0,void 0,function*(){try{for(n=(0,Ym.xN)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Hu(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function zu(t,e=0){return Ot((n,r)=>{n.subscribe(Pt(r,i=>Hu(r,t,()=>r.next(i),e),()=>Hu(r,t,()=>r.complete(),e),i=>Hu(r,t,()=>r.error(i),e)))})}function Xm(t,e=0){return Ot((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function TG(t,e){if(!t)throw new Error("Iterable cannot be null");return new On(n=>{Hu(n,e,()=>{const r=t[Symbol.asyncIterator]();Hu(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function vn(t,e){return e?function Rpe(t,e){if(null!=t){if(mG(t))return function Dpe(t,e){return Bs(t).pipe(Xm(e),zu(e))}(t,e);if(fG(t))return function Ppe(t,e){return new On(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(pG(t))return function Npe(t,e){return Bs(t).pipe(Xm(e),zu(e))}(t,e);if(gG(t))return TG(t,e);if(vG(t))return function kpe(t,e){return new On(n=>{let r;return Hu(n,e,()=>{r=t[_G](),Hu(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Nn(r?.return)&&r.return()})}(t,e);if(wG(t))return function xpe(t,e){return TG(bG(t),e)}(t,e)}throw yG(t)}(t,e):Bs(t)}function IG(t){return t&&Nn(t.schedule)}function Wk(t){return t[t.length-1]}function AG(t){return Nn(Wk(t))?t.pop():void 0}function u0(t){return IG(Wk(t))?t.pop():void 0}function It(...t){return vn(t,u0(t))}const{isArray:Mpe}=Array,{getPrototypeOf:Fpe,prototype:Vpe,keys:Lpe}=Object;function CG(t){if(1===t.length){const e=t[0];if(Mpe(e))return{args:e,keys:null};if(function $pe(t){return t&&"object"==typeof t&&Fpe(t)===Vpe}(e)){const n=Lpe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:jpe}=Array;function SG(t){return pt(e=>function Bpe(t,e){return jpe(e)?t(...e):t(e)}(t,e))}function DG(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Kk(...t){const e=u0(t),n=AG(t),{args:r,keys:i}=CG(t);if(0===r.length)return vn([],e);const s=new On(function Upe(t,e,n=xs){return r=>{NG(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)NG(e,()=>{const l=vn(t[u],e);let c=!1;l.subscribe(Pt(r,h=>{s[u]=h,c||(c=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>DG(i,o):xs));return n?s.pipe(SG(n)):s}function NG(t,e,n){t?Hu(n,t,e):e()}const FI=Wi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ci(t,e,n=1/0){return Nn(e)?Ci((r,i)=>pt((s,o)=>e(r,s,i,o))(Bs(t(r,i))),n):("number"==typeof e&&(n=e),Ot((r,i)=>function Hpe(t,e,n,r,i,s,o,a){const u=[];let l=0,c=0,h=!1;const g=()=>{h&&!u.length&&!l&&e.complete()},_=w=>l<r?v(w):u.push(w),v=w=>{s&&e.next(w),l++;let I=!1;Bs(n(w,c++)).subscribe(Pt(e,S=>{i?.(S),s?_(S):e.next(S)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;u.length&&l<r;){const S=u.shift();o?Hu(e,o,()=>v(S)):v(S)}g()}catch(S){e.error(S)}}))};return t.subscribe(Pt(e,_,()=>{h=!0,g()})),()=>{a?.()}}(r,i,t,n)))}function Zm(t=1/0){return Ci(xs,t)}function Qk(...t){return function zpe(){return Zm(1)}()(vn(t,u0(t)))}function PG(t){return new On(e=>{Bs(t()).subscribe(e)})}function pf(t,e){const n=Nn(t)?t:()=>t,r=i=>i.error(n());return new On(e?i=>e.schedule(r,0,i):r)}const lu=new On(t=>t.complete());function Jk(){return Ot((t,e)=>{let n=null;t._refCount++;const r=Pt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class kG extends On{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Yt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Kr;const n=this.getSubject();e.add(this.source.subscribe(Pt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Kr.EMPTY)}return e}refCount(){return Jk()(this)}}function Pr(t,e){return Ot((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Pt(r,u=>{i?.unsubscribe();let l=0;const c=s++;Bs(t(u,c)).subscribe(i=Pt(r,h=>r.next(e?e(u,h,c,l++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Yl(t){return t<=0?()=>lu:Ot((e,n)=>{let r=0;e.subscribe(Pt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function VI(...t){const e=u0(t);return Ot((n,r)=>{(e?Qk(t,n,e):Qk(t,n)).subscribe(r)})}function wa(t,e){return Ot((n,r)=>{let i=0;n.subscribe(Pt(r,s=>t.call(e,s,i++)&&r.next(s)))})}function LI(t){return Ot((e,n)=>{let r=!1;e.subscribe(Pt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function xG(t=qpe){return Ot((e,n)=>{let r=!1;e.subscribe(Pt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function qpe(){return new FI}function wd(t,e){const n=arguments.length>=2;return r=>r.pipe(t?wa((i,s)=>t(i,s,r)):xs,Yl(1),n?LI(e):xG(()=>new FI))}function eg(t,e){return Nn(e)?Ci(t,e,1):Ci(t,1)}function Si(t,e,n){const r=Nn(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ot((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Pt(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):xs}function ho(t){return Ot((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Pt(n,void 0,void 0,o=>{s=Bs(t(o,ho(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function RG(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(Pt(o,c=>{const h=l++;u=a?t(u,c,h):(a=!0,c),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function $I(t,e){return Ot(RG(t,e,arguments.length>=2,!0))}function Yk(t){return t<=0?()=>lu:Ot((e,n)=>{let r=[];e.subscribe(Pt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Xl(t){return Ot((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const nn="primary",l0=Symbol("RouteTitle");class Jpe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function tg(t){return new Jpe(t)}function Ype(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Gu(t,e){const n=t?Xk(t):void 0,r=e?Xk(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!OG(t[i],e[i]))return!1;return!0}function Xk(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function OG(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function MG(t){return t.length>0?t[t.length-1]:null}function Ed(t){return function bpe(t){return!!t&&(t instanceof On||Nn(t.lift)&&Nn(t.subscribe))}(t)?t:Qv(t)?vn(Promise.resolve(t)):It(t)}const Zpe={exact:function LG(t,e,n){if(!gf(t.segments,e.segments)||!jI(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!LG(t.children[r],e.children[r],n))return!1;return!0},subset:$G},FG={exact:function eme(t,e){return Gu(t,e)},subset:function tme(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>OG(t[n],e[n]))},ignored:()=>!0};function VG(t,e,n){return Zpe[n.paths](t.root,e.root,n.matrixParams)&&FG[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function $G(t,e,n){return jG(t,e,e.segments,n)}function jG(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!gf(i,n)||e.hasChildren()||!jI(i,n,r))}if(t.segments.length===n.length){if(!gf(t.segments,n)||!jI(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!$G(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(gf(t.segments,i)&&jI(t.segments,i,r)&&t.children[nn])&&jG(t.children[nn],e,s,r)}}function jI(t,e,n){return e.every((r,i)=>FG[n](t[i].parameters,r.parameters))}class mf{constructor(e=new Yn([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=tg(this.queryParams),this._queryParamMap}toString(){return ime.serialize(this)}}class Yn{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return UI(this)}}class c0{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=tg(this.parameters),this._parameterMap}toString(){return HG(this)}}function gf(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let ng=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>new BI,providedIn:"root"})}return t})();class BI{parse(e){const n=new mme(e);return new mf(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${d0(e.root,!0)}`,r=function ame(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${HI(n)}=${HI(i)}`).join("&"):`${HI(n)}=${HI(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function sme(t){return encodeURI(t)}(e.fragment)}`:""}`}}const ime=new BI;function UI(t){return t.segments.map(e=>HG(e)).join("/")}function d0(t,e){if(!t.hasChildren())return UI(t);if(e){const n=t.children[nn]?d0(t.children[nn],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==nn&&r.push(`${i}:${d0(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function rme(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===nn&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==nn&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===nn?[d0(t.children[nn],!1)]:[`${i}:${d0(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[nn]?`${UI(t)}/${n[0]}`:`${UI(t)}/(${n.join("//")})`}}function BG(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function HI(t){return BG(t).replace(/%3B/gi,";")}function Zk(t){return BG(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zI(t){return decodeURIComponent(t)}function UG(t){return zI(t.replace(/\+/g,"%20"))}function HG(t){return`${Zk(t.path)}${function ome(t){return Object.entries(t).map(([e,n])=>`;${Zk(e)}=${Zk(n)}`).join("")}(t.parameters)}`}const ume=/^[^\/()?;#]+/;function ex(t){const e=t.match(ume);return e?e[0]:""}const lme=/^[^\/()?;=#]+/,dme=/^[^=?&#]+/,fme=/^[^&#]+/;class mme{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yn([],{}):new Yn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[nn]=new Yn(e,n)),r}parseSegment(){const e=ex(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(e),new c0(zI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function cme(t){const e=t.match(lme);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=ex(this.remaining);i&&(r=i,this.capture(r))}e[zI(n)]=zI(r)}parseQueryParam(e){const n=function hme(t){const e=t.match(dme);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function pme(t){const e=t.match(fme);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=UG(n),s=UG(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ex(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new fe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=nn);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[nn]:new Yn([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new fe(4011,!1)}}function zG(t){return t.segments.length>0?new Yn([],{[nn]:t}):t}function GG(t){const e={};for(const[r,i]of Object.entries(t.children)){const s=GG(i);if(r===nn&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function gme(t){if(1===t.numberOfChildren&&t.children[nn]){const e=t.children[nn];return new Yn(t.segments.concat(e.segments),e.children)}return t}(new Yn(t.segments,e))}function yf(t){return t instanceof mf}function qG(t){let e;const i=zG(function n(s){const o={};for(const u of s.children){const l=n(u);o[u.outlet]=l}const a=new Yn(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function WG(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return tx(i,i,i,n,r);const s=function _me(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new QG(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new QG(n,e,r)}(e);if(s.toRoot())return tx(i,i,new Yn([],{}),n,r);const o=function vme(t,e,n){if(t.isAbsolute)return new qI(e,!0,0);if(!n)return new qI(e,!1,NaN);if(null===n.parent)return new qI(n,!0,0);const r=GI(t.commands[0])?0:1;return function bme(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new qI(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?f0(o.segmentGroup,o.index,s.commands):JG(o.segmentGroup,o.index,s.commands);return tx(i,o.segmentGroup,a,n,r)}function GI(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function h0(t){return"object"==typeof t&&null!=t&&t.outlets}function tx(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(c=>`${c}`):`${l}`}),o=t===e?n:KG(t,e,n);const a=zG(GG(o));return new mf(a,s,i)}function KG(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:KG(s,e,n)}),new Yn(t.segments,r)}class QG{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&GI(r[0]))throw new fe(4003,!1);const i=r.find(h0);if(i&&i!==MG(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qI{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function JG(t,e,n){if(t??=new Yn([],{}),0===t.segments.length&&t.hasChildren())return f0(t,e,n);const r=function Eme(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(h0(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!XG(u,l,o))return s;r+=2}else{if(!XG(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Yn(t.segments.slice(0,r.pathIndex),{});return s.children[nn]=new Yn(t.segments.slice(r.pathIndex),t.children),f0(s,0,i)}return r.match&&0===i.length?new Yn(t.segments,{}):r.match&&!t.hasChildren()?nx(t,e,n):r.match?f0(t,0,i):nx(t,e,n)}function f0(t,e,n){if(0===n.length)return new Yn(t.segments,{});{const r=function wme(t){return h0(t[0])?t[0].outlets:{[nn]:t}}(n),i={};if(Object.keys(r).some(s=>s!==nn)&&t.children[nn]&&1===t.numberOfChildren&&0===t.children[nn].segments.length){const s=f0(t.children[nn],e,n);return new Yn(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=JG(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Yn(t.segments,i)}}function nx(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(h0(s)){const u=Tme(s.outlets);return new Yn(r,u)}if(0===i&&GI(n[0])){r.push(new c0(t.segments[e].path,YG(n[0]))),i++;continue}const o=h0(s)?s.outlets[nn]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&GI(a)?(r.push(new c0(o,YG(a))),i+=2):(r.push(new c0(o,{})),i++)}return new Yn(r,{})}function Tme(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=nx(new Yn([],{}),0,r))}),e}function YG(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function XG(t,e,n){return t==n.path&&Gu(e,n.parameters)}const p0="imperative";var bn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(bn||{});class qu{constructor(e,n){this.id=e,this.url=n}}class WI extends qu{constructor(e,n,r="imperative",i=null){super(e,n),this.type=bn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zl extends qu{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=bn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var jo=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(jo||{}),KI=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(KI||{});class _f extends qu{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=bn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rg extends qu{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=bn.NavigationSkipped}}class rx extends qu{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=bn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZG extends qu{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ime extends qu{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ame extends qu{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=bn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cme extends qu{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sme extends qu{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dme{constructor(e){this.route=e,this.type=bn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nme{constructor(e){this.route=e,this.type=bn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pme{constructor(e){this.snapshot=e,this.type=bn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kme{constructor(e){this.snapshot=e,this.type=bn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xme{constructor(e){this.snapshot=e,this.type=bn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rme{constructor(e){this.snapshot=e,this.type=bn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e6{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=bn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ix{}class QI{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function cu(t){return t.outlet||nn}function m0(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class $me{get injector(){return m0(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new g0(this.rootInjector),this.attachRef=null}}let g0=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new $me(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)(Se(Zi))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class t6{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=sx(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=sx(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=ox(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ox(e,this._root).map(n=>n.value)}}function sx(t,e){if(t===e.value)return e;for(const n of e.children){const r=sx(t,n);if(r)return r}return null}function ox(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ox(t,n);if(r.length)return r.unshift(e),r}return[]}class du{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function ig(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class n6 extends t6{constructor(e,n){super(e),this.snapshot=n,ax(this,e)}toString(){return this.snapshot.toString()}}function r6(t){const e=function jme(t){const s=new YI([],{},{},"",{},nn,t,null,{});return new i6("",new du(s,[]))}(t),n=new gt([new c0("",{})]),r=new gt({}),i=new gt({}),s=new gt({}),o=new gt(""),a=new sg(n,r,s,o,i,nn,t,e.root);return a.snapshot=e.root,new n6(new du(a,[]),e)}class sg{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(pt(l=>l[l0]))??It(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pt(e=>tg(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pt(e=>tg(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function JI(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&o6(i)&&(r.resolve[l0]=i.title),r}class YI{get title(){return this.data?.[l0]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tg(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class i6 extends t6{constructor(e,n){super(n),this.url=e,ax(this,n)}toString(){return s6(this._root)}}function ax(t,e){e.value._routerState=t,e.children.forEach(n=>ax(t,n))}function s6(t){const e=t.children.length>0?` { ${t.children.map(s6).join(", ")} } `:"";return`${t.value}${e}`}function ux(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gu(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Gu(e.params,n.params)||t.paramsSubject.next(n.params),function Xpe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Gu(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Gu(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function lx(t,e){const n=Gu(t.params,e.params)&&function nme(t,e){return gf(t,e)&&t.every((n,r)=>Gu(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||lx(t.parent,e.parent))}function o6(t){return"string"==typeof t.title||null===t.title}let cx=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=nn,this.activateEvents=new Xr,this.deactivateEvents=new Xr,this.attachEvents=new Xr,this.detachEvents=new Xr,this.parentContexts=Te(g0),this.location=Te(ru),this.changeDetector=Te(Yv),this.inputBinder=Te(XI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new dx(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Mt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fs]})}return t})();class dx{__ngOutletInjector(e){return new dx(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===sg?this.route:e===g0?this.childContexts:this.parent.get(e,n)}}const XI=new Fe("");let a6=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Kk([r.queryParams,r.params,r.data]).pipe(Pr(([s,o,a],u)=>(a={...s,...o,...a},0===u?It(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function Qde(t){const e=Xt(t);if(!e)return null;const n=new Dv(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();function y0(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Ume(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return y0(t,r,i);return y0(t,r)})}(t,e,n);return new du(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>y0(t,a)),o}}const r=function Hme(t){return new sg(new gt(t.url),new gt(t.params),new gt(t.queryParams),new gt(t.fragment),new gt(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>y0(t,s));return new du(r,i)}}class hx{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const u6="ngNavigationCancelingError";function ZI(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=yf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=l6(!1,jo.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function l6(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[u6]=!0,n.cancellationCode=e,n}function c6(t){return!!t&&t[u6]}class qme{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ux(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=ig(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ig(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ig(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=ig(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Rme(s.value.snapshot))}),e.children.length&&this.forwardEvent(new kme(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(ux(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ux(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class d6{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eA{constructor(e,n){this.component=e,this.route=n}}function Wme(t,e,n){const r=t._root;return _0(r,e?e._root:null,n,[r.value])}function og(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function m_(t){return null!==ua(t)}(t)?e.get(t):t:r}function _0(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ig(e);return t.children.forEach(o=>{(function Qme(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function Jme(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!gf(t.url,e.url);case"pathParamsOrQueryParamsChange":return!gf(t.url,e.url)||!Gu(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lx(t,e)||!Gu(t.queryParams,e.queryParams);default:return!lx(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new d6(r)):(s.data=o.data,s._resolvedData=o._resolvedData),_0(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new eA(a.outlet.component,o))}else o&&v0(e,a,i),i.canActivateChecks.push(new d6(r)),_0(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>v0(a,n.getContext(o),i)),i}function v0(t,e,n){const r=ig(t),i=t.value;Object.entries(r).forEach(([s,o])=>{v0(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new eA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function b0(t){return"function"==typeof t}function h6(t){return t instanceof FI||"EmptyError"===t?.name}const tA=Symbol("INITIAL_VALUE");function ag(){return Pr(t=>Kk(t.map(e=>e.pipe(Yl(1),VI(tA)))).pipe(pt(e=>{for(const n of e)if(!0!==n){if(n===tA)return tA;if(!1===n||rge(n))return n}return!0}),wa(e=>e!==tA),Yl(1)))}function rge(t){return yf(t)||t instanceof hx}function f6(t){return function bl(...t){return vh(t)}(Si(e=>{if("boolean"!=typeof e)throw ZI(0,e)}),pt(e=>!0===e))}class fx{constructor(e){this.segmentGroup=e||null}}class nA extends Error{constructor(e){super(),this.urlTree=e}}function ug(t){return pf(new fx(t))}class gge{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return It(r);if(i.numberOfChildren>1||!i.children[nn])return pf(new fe(4e3,!1));i=i.children[nn]}}applyRedirectCommands(e,n,r,i,s){if("string"!=typeof n){const a=n,{queryParams:u,fragment:l,routeConfig:c,url:h,outlet:g,params:_,data:v,title:w}=i,I=no(s,()=>a({params:_,data:v,queryParams:u,fragment:l,routeConfig:c,url:h,outlet:g,title:w}));if(I instanceof mf)throw new nA(I);n=I}const o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if("/"===n[0])throw new nA(o);return o}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new mf(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Yn(s,o)}createSegments(e,n,r,i){return n.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const px={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yge(t,e,n,r,i){const s=mx(t,e,n);return s.matched?(r=function Ome(t,e){return t.providers&&!t._injector&&(t._injector=jT(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function fge(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?It(i.map(o=>{const a=og(o,t);return Ed(function nge(t){return t&&b0(t.canMatch)}(a)?a.canMatch(e,n):no(t,()=>a(e,n)))})).pipe(ag(),f6()):It(!0)}(r,e,n).pipe(pt(o=>!0===o?s:{...px}))):It(s)}function mx(t,e,n){if("**"===e.path)return function _ge(t){return{matched:!0,parameters:t.length>0?MG(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...px}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ype)(n,t,e);if(!i)return{...px};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function p6(t,e,n,r){return n.length>0&&function wge(t,e,n){return n.some(r=>rA(t,e,r)&&cu(r)!==nn)}(t,n,r)?{segmentGroup:new Yn(e,bge(r,new Yn(n,t.children))),slicedSegments:[]}:0===n.length&&function Ege(t,e,n){return n.some(r=>rA(t,e,r))}(t,n,r)?{segmentGroup:new Yn(t.segments,vge(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Yn(t.segments,t.children),slicedSegments:n}}function vge(t,e,n,r){const i={};for(const s of n)if(rA(t,e,s)&&!r[cu(s)]){const o=new Yn([],{});i[cu(s)]=o}return{...r,...i}}function bge(t,e){const n={};n[nn]=e;for(const r of t)if(""===r.path&&cu(r)!==nn){const i=new Yn([],{});n[cu(r)]=i}return n}function rA(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Age{}class Dge{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new gge(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new fe(4002,`'${e.segmentGroup}'`)}recognize(){const e=p6(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pt(({children:n,rootSnapshot:r})=>{const i=new du(r,n),s=new i6("",i),o=function yme(t,e,n=null,r=null){return WG(qG(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const n=new YI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),nn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,nn,n).pipe(pt(r=>({children:r,rootSnapshot:n})),ho(r=>{if(r instanceof nA)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fx?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(pt(o=>o instanceof du?[o]:[]))}processChildren(e,n,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return vn(s).pipe(eg(o=>{const a=r.children[o],u=function Lme(t,e){const n=t.filter(r=>cu(r)===e);return n.push(...t.filter(r=>cu(r)!==e)),n}(n,o);return this.processSegmentGroup(e,u,a,o,i)}),$I((o,a)=>(o.push(...a),o)),LI(null),function Wpe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?wa((i,s)=>t(i,s,r)):xs,Yk(1),n?LI(e):xG(()=>new FI))}(),Ci(o=>{if(null===o)return ug(r);const a=m6(o);return function Nge(t){t.sort((e,n)=>e.value.outlet===nn?-1:n.value.outlet===nn?1:e.value.outlet.localeCompare(n.value.outlet))}(a),It(a)}))}processSegment(e,n,r,i,s,o,a){return vn(n).pipe(eg(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(ho(l=>{if(l instanceof fx)return It(null);throw l}))),wd(u=>!!u),ho(u=>{if(h6(u))return function Ige(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?It(new Age):ug(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return function Tge(t,e,n,r){return!!(cu(t)===r||r!==nn&&rA(e,n,t))&&mx(e,t,n).matched}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):ug(i):ug(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){const{matched:u,parameters:l,consumedSegments:c,positionalParamSegments:h,remainingSegments:g}=mx(n,i,s);if(!u)return ug(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const _=new YI(s,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g6(i),cu(i),i.component??i._loadedComponent??null,i,y6(i)),v=JI(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(v.params),_.data=Object.freeze(v.data);const w=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,h,_,e);return this.applyRedirects.lineralizeSegments(i,w).pipe(Ci(I=>this.processSegment(e,r,n,I.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){const a=yge(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(Pr(u=>u.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Pr(({routes:l})=>{const c=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:_}=u,v=new YI(g,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g6(r),cu(r),r.component??r._loadedComponent??null,r,y6(r)),w=JI(v,o,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);const{segmentGroup:I,slicedSegments:S}=p6(n,g,_,l);if(0===S.length&&I.hasChildren())return this.processChildren(c,l,I,v).pipe(pt(O=>new du(v,O)));if(0===l.length&&0===S.length)return It(new du(v,[]));const x=cu(r)===s;return this.processSegment(c,l,I,S,x?nn:s,!0,v).pipe(pt(O=>new du(v,O instanceof du?[O]:[])))})):ug(n)))}getChildConfig(e,n,r){return n.children?It({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?It({routes:n._loadedRoutes,injector:n._loadedInjector}):function hge(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?It(!0):It(i.map(o=>{const a=og(o,t);return Ed(function Xme(t){return t&&b0(t.canLoad)}(a)?a.canLoad(e,n):no(t,()=>a(e,n)))})).pipe(ag(),f6())}(e,n,r).pipe(Ci(i=>i?this.configLoader.loadChildren(e,n).pipe(Si(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function mge(t){return pf(l6(!1,jo.GuardRejected))}())):It({routes:[],injector:e})}}function Pge(t){const e=t.value.routeConfig;return e&&""===e.path}function m6(t){const e=[],n=new Set;for(const r of t){if(!Pge(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=m6(r.children);e.push(new du(r.value,i))}return e.filter(r=>!n.has(r))}function g6(t){return t.data||{}}function y6(t){return t.resolve||{}}function _6(t){const e=t.children.map(n=>_6(n)).flat();return[t,...e]}function gx(t){return Pr(e=>{const n=t(e);return n?vn(n).pipe(pt(()=>e)):It(e)})}let v6=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===nn);return r}getResolvedTitleForRoute(n){return n.data[l0]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>Te(Fge),providedIn:"root"})}return t})(),Fge=(()=>{class t extends v6{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(Se(mpe))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const lg=new Fe("",{providedIn:"root",factory:()=>({})});let b6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Ya({type:t,selectors:[["ng-component"]],standalone:!0,features:[zv],decls:1,vars:0,template:function(r,i){1&r&&vr(0,"router-outlet")},dependencies:[cx],encapsulation:2})}return t})();function yx(t){const e=t.children&&t.children.map(yx),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==nn&&(n.component=b6),n}const cg=new Fe("");let _x=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Te(CH)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return It(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Ed(n.loadComponent()).pipe(pt(w6),Si(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Xl(()=>{this.componentLoaders.delete(n)})),i=new kG(r,()=>new je).pipe(Jk());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return It({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function Vge(t,e,n,r){return Ed(t.loadChildren()).pipe(pt(w6),Ci(i=>i instanceof $B||Array.isArray(i)?It(i):vn(e.compileModuleAsync(i))),pt(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(cg,[],{optional:!0,self:!0}).flat()),{routes:o.map(yx),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Xl(()=>{this.childrenLoaders.delete(r)})),o=new kG(s,()=>new je).pipe(Jk());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function w6(t){return function Lge(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let vx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>Te($ge),providedIn:"root"})}return t})(),$ge=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const E6=new Fe(""),T6=new Fe("");function jge(t,e,n){const r=t.get(T6),i=t.get($i);return t.get(en).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s;const o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),function Bge(t){return new Promise(e=>{nB({read:()=>setTimeout(e)},{injector:t})})}(t))),{onViewTransitionCreated:u}=r;return u&&no(t,()=>u({transition:a,from:e,to:n})),o})}const I6=new Fe("");let iA=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=Te(_x),this.environmentInjector=Te(Zi),this.urlSerializer=Te(ng),this.rootContexts=Te(g0),this.location=Te(n0),this.inputBindingEnabled=null!==Te(XI,{optional:!0}),this.titleStrategy=Te(v6),this.options=Te(lg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Te(vx),this.createViewTransition=Te(E6,{optional:!0}),this.navigationErrorHandler=Te(I6,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>It(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Nme(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Dme(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new gt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:p0,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wa(s=>0!==s.id),pt(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Pr(s=>{let o=!1,a=!1;return It(s).pipe(Pr(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",jo.SupersededByNewNavigation),lu;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:"string"==typeof u.extras.browserUrl?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new rg(u.id,this.urlSerializer.serialize(u.rawUrl),h,KI.IgnoredSameUrlNavigation)),u.resolve(!1),lu}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return It(u).pipe(Pr(h=>{const g=this.transitions?.getValue();return this.events.next(new WI(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),g!==this.transitions?.getValue()?lu:Promise.resolve(h)}),function kge(t,e,n,r,i,s){return Ci(o=>function Cge(t,e,n,r,i,s,o="emptyOnly"){return new Dge(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(pt(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Si(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const g=new ZG(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:h,extractedUrl:g,source:_,restoredState:v,extras:w}=u,I=new WI(h,this.urlSerializer.serialize(g),_,v);this.events.next(I);const S=r6(this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:S,urlAfterRedirects:g,extras:{...w,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=g,It(s)}{const h="";return this.events.next(new rg(u.id,this.urlSerializer.serialize(u.extractedUrl),h,KI.IgnoredByUrlHandlingStrategy)),u.resolve(!1),lu}}),Si(u=>{const l=new Ime(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),pt(u=>(this.currentTransition=s={...u,guards:Wme(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function ige(t,e){return Ci(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?It({...n,guardsResult:!0}):function sge(t,e,n,r){return vn(t).pipe(Ci(i=>function dge(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?It(s.map(a=>{const u=m0(e)??i,l=og(a,u);return Ed(function tge(t){return t&&b0(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):no(u,()=>l(t,e,n,r))).pipe(wd())})).pipe(ag()):It(!0)}(i.component,i.route,n,e,r)),wd(i=>!0!==i,!0))}(o,r,i,t).pipe(Ci(a=>a&&function Yme(t){return"boolean"==typeof t}(a)?function oge(t,e,n,r){return vn(e).pipe(eg(i=>Qk(function uge(t,e){return null!==t&&e&&e(new Pme(t)),It(!0)}(i.route.parent,r),function age(t,e){return null!==t&&e&&e(new xme(t)),It(!0)}(i.route,r),function cge(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Kme(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>PG(()=>It(o.guards.map(u=>{const l=m0(o.node)??n,c=og(u,l);return Ed(function ege(t){return t&&b0(t.canActivateChild)}(c)?c.canActivateChild(r,t):no(l,()=>c(r,t))).pipe(wd())})).pipe(ag())));return It(s).pipe(ag())}(t,i.path,n),function lge(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return It(!0);const i=r.map(s=>PG(()=>{const o=m0(e)??n,a=og(s,o);return Ed(function Zme(t){return t&&b0(t.canActivate)}(a)?a.canActivate(e,t):no(o,()=>a(e,t))).pipe(wd())}));return It(i).pipe(ag())}(t,i.route,n))),wd(i=>!0!==i,!0))}(r,s,t,e):It(a)),pt(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Si(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&"boolean"!=typeof u.guardsResult)throw ZI(0,u.guardsResult);const l=new Ame(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),wa(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",jo.GuardRejected),!1)),gx(u=>{if(u.guards.canActivateChecks.length)return It(u).pipe(Si(l=>{const c=new Cme(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Pr(l=>{let c=!1;return It(l).pipe(function xge(t,e){return Ci(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return It(n);const s=new Set(i.map(u=>u.route)),o=new Set;for(const u of s)if(!o.has(u))for(const l of _6(u))o.add(l);let a=0;return vn(o).pipe(eg(u=>s.has(u)?function Rge(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!o6(i)&&(s[l0]=i.title),function Oge(t,e,n,r){const i=Xk(t);if(0===i.length)return It({});const s={};return vn(i).pipe(Ci(o=>function Mge(t,e,n,r){const i=m0(e)??r,s=og(t,i);return Ed(s.resolve?s.resolve(e,n):no(i,()=>s(e,n)))}(t[o],e,n,r).pipe(wd(),Si(a=>{if(a instanceof hx)throw ZI(new BI,a);s[o]=a}))),Yk(1),function Kpe(t){return pt(()=>t)}(s),ho(o=>h6(o)?lu:pf(o)))}(s,t,e,r).pipe(pt(o=>(t._resolvedData=o,t.data=JI(t,t.parent,n).resolve,null)))}(u,r,t,e):(u.data=JI(u,u.parent,t).resolve,It(void 0))),Si(()=>a++),Yk(1),Ci(u=>a===o.size?It(n):lu))})}(this.paramsInheritanceStrategy,this.environmentInjector),Si({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(l,"",jo.NoDataFromResolver)}}))}),Si(l=>{const c=new Sme(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}))}),gx(u=>{const l=c=>{const h=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(c.routeConfig).pipe(Si(g=>{c.component=g}),pt(()=>{})));for(const g of c.children)h.push(...l(g));return h};return Kk(l(u.targetSnapshot.root)).pipe(LI(null),Yl(1))}),gx(()=>this.afterPreactivation()),Pr(()=>{const{currentSnapshot:u,targetSnapshot:l}=s,c=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return c?vn(c).pipe(pt(()=>s)):It(s)}),pt(u=>{const l=function Bme(t,e,n){const r=y0(t,e._root,n?n._root:void 0);return new n6(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},this.currentNavigation.targetRouterState=l,s}),Si(()=>{this.events.next(new ix)}),((t,e,n,r)=>pt(i=>(new qme(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Yl(1),Si({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function Qpe(t){return Ot((e,n)=>{Bs(t).subscribe(Pt(n,()=>n.complete(),Ba)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(Si(u=>{throw u}))),Xl(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",jo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ho(u=>{if(a=!0,c6(u))this.events.next(new _f(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function zme(t){return c6(t)&&yf(t.url)}(u)?this.events.next(new QI(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{const l=new rx(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{const c=no(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(c instanceof hx){const{message:h,cancellationCode:g}=ZI(0,c);this.events.next(new _f(s.id,this.urlSerializer.serialize(s.extractedUrl),h,g)),this.events.next(new QI(c.redirectTo,c.navigationBehaviorOptions))}else{this.events.next(l);const h=n.errorHandler(u);s.resolve(!!h)}}catch(c){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(c)}}return lu}))}))}cancelNavigationTransition(n,r,i){const s=new _f(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Uge(t){return t!==p0}let Hge=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>Te(Gge),providedIn:"root"})}return t})();class zge{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Gge=(()=>{class t extends zge{static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})();static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),A6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:()=>Te(qge),providedIn:"root"})}return t})(),qge=(()=>{class t extends A6{constructor(){super(...arguments),this.location=Te(n0),this.urlSerializer=Te(ng),this.options=Te(lg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Te(vx),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=r6(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof WI)this.stateMemento=this.createStateMemento();else if(n instanceof rg)this.rawUrlTree=r.initialUrl;else if(n instanceof ZG){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ix?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof _f&&(n.code===jo.GuardRejected||n.code===jo.NoDataFromResolver)?this.restoreHistory(r):n instanceof rx?this.restoreHistory(r,!0):n instanceof Zl&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const i=n instanceof mf?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&0===s&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})();static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var w0=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(w0||{});function C6(t,e){t.events.pipe(wa(n=>n instanceof Zl||n instanceof _f||n instanceof rx||n instanceof rg),pt(n=>n instanceof Zl||n instanceof rg?w0.COMPLETE:n instanceof _f&&(n.code===jo.Redirect||n.code===jo.SupersededByNewNavigation)?w0.REDIRECTING:w0.FAILED),wa(n=>n!==w0.REDIRECTING),Yl(1)).subscribe(()=>{e()})}function Wge(t){throw t}const Kge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wu=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Te(mH),this.stateManager=Te(A6),this.options=Te(lg,{optional:!0})||{},this.pendingTasks=Te(jl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Te(iA),this.urlSerializer=Te(ng),this.location=Te(n0),this.urlHandlingStrategy=Te(vx),this._events=new je,this.errorHandler=this.options.errorHandler||Wge,this.navigated=!1,this.routeReuseStrategy=Te(Hge),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Te(cg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Te(XI,{optional:!0}),this.eventsSubscription=new Kr,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof _f&&r.code!==jo.Redirect&&r.code!==jo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zl)this.navigated=!0;else if(r instanceof QI){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Uge(i.source),...o};this.scheduleNavigation(a,p0,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Yge(t){return!(t instanceof ix||t instanceof QI)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),p0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(yx),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let h,c=null;switch(a){case"merge":c={...this.currentUrlTree.queryParams,...s};break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=s||null}null!==c&&(c=this.removeEmptyProps(c));try{h=qG(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return WG(h,n,c,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=yf(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,p0,null,r)}navigate(n,r={skipLocationChange:!1}){return function Jge(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new fe(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...Kge}:!1===r?{...Qge}:r,yf(n))return VG(this.currentUrlTree,n,i);const s=this.parseUrl(n);return VG(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((h,g)=>{a=h,u=g});const c=this.pendingTasks.add();return C6(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),E0=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new je,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof Zl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=yf(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.href=null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;const r=null===this.href?null:function k$(t,e,n){return function yre(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?P$:N$}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.routerLinkInput?null:yf(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(Wu),Ve(sg),function ev(t){return function Gte(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(bE(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(qn(),t)}("tabindex"),Ve(zl),Ve(Ro),Ve(hf))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&li("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&ns("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Km],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Km],replaceUrl:[2,"replaceUrl","replaceUrl",Km],routerLink:"routerLink"},standalone:!0,features:[LB,fs]})}return t})(),S6=(()=>{class t{get isActive(){return this._isActive}constructor(n,r,i,s,o){this.router=n,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Xr,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Zl&&this.update()})}ngAfterContentInit(){It(this.links.changes,It(null)).pipe(Zm()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=vn(n).pipe(Zm()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function Xge(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const s=i.urlTree;return!!s&&n.isActive(s,r)}}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(Wu),Ve(Ro),Ve(zl),Ve(Yv),Ve(E0,8))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&b4(s,E0,5),2&r){let o;$P(o=jP())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[fs]})}return t})();class D6{}let Zge=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(wa(n=>n instanceof Zl),eg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=jT(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return vn(i).pipe(Zm())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):It(null);const s=i.pipe(Ci(o=>null===o?It(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?vn([s,this.loader.loadComponent(r)]).pipe(Zm()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(Se(Wu),Se(CH),Se(Zi),Se(D6),Se(_x))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const bx=new Fe("");let N6=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof WI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Zl?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof rg&&n.code===KI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof e6&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new e6(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function nj(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();function Ku(t,e){return{\u0275kind:t,\u0275providers:e}}function k6(){const t=Te(Br);return e=>{const n=t.get(Lo);if(e!==n.components[0])return;const r=t.get(Wu),i=t.get(x6);1===t.get(wx)&&r.initialNavigation(),t.get(R6,null,Jt.Optional)?.setUpPreloading(),t.get(bx,null,Jt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const x6=new Fe("",{factory:()=>new je}),wx=new Fe("",{providedIn:"root",factory:()=>1}),R6=new Fe("");function rye(t){return Ku(0,[{provide:R6,useExisting:Zge},{provide:D6,useExisting:t}])}function sye(t){return Ku(9,[{provide:E6,useValue:jge},{provide:T6,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const O6=new Fe("ROUTER_FORROOT_GUARD"),oye=[n0,{provide:ng,useClass:BI},Wu,g0,{provide:sg,useFactory:function P6(t){return t.routerState.root},deps:[Wu]},_x,[]];let Ex=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[oye,[],{provide:cg,multi:!0,useValue:n},{provide:O6,useFactory:cye,deps:[[Wu,new xh,new Jc]]},{provide:lg,useValue:r||{}},r?.useHash?{provide:hf,useClass:ehe}:{provide:hf,useClass:wz},{provide:bx,useFactory:()=>{const t=Te(mfe),e=Te(en),n=Te(lg),r=Te(iA),i=Te(ng);return n.scrollOffset&&t.setOffset(n.scrollOffset),new N6(i,r,t,e,n)}},r?.preloadingStrategy?rye(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?dye(r):[],r?.bindToComponentInputs?Ku(8,[a6,{provide:XI,useExisting:a6}]).\u0275providers:[],r?.enableViewTransitions?sye().\u0275providers:[],[{provide:M6,useFactory:k6},{provide:oI,multi:!0,useExisting:M6}]]}}static forChild(n){return{ngModule:t,providers:[{provide:cg,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Se(O6,8))};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({})}return t})();function cye(t){return"guarded"}function dye(t){return["disabled"===t.initialNavigation?Ku(3,[{provide:ik,multi:!0,useFactory:()=>{const e=Te(Wu);return()=>{e.setUpLocationChangeListener()}}},{provide:wx,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ku(2,[{provide:wx,useValue:0},{provide:ik,multi:!0,deps:[Br],useFactory:e=>{const n=e.get(Xde,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Wu),s=e.get(x6);C6(i,()=>{r(!0)}),e.get(iA).afterPreactivation=()=>(r(!0),s.closed?It(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const M6=new Fe("");var Y=ee(467);let F6=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(zl),Ve(Ro))};static#t=this.\u0275dir=Mt({type:t})}return t})(),vf=(()=>{class t extends F6{static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})();static#t=this.\u0275dir=Mt({type:t,features:[Wn]})}return t})();const Qu=new Fe(""),mye={provide:Qu,useExisting:$n(()=>sA),multi:!0},yye=new Fe("");let sA=(()=>{class t extends F6{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gye(){const t=bd()?bd().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(zl),Ve(Ro),Ve(yye,8))};static#t=this.\u0275dir=Mt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&li("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Nr([mye]),Wn]})}return t})();const ms=new Fe(""),Id=new Fe("");function W6(t){return null!=t}function K6(t){return Qv(t)?vn(t):t}function Q6(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function J6(t,e){return e.map(n=>n(t))}function Y6(t){return t.map(e=>function vye(t){return!t.validate}(e)?e:n=>e.validate(n))}function Tx(t){return null!=t?function X6(t){if(!t)return null;const e=t.filter(W6);return 0==e.length?null:function(n){return Q6(J6(n,e))}}(Y6(t)):null}function Ix(t){return null!=t?function Z6(t){if(!t)return null;const e=t.filter(W6);return 0==e.length?null:function(n){return function fye(...t){const e=AG(t),{args:n,keys:r}=CG(t),i=new On(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let c=0;c<o;c++){let h=!1;Bs(n[c]).subscribe(Pt(s,g=>{h||(h=!0,l--),a[c]=g},()=>u--,void 0,()=>{(!u||!h)&&(l||s.next(r?DG(r,a):a),s.complete())}))}});return e?i.pipe(SG(e)):i}(J6(n,e).map(K6)).pipe(pt(Q6))}}(Y6(t)):null}function e5(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ax(t){return t?Array.isArray(t)?t:[t]:[]}function aA(t,e){return Array.isArray(t)?t.includes(e):t===e}function r5(t,e){const n=Ax(e);return Ax(t).forEach(i=>{aA(n,i)||n.push(i)}),n}function i5(t,e){return Ax(e).filter(n=>!aA(t,n))}class s5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Tx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ix(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Us extends s5{get formDirective(){return null}get path(){return null}}class Ad extends s5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class o5{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let a5=(()=>{class t extends o5{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(Ad,2))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&QT("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Wn]})}return t})(),u5=(()=>{class t extends o5{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(Us,10))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&QT("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Wn]})}return t})();const T0="VALID",lA="INVALID",dg="PENDING",I0="DISABLED";class hg{}class c5 extends hg{constructor(e,n){super(),this.value=e,this.source=n}}class Dx extends hg{constructor(e,n){super(),this.pristine=e,this.source=n}}class Nx extends hg{constructor(e,n){super(),this.touched=e,this.source=n}}class cA extends hg{constructor(e,n){super(),this.status=e,this.source=n}}function Px(t){return(dA(t)?t.validators:t)||null}function kx(t,e){return(dA(e)?e.asyncValidators:t)||null}function dA(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class xx{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=t0(()=>this.statusReactive()),this.statusReactive=Lu(void 0),this._pristine=t0(()=>this.pristineReactive()),this.pristineReactive=Lu(!0),this._touched=t0(()=>this.touchedReactive()),this.touchedReactive=Lu(!1),this._events=new je,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Uu(this.statusReactive)}set status(e){Uu(()=>this.statusReactive.set(e))}get valid(){return this.status===T0}get invalid(){return this.status===lA}get pending(){return this.status==dg}get disabled(){return this.status===I0}get enabled(){return this.status!==I0}get pristine(){return Uu(this.pristineReactive)}set pristine(e){Uu(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Uu(this.touchedReactive)}set touched(e){Uu(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(r5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(r5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(i5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(i5(e,this._rawAsyncValidators))}hasValidator(e){return aA(this._rawValidators,e)}hasAsyncValidator(e){return aA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new Nx(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new Nx(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new Dx(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new Dx(!0,r))}markAsPending(e={}){this.status=dg;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new cA(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=I0,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new c5(this.value,r)),this._events.next(new cA(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=T0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===T0||this.status===dg)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new c5(this.value,n)),this._events.next(new cA(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?I0:T0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=dg,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n};const r=K6(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new cA(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Xr,this.statusChanges=new Xr}_calculateStatus(){return this._allControlsDisabled()?I0:this.errors?lA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dg)?dg:this._anyControlsHaveStatus(lA)?lA:T0}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Dx(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Nx(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Cye(t){return Array.isArray(t)?Tx(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Sye(t){return Array.isArray(t)?Ix(t):t||null}(this._rawAsyncValidators)}}class Rx extends xx{constructor(e,n,r){super(Px(n),kx(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function h5(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new fe(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function d5(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new fe(1e3,"");if(!r[n])throw new fe(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const fg=new Fe("CallSetDisabledState",{providedIn:"root",factory:()=>hA}),hA="always";function A0(t,e,n=hA){Ox(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Pye(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&f5(t,e)})}(t,e),function xye(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function kye(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&f5(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Nye(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function mA(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Ox(t,e){const n=function t5(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(e5(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function n5(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(e5(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();mA(e._rawValidators,i),mA(e._rawAsyncValidators,i)}function f5(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Vye={provide:Us,useExisting:$n(()=>yA)},C0=Promise.resolve();let yA=(()=>{class t extends Us{get submitted(){return Uu(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=t0(()=>this.submittedReactive()),this.submittedReactive=Lu(!1),this._directives=new Set,this.ngSubmit=new Xr,this.form=new Rx({},Tx(n),Ix(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){C0.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),A0(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){C0.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){C0.then(()=>{const r=this._findContainer(n.path),i=new Rx({});(function p5(t,e){Ox(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){C0.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){C0.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),function m5(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(ms,10),Ve(Id,10),Ve(fg,8))};static#t=this.\u0275dir=Mt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&li("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nr([Vye]),Wn]})}return t})();function g5(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function y5(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const _5=class extends xx{constructor(e=null,n,r){super(Px(n),kx(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dA(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=y5(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){g5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){g5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){y5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},jye={provide:Ad,useExisting:$n(()=>Lx)},w5=Promise.resolve();let Lx=(()=>{class t extends Ad{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new _5,this._registered=!1,this.name="",this.update=new Xr,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Vx(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===sA?n=s:function Mye(t){return Object.getPrototypeOf(t.constructor)===vf}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Fx(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){A0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){w5.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Km(r);w5.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function fA(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(Us,9),Ve(ms,10),Ve(Id,10),Ve(Qu,10),Ve(Yv,8),Ve(fg,8))};static#t=this.\u0275dir=Mt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Nr([jye]),Wn,fs]})}return t})(),E5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Mt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),c_e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({})}return t})(),h_e=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:fg,useValue:n.callSetDisabledState??hA}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({imports:[c_e]})}return t})();var Bt=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Bt||{});const ec="*";function S0(t,e){return{type:Bt.Trigger,name:t,definitions:e,options:{}}}function Cd(t,e=null){return{type:Bt.Animate,styles:e,timings:t}}function Hs(t){return{type:Bt.Style,styles:t,offset:null}}function D0(t,e,n){return{type:Bt.State,name:t,styles:e,options:n}}function Sd(t,e,n=null){return{type:Bt.Transition,expr:t,animation:e,options:n}}class N0{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class B5{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((n,r)=>null===n||r.totalTime>n.totalTime?r:n,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}var zs=ee(345);zs.A.registerVersion("firebase","10.12.4","app-compat");class b_e extends Kr{constructor(e,n){super()}schedule(e,n=0){return this}}const _A={setInterval(t,e,...n){const{delegate:r}=_A;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=_A;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class U5 extends b_e{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return _A.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&_A.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fi(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const qx={now:()=>(qx.delegate||Date).now(),delegate:void 0};class P0{constructor(e,n=P0.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}P0.now=qx.now;class H5 extends P0{constructor(e,n=P0.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const k0=new H5(U5),w_e=k0;function z5(t){return t instanceof Date&&!isNaN(t)}const E_e=Wi(t=>function(n=null){t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n});function Wx(t,e){const{first:n,each:r,with:i=T_e,scheduler:s=e??k0,meta:o=null}=z5(t)?{first:t}:"number"==typeof t?{each:t}:t;if(null==n&&null==r)throw new TypeError("No timeout provided.");return Ot((a,u)=>{let l,c,h=null,g=0;const _=v=>{c=Hu(u,s,()=>{try{l.unsubscribe(),Bs(i({meta:o,lastValue:h,seen:g})).subscribe(u)}catch(w){u.error(w)}},v)};l=a.subscribe(Pt(u,v=>{c?.unsubscribe(),g++,u.next(h=v),r>0&&_(r)},void 0,void 0,()=>{c?.closed||c?.unsubscribe(),h=null})),!g&&_(null!=n?"number"==typeof n?n:+n-s.now():r)})}function T_e(t){throw new E_e(t)}function G5(t=1/0){let e;e=t&&"object"==typeof t?t:{count:t};const{count:n=1/0,delay:r,resetOnSuccess:i=!1}=e;return n<=0?xs:Ot((s,o)=>{let u,a=0;const l=()=>{let c=!1;u=s.subscribe(Pt(o,h=>{i&&(a=0),o.next(h)},void 0,h=>{if(a++<n){const g=()=>{u?(u.unsubscribe(),u=null,l()):c=!0};if(null!=r){const _="number"==typeof r?function I_e(t=0,e,n=w_e){let r=-1;return null!=e&&(IG(e)?n=e:r=e),new On(i=>{let s=z5(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(r):Bs(r(h,a)),v=Pt(o,()=>{v.unsubscribe(),g()},()=>{o.complete()});_.subscribe(v)}else g()}else o.error(h)})),c&&(u.unsubscribe(),u=null,l())};l()})}class A_e extends je{constructor(e=1/0,n=1/0,r=qx){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function Kx(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new _r({next:()=>{r.unsubscribe(),t()}});return Bs(e(...n)).subscribe(r)}function vA(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,function C_e(t={}){const{connector:e=(()=>new je),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,c=!1,h=!1;const g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),o=u=void 0,c=h=!1},v=()=>{const w=o;_(),w?.unsubscribe()};return Ot((w,I)=>{l++,!h&&!c&&g();const S=u=u??e();I.add(()=>{l--,0===l&&!h&&!c&&(a=Kx(v,i))}),S.subscribe(I),!o&&l>0&&(o=new _r({next:x=>S.next(x),error:x=>{h=!0,g(),a=Kx(_,n,x),S.error(x)},complete:()=>{c=!0,g(),a=Kx(_,r),S.complete()}}),Bs(w).subscribe(o))})(s)}}({connector:()=>new A_e(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}ee(900);var Ju=ee(852);(0,Ju.registerVersion)("firebase","10.12.4","app");const k_e=new class P_e extends H5{}(class N_e extends U5{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),x0=new Wm("ANGULARFIRE2_VERSION");class bA{constructor(){return((t,e)=>{const n=(0,Ju.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(R_e)}}const R_e="app-check";function pg(){}class q5{zone;delegate;constructor(e,n=k_e){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class O_e{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pg,{},pg,pg)),n.pipe(Si({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wA=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new q5(Zone.current)),this.insideAngular=n.run(()=>new q5(Zone.current,k0)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Se(en))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mg(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function W5(t){return t.pipe(zu(mg().outsideAngular))}function Gs(t){return function F_e(t){return function(n){return(n=n.lift(new O_e(t.ngZone))).pipe(Xm(t.outsideAngular),zu(t.insideAngular))}}(mg())(t)}const L_e=["ngOnDestroy"],K5=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(L_e.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(c=>{const h=c?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,h),h})})})});class J5{constructor(e){return e}}const gg=new Fe("angularfire2.app.options"),yg=new Fe("angularfire2.app.name");function R0(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=zs.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>zs.A.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;$_e("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new J5(o)}const $_e=(t,...e)=>{},j_e={provide:J5,useFactory:R0,deps:[gg,en,[new xh,yg]]};let B_e=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:gg,useValue:n},{provide:yg,useValue:r}]}}constructor(n){zs.A.registerVersion("angularfire",x0.full,"core"),zs.A.registerVersion("angularfire",x0.full,"app-compat"),zs.A.registerVersion("angular",sce.full,n.toString())}static \u0275fac=function(r){return new(r||t)(Se(ya))};static \u0275mod=ri({type:t});static \u0275inj=Jr({providers:[j_e]})}return t})();function EA(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function U_e(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(Y5("error",`${e} was already initialized on the ${n} Firebase App with different settings.${H_e?" You may need to reload as Firebase is not HMR aware.":""}`),Y5("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const H_e=typeof module<"u"&&!!module.hot,Y5=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];const G_e=new Fe("angularfire2.functions.origin"),q_e=new Fe("angularfire2.functions.region"),W_e=new Fe("angularfire2.functions.use-emulator");let Qx=(()=>{class t{httpsCallable;constructor(n,r,i,s,o,a,u,l){const c=u,h=It(void 0).pipe(zu(s.outsideAngular),Pr(()=>Promise.resolve().then(ee.bind(ee,900))),pt(()=>R0(n,i,r)),pt(g=>EA(`${g.name}.functions.${o||a}`,"AngularFireFunctions",g.name,()=>{let _;if(o&&a)throw new Error("REGION and ORIGIN can't be used at the same time.");return _=g.functions(o||a||void 0),c&&_.useEmulator(...c),_},[o,a,c])),vA({bufferSize:1,refCount:!1}));return this.httpsCallable=(g,_)=>v=>vn(h).pipe(zu(s.insideAngular),Pr(w=>w.httpsCallable(g,_)(v)),pt(w=>w.data)),K5(this,h,i)}static \u0275fac=function(r){return new(r||t)(Se(gg),Se(yg,8),Se(en),Se(wA),Se(q_e,8),Se(G_e,8),Se(W_e,8),Se(bA,8))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function X5(t,e){return Nn(e)?Pr(()=>t,e):Pr(()=>t)}ee(492);const Z5=new Fe("angularfire2.auth.use-emulator"),eq=new Fe("angularfire2.auth.settings"),tq=new Fe("angularfire2.auth.tenant-id"),nq=new Fe("angularfire2.auth.langugage-code"),rq=new Fe("angularfire2.auth.use-device-language"),iq=new Fe("angularfire.auth.persistence"),sq=(t,e,n,r,i,s,o,a)=>EA(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,c]of Object.entries(o))u.settings[l]=c;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let Jx=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,l,c,h,g,_){const v=new je,w=It(void 0).pipe(zu(o.outsideAngular),Pr(()=>s.runOutsideAngular(()=>Promise.resolve().then(ee.bind(ee,492)))),pt(()=>R0(n,s,r)),pt(I=>sq(I,s,a,l,c,h,u,g)),vA({bufferSize:1,refCount:!1}));if(PI(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=It(null);else{w.pipe(wd()).subscribe();const I=w.pipe(Pr(O=>O.getRedirectResult().then(U=>U,()=>null)),Gs,vA({bufferSize:1,refCount:!1})),S=w.pipe(Pr(O=>new On(U=>({unsubscribe:s.runOutsideAngular(()=>O.onAuthStateChanged(he=>U.next(he),he=>U.error(he),()=>U.complete()))})))),x=w.pipe(Pr(O=>new On(U=>({unsubscribe:s.runOutsideAngular(()=>O.onIdTokenChanged(he=>U.next(he),he=>U.error(he),()=>U.complete()))}))));this.authState=I.pipe(X5(S),Xm(o.outsideAngular),zu(o.insideAngular)),this.user=I.pipe(X5(x),Xm(o.outsideAngular),zu(o.insideAngular)),this.idToken=this.user.pipe(Pr(O=>O?vn(O.getIdToken()):It(null))),this.idTokenResult=this.user.pipe(Pr(O=>O?vn(O.getIdTokenResult()):It(null))),this.credential=function K_e(...t){const e=u0(t),n=function Ope(t,e){return"number"==typeof Wk(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Bs(r[0]):Zm(n)(vn(r,e)):lu}(I,v,this.authState.pipe(wa(O=>!O))).pipe(pt(O=>O?.user?O:null),Xm(o.outsideAngular),zu(o.insideAngular))}return K5(this,w,s,{spy:{apply:(I,S,x)=>{(I.startsWith("signIn")||I.startsWith("createUser"))&&x.then(O=>v.next(O))}}})}static \u0275fac=function(r){return new(r||t)(Se(gg),Se(yg,8),Se(ya),Se(en),Se(wA),Se(Z5,8),Se(eq,8),Se(tq,8),Se(nq,8),Se(rq,8),Se(iq,8),Se(bA,8))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),J_e=(()=>{class t{constructor(){zs.A.registerVersion("angularfire",x0.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ri({type:t});static \u0275inj=Jr({providers:[Jx]})}return t})();function Yx(){return Ot((t,e)=>{let n,r=!1;t.subscribe(Pt(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}function X_e(t,e){return t===e}var Ef,uq,TA=ee(362),Yu=ee(41),rn=ee(76),oq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aq={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(R,k,F){F||(F=0);var z=Array(16);if("string"==typeof k)for(var q=0;16>q;++q)z[q]=k.charCodeAt(F++)|k.charCodeAt(F++)<<8|k.charCodeAt(F++)<<16|k.charCodeAt(F++)<<24;else for(q=0;16>q;++q)z[q]=k[F++]|k[F++]<<8|k[F++]<<16|k[F++]<<24;var Z=R.g[3],$=(k=R.g[0])+(Z^(F=R.g[1])&((q=R.g[2])^Z))+z[0]+3614090360&4294967295;$=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=(F=(q=(Z=(k=F+($<<7&4294967295|$>>>25))+(($=Z+(q^k&(F^q))+z[1]+3905402710&4294967295)<<12&4294967295|$>>>20))+(($=q+(F^Z&(k^F))+z[2]+606105819&4294967295)<<17&4294967295|$>>>15))+(($=F+(k^q&(Z^k))+z[3]+3250441966&4294967295)<<22&4294967295|$>>>10))+(($=k+(Z^F&(q^Z))+z[4]+4118548399&4294967295)<<7&4294967295|$>>>25))+(($=Z+(q^k&(F^q))+z[5]+1200080426&4294967295)<<12&4294967295|$>>>20))+(($=q+(F^Z&(k^F))+z[6]+2821735955&4294967295)<<17&4294967295|$>>>15))+(($=F+(k^q&(Z^k))+z[7]+4249261313&4294967295)<<22&4294967295|$>>>10))+(($=k+(Z^F&(q^Z))+z[8]+1770035416&4294967295)<<7&4294967295|$>>>25))+(($=Z+(q^k&(F^q))+z[9]+2336552879&4294967295)<<12&4294967295|$>>>20))+(($=q+(F^Z&(k^F))+z[10]+4294925233&4294967295)<<17&4294967295|$>>>15))+(($=F+(k^q&(Z^k))+z[11]+2304563134&4294967295)<<22&4294967295|$>>>10))+(($=k+(Z^F&(q^Z))+z[12]+1804603682&4294967295)<<7&4294967295|$>>>25))+(($=Z+(q^k&(F^q))+z[13]+4254626195&4294967295)<<12&4294967295|$>>>20))+(($=q+(F^Z&(k^F))+z[14]+2792965006&4294967295)<<17&4294967295|$>>>15))+(($=F+(k^q&(Z^k))+z[15]+1236535329&4294967295)<<22&4294967295|$>>>10))+(($=k+(q^Z&(F^q))+z[1]+4129170786&4294967295)<<5&4294967295|$>>>27))+(($=Z+(F^q&(k^F))+z[6]+3225465664&4294967295)<<9&4294967295|$>>>23))+(($=q+(k^F&(Z^k))+z[11]+643717713&4294967295)<<14&4294967295|$>>>18))+(($=F+(Z^k&(q^Z))+z[0]+3921069994&4294967295)<<20&4294967295|$>>>12))+(($=k+(q^Z&(F^q))+z[5]+3593408605&4294967295)<<5&4294967295|$>>>27))+(($=Z+(F^q&(k^F))+z[10]+38016083&4294967295)<<9&4294967295|$>>>23))+(($=q+(k^F&(Z^k))+z[15]+3634488961&4294967295)<<14&4294967295|$>>>18))+(($=F+(Z^k&(q^Z))+z[4]+3889429448&4294967295)<<20&4294967295|$>>>12))+(($=k+(q^Z&(F^q))+z[9]+568446438&4294967295)<<5&4294967295|$>>>27))+(($=Z+(F^q&(k^F))+z[14]+3275163606&4294967295)<<9&4294967295|$>>>23))+(($=q+(k^F&(Z^k))+z[3]+4107603335&4294967295)<<14&4294967295|$>>>18))+(($=F+(Z^k&(q^Z))+z[8]+1163531501&4294967295)<<20&4294967295|$>>>12))+(($=k+(q^Z&(F^q))+z[13]+2850285829&4294967295)<<5&4294967295|$>>>27))+(($=Z+(F^q&(k^F))+z[2]+4243563512&4294967295)<<9&4294967295|$>>>23))+(($=q+(k^F&(Z^k))+z[7]+1735328473&4294967295)<<14&4294967295|$>>>18))+(($=F+(Z^k&(q^Z))+z[12]+2368359562&4294967295)<<20&4294967295|$>>>12))+(($=k+(F^q^Z)+z[5]+4294588738&4294967295)<<4&4294967295|$>>>28))+(($=Z+(k^F^q)+z[8]+2272392833&4294967295)<<11&4294967295|$>>>21))+(($=q+(Z^k^F)+z[11]+1839030562&4294967295)<<16&4294967295|$>>>16))+(($=F+(q^Z^k)+z[14]+4259657740&4294967295)<<23&4294967295|$>>>9))+(($=k+(F^q^Z)+z[1]+2763975236&4294967295)<<4&4294967295|$>>>28))+(($=Z+(k^F^q)+z[4]+1272893353&4294967295)<<11&4294967295|$>>>21))+(($=q+(Z^k^F)+z[7]+4139469664&4294967295)<<16&4294967295|$>>>16))+(($=F+(q^Z^k)+z[10]+3200236656&4294967295)<<23&4294967295|$>>>9))+(($=k+(F^q^Z)+z[13]+681279174&4294967295)<<4&4294967295|$>>>28))+(($=Z+(k^F^q)+z[0]+3936430074&4294967295)<<11&4294967295|$>>>21))+(($=q+(Z^k^F)+z[3]+3572445317&4294967295)<<16&4294967295|$>>>16))+(($=F+(q^Z^k)+z[6]+76029189&4294967295)<<23&4294967295|$>>>9))+(($=k+(F^q^Z)+z[9]+3654602809&4294967295)<<4&4294967295|$>>>28))+(($=Z+(k^F^q)+z[12]+3873151461&4294967295)<<11&4294967295|$>>>21))+(($=q+(Z^k^F)+z[15]+530742520&4294967295)<<16&4294967295|$>>>16))+(($=F+(q^Z^k)+z[2]+3299628645&4294967295)<<23&4294967295|$>>>9))+(($=k+(q^(F|~Z))+z[0]+4096336452&4294967295)<<6&4294967295|$>>>26))+(($=Z+(F^(k|~q))+z[7]+1126891415&4294967295)<<10&4294967295|$>>>22))+(($=q+(k^(Z|~F))+z[14]+2878612391&4294967295)<<15&4294967295|$>>>17))+(($=F+(Z^(q|~k))+z[5]+4237533241&4294967295)<<21&4294967295|$>>>11))+(($=k+(q^(F|~Z))+z[12]+1700485571&4294967295)<<6&4294967295|$>>>26))+(($=Z+(F^(k|~q))+z[3]+2399980690&4294967295)<<10&4294967295|$>>>22))+(($=q+(k^(Z|~F))+z[10]+4293915773&4294967295)<<15&4294967295|$>>>17))+(($=F+(Z^(q|~k))+z[1]+2240044497&4294967295)<<21&4294967295|$>>>11))+(($=k+(q^(F|~Z))+z[8]+1873313359&4294967295)<<6&4294967295|$>>>26))+(($=Z+(F^(k|~q))+z[15]+4264355552&4294967295)<<10&4294967295|$>>>22))+(($=q+(k^(Z|~F))+z[6]+2734768916&4294967295)<<15&4294967295|$>>>17))+(($=F+(Z^(q|~k))+z[13]+1309151649&4294967295)<<21&4294967295|$>>>11))+((Z=(k=F+(($=k+(q^(F|~Z))+z[4]+4149444226&4294967295)<<6&4294967295|$>>>26))+(($=Z+(F^(k|~q))+z[11]+3174756917&4294967295)<<10&4294967295|$>>>22))^((q=Z+(($=q+(k^(Z|~F))+z[2]+718787259&4294967295)<<15&4294967295|$>>>17))|~k))+z[9]+3951481745&4294967295,R.g[0]=R.g[0]+k&4294967295,R.g[1]=R.g[1]+(q+($<<21&4294967295|$>>>11))&4294967295,R.g[2]=R.g[2]+q&4294967295,R.g[3]=R.g[3]+Z&4294967295}function o(R,k){this.h=k;for(var F=[],z=!0,q=R.length-1;0<=q;q--){var Z=0|R[q];z&&Z==k||(F[q]=Z,z=!1)}this.g=F}(function e(R,k){function F(){}F.prototype=k.prototype,R.D=k.prototype,R.prototype=new F,R.prototype.constructor=R,R.C=function(z,q,Z){for(var $=Array(arguments.length-2),Jn=2;Jn<arguments.length;Jn++)$[Jn-2]=arguments[Jn];return k.prototype[q].apply(z,$)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(R,k){void 0===k&&(k=R.length);for(var F=k-this.blockSize,z=this.B,q=this.h,Z=0;Z<k;){if(0==q)for(;Z<=F;)i(this,R,Z),Z+=this.blockSize;if("string"==typeof R){for(;Z<k;)if(z[q++]=R.charCodeAt(Z++),q==this.blockSize){i(this,z),q=0;break}}else for(;Z<k;)if(z[q++]=R[Z++],q==this.blockSize){i(this,z),q=0;break}}this.h=q,this.o+=k},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var k=1;k<R.length-8;++k)R[k]=0;var F=8*this.o;for(k=R.length-8;k<R.length;++k)R[k]=255&F,F/=256;for(this.u(R),R=Array(16),k=F=0;4>k;++k)for(var z=0;32>z;z+=8)R[F++]=this.g[k]>>>z&255;return R};var a={};function u(R){return-128<=R&&128>R?function s(R,k){var F=a;return Object.prototype.hasOwnProperty.call(F,R)?F[R]:F[R]=k(R)}(R,function(k){return new o([0|k],0>k?-1:0)}):new o([0|R],0>R?-1:0)}function l(R){if(isNaN(R)||!isFinite(R))return h;if(0>R)return I(l(-R));for(var k=[],F=1,z=0;R>=F;z++)k[z]=R/F|0,F*=4294967296;return new o(k,0)}var h=u(0),g=u(1),_=u(16777216);function v(R){if(0!=R.h)return!1;for(var k=0;k<R.g.length;k++)if(0!=R.g[k])return!1;return!0}function w(R){return-1==R.h}function I(R){for(var k=R.g.length,F=[],z=0;z<k;z++)F[z]=~R.g[z];return new o(F,~R.h).add(g)}function S(R,k){return R.add(I(k))}function x(R,k){for(;(65535&R[k])!=R[k];)R[k+1]+=R[k]>>>16,R[k]&=65535,k++}function O(R,k){this.g=R,this.h=k}function U(R,k){if(v(k))throw Error("division by zero");if(v(R))return new O(h,h);if(w(R))return k=U(I(R),k),new O(I(k.g),I(k.h));if(w(k))return k=U(R,I(k)),new O(I(k.g),k.h);if(30<R.g.length){if(w(R)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var F=g,z=k;0>=z.l(R);)F=he(F),z=he(z);var q=de(F,1),Z=de(z,1);for(z=de(z,2),F=de(F,2);!v(z);){var $=Z.add(z);0>=$.l(R)&&(q=q.add(F),Z=$),z=de(z,1),F=de(F,1)}return k=S(R,q.j(k)),new O(q,k)}for(q=h;0<=R.l(k);){for(F=Math.max(1,Math.floor(R.m()/k.m())),z=48>=(z=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,z-48),$=(Z=l(F)).j(k);w($)||0<$.l(R);)$=(Z=l(F-=z)).j(k);v(Z)&&(Z=g),q=q.add(Z),R=S(R,$)}return new O(q,R)}function he(R){for(var k=R.g.length+1,F=[],z=0;z<k;z++)F[z]=R.i(z)<<1|R.i(z-1)>>>31;return new o(F,R.h)}function de(R,k){var F=k>>5;k%=32;for(var z=R.g.length-F,q=[],Z=0;Z<z;Z++)q[Z]=0<k?R.i(Z+F)>>>k|R.i(Z+F+1)<<32-k:R.i(Z+F);return new o(q,R.h)}(t=o.prototype).m=function(){if(w(this))return-I(this).m();for(var R=0,k=1,F=0;F<this.g.length;F++){var z=this.i(F);R+=(0<=z?z:4294967296+z)*k,k*=4294967296}return R},t.toString=function(R){if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if(v(this))return"0";if(w(this))return"-"+I(this).toString(R);for(var k=l(Math.pow(R,6)),F=this,z="";;){var q=U(F,k).g,Z=((0<(F=S(F,q.j(k))).g.length?F.g[0]:F.h)>>>0).toString(R);if(v(F=q))return Z+z;for(;6>Z.length;)Z="0"+Z;z=Z+z}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h},t.l=function(R){return w(R=S(this,R))?-1:v(R)?0:1},t.abs=function(){return w(this)?I(this):this},t.add=function(R){for(var k=Math.max(this.g.length,R.g.length),F=[],z=0,q=0;q<=k;q++){var Z=z+(65535&this.i(q))+(65535&R.i(q)),$=(Z>>>16)+(this.i(q)>>>16)+(R.i(q)>>>16);z=$>>>16,F[q]=($&=65535)<<16|(Z&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},t.j=function(R){if(v(this)||v(R))return h;if(w(this))return w(R)?I(this).j(I(R)):I(I(this).j(R));if(w(R))return I(this.j(I(R)));if(0>this.l(_)&&0>R.l(_))return l(this.m()*R.m());for(var k=this.g.length+R.g.length,F=[],z=0;z<2*k;z++)F[z]=0;for(z=0;z<this.g.length;z++)for(var q=0;q<R.g.length;q++){var Z=this.i(z)>>>16,$=65535&this.i(z),Jn=R.i(q)>>>16,Gr=65535&R.i(q);F[2*z+2*q]+=$*Gr,x(F,2*z+2*q),F[2*z+2*q+1]+=Z*Gr,x(F,2*z+2*q+1),F[2*z+2*q+1]+=$*Jn,x(F,2*z+2*q+1),F[2*z+2*q+2]+=Z*Jn,x(F,2*z+2*q+2)}for(z=0;z<k;z++)F[z]=F[2*z+1]<<16|F[2*z];for(z=k;z<2*k;z++)F[z]=0;return new o(F,0)},t.A=function(R){return U(this,R).h},t.and=function(R){for(var k=Math.max(this.g.length,R.g.length),F=[],z=0;z<k;z++)F[z]=this.i(z)&R.i(z);return new o(F,this.h&R.h)},t.or=function(R){for(var k=Math.max(this.g.length,R.g.length),F=[],z=0;z<k;z++)F[z]=this.i(z)|R.i(z);return new o(F,this.h|R.h)},t.xor=function(R){for(var k=Math.max(this.g.length,R.g.length),F=[],z=0;z<k;z++)F[z]=this.i(z)^R.i(z);return new o(F,this.h^R.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uq=aq.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function c(R,k){if(0==R.length)throw Error("number format error: empty string");if(2>(k=k||10)||36<k)throw Error("radix out of range: "+k);if("-"==R.charAt(0))return I(c(R.substring(1),k));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=l(Math.pow(k,8)),z=h,q=0;q<R.length;q+=8){var Z=Math.min(8,R.length-q),$=parseInt(R.substring(q,q+Z),k);8>Z?(Z=l(Math.pow(k,Z)),z=z.j(Z).add(l($))):z=(z=z.j(F)).add(l($))}return z},Ef=aq.Integer=o}).apply(typeof oq<"u"?oq:typeof self<"u"?self:typeof window<"u"?window:{});var lq,cq,O0,dq,AA,Xx,hq,fq,pq,IA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tc={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,b,A){return p==Array.prototype||p==Object.prototype||(p[b]=A.value),p},r=function n(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof IA&&IA];for(var b=0;b<p.length;++b){var A=p[b];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}(this);!function i(p,b){if(b)e:{var A=r;p=p.split(".");for(var D=0;D<p.length-1;D++){var se=p[D];if(!(se in A))break e;A=A[se]}(b=b(D=A[p=p[p.length-1]]))!=D&&null!=b&&e(A,p,{configurable:!0,writable:!0,value:b})}}("Array.prototype.values",function(p){return p||function(){return function s(p,b){p instanceof String&&(p+="");var A=0,D=!1,se={next:function(){if(!D&&A<p.length){var _e=A++;return{value:b(_e,p[_e]),done:!1}}return D=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}(this,function(b,A){return A})}});var o=o||{},a=this||self;function u(p){var b=typeof p;return"array"==(b="object"!=b?b:p?Array.isArray(p)?"array":b:"null")||"object"==b&&"number"==typeof p.length}function l(p){var b=typeof p;return"object"==b&&null!=p||"function"==b}function c(p,b,A){return p.call.apply(p.bind,arguments)}function h(p,b,A){if(!p)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,D),p.apply(b,se)}}return function(){return p.apply(b,arguments)}}function g(p,b,A){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:h).apply(null,arguments)}function _(p,b){var A=Array.prototype.slice.call(arguments,1);return function(){var D=A.slice();return D.push.apply(D,arguments),p.apply(this,D)}}function v(p,b){function A(){}A.prototype=b.prototype,p.aa=b.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function(D,se,_e){for(var Je=Array(arguments.length-2),sr=2;sr<arguments.length;sr++)Je[sr-2]=arguments[sr];return b.prototype[se].apply(D,Je)}}function w(p){const b=p.length;if(0<b){const A=Array(b);for(let D=0;D<b;D++)A[D]=p[D];return A}return[]}function I(p,b){for(let A=1;A<arguments.length;A++){const D=arguments[A];if(u(D)){const se=p.length||0,_e=D.length||0;p.length=se+_e;for(let Je=0;Je<_e;Je++)p[se+Je]=D[Je]}else p.push(D)}}function x(p){return/^[\s\xa0]*$/.test(p)}function O(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function U(p){return U[" "](p),p}U[" "]=function(){};var he=!(-1==O().indexOf("Gecko")||-1!=O().toLowerCase().indexOf("webkit")&&-1==O().indexOf("Edge")||-1!=O().indexOf("Trident")||-1!=O().indexOf("MSIE")||-1!=O().indexOf("Edge"));function de(p,b,A){for(const D in p)b.call(A,p[D],D,p)}function k(p){const b={};for(const A in p)b[A]=p[A];return b}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(p,b){let A,D;for(let se=1;se<arguments.length;se++){for(A in D=arguments[se],D)p[A]=D[A];for(let _e=0;_e<F.length;_e++)A=F[_e],Object.prototype.hasOwnProperty.call(D,A)&&(p[A]=D[A])}}function q(p){var b=1;p=p.split(":");const A=[];for(;0<b&&p.length;)A.push(p.shift()),b--;return p.length&&A.push(p.join(":")),A}function Z(p){a.setTimeout(()=>{throw p},0)}function $(){var p=Kt;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}var Gr=new class S{constructor(b,A){this.i=b,this.j=A,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}(()=>new st,p=>p.reset());class st{constructor(){this.next=this.g=this.h=null}set(b,A){this.h=b,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,_t=!1,Kt=new class Jn{constructor(){this.h=this.g=null}add(b,A){const D=Gr.get();D.set(b,A),this.h?this.h.next=D:this.g=D,this.h=D}},qr=()=>{const p=a.Promise.resolve(void 0);ut=()=>{p.then(Oa)}};var Oa=()=>{for(var p;p=$();){try{p.h.call(p.g)}catch(A){Z(A)}var b=Gr;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}_t=!1};function ei(){this.s=this.s,this.C=this.C}function Ir(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}ei.prototype.s=!1,ei.prototype.ma=function(){this.s||(this.s=!0,this.N())},ei.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ir.prototype.h=function(){this.defaultPrevented=!0};var Ar=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};a.addEventListener("test",A,b),a.removeEventListener("test",A,b)}catch{}return p}();function hh(p,b){if(Ir.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,D=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(he){e:{try{U(b.nodeName);var se=!0;break e}catch{}se=!1}se||(b=null)}}else"mouseover"==A?b=p.fromElement:"mouseout"==A&&(b=p.toElement);this.relatedTarget=b,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:JV[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&hh.aa.h.call(this)}}v(hh,Ir);var JV={2:"touch",3:"pen",4:"mouse"};hh.prototype.h=function(){hh.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ti="closure_listenable_"+(1e6*Math.random()|0),Rc=0;function wo(p,b,A,D,se){this.listener=p,this.proxy=null,this.src=b,this.type=A,this.capture=!!D,this.ha=se,this.key=++Rc,this.da=this.fa=!1}function Oc(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function fh(p){this.src=p,this.g={},this.h=0}function YV(p,b){var A=b.type;if(A in p.g){var _e,D=p.g[A],se=Array.prototype.indexOf.call(D,b,void 0);(_e=0<=se)&&Array.prototype.splice.call(D,se,1),_e&&(Oc(b),0==p.g[A].length&&(delete p.g[A],p.h--))}}function XV(p,b,A,D){for(var se=0;se<p.length;++se){var _e=p[se];if(!_e.da&&_e.listener==b&&_e.capture==!!A&&_e.ha==D)return se}return-1}fh.prototype.add=function(p,b,A,D,se){var _e=p.toString();(p=this.g[_e])||(p=this.g[_e]=[],this.h++);var Je=XV(p,b,D,se);return-1<Je?(b=p[Je],A||(b.fa=!1)):((b=new wo(b,this.src,_e,!!D,se)).fa=A,p.push(b)),b};var ZV="closure_lm_"+(1e6*Math.random()|0),eL={};function dee(p,b,A,D,se){if(D&&D.once)return fee(p,b,A,D,se);if(Array.isArray(b)){for(var _e=0;_e<b.length;_e++)dee(p,b[_e],A,D,se);return null}return A=iL(A),p&&p[ti]?p.K(b,A,l(D)?!!D.capture:!!D,se):hee(p,b,A,!1,D,se)}function hee(p,b,A,D,se,_e){if(!b)throw Error("Invalid event type");var Je=l(se)?!!se.capture:!!se,sr=nL(p);if(sr||(p[ZV]=sr=new fh(p)),(A=sr.add(b,A,D,Je,_e)).proxy)return A;if(D=function pqe(){const b=mqe;return function p(A){return b.call(p.src,p.listener,A)}}(),A.proxy=D,D.src=p,D.listener=A,p.addEventListener)Ar||(se=Je),void 0===se&&(se=!1),p.addEventListener(b.toString(),D,se);else if(p.attachEvent)p.attachEvent(mee(b.toString()),D);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(D)}return A}function fee(p,b,A,D,se){if(Array.isArray(b)){for(var _e=0;_e<b.length;_e++)fee(p,b[_e],A,D,se);return null}return A=iL(A),p&&p[ti]?p.L(b,A,l(D)?!!D.capture:!!D,se):hee(p,b,A,!0,D,se)}function pee(p,b,A,D,se){if(Array.isArray(b))for(var _e=0;_e<b.length;_e++)pee(p,b[_e],A,D,se);else D=l(D)?!!D.capture:!!D,A=iL(A),p&&p[ti]?(p=p.i,(b=String(b).toString())in p.g&&-1<(A=XV(_e=p.g[b],A,D,se))&&(Oc(_e[A]),Array.prototype.splice.call(_e,A,1),0==_e.length&&(delete p.g[b],p.h--))):p&&(p=nL(p))&&(b=p.g[b.toString()],p=-1,b&&(p=XV(b,A,D,se)),(A=-1<p?b[p]:null)&&tL(A))}function tL(p){if("number"!=typeof p&&p&&!p.da){var b=p.src;if(b&&b[ti])YV(b.i,p);else{var A=p.type,D=p.proxy;b.removeEventListener?b.removeEventListener(A,D,p.capture):b.detachEvent?b.detachEvent(mee(A),D):b.addListener&&b.removeListener&&b.removeListener(D),(A=nL(b))?(YV(A,p),0==A.h&&(A.src=null,b[ZV]=null)):Oc(p)}}}function mee(p){return p in eL?eL[p]:eL[p]="on"+p}function mqe(p,b){if(p.da)p=!0;else{b=new hh(b,this);var A=p.listener,D=p.ha||p.src;p.fa&&tL(p),p=A.call(D,b)}return p}function nL(p){return(p=p[ZV])instanceof fh?p:null}var rL="__closure_events_fn_"+(1e9*Math.random()>>>0);function iL(p){return"function"==typeof p?p:(p[rL]||(p[rL]=function(b){return p.handleEvent(b)}),p[rL])}function Ns(){ei.call(this),this.i=new fh(this),this.M=this,this.F=null}function Zs(p,b){var A,D=p.F;if(D)for(A=[];D;D=D.F)A.push(D);if(p=p.M,D=b.type||b,"string"==typeof b)b=new Ir(b,p);else if(b instanceof Ir)b.target=b.target||p;else{var se=b;z(b=new Ir(D,p),se)}if(se=!0,A)for(var _e=A.length-1;0<=_e;_e--){var Je=b.g=A[_e];se=oD(Je,D,!0,b)&&se}if(se=oD(Je=b.g=p,D,!0,b)&&se,se=oD(Je,D,!1,b)&&se,A)for(_e=0;_e<A.length;_e++)se=oD(Je=b.g=A[_e],D,!1,b)&&se}function oD(p,b,A,D){if(!(b=p.i.g[String(b)]))return!0;b=b.concat();for(var se=!0,_e=0;_e<b.length;++_e){var Je=b[_e];if(Je&&!Je.da&&Je.capture==A){var sr=Je.listener,ls=Je.ha||Je.src;Je.fa&&YV(p.i,Je),se=!1!==sr.call(ls,D)&&se}}return se&&!D.defaultPrevented}function gee(p,b,A){if("function"==typeof p)A&&(p=g(p,A));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=g(p.handleEvent,p)}return 2147483647<Number(b)?-1:a.setTimeout(p,b||0)}function yee(p){p.g=gee(()=>{p.g=null,p.i&&(p.i=!1,yee(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}v(Ns,ei),Ns.prototype[ti]=!0,Ns.prototype.removeEventListener=function(p,b,A,D){pee(this,p,b,A,D)},Ns.prototype.N=function(){if(Ns.aa.N.call(this),this.i){var b,p=this.i;for(b in p.g){for(var A=p.g[b],D=0;D<A.length;D++)Oc(A[D]);delete p.g[b],p.h--}}this.F=null},Ns.prototype.K=function(p,b,A,D){return this.i.add(String(p),b,!1,A,D)},Ns.prototype.L=function(p,b,A,D){return this.i.add(String(p),b,!0,A,D)};class gqe extends ei{constructor(b,A){super(),this.m=b,this.l=A,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:yee(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dw(p){ei.call(this),this.h=p,this.g={}}v(dw,ei);var _ee=[];function vee(p){de(p.g,function(b,A){this.g.hasOwnProperty(A)&&tL(b)},p),p.g={}}dw.prototype.N=function(){dw.aa.N.call(this),vee(this)},dw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sL=a.JSON.stringify,yqe=a.JSON.parse,_qe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function oL(){}function wee(){}oL.prototype.h=null;var hw={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function aL(){Ir.call(this,"d")}function uL(){Ir.call(this,"c")}v(aL,Ir),v(uL,Ir);var _p={},Eee=null;function aD(){return Eee=Eee||new Ns}function Tee(p){Ir.call(this,_p.La,p)}function fw(p){const b=aD();Zs(b,new Tee(b))}function Iee(p,b){Ir.call(this,_p.STAT_EVENT,p),this.stat=b}function eo(p){const b=aD();Zs(b,new Iee(b,p))}function Aee(p,b){Ir.call(this,_p.Ma,p),this.size=b}function pw(p,b){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},b)}function mw(){this.g=!0}function $y(p,b,A,D){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+function Eqe(p,b){if(!p.g)return b;if(!b)return null;try{var A=JSON.parse(b);if(A)for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var D=A[p];if(!(2>D.length)){var se=D[1];if(Array.isArray(se)&&!(1>se.length)){var _e=se[0];if("noop"!=_e&&"stop"!=_e&&"close"!=_e)for(var Je=1;Je<se.length;Je++)se[Je]=""}}}return sL(A)}catch{return b}}(p,A)+(D?" "+D:"")})}_p.La="serverreachability",v(Tee,Ir),_p.STAT_EVENT="statevent",v(Iee,Ir),_p.Ma="timingevent",v(Aee,Ir),mw.prototype.xa=function(){this.g=!1},mw.prototype.info=function(){};var lL,uD={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cee={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function lD(){}function ph(p,b,A,D){this.j=p,this.i=b,this.l=A,this.R=D||1,this.U=new dw(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new See}function See(){this.i=null,this.g="",this.h=!1}v(lD,oL),lD.prototype.g=function(){return new XMLHttpRequest},lD.prototype.i=function(){return{}},lL=new lD;var Dee={},cL={};function dL(p,b,A){p.L=1,p.v=fD(Mc(b)),p.m=A,p.P=!0,Nee(p,null)}function Nee(p,b){p.F=Date.now(),cD(p),p.A=Mc(p.v);var A=p.A,D=p.R;Array.isArray(D)||(D=[String(D)]),Hee(A.i,"t",D),p.C=0,A=p.j.J,p.h=new See,p.g=ate(p.j,A?b:null,!p.m),0<p.O&&(p.M=new gqe(g(p.Y,p,p.g),p.O)),b=p.U,A=p.g,D=p.ca;var se="readystatechange";Array.isArray(se)||(se&&(_ee[0]=se.toString()),se=_ee);for(var _e=0;_e<se.length;_e++){var Je=dee(A,se[_e],D||b.handleEvent,!1,b.h||b);if(!Je)break;b.g[Je.key]=Je}b=p.H?k(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),fw(),function vqe(p,b,A,D,se,_e){p.info(function(){if(p.g)if(_e)for(var Je="",sr=_e.split("&"),ls=0;ls<sr.length;ls++){var xn=sr[ls].split("=");if(1<xn.length){var Ps=xn[0];xn=xn[1];var ks=Ps.split("_");Je=2<=ks.length&&"type"==ks[1]?Je+(Ps+"=")+xn+"&":Je+(Ps+"=redacted&")}}else Je=null;else Je=_e;return"XMLHTTP REQ ("+D+") [attempt "+se+"]: "+b+"\n"+A+"\n"+Je})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Pee(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function Tqe(p,b){var A=p.C,D=b.indexOf("\n",A);return-1==D?cL:(A=Number(b.substring(A,D)),isNaN(A)?Dee:(D+=1)+A>b.length?cL:(b=b.slice(D,D+A),p.C=D+A,b))}function cD(p){p.S=Date.now()+p.I,kee(p,p.I)}function kee(p,b){if(null!=p.B)throw Error("WatchDog timer not null");p.B=pw(g(p.ba,p),b)}function hL(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function gw(p){0==p.j.G||p.J||rte(p.j,p)}function vp(p){hL(p);var b=p.M;b&&"function"==typeof b.ma&&b.ma(),p.M=null,vee(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function fL(p,b){try{var A=p.j;if(0!=A.G&&(A.g==p||pL(A.h,p)))if(!p.K&&pL(A.h,p)&&3==A.G){try{var D=A.Da.g.parse(b)}catch{D=null}if(Array.isArray(D)&&3==D.length){var se=D;if(0==se[0]){e:if(!A.u){if(A.g){if(!(A.g.F+3e3<p.F))break e;_D(A),gD(A)}_L(A),eo(18)}}else A.za=se[1],0<A.za-A.T&&37500>se[2]&&A.F&&0==A.v&&!A.C&&(A.C=pw(g(A.Za,A),6e3));if(1>=Oee(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else wp(A,11)}else if((p.K||A.g==p)&&_D(A),!x(b))for(se=A.Da.g.parse(b),b=0;b<se.length;b++){let xn=se[b];if(A.T=xn[0],xn=xn[1],2==A.G)if("c"==xn[0]){A.K=xn[1],A.ia=xn[2];const Ps=xn[3];null!=Ps&&(A.la=Ps,A.j.info("VER="+A.la));const ks=xn[4];null!=ks&&(A.Aa=ks,A.j.info("SVER="+A.Aa));const Uy=xn[5];null!=Uy&&"number"==typeof Uy&&0<Uy&&(A.L=D=1.5*Uy,A.j.info("backChannelRequestTimeoutMs_="+D)),D=A;const Au=p.g;if(Au){const bD=Au.g?Au.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bD){var _e=D.h;_e.g||-1==bD.indexOf("spdy")&&-1==bD.indexOf("quic")&&-1==bD.indexOf("h2")||(_e.j=_e.l,_e.g=new Set,_e.h&&(mL(_e,_e.h),_e.h=null))}if(D.D){const bL=Au.g?Au.g.getResponseHeader("X-HTTP-Session-Id"):null;bL&&(D.ya=bL,Cr(D.I,D.D,bL))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms"));var Je=p;if((D=A).qa=ote(D,D.J?D.ia:null,D.W),Je.K){Mee(D.h,Je);var sr=Je,ls=D.L;ls&&(sr.I=ls),sr.B&&(hL(sr),cD(sr)),D.g=Je}else tte(D);0<A.i.length&&yD(A)}else"stop"!=xn[0]&&"close"!=xn[0]||wp(A,7);else 3==A.G&&("stop"==xn[0]||"close"==xn[0]?"stop"==xn[0]?wp(A,7):yL(A):"noop"!=xn[0]&&A.l&&A.l.ta(xn),A.v=0)}fw()}catch{}}ph.prototype.ca=function(p){p=p.target;const b=this.M;b&&3==Fc(p)?b.j():this.Y(p)},ph.prototype.Y=function(p){try{if(p==this.g)e:{const ks=Fc(this.g);var b=this.g.Ba();if(this.g.Z(),!(3>ks)&&(3!=ks||this.g&&(this.h.h||this.g.oa()||Jee(this.g)))){this.J||4!=ks||7==b||fw(),hL(this);var A=this.g.Z();this.X=A;t:if(Pee(this)){var D=Jee(this.g);p="";var se=D.length,_e=4==Fc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vp(this),gw(this);var Je="";break t}this.h.i=new a.TextDecoder}for(b=0;b<se;b++)this.h.h=!0,p+=this.h.i.decode(D[b],{stream:!(_e&&b==se-1)});D.length=0,this.h.g+=p,this.C=0,Je=this.h.g}else Je=this.g.oa();if(this.o=200==A,function bqe(p,b,A,D,se,_e,Je){p.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+se+"]: "+b+"\n"+A+"\n"+_e+" "+Je})}(this.i,this.u,this.A,this.l,this.R,ks,A),this.o){if(this.T&&!this.K){t:{if(this.g){var sr,ls=this.g;if((sr=ls.g?ls.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(sr)){var xn=sr;break t}}xn=null}if(!(A=xn)){this.o=!1,this.s=3,eo(12),vp(this),gw(this);break e}$y(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fL(this,A)}if(this.P){let Au;for(A=!0;!this.J&&this.C<Je.length;){if(Au=Tqe(this,Je),Au==cL){4==ks&&(this.s=4,eo(14),A=!1),$y(this.i,this.l,null,"[Incomplete Response]");break}if(Au==Dee){this.s=4,eo(15),$y(this.i,this.l,Je,"[Invalid Chunk]"),A=!1;break}$y(this.i,this.l,Au,null),fL(this,Au)}if(Pee(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ks||0!=Je.length||this.h.h||(this.s=1,eo(16),A=!1),this.o=this.o&&A,A){if(0<Je.length&&!this.W){this.W=!0;var Ps=this.j;Ps.g==this&&Ps.ba&&!Ps.M&&(Ps.j.info("Great, no buffering proxy detected. Bytes received: "+Je.length),vL(Ps),Ps.M=!0,eo(11))}}else $y(this.i,this.l,Je,"[Invalid Chunked Response]"),vp(this),gw(this)}else $y(this.i,this.l,Je,null),fL(this,Je);4==ks&&vp(this),this.o&&!this.J&&(4==ks?rte(this.j,this):(this.o=!1,cD(this)))}else(function jqe(p){const b={};p=(p.g&&2<=Fc(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<p.length;D++){if(x(p[D]))continue;var A=q(p[D]);const se=A[0];if("string"!=typeof(A=A[1]))continue;A=A.trim();const _e=b[se]||[];b[se]=_e,_e.push(A)}!function R(p,b){for(const A in p)b.call(void 0,p[A],A,p)}(b,function(D){return D.join(", ")})})(this.g),400==A&&0<Je.indexOf("Unknown SID")?(this.s=3,eo(12)):(this.s=0,eo(13)),vp(this),gw(this)}}}catch{}},ph.prototype.cancel=function(){this.J=!0,vp(this)},ph.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function wqe(p,b){p.info(function(){return"TIMEOUT: "+b})}(this.i,this.A),2!=this.L&&(fw(),eo(17)),vp(this),this.s=2,gw(this)):kee(this,this.S-p)};var Iqe=class{constructor(p,b){this.g=p,this.map=b}};function xee(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ree(p){return!!p.h||!!p.g&&p.g.size>=p.j}function Oee(p){return p.h?1:p.g?p.g.size:0}function pL(p,b){return p.h?p.h==b:!!p.g&&p.g.has(b)}function mL(p,b){p.g?p.g.add(b):p.h=b}function Mee(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}function Fee(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let b=p.i;for(const A of p.g.values())b=b.concat(A.D);return b}return w(p.i)}function Vee(p,b){if(p.forEach&&"function"==typeof p.forEach)p.forEach(b,void 0);else if(u(p)||"string"==typeof p)Array.prototype.forEach.call(p,b,void 0);else for(var A=function Cqe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(u(p)||"string"==typeof p){var b=[];p=p.length;for(var A=0;A<p;A++)b.push(A);return b}b=[],A=0;for(const D in p)b[A++]=D;return b}}}(p),D=function Aqe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(u(p)){for(var b=[],A=p.length,D=0;D<A;D++)b.push(p[D]);return b}for(D in b=[],A=0,p)b[A++]=p[D];return b}(p),se=D.length,_e=0;_e<se;_e++)b.call(void 0,D[_e],A&&A[_e],p)}xee.prototype.cancel=function(){if(this.i=Fee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Lee=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bp(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof bp){this.h=p.h,dD(this,p.j),this.o=p.o,this.g=p.g,hD(this,p.s),this.l=p.l;var b=p.i,A=new vw;A.i=b.i,b.g&&(A.g=new Map(b.g),A.h=b.h),$ee(this,A),this.m=p.m}else p&&(b=String(p).match(Lee))?(this.h=!1,dD(this,b[1]||"",!0),this.o=yw(b[2]||""),this.g=yw(b[3]||"",!0),hD(this,b[4]),this.l=yw(b[5]||"",!0),$ee(this,b[6]||"",!0),this.m=yw(b[7]||"")):(this.h=!1,this.i=new vw(null,this.h))}function Mc(p){return new bp(p)}function dD(p,b,A){p.j=A?yw(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function hD(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function $ee(p,b,A){b instanceof vw?(p.i=b,function Rqe(p,b){b&&!p.j&&(mh(p),p.i=null,p.g.forEach(function(A,D){var se=D.toLowerCase();D!=se&&(Bee(this,D),Hee(this,se,A))},p)),p.j=b}(p.i,p.h)):(A||(b=_w(b,kqe)),p.i=new vw(b,p.h))}function Cr(p,b,A){p.i.set(b,A)}function fD(p){return Cr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function yw(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function _w(p,b,A){return"string"==typeof p?(p=encodeURI(p).replace(b,Dqe),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Dqe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}bp.prototype.toString=function(){var p=[],b=this.j;b&&p.push(_w(b,jee,!0),":");var A=this.g;return(A||"file"==b)&&(p.push("//"),(b=this.o)&&p.push(_w(b,jee,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(A=this.s)&&p.push(":",String(A))),(A=this.l)&&(this.g&&"/"!=A.charAt(0)&&p.push("/"),p.push(_w(A,"/"==A.charAt(0)?Pqe:Nqe,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",_w(A,xqe)),p.join("")};var jee=/[#\/\?@]/g,Nqe=/[#\?:]/g,Pqe=/[#\?]/g,kqe=/[#\?@]/g,xqe=/#/g;function vw(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function mh(p){p.g||(p.g=new Map,p.h=0,p.i&&function Sqe(p,b){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var D=p[A].indexOf("="),se=null;if(0<=D){var _e=p[A].substring(0,D);se=p[A].substring(D+1)}else _e=p[A];b(_e,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}(p.i,function(b,A){p.add(decodeURIComponent(b.replace(/\+/g," ")),A)}))}function Bee(p,b){mh(p),b=jy(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function Uee(p,b){return mh(p),b=jy(p,b),p.g.has(b)}function Hee(p,b,A){Bee(p,b),0<A.length&&(p.i=null,p.g.set(jy(p,b),w(A)),p.h+=A.length)}function jy(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function gh(p,b,A,D,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),D(A)}catch{}}function Fqe(){this.g=new _qe}function Vqe(p,b,A){const D=A||"";try{Vee(p,function(se,_e){let Je=se;l(se)&&(Je=sL(se)),b.push(D+_e+"="+encodeURIComponent(Je))})}catch(se){throw b.push(D+"type="+encodeURIComponent("_badmap")),se}}function bw(p){this.l=p.Ub||null,this.j=p.eb||!1}function pD(p,b){Ns.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function zee(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function ww(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Ew(p)}function Ew(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function Gee(p){let b="";return de(p,function(A,D){b+=D,b+=":",b+=A,b+="\r\n"}),b}function gL(p,b,A){e:{for(D in A){var D=!1;break e}D=!0}D||(A=Gee(A),"string"==typeof p?null!=A&&encodeURIComponent(String(A)):Cr(p,b,A))}function ni(p){Ns.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=vw.prototype).add=function(p,b){mh(this),this.i=null,p=jy(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(b),this.h+=1,this},t.forEach=function(p,b){mh(this),this.g.forEach(function(A,D){A.forEach(function(se){p.call(b,se,D,this)},this)},this)},t.na=function(){mh(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),A=[];for(let D=0;D<b.length;D++){const se=p[D];for(let _e=0;_e<se.length;_e++)A.push(b[D])}return A},t.V=function(p){mh(this);let b=[];if("string"==typeof p)Uee(this,p)&&(b=b.concat(this.g.get(jy(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)b=b.concat(p[A])}return b},t.set=function(p,b){return mh(this),this.i=null,Uee(this,p=jy(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},t.get=function(p,b){return p&&0<(p=this.V(p)).length?String(p[0]):b},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var A=0;A<b.length;A++){var D=b[A];const _e=encodeURIComponent(String(D)),Je=this.V(D);for(D=0;D<Je.length;D++){var se=_e;""!==Je[D]&&(se+="="+encodeURIComponent(String(Je[D]))),p.push(se)}}return this.i=p.join("&")},v(bw,oL),bw.prototype.g=function(){return new pD(this.l,this.j)},bw.prototype.i=function(p){return function(){return p}}({}),v(pD,Ns),(t=pD.prototype).open=function(p,b){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,Ew(this)},t.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ww(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Ew(this)),this.g&&(this.readyState=3,Ew(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zee(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?ww(this):Ew(this),3==this.readyState&&zee(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,ww(this))},t.Qa=function(p){this.g&&(this.response=p,ww(this))},t.ga=function(){this.g&&ww(this)},t.setRequestHeader=function(p,b){this.u.append(p,b)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var A=b.next();!A.done;)p.push((A=A.value)[0]+": "+A[1]),A=b.next();return p.join("\r\n")},Object.defineProperty(pD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),v(ni,Ns);var Lqe=/^https?$/i,$qe=["POST","PUT"];function qee(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,Wee(p),mD(p)}function Wee(p){p.A||(p.A=!0,Zs(p,"complete"),Zs(p,"error"))}function Kee(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=Fc(p)||2!=p.Z()))if(p.u&&4==Fc(p))gee(p.Ea,0,p);else if(Zs(p,"readystatechange"),4==Fc(p)){p.h=!1;try{const Je=p.Z();e:switch(Je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var A;if(!(A=b)){var D;if(D=0===Je){var se=String(p.D).match(Lee)[1]||null;!se&&a.self&&a.self.location&&(se=a.self.location.protocol.slice(0,-1)),D=!Lqe.test(se?se.toLowerCase():"")}A=D}if(A)Zs(p,"complete"),Zs(p,"success");else{p.m=6;try{var _e=2<Fc(p)?p.g.statusText:""}catch{_e=""}p.l=_e+" ["+p.Z()+"]",Wee(p)}}finally{mD(p)}}}function mD(p,b){if(p.g){Qee(p);const A=p.g,D=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||Zs(p,"ready");try{A.onreadystatechange=D}catch{}}}function Qee(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function Fc(p){return p.g?p.g.readyState:0}function Jee(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Tw(p,b,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||b}function Yee(p){this.Aa=0,this.i=[],this.j=new mw,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tw("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tw("baseRetryDelayMs",5e3,p),this.cb=Tw("retryDelaySeedMs",1e4,p),this.Wa=Tw("forwardChannelMaxRetries",2,p),this.wa=Tw("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new xee(p&&p.concurrentRequestLimit),this.Da=new Fqe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function yL(p){if(Xee(p),3==p.G){var b=p.U++,A=Mc(p.I);if(Cr(A,"SID",p.K),Cr(A,"RID",b),Cr(A,"TYPE","terminate"),Iw(p,A),(b=new ph(p,p.j,b)).L=2,b.v=fD(Mc(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!A&&a.Image&&((new Image).src=b.v,A=!0),A||(b.g=ate(b.j,null),b.g.ea(b.v)),b.F=Date.now(),cD(b)}ste(p)}function gD(p){p.g&&(vL(p),p.g.cancel(),p.g=null)}function Xee(p){gD(p),p.u&&(a.clearTimeout(p.u),p.u=null),_D(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function yD(p){if(!Ree(p.h)&&!p.s){p.s=!0;var b=p.Ga;ut||qr(),_t||(ut(),_t=!0),Kt.add(b,p),p.B=0}}function Zee(p,b){var A;A=b?b.l:p.U++;const D=Mc(p.I);Cr(D,"SID",p.K),Cr(D,"RID",A),Cr(D,"AID",p.T),Iw(p,D),p.m&&p.o&&gL(D,p.m,p.o),A=new ph(p,p.j,A,p.B+1),null===p.m&&(A.H=p.o),b&&(p.i=b.D.concat(p.i)),b=ete(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),mL(p.h,A),dL(A,D,b)}function Iw(p,b){p.H&&de(p.H,function(A,D){Cr(b,D,A)}),p.l&&Vee({},function(A,D){Cr(b,D,A)})}function ete(p,b,A){A=Math.min(p.i.length,A);var D=p.l?g(p.l.Na,p.l,p):null;e:{var se=p.i;let _e=-1;for(;;){const Je=["count="+A];-1==_e?0<A?(_e=se[0].g,Je.push("ofs="+_e)):_e=0:Je.push("ofs="+_e);let sr=!0;for(let ls=0;ls<A;ls++){let xn=se[ls].g;const Ps=se[ls].map;if(xn-=_e,0>xn)_e=Math.max(0,se[ls].g-100),sr=!1;else try{Vqe(Ps,Je,"req"+xn+"_")}catch{D&&D(Ps)}}if(sr){D=Je.join("&");break e}}}return p=p.i.splice(0,A),b.D=p,D}function tte(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;ut||qr(),_t||(ut(),_t=!0),Kt.add(b,p),p.v=0}}function _L(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=pw(g(p.Fa,p),ite(p,p.v)),p.v++,0))}function vL(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function nte(p){p.g=new ph(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var b=Mc(p.qa);Cr(b,"RID","rpc"),Cr(b,"SID",p.K),Cr(b,"AID",p.T),Cr(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&Cr(b,"TO",p.ja),Cr(b,"TYPE","xmlhttp"),Iw(p,b),p.m&&p.o&&gL(b,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=fD(Mc(b)),A.m=null,A.P=!0,Nee(A,p)}function _D(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function rte(p,b){var A=null;if(p.g==b){_D(p),vL(p),p.g=null;var D=2}else{if(!pL(p.h,b))return;A=b.D,Mee(p.h,b),D=1}if(0!=p.G)if(b.o)if(1==D){A=b.m?b.m.length:0,b=Date.now()-b.F;var se=p.B;Zs(D=aD(),new Aee(D,A)),yD(p)}else tte(p);else if(3==(se=b.s)||0==se&&0<b.X||!(1==D&&function Bqe(p,b){return!(Oee(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=b.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=pw(g(p.Ga,p,b),ite(p,p.B)),p.B++,0)))}(p,b)||2==D&&_L(p)))switch(A&&0<A.length&&(b=p.h,b.i=b.i.concat(A)),se){case 1:wp(p,5);break;case 4:wp(p,10);break;case 3:wp(p,6);break;default:wp(p,2)}}function ite(p,b){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*b}function wp(p,b){if(p.j.info("Error code "+b),2==b){var A=g(p.fb,p),D=p.Xa;const se=!D;D=new bp(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||dD(D,"https"),fD(D),se?function Oqe(p,b){const A=new mw;if(a.Image){const D=new Image;D.onload=_(gh,A,"TestLoadImage: loaded",!0,b,D),D.onerror=_(gh,A,"TestLoadImage: error",!1,b,D),D.onabort=_(gh,A,"TestLoadImage: abort",!1,b,D),D.ontimeout=_(gh,A,"TestLoadImage: timeout",!1,b,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=p}else b(!1)}(D.toString(),A):function Mqe(p,b){new mw;const D=new AbortController,se=setTimeout(()=>{D.abort(),gh(0,0,!1,b)},1e4);fetch(p,{signal:D.signal}).then(_e=>{clearTimeout(se),gh(0,0,!!_e.ok,b)}).catch(()=>{clearTimeout(se),gh(0,0,!1,b)})}(D.toString(),A)}else eo(2);p.G=0,p.l&&p.l.sa(b),ste(p),Xee(p)}function ste(p){if(p.G=0,p.ka=[],p.l){const b=Fee(p.h);(0!=b.length||0!=p.i.length)&&(I(p.ka,b),I(p.ka,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.ra()}}function ote(p,b,A){var D=A instanceof bp?Mc(A):new bp(A);if(""!=D.g)b&&(D.g=b+"."+D.g),hD(D,D.s);else{var se=a.location;D=se.protocol,b=b?b+"."+se.hostname:se.hostname,se=+se.port;var _e=new bp(null);D&&dD(_e,D),b&&(_e.g=b),se&&hD(_e,se),A&&(_e.l=A),D=_e}return b=p.ya,(A=p.D)&&b&&Cr(D,A,b),Cr(D,"VER",p.la),Iw(p,D),D}function ate(p,b,A){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new ni(p.Ca&&!p.pa?new bw({eb:A}):p.pa)).Ha(p.J),b}function ute(){}function vD(){}function ta(p,b){Ns.call(this),this.g=new Yee(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!x(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!x(b)&&(this.g.D=b,null!==(p=this.h)&&b in p&&b in(p=this.h)&&delete p[b]),this.j=new By(this)}function lte(p){aL.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const A in b){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,b=null!==b&&p in b?b[p]:void 0),this.data=b}else this.data=p}function cte(){uL.call(this),this.status=1}function By(p){this.g=p}(t=ni.prototype).Ha=function(p){this.J=p},t.ea=function(p,b,A,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lL.g(),this.v=function bee(p){return p.h||(p.h=p.i())}(this.o?this.o:lL),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(_e){return void qee(this,_e)}if(p=A||"",A=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var se in D)A.set(se,D[se]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const _e of D.keys())A.set(_e,D.get(_e))}D=Array.from(A.keys()).find(_e=>"content-type"==_e.toLowerCase()),se=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call($qe,b,void 0))||D||se||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Je]of A)this.g.setRequestHeader(_e,Je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qee(this),this.u=!0,this.g.send(p),this.u=!1}catch(_e){qee(this,_e)}},t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Zs(this,"complete"),Zs(this,"abort"),mD(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mD(this,!0)),ni.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kee(this):this.bb())},t.bb=function(){Kee(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<Fc(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&0==b.indexOf(p)&&(b=b.substring(p.length)),yqe(b)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Yee.prototype).la=8,t.G=1,t.connect=function(p,b,A,D){eo(0),this.W=p,this.H=b||{},A&&void 0!==D&&(this.H.OSID=A,this.H.OAID=D),this.F=this.X,this.I=ote(this,null,this.W),yD(this)},t.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const se=new ph(this,this.j,p);let _e=this.o;if(this.S&&(_e?(_e=k(_e),z(_e,this.S)):_e=this.S),null!==this.m||this.O||(se.H=_e,_e=null),this.P)e:{for(var b=0,A=0;A<this.i.length;A++){var D=this.i[A];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(b+=D)){b=A;break e}if(4096===b||A===this.i.length-1){b=A+1;break e}}b=1e3}else b=1e3;b=ete(this,se,b),Cr(A=Mc(this.I),"RID",p),Cr(A,"CVER",22),this.D&&Cr(A,"X-HTTP-Session-Id",this.D),Iw(this,A),_e&&(this.O?b="headers="+encodeURIComponent(String(Gee(_e)))+"&"+b:this.m&&gL(A,this.m,_e)),mL(this.h,se),this.Ua&&Cr(A,"TYPE","init"),this.P?(Cr(A,"$req",b),Cr(A,"SID","null"),se.T=!0,dL(se,A,null)):dL(se,A,b),this.G=2}}else 3==this.G&&(p?Zee(this,p):0==this.i.length||Ree(this.h)||Zee(this))},t.Fa=function(){if(this.u=null,nte(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=pw(g(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eo(10),gD(this),nte(this))},t.Za=function(){null!=this.C&&(this.C=null,gD(this),_L(this),eo(19))},t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),eo(2)):(this.j.info("Failed to ping google.com"),eo(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=ute.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},vD.prototype.g=function(p,b){return new ta(p,b)},v(ta,Ns),ta.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ta.prototype.close=function(){yL(this.g)},ta.prototype.o=function(p){var b=this.g;if("string"==typeof p){var A={};A.__data__=p,p=A}else this.u&&((A={}).__data__=sL(p),p=A);b.i.push(new Iqe(b.Ya++,p)),3==b.G&&yD(b)},ta.prototype.N=function(){this.g.l=null,delete this.j,yL(this.g),delete this.g,ta.aa.N.call(this)},v(lte,aL),v(cte,uL),v(By,ute),By.prototype.ua=function(){Zs(this.g,"a")},By.prototype.ta=function(p){Zs(this.g,new lte(p))},By.prototype.sa=function(p){Zs(this.g,new cte)},By.prototype.ra=function(){Zs(this.g,"b")},vD.prototype.createWebChannel=vD.prototype.g,ta.prototype.send=ta.prototype.o,ta.prototype.open=ta.prototype.m,ta.prototype.close=ta.prototype.close,pq=tc.createWebChannelTransport=function(){return new vD},fq=tc.getStatEventTarget=function(){return aD()},hq=tc.Event=_p,Xx=tc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uD.NO_ERROR=0,uD.TIMEOUT=8,uD.HTTP_ERROR=6,AA=tc.ErrorCode=uD,Cee.COMPLETE="complete",dq=tc.EventType=Cee,wee.EventType=hw,hw.OPEN="a",hw.CLOSE="b",hw.ERROR="c",hw.MESSAGE="d",Ns.prototype.listen=Ns.prototype.K,O0=tc.WebChannel=wee,cq=tc.FetchXmlHttpFactory=bw,ni.prototype.listenOnce=ni.prototype.L,ni.prototype.getLastError=ni.prototype.Ka,ni.prototype.getLastErrorCode=ni.prototype.Ba,ni.prototype.getStatus=ni.prototype.Z,ni.prototype.getResponseJson=ni.prototype.Oa,ni.prototype.getResponseText=ni.prototype.oa,ni.prototype.send=ni.prototype.ea,ni.prototype.setWithCredentials=ni.prototype.Ha,lq=tc.XhrIo=ni}).apply(typeof IA<"u"?IA:typeof self<"u"?self:typeof window<"u"?window:{});const mq="@firebase/firestore";class ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");let _g="10.12.3";const Dd=new Yu.Vy("@firebase/firestore");function vg(){return Dd.logLevel}function Le(t,...e){if(Dd.logLevel<=Yu.$b.DEBUG){const n=e.map(Zx);Dd.debug(`Firestore (${_g}): ${t}`,...n)}}function ci(t,...e){if(Dd.logLevel<=Yu.$b.ERROR){const n=e.map(Zx);Dd.error(`Firestore (${_g}): ${t}`,...n)}}function fo(t,...e){if(Dd.logLevel<=Yu.$b.WARN){const n=e.map(Zx);Dd.warn(`Firestore (${_g}): ${t}`,...n)}}function Zx(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function at(t="Unexpected state"){const e=`FIRESTORE (${_g}) INTERNAL ASSERTION FAILED: `+t;throw ci(e),new Error(e)}function wt(t,e){t||at()}function Qe(t,e){return t}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends rn.g{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class gq{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tve{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ji.UNAUTHENTICATED))}shutdown(){}}class nve{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rve{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Di,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,Y.A)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Di)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new gq(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new ji(e)}}class ive{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sve{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ive(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ove{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt("string"==typeof n.token),this.R=n.token,new yq(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ave(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class _q{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=ave(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ht(t,e){return t<e?-1:t>e?1:0}function bg(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function vq(t){return t+"\0"}class kr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kr.fromMillis(Date.now())}static fromDate(e){return kr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new kr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new kr(0,0))}static max(){return new Tt(new kr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class M0{constructor(e,n,r){void 0===n?n=0:n>e.length&&at(),void 0===r?r=e.length-n:r>e.length-n&&at(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===M0.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof M0?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class gn extends M0{construct(e,n,r){return new gn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gn(n)}static emptyPath(){return new gn([])}}const uve=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class br extends M0{construct(e,n,r){return new br(e,n,r)}static isValidIdentifier(e){return uve.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new br(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Me(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Me(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Me(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Me(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new br(n)}static emptyPath(){return new br([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(gn.fromString(e))}static fromName(e){return new et(gn.fromString(e).popFirst(5))}static empty(){return new et(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return gn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new gn(e.slice()))}}class wg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function eR(t){return t.fields.find(e=>2===e.kind)}function Tf(t){return t.fields.filter(e=>2!==e.kind)}wg.UNKNOWN_ID=-1;class If{constructor(e,n){this.fieldPath=e,this.kind=n}}class Eg{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Eg(0,Bo.min())}}function bq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new kr(n+1,0):new kr(n,r));return new Bo(i,et.empty(),e)}function wq(t){return new Bo(t.readTime,t.key,-1)}class Bo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bo(Tt.min(),et.empty(),-1)}static max(){return new Bo(Tt.max(),et.empty(),-1)}}function tR(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=et.comparator(t.documentKey,e.documentKey),0!==n?n:Ht(t.largestBatchId,e.largestBatchId))}const Eq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nd(t){return nR.apply(this,arguments)}function nR(){return(nR=(0,Y.A)(function*(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==Eq)throw t;Le("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(i=>i?oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new oe((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class CA{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Di,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new F0(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=rR(r.target.error);this.V.reject(new F0(e,i))}}static open(e,n,r,i){try{return new CA(n,e.transaction(i,r))}catch(s){throw new F0(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new hve(n)}}class Xu{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Xu.S((0,rn.ZQ)())&&ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Af(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,rn.zW)())return!1;if(Xu.C())return!0;const e=(0,rn.ZQ)(),n=Xu.S(e),r=0<n&&n<10,i=Iq(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var n=this;return(0,Y.A)(function*(){return n.db||(Le("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new F0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Me(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Me(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new F0(e,a))},s.onupgradeneeded=o=>{Le("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.O(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{Le("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.N&&(n.db.onversionchange=r=>n.N(r)),n.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,Y.A)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=CA.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(c=>(u.g(),c)).catch(c=>(u.abort(c),oe.reject(c))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,c="FirebaseError"!==l.name&&a<3;if(Le("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),s.close(),!c)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Iq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class dve{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Af(this.B.delete())}}class F0 extends Me{constructor(e,n){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Pd(t){return"IndexedDbTransactionError"===t.name}class hve{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(Le("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Af(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Af(this.store.add(e))}get(e){return Af(this.store.get(e)).next(n=>(void 0===n&&(n=null),Le("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Af(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Af(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new oe((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new oe((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new oe((r,i)=>{n.onerror=s=>{const o=rR(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new oe((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new dve(a),l=n(a.primaryKey,a.value,u);if(l instanceof oe){const c=l.catch(h=>(u.done(),oe.reject(h)));r.push(c)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>oe.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Af(t){return new oe((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=rR(r.target.error);n(i)}})}let Aq=!1;function rR(t){const e=Xu.S((0,rn.ZQ)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Aq||(Aq=!0,setTimeout(()=>{throw r},0)),r}}return t}class fve{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var n=this;Le("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Y.A)(function*(){n.task=null;try{Le("IndexBackfiller",`Documents written: ${yield n.Z.ee()}`)}catch(r){Pd(r)?Le("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Nd(r)}yield n.X(6e4)}))}}class pve{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){var n=this;return(0,Y.A)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.te(r,e))})()}te(e,n){const r=new Set;let i=n,s=!0;return oe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Le("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Le("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=wq(s);tR(o,r)>0&&(r=o)}),new Bo(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Uo=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function V0(t){return null==t}function L0(t){return 0===t&&1/t==-1/0}function Cq(t){return"number"==typeof t&&Number.isInteger(t)&&!L0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function gs(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Sq(e)),e=mve(t.get(n),e);return Sq(e)}function mve(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function Sq(t){return t+"\x01\x01"}function Zu(t){const e=t.length;if(wt(e>=2),2===e)return wt("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),gn.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&at(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:at()}s=o+2}return new gn(r)}const Dq=["userId","batchId"];function SA(t,e){return[t,gs(e)]}function Nq(t,e,n){return[t,gs(e),n]}const gve={},yve=["prefixPath","collectionGroup","readTime","documentId"],_ve=["prefixPath","collectionGroup","documentId"],vve=["collectionGroup","readTime","prefixPath","documentId"],bve=["canonicalId","targetId"],wve=["targetId","path"],Eve=["path","targetId"],Tve=["collectionId","parent"],Ive=["indexId","uid"],Ave=["uid","sequenceNumber"],Cve=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sve=["indexId","uid","orderedDocumentKey"],Dve=["userId","collectionPath","documentId"],Nve=["userId","collectionPath","largestBatchId"],Pve=["userId","collectionGroup","largestBatchId"],Pq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kve=[...Pq,"documentOverlays"],kq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xq=kq,Rq=[...xq,"indexConfiguration","indexState","indexEntries"],xve=Rq;class iR extends Tq{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Bi(t,e){const n=Qe(t);return Xu.F(n._e,e)}function Oq(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function kd(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class pr{constructor(e,n){this.comparator=e,this.root=n||rs.EMPTY}insert(e,n){return new pr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new DA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new DA(this.root,e,this.comparator,!1)}getReverseIterator(){return new DA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new DA(this.root,e,this.comparator,!0)}}class DA{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rs{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rs.RED,this.left=i??rs.EMPTY,this.right=s??rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new rs(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return rs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1,rs.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(e,n,r,i,s){return this}insert(e,n,r){return new rs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xn{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vq(this.data.getIterator())}getIteratorFrom(e){return new Vq(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xn(this.comparator);return n.data=e,n}}class Vq{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tg(t){return t.hasNext()?t.getNext():void 0}class po{constructor(e){this.fields=e,e.sort(br.comparator)}static empty(){return new po([])}unionWith(e){let n=new Xn(br.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new po(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bg(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Lq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lq("Invalid base64 string: "+s):s}}(e);return new Ni(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const Ove=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(t){if(wt(!!t),"string"==typeof t){let e=0;const n=Ove.exec(t);if(wt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zr(t.seconds),nanos:Zr(t.nanos)}}function Zr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function rc(t){return"string"==typeof t?Ni.fromBase64String(t):Ni.fromUint8Array(t)}function NA(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function PA(t){const e=t.mapValue.fields.__previous_value__;return NA(e)?PA(e):e}function $0(t){const e=nc(t.mapValue.fields.__local_write_time__.timestampValue);return new kr(e.seconds,e.nanos)}class Mve{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class xd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xd&&e.projectId===this.projectId&&e.database===this.database}}const Rd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kA={nullValue:"NULL_VALUE"};function Od(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?NA(t)?4:Uq(t)?9007199254740991:10:at()}function el(t,e){if(t===e)return!0;const n=Od(t);if(n!==Od(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $0(t).isEqual($0(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=nc(i.timestampValue),a=nc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,rc(t.bytesValue).isEqual(rc(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Zr(i.geoPointValue.latitude)===Zr(s.geoPointValue.latitude)&&Zr(i.geoPointValue.longitude)===Zr(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Zr(i.integerValue)===Zr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Zr(i.doubleValue),a=Zr(s.doubleValue);return o===a?L0(o)===L0(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return bg(t.arrayValue.values||[],e.arrayValue.values||[],el);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Oq(o)!==Oq(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!el(o[u],a[u])))return!1;return!0}(t,e);default:return at()}var s}function j0(t,e){return void 0!==(t.values||[]).find(n=>el(n,e))}function Md(t,e){if(t===e)return 0;const n=Od(t),r=Od(e);if(n!==r)return Ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ht(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Zr(s.integerValue||s.doubleValue),u=Zr(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return $q(t.timestampValue,e.timestampValue);case 4:return $q($0(t),$0(e));case 5:return Ht(t.stringValue,e.stringValue);case 6:return function(s,o){const a=rc(s),u=rc(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Ht(a[l],u[l]);if(0!==c)return c}return Ht(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ht(Zr(s.latitude),Zr(o.latitude));return 0!==a?a:Ht(Zr(s.longitude),Zr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Md(a[l],u[l]);if(c)return c}return Ht(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Rd.mapValue&&o===Rd.mapValue)return 0;if(s===Rd.mapValue)return 1;if(o===Rd.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let h=0;h<u.length&&h<c.length;++h){const g=Ht(u[h],c[h]);if(0!==g)return g;const _=Md(a[u[h]],l[c[h]]);if(0!==_)return _}return Ht(u.length,c.length)}(t.mapValue,e.mapValue);default:throw at()}}function $q(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ht(t,e);const n=nc(t),r=nc(e),i=Ht(n.seconds,r.seconds);return 0!==i?i:Ht(n.nanos,r.nanos)}function Ig(t){return sR(t)}function sR(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?rc(t.bytesValue).toBase64():"referenceValue"in t?et.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=sR(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${sR(n.fields[o])}`;return i+"}"}(t.mapValue):at()}function Cf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oR(t){return!!t&&"integerValue"in t}function B0(t){return!!t&&"arrayValue"in t}function jq(t){return!!t&&"nullValue"in t}function Bq(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function RA(t){return!!t&&"mapValue"in t}function U0(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return kd(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=U0(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=U0(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Uq(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fve(t){return"nullValue"in t?kA:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Cf(xd.empty(),et.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:at()}function Vve(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Cf(xd.empty(),et.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Rd:at()}function Hq(t,e){const n=Md(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function zq(t,e){const n=Md(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!RA(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=U0(n)}setAll(e){let n=br.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=U0(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());RA(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return el(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];RA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){kd(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new is(U0(this.value))}}function Gq(t){const e=[];return kd(t.fields,(n,r)=>{const i=new br([n]);if(RA(r)){const s=Gq(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new po(e)}class wr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wr(e,0,Tt.min(),Tt.min(),Tt.min(),is.empty(),0)}static newFoundDocument(e,n,r,i){return new wr(e,1,n,Tt.min(),r,i,0)}static newNoDocument(e,n){return new wr(e,2,n,Tt.min(),Tt.min(),is.empty(),0)}static newUnknownDocument(e,n){return new wr(e,3,n,Tt.min(),Tt.min(),is.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Tt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function qq(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?et.comparator(et.fromName(o.referenceValue),n.key):Md(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Wq(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!el(t.position[n],e.position[n]))return!1;return!0}class H0{constructor(e,n="asc"){this.field=e,this.dir=n}}function Lve(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Kq{}class yn extends Kq{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new $ve(e,n,r):"array-contains"===n?new Uve(e,r):"in"===n?new e8(e,r):"not-in"===n?new Hve(e,r):"array-contains-any"===n?new zve(e,r):new yn(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new jve(e,r):new Bve(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Md(n,this.value)):null!==n&&Od(this.value)===Od(n)&&this.matchesComparison(Md(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends Kq{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kn(e,n)}matches(e){return Ag(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ag(t){return"and"===t.op}function aR(t){return"or"===t.op}function uR(t){return Qq(t)&&Ag(t)}function Qq(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function lR(t){if(t instanceof yn)return t.field.canonicalString()+t.op.toString()+Ig(t.value);if(uR(t))return t.filters.map(e=>lR(e)).join(",");{const e=t.filters.map(n=>lR(n)).join(",");return`${t.op}(${e})`}}function Jq(t,e){return t instanceof yn?(r=t,(i=e)instanceof yn&&r.op===i.op&&r.field.isEqual(i.field)&&el(r.value,i.value)):t instanceof Kn?function(r,i){return i instanceof Kn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Jq(o,i.filters[a]),!0)}(t,e):void at();var r,i}function Yq(t,e){const n=t.filters.concat(e);return Kn.create(n,t.op)}function Xq(t){return t instanceof yn?`${(n=t).field.canonicalString()} ${n.op} ${Ig(n.value)}`:t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(Xq).join(" ,")+"}"}(t):"Filter";var n}class $ve extends yn{constructor(e,n,r){super(e,n,r),this.key=et.fromName(r.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}}class jve extends yn{constructor(e,n){super(e,"in",n),this.keys=Zq(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Bve extends yn{constructor(e,n){super(e,"not-in",n),this.keys=Zq(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zq(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>et.fromName(r.referenceValue))}class Uve extends yn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return B0(n)&&j0(n.arrayValue,this.value)}}class e8 extends yn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&j0(this.value.arrayValue,n)}}class Hve extends yn{constructor(e,n){super(e,"not-in",n)}matches(e){if(j0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!j0(this.value.arrayValue,n)}}class zve extends yn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!B0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>j0(this.value.arrayValue,r))}}class Gve{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function cR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gve(t,e,n,r,i,s,o)}function Sf(t){const e=Qe(t);if(null===e.ue){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lR(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),V0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ig(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ig(r)).join(",")),e.ue=n}return e.ue}function z0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Lve(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jq(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wq(t.startAt,e.startAt)&&Wq(t.endAt,e.endAt)}function OA(t){return et.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function MA(t,e){return t.filters.filter(n=>n instanceof yn&&n.field.isEqual(e))}function t8(t,e,n){let r=kA,i=!0;for(const s of MA(t,e)){let o=kA,a=!0;switch(s.op){case"<":case"<=":o=Fve(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=kA}Hq({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Hq({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function n8(t,e,n){let r=Rd,i=!0;for(const s of MA(t,e)){let o=Rd,a=!0;switch(s.op){case">=":case">":o=Vve(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Rd}zq({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];zq({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class ic{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function r8(t,e,n,r,i,s,o,a){return new ic(t,e,n,r,i,s,o,a)}function Cg(t){return new ic(t)}function i8(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function dR(t){return null!==t.collectionGroup}function Sg(t){const e=Qe(t);if(null===e.ce){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xn(br.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new H0(s,r))}),n.has(br.keyField().canonicalString())||e.ce.push(new H0(br.keyField(),r))}return e.ce}function ys(t){const e=Qe(t);return e.le||(e.le=function o8(t,e){if("F"===t.limitType)return cR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new H0(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Fd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fd(t.startAt.position,t.startAt.inclusive):null;return cR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Sg(t))),e.le}function hR(t,e){const n=t.filters.concat([e]);return new ic(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function FA(t,e,n){return new ic(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function G0(t,e){return z0(ys(t),ys(e))&&t.limitType===e.limitType}function a8(t){return`${Sf(ys(t))}|lt:${t.limitType}`}function Dg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Xq(i)).join(", ")}]`),V0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ig(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ig(i)).join(",")),`Target(${r})`}(ys(t))}; limitType=${t.limitType})`}function q0(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):et.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Sg(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const l=qq(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Sg(r),i)||r.endAt&&!function(o,a,u){const l=qq(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Sg(r),i)));var r,i}function u8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function l8(t){return(e,n)=>{let r=!1;for(const i of Sg(t)){const s=qve(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function qve(t,e,n){const r=t.field.isKeyField()?et.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Md(u,l):at()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}class sc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kd(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Fq(this.inner)}size(){return this.innerSize}}const Wve=new pr(et.comparator);function mo(){return Wve}const c8=new pr(et.comparator);function W0(...t){let e=c8;for(const n of t)e=e.insert(n.key,n);return e}function d8(t){let e=c8;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function tl(){return K0()}function h8(){return K0()}function K0(){return new sc(t=>t.toString(),(t,e)=>t.isEqual(e))}const Kve=new pr(et.comparator),Qve=new Xn(et.comparator);function Zt(...t){let e=Qve;for(const n of t)e=e.add(n);return e}const Jve=new Xn(Ht);function fR(){return Jve}function f8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:L0(e)?"-0":e}}function p8(t){return{integerValue:""+t}}function m8(t,e){return Cq(e)?p8(e):f8(t,e)}class VA{constructor(){this._=void 0}}function Yve(t,e,n){return t instanceof Ng?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&NA(s)&&(s=PA(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Df?y8(t,e):t instanceof Nf?_8(t,e):function(i,s){const o=g8(i,s),a=v8(o)+v8(i.Pe);return oR(o)&&oR(i.Pe)?p8(a):f8(i.serializer,a)}(t,e)}function Xve(t,e,n){return t instanceof Df?y8(t,e):t instanceof Nf?_8(t,e):n}function g8(t,e){return t instanceof Pg?oR(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Ng extends VA{}class Df extends VA{constructor(e){super(),this.elements=e}}function y8(t,e){const n=b8(e);for(const r of t.elements)n.some(i=>el(i,r))||n.push(r);return{arrayValue:{values:n}}}class Nf extends VA{constructor(e){super(),this.elements=e}}function _8(t,e){let n=b8(e);for(const r of t.elements)n=n.filter(i=>!el(i,r));return{arrayValue:{values:n}}}class Pg extends VA{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function v8(t){return Zr(t.integerValue||t.doubleValue)}function b8(t){return B0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Q0{constructor(e,n){this.field=e,this.transform=n}}class e0e{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function LA(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class $A{}function w8(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new xg(t.key,xr.none()):new kg(t.key,t.data,xr.none());{const n=t.data,r=is.empty();let i=new Xn(br.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new oc(t.key,r,new po(i.toArray()),xr.none())}}function t0e(t,e,n){t instanceof kg?function(i,s,o){const a=i.value.clone(),u=I8(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof oc?function(i,s,o){if(!LA(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=I8(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(T8(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function J0(t,e,n,r){return t instanceof kg?function(s,o,a,u){if(!LA(s.precondition,o))return a;const l=s.value.clone(),c=A8(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof oc?function(s,o,a,u){if(!LA(s.precondition,o))return a;const l=A8(s.fieldTransforms,u,o),c=o.data;return c.setAll(T8(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,LA(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function n0e(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=g8(r.transform,i||null);null!=s&&(null===n&&(n=is.empty()),n.set(r.field,s))}return n||null}function E8(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&bg(r,i,(s,o)=>function Zve(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Df&&i instanceof Df||r instanceof Nf&&i instanceof Nf?bg(r.elements,i.elements,el):r instanceof Pg&&i instanceof Pg?el(r.Pe,i.Pe):r instanceof Ng&&i instanceof Ng);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class kg extends $A{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oc extends $A{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function T8(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I8(t,e,n){const r=new Map;wt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Xve(o,a,n[i]))}return r}function A8(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Yve(s,o,e))}return r}class xg extends $A{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pR extends $A{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&t0e(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=J0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=J0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h8();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=w8(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Zt())}isEqual(e){return this.batchId===e.batchId&&bg(this.mutations,e.mutations,(n,r)=>E8(n,r))&&bg(this.baseMutations,e.baseMutations,(n,r)=>E8(n,r))}}class gR{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){wt(e.mutations.length===r.length);let i=function(){return Kve}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new gR(e,n,r,i)}}class yR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class r0e{constructor(e,n){this.count=e,this.unchangedNames=n}}var _i,En;function S8(t){switch(t){default:return at();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function D8(t){if(void 0===t)return ci("GRPC error has no .code"),me.UNKNOWN;switch(t){case _i.OK:return me.OK;case _i.CANCELLED:return me.CANCELLED;case _i.UNKNOWN:return me.UNKNOWN;case _i.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case _i.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case _i.INTERNAL:return me.INTERNAL;case _i.UNAVAILABLE:return me.UNAVAILABLE;case _i.UNAUTHENTICATED:return me.UNAUTHENTICATED;case _i.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case _i.NOT_FOUND:return me.NOT_FOUND;case _i.ALREADY_EXISTS:return me.ALREADY_EXISTS;case _i.PERMISSION_DENIED:return me.PERMISSION_DENIED;case _i.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case _i.ABORTED:return me.ABORTED;case _i.OUT_OF_RANGE:return me.OUT_OF_RANGE;case _i.UNIMPLEMENTED:return me.UNIMPLEMENTED;case _i.DATA_LOSS:return me.DATA_LOSS;default:return at()}}(En=_i||(_i={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";function N8(){return new TextEncoder}const i0e=new Ef([4294967295,4294967295],0);function P8(t){const e=N8().encode(t),n=new uq;return n.update(e),new Uint8Array(n.digest())}function k8(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ef([n,r],0),new Ef([i,s],0)]}class _R{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Y0(`Invalid padding: ${n}`);if(r<0)throw new Y0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Y0(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Y0(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ef.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ef.fromNumber(r)));return 1===i.compare(i0e)&&(i=new Ef([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const n=P8(e),[r,i]=k8(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _R(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const n=P8(e),[r,i]=k8(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Y0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class X0{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Z0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new X0(Tt.min(),i,new pr(Ht),mo(),Zt())}}class Z0{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Z0(r,n,Zt(),Zt(),Zt())}}class BA{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class x8{constructor(e,n){this.targetId=e,this.me=n}}class R8{constructor(e,n,r=Ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class O8{constructor(){this.fe=0,this.ge=F8(),this.pe=Ni.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Zt(),n=Zt(),r=Zt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:at()}}),new Z0(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=F8()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class s0e{constructor(e){this.Le=e,this.Be=new Map,this.ke=mo(),this.qe=M8(),this.Qe=new pr(Ht)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:at()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(OA(s))if(0===r){const o=new et(s.path);this.Ue(n,o,wr.newNoDocument(o,Tt.min()))}else wt(1===r);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(n),this.Qe=this.Qe.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=rc(r).toUint8Array()}catch(u){if(u instanceof Lq)return fo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new _R(o,i,s)}catch(u){return fo(u instanceof Y0?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&OA(a.target)){const u=new et(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,wr.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Zt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new X0(e,n,this.Qe,this.ke,r);return this.ke=mo(),this.qe=M8(),this.Qe=new pr(Ht),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new O8,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xn(Ht),this.qe=this.qe.insert(e,n)),n}ze(e){const n=null!==this.Je(e);return n||Le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new O8),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function M8(){return new pr(et.comparator)}function F8(){return new pr(et.comparator)}const o0e={asc:"ASCENDING",desc:"DESCENDING"},a0e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u0e={and:"AND",or:"OR"};class l0e{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vR(t,e){return t.useProto3Json||V0(e)?e:{value:e}}function Rg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c0e(t,e){return Rg(t,e.toTimestamp())}function di(t){return wt(!!t),Tt.fromTimestamp(function(n){const r=nc(n);return new kr(r.seconds,r.nanos)}(t))}function bR(t,e){return wR(t,e).canonicalString()}function wR(t,e){const n=(i=t,new gn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function L8(t){const e=gn.fromString(t);return wt(Q8(e)),e}function eb(t,e){return bR(t.databaseId,e.path)}function nl(t,e){const n=L8(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new et(B8(n))}function $8(t,e){return bR(t.databaseId,e)}function j8(t){const e=L8(t);return 4===e.length?gn.emptyPath():B8(e)}function ER(t){return new gn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B8(t){return wt(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function U8(t,e,n){return{name:eb(t,e),fields:n.value.mapValue.fields}}function H8(t,e,n){const r=nl(t,e.name),i=di(e.updateTime),s=e.createTime?di(e.createTime):Tt.min(),o=new is({mapValue:{fields:e.fields}}),a=wr.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function tb(t,e){let n;if(e instanceof kg)n={update:U8(t,e.key,e.value)};else if(e instanceof xg)n={delete:eb(t,e.key)};else if(e instanceof oc)n={update:U8(t,e.key,e.data),updateMask:_0e(e.fieldMask)};else{if(!(e instanceof pR))return at();n={verify:eb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ng)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Df)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pg)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw at()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:c0e(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:at()),n;var s}function TR(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?xr.updateTime(di(s.updateTime)):void 0!==s.exists?xr.exists(s.exists):xr.none():xr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(wt("REQUEST_TIME"===a.setToServerValue),u=new Ng):"appendMissingElements"in a?u=new Df(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Nf(a.removeAllFromArray.values||[]):"increment"in a?u=new Pg(o,a.increment):at();const l=br.fromServerFormat(a.fieldPath);return new Q0(l,u)}(t,i)):[];var s;if(e.update){const i=nl(t,e.update.name),s=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new po((e.updateMask.fieldPaths||[]).map(c=>br.fromServerFormat(c)));return new oc(i,s,o,n,r)}return new kg(i,s,n,r)}if(e.delete){const i=nl(t,e.delete);return new xg(i,n)}if(e.verify){const i=nl(t,e.verify);return new pR(i,n)}return at()}function z8(t,e){return{documents:[$8(t,e.path)]}}function UA(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$8(t,i);const s=function(l){if(0!==l.length)return K8(Kn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(c=>{return{field:Vd((g=c).field),direction:m0e(g.dir)};var g})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vR(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i};var l}function q8(t){let e=j8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wt(1===r);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const g=W8(h);return g instanceof Kn&&uR(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(g=>{return new H0(Og((v=g).field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;n.limit&&(a=function(h){let g;return g="object"==typeof h?h.value:h,V0(g)?null:g}(n.limit));let u=null;var h;n.startAt&&(u=new Fd((h=n.startAt).values||[],!!h.before));let l=null;return n.endAt&&(l=function(h){return new Fd(h.values||[],!h.before)}(n.endAt)),r8(e,i,o,s,a,"F",u,l)}function W8(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Og(n.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Og(n.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Og(n.unaryFilter.field);return yn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Og(n.unaryFilter.field);return yn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(t):void 0!==t.fieldFilter?yn.create(Og((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Kn.create(n.compositeFilter.filters.map(r=>W8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return at()}}(n.compositeFilter.op))}(t):at();var n}function m0e(t){return o0e[t]}function g0e(t){return a0e[t]}function y0e(t){return u0e[t]}function Vd(t){return{fieldPath:t.canonicalString()}}function Og(t){return br.fromServerFormat(t.fieldPath)}function K8(t){return t instanceof yn?function(n){if("=="===n.op){if(Bq(n.value))return{unaryFilter:{field:Vd(n.field),op:"IS_NAN"}};if(jq(n.value))return{unaryFilter:{field:Vd(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Bq(n.value))return{unaryFilter:{field:Vd(n.field),op:"IS_NOT_NAN"}};if(jq(n.value))return{unaryFilter:{field:Vd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vd(n.field),op:g0e(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const r=n.getFilters().map(i=>K8(i));return 1===r.length?r[0]:{compositeFilter:{op:y0e(n.op),filters:r}}}(t):at()}function _0e(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Q8(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ac{constructor(e,n,r,i,s=Tt.min(),o=Tt.min(),a=Ni.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ac(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class J8{constructor(e){this.ct=e}}function Y8(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:HA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:eb(s=t.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Rg(s,o.version.toTimestamp()),createTime:Rg(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pf(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:n.path.toArray(),version:Pf(e.version)}}var s,o;return r}function HA(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Pf(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kf(t){const e=new kr(t.seconds,t.nanoseconds);return Tt.fromTimestamp(e)}function xf(t,e){const n=(e.baseMutations||[]).map(s=>TR(t.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>TR(t.ct,s)),i=kr.fromMillis(e.localWriteTimeMs);return new mR(e.batchId,i,n,r)}function nb(t){const e=kf(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?kf(t.lastLimboFreeSnapshotVersion):Tt.min();let r;return r=void 0!==t.query.documents?(wt(1===(s=t.query).documents.length),ys(Cg(j8(s.documents[0])))):function(s){return ys(q8(s))}(t.query),new ac(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ni.fromBase64String(t.resumeToken));var s}function X8(t,e){const n=Pf(e.snapshotVersion),r=Pf(e.lastLimboFreeSnapshotVersion);let i;i=OA(e.target)?z8(t.ct,e.target):UA(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sf(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function IR(t){const e=q8({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?FA(e,e.limit,"L"):e}function AR(t,e){return new yR(e.largestBatchId,TR(t.ct,e.overlayMutation))}function Z8(t,e){const n=e.path.lastSegment();return[t,gs(e.path.popLast()),n]}function eW(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Pf(r.readTime),documentKey:gs(r.documentKey.path),largestBatchId:r.largestBatchId}}class b0e{getBundleMetadata(e,n){return tW(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:kf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return tW(e).put({bundleId:(i=n).id,createTime:Pf(di(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return nW(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:IR(s.bundledQuery),readTime:kf(s.readTime)};var s})}saveNamedQuery(e,n){return nW(e).put({name:(i=n).name,readTime:Pf(di(i.readTime)),bundledQuery:i.bundledQuery});var i}}function tW(t){return Bi(t,"bundles")}function nW(t){return Bi(t,"namedQueries")}class zA{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new zA(e,n.uid||"")}getOverlay(e,n){return rb(e).get(Z8(this.userId,n)).next(r=>r?AR(this.serializer,r):null)}getOverlays(e,n){const r=tl();return oe.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new yR(n,o);i.push(this.ht(e,a))}),oe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(gs(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(rb(e).j("collectionPathOverlayIndex",a))}),oe.waitFor(s)}getOverlaysForCollection(e,n,r){const i=tl(),s=gs(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return rb(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=AR(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=tl();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return rb(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,c)=>{const h=AR(this.serializer,l);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ht(e,n){return rb(e).put(function(i,s,o){const[a,u,l]=Z8(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:tb(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function rb(t){return Bi(t,"documentOverlays")}class Rf{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Zr(e.integerValue));else if("doubleValue"in e){const r=Zr(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),L0(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),"string"==typeof r&&(r=nc(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(rc(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Uq(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):at()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),et.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function w0e(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function rW(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=w0e(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Rf.bt=new Rf;class E0e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=rW(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=rW(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class T0e{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class I0e{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class ib{constructor(){this.Gt=new E0e,this.zt=new T0e(this.Gt),this.jt=new I0e(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Of{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Of(this.indexId,this.documentKey,this.arrayValue,r)}}function Ld(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=iW(t.arrayValue,e.arrayValue),0!==n?n:(n=iW(t.directionalValue,e.directionalValue),0!==n?n:et.comparator(t.documentKey,e.documentKey)))}function iW(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class sW{constructor(e){this.Yt=new Xn((n,r)=>br.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(wt(e.collectionGroup===this.collectionId),this.en)return!1;const n=eR(e);if(void 0!==n&&!this.nn(n))return!1;const r=Tf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Xn(br.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new If(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new If(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new If(r.field,"asc"===r.dir?0:1)));return new wg(wg.UNKNOWN_ID,this.collectionId,n,Eg.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function oW(t){var e,n;if(wt(t instanceof yn||t instanceof Kn),t instanceof yn){if(t instanceof e8){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>yn.create(t.field,"==",s)))||[];return Kn.create(i,"or")}return t}const r=t.filters.map(i=>oW(i));return Kn.create(r,t.op)}function A0e(t){if(0===t.getFilters().length)return[];const e=DR(oW(t));return wt(aW(e)),CR(e)||SR(e)?[e]:e.getFilters()}function CR(t){return t instanceof yn}function SR(t){return t instanceof Kn&&uR(t)}function aW(t){return CR(t)||SR(t)||function(n){if(n instanceof Kn&&aR(n)){for(const r of n.getFilters())if(!CR(r)&&!SR(r))return!1;return!0}return!1}(t)}function DR(t){if(wt(t instanceof yn||t instanceof Kn),t instanceof yn)return t;if(1===t.filters.length)return DR(t.filters[0]);const e=t.filters.map(r=>DR(r));let n=Kn.create(e,t.op);return n=GA(n),aW(n)?n:(wt(n instanceof Kn),wt(Ag(n)),wt(n.filters.length>1),n.filters.reduce((r,i)=>NR(r,i)))}function NR(t,e){let n;return wt(t instanceof yn||t instanceof Kn),wt(e instanceof yn||e instanceof Kn),n=t instanceof yn?e instanceof yn?Kn.create([t,e],"and"):uW(t,e):e instanceof yn?uW(e,t):function(i,s){if(wt(i.filters.length>0&&s.filters.length>0),Ag(i)&&Ag(s))return Yq(i,s.getFilters());const o=aR(i)?i:s,a=aR(i)?s:i,u=o.filters.map(l=>NR(l,a));return Kn.create(u,"or")}(t,e),GA(n)}function uW(t,e){if(Ag(e))return Yq(e,t.getFilters());{const n=e.filters.map(r=>NR(t,r));return Kn.create(n,"or")}}function GA(t){if(wt(t instanceof yn||t instanceof Kn),t instanceof yn)return t;const e=t.getFilters();if(1===e.length)return GA(e[0]);if(Qq(t))return t;const n=e.map(i=>GA(i)),r=[];return n.forEach(i=>{i instanceof yn?r.push(i):i instanceof Kn&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Kn.create(r,t.op)}class C0e{constructor(){this._n=new PR}addToCollectionParentIndex(e,n){return this._n.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Bo.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Bo.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class PR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xn(gn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xn(gn.comparator)).toArray()}}const qA=new Uint8Array(0);class S0e{constructor(e,n){this.databaseId=n,this.an=new PR,this.un=new sc(r=>Sf(r),(r,i)=>z0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:gs(i)};return lW(e).put(s)}return oe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[vq(n),""],!1,!0);return lW(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Zu(o.parent))}return r})}addFieldIndex(e,n){const r=sb(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=Fg(e);return s.next(a=>{o.put(eW(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=sb(e),i=Fg(e),s=Mg(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=sb(e),r=Mg(e),i=Fg(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return oe.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new sW(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Mg(e);let i=!0;const s=new Map;return oe.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Zt();const a=[];return oe.forEach(s,(u,l)=>{var O;Le("IndexedDbIndexManager",`Using index ${O=u,`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`} to execute ${Sf(n)}`);const c=function(O,U){const he=eR(U);if(void 0===he)return null;for(const de of MA(O,he.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null}(l,u),h=function(O,U){const he=new Map;for(const de of Tf(U))for(const R of MA(O,de.fieldPath))switch(R.op){case"==":case"in":he.set(de.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return he.set(de.fieldPath.canonicalString(),R.value),Array.from(he.values())}return null}(l,u),g=function(O,U){const he=[];let de=!0;for(const R of Tf(U)){const k=0===R.kind?t8(O,R.fieldPath,O.startAt):n8(O,R.fieldPath,O.startAt);he.push(k.value),de&&(de=k.inclusive)}return new Fd(he,de)}(l,u),_=function(O,U){const he=[];let de=!0;for(const R of Tf(U)){const k=0===R.kind?n8(O,R.fieldPath,O.endAt):t8(O,R.fieldPath,O.endAt);he.push(k.value),de&&(de=k.inclusive)}return new Fd(he,de)}(l,u),v=this.hn(u,l,g),w=this.hn(u,l,_),I=this.Pn(u,l,h),S=this.In(u.indexId,c,v,g.inclusive,w,_.inclusive,I);return oe.forEach(S,x=>r.G(x,n.limit).next(O=>{O.forEach(U=>{const he=et.fromSegments(U.documentKey);o.has(he)||(o=o.add(he),a.push(he))})}))}).next(()=>a)}return oe.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:A0e(Kn.create(e.filters,"and")).map(r=>cR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),l=u/(null!=n?n.length:1),c=[];for(let h=0;h<u;++h){const g=n?this.Tn(n[h/l]):qA,_=this.En(e,g,r[h%l],i),v=this.dn(e,g,s[h%l],o),w=a.map(I=>this.En(e,g,I,!0));c.push(...this.createRange(_,v,w))}return c}En(e,n,r,i){const s=new Of(e,et.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new Of(e,et.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new sW(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return oe.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new Xn(br.comparator),c=!1;for(const h of u.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?c=!0:l=l.add(g.field));for(const h of u.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new ib;for(const i of Tf(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Rf.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new ib;return Rf.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new ib;return Rf.bt.Pt(Cf(this.databaseId,n),r.Ht(function(s){const o=Tf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new ib);let s=0;for(const o of Tf(e)){const a=r[s++];for(const u of i)if(this.Vn(n,o.fieldPath)&&B0(a))i=this.mn(i,o,a);else{const l=u.Ht(o.kind);Rf.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new ib;u.seed(a.Wt()),Rf.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof yn&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=sb(e),i=Fg(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return oe.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(c,h){const g=h?new Eg(h.sequenceNumber,new Bo(kf(h.readTime),new et(Zu(h.documentKey)),h.largestBatchId)):Eg.empty(),_=c.fields.map(([v,w])=>new If(br.fromServerFormat(v),w));return new wg(c.indexId,c.collectionGroup,_,g)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ht(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=sb(e),s=Fg(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>oe.forEach(a,u=>s.put(eW(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return oe.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?oe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),oe.forEach(a,u=>this.pn(e,i,u).next(l=>{const c=this.yn(s,u);return l.isEqual(c)?oe.resolve():this.wn(e,s,u,l,c)}))))})}Sn(e,n,r,i){return Mg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Mg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Mg(e);let s=new Xn(Ld);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new Of(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Xn(Ld);const i=this.An(n,e);if(null==i)return r;const s=eR(n);if(null!=s){const o=e.data.field(s.fieldPath);if(B0(o))for(const a of o.arrayValue.values||[])r=r.add(new Of(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Of(n.indexId,e.key,qA,i));return r}wn(e,n,r,i,s){Le("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,c,h,g){const _=u.getIterator(),v=l.getIterator();let w=Tg(_),I=Tg(v);for(;w||I;){let S=!1,x=!1;if(w&&I){const O=c(w,I);O<0?x=!0:O>0&&(S=!0)}else null!=w?x=!0:S=!0;S?(h(I),I=Tg(v)):x?(g(w),w=Tg(_)):(w=Tg(_),I=Tg(v))}}(i,s,Ld,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),oe.waitFor(o)}gn(e){let n=1;return Fg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ld(o,a)).filter((o,a,u)=>!a||0!==Ld(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ld(o,e),u=Ld(o,n);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,qA,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,qA,[]]))}return s}Dn(e,n){return Ld(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(cW)}getMinOffset(e,n){return oe.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||at())).next(cW)}}function lW(t){return Bi(t,"collectionParents")}function Mg(t){return Bi(t,"indexEntries")}function sb(t){return Bi(t,"indexConfiguration")}function Fg(t){return Bi(t,"indexState")}function cW(t){wt(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;tR(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bo(e.readTime,e.documentKey,n)}const dW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _s{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hW(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(c,h,g)=>(a++,g.delete()));s.push(u.next(()=>{wt(1===a)}));const l=[];for(const c of n.mutations){const h=Nq(e,c.key.path,n.batchId);s.push(i.delete(h)),l.push(c.key)}return oe.waitFor(s).next(()=>l)}function WA(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw at();e=t.noDocument}return JSON.stringify(e).length}_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(41943040,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);class KA{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){wt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new KA(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $d(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Vg(e),o=$d(e);return o.add({}).next(a=>{wt("number"==typeof a);const u=new mR(a,n,r,i),l=function(_,v,w){const I=w.baseMutations.map(x=>tb(_.ct,x)),S=w.mutations.map(x=>tb(_.ct,x));return{userId:v,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:I,mutations:S}}(this.serializer,this.userId,u),c=[];let h=new Xn((g,_)=>Ht(g.canonicalString(),_.canonicalString()));for(const g of i){const _=Nq(this.userId,g.key.path,a);h=h.add(g.key.path.popLast()),c.push(o.put(l)),c.push(s.put(_,gve))}return h.forEach(g=>{c.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),oe.waitFor(c).next(()=>u)})}lookupMutationBatch(e,n){return $d(e).get(n).next(r=>r?(wt(r.userId===this.userId),xf(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?oe.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return $d(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(wt(a.batchId>=r),s=xf(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $d(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $d(e).U("userMutationsIndex",n).next(r=>r.map(i=>xf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=SA(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Vg(e).J({range:i},(o,a,u)=>{const[l,c,h]=o,g=Zu(c);if(l===this.userId&&n.path.isEqual(g))return $d(e).get(h).next(_=>{if(!_)throw at();wt(_.userId===this.userId),s.push(xf(this.serializer,_))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xn(Ht);const i=[];return n.forEach(s=>{const o=SA(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Vg(e).J({range:a},(l,c,h)=>{const[g,_,v]=l,w=Zu(_);g===this.userId&&s.path.isEqual(w)?r=r.add(v):h.done()});i.push(u)}),oe.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=SA(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Xn(Ht);return Vg(e).J({range:o},(u,l,c)=>{const[h,g,_]=u,v=Zu(g);h===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(_)):c.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push($d(e).get(s).next(o=>{if(null===o)throw at();wt(o.userId===this.userId),r.push(xf(this.serializer,o))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return hW(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return oe.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Vg(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Zu(s[1]);i.push(u)}else a.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,n){return fW(e,this.userId,n)}xn(e){return pW(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fW(t,e,n){const r=SA(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Vg(t).J({range:s,H:!0},(a,u,l)=>{const[c,h,g]=a;c===e&&h===i&&(o=!0),l.done()}).next(()=>o)}function $d(t){return Bi(t,"mutations")}function Vg(t){return Bi(t,"documentMutations")}function pW(t){return Bi(t,"mutationQueues")}class Mf{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Mf(0)}static Ln(){return new Mf(-1)}}class D0e{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Mf(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Tt.fromTimestamp(new kr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Lg(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Lg(e).J((o,a)=>{const u=nb(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>oe.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Lg(e).J((r,i)=>{const s=nb(i);n(s)})}Bn(e){return mW(e).get("targetGlobalKey").next(n=>(wt(null!==n),n))}kn(e,n){return mW(e).put("targetGlobalKey",n)}qn(e,n){return Lg(e).put(X8(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Sf(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Lg(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=nb(a);z0(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=jd(e);return n.forEach(o=>{const a=gs(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),oe.waitFor(i)}removeMatchingKeys(e,n,r){const i=jd(e);return oe.forEach(n,s=>{const o=gs(s.path);return oe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=jd(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=jd(e);let s=Zt();return i.J({range:r,H:!0},(o,a,u)=>{const l=Zu(o[1]),c=new et(l);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=gs(n.path),i=IDBKeyRange.bound([r],[vq(r)],!1,!0);let s=0;return jd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,n){return Lg(e).get(n).next(r=>r?nb(r):null)}}function Lg(t){return Bi(t,"targets")}function mW(t){return Bi(t,"targetGlobal")}function jd(t){return Bi(t,"targetDocuments")}function gW([t,e],[n,r]){const i=Ht(t,n);return 0===i?Ht(e,r):i}class N0e{constructor(e){this.Kn=e,this.buffer=new Xn(gW),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();gW(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yW{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Y.A)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Pd(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Nd(r)}yield n.zn(3e5)}))}}class P0e{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return oe.resolve(Uo.oe);const r=new N0e(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(dW)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dW):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),vg()<=Yu.$b.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${h} documents in `+(l-u)+`ms\nTotal Duration: ${l-c}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}class k0e{constructor(e,n){this.db=e,this.garbageCollector=function _W(t,e){return new P0e(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return QA(e,r)}removeReference(e,n,r){return QA(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return QA(e,n)}er(e,n){return function(i,s){let o=!1;return pW(i).Y(a=>fW(i,a,s).next(u=>(u&&(o=!0),oe.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const u=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Tt.min()),jd(e).delete([0,gs(o.path)])))});i.push(u)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return QA(e,n)}Xn(e,n){const r=jd(e);let i,s=Uo.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Uo.oe&&n(new et(Zu(i)),s),s=l,i=u):s=Uo.oe}).next(()=>{s!==Uo.oe&&n(new et(Zu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function QA(t,e){return jd(t).put((i=t.currentSequenceNumber,{targetId:0,path:gs(e.path),sequenceNumber:i}));var i}class vW{constructor(){this.changes=new sc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class x0e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ff(e).put(r)}removeEntry(e,n,r){return Ff(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],HA(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=wr.newInvalidDocument(n);return Ff(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ob(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:wr.newInvalidDocument(n)};return Ff(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ob(n))},(i,s)=>{r={document:this.nr(n,s),size:WA(s)}}).next(()=>r)}getEntries(e,n){let r=mo();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=mo(),i=new pr(et.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,WA(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return oe.resolve();let i=new Xn(TW);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(ob(i.first()),ob(i.last())),o=i.getIterator();let a=o.getNext();return Ff(e).J({index:"documentKeyIndex",range:s},(u,l,c)=>{const h=et.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&TW(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?c.$(ob(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),HA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ff(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let c=mo();for(const h of l){const g=this.nr(et.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(q0(n,g)||i.has(g.key))&&(c=c.insert(g.key,g))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=mo();const o=EW(n,r),a=EW(n,Bo.max());return Ff(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,c)=>{const h=this.nr(et.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new R0e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return wW(e).get("remoteDocumentGlobalKey").next(n=>(wt(!!n),n))}tr(e,n){return wW(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function v0e(t,e){let n;if(e.document)n=H8(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=kf(e.noDocument.readTime);n=wr.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=et.fromSegments(e.unknownDocument.path),i=kf(e.unknownDocument.version);n=wr.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new kr(i[0],i[1]);return Tt.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return wr.newInvalidDocument(e)}}function bW(t){return new x0e(t)}class R0e extends vW{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new sc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Xn((s,o)=>Ht(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Y8(this.ar.serializer,o);i=i.add(s.path.popLast());const l=WA(u);r+=l-a.size,n.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Y8(this.ar.serializer,o.convertToNoDocument(Tt.min()));n.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),oe.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function wW(t){return Bi(t,"remoteDocumentGlobal")}function Ff(t){return Bi(t,"remoteDocumentsV14")}function ob(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function EW(t,e){const n=e.documentKey.path.toArray();return[t,HA(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function TW(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ht(n[s],r[s]),i)return i;return i=Ht(n.length,r.length),i||(i=Ht(n[n.length-2],r[r.length-2]),i||Ht(n[n.length-1],r[r.length-1]))}class O0e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class IW{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&J0(r.mutation,i,po.empty(),kr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Zt()){const i=tl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=W0();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=tl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Zt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=mo();const o=K0(),a=K0();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(void 0===c||c.mutation instanceof oc)?s=s.insert(l.key,l):void 0!==c?(o.set(l.key,c.mutation.getFieldMask()),J0(c.mutation,l,c.mutation.getFieldMask(),kr.now())):o.set(l.key,po.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var h;return a.set(l,new O0e(c,null!==(h=o.get(l))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=K0();let i=new pr((o,a)=>o-a),s=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let c=r.get(u)||po.empty();c=a.applyToLocalView(l,c),r.set(u,c);const h=(i.get(a.batchId)||Zt()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,h=h8();c.forEach(g=>{if(!s.has(g)){const _=w8(n.get(g),r.get(g));null!==_&&h.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return et.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):dR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):oe.resolve(tl());let a=-1,u=s;return o.next(l=>oe.forEach(l,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?oe.resolve():this.remoteDocumentCache.getEntry(e,c).next(g=>{u=u.insert(c,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Zt())).next(c=>({batchId:a,changes:d8(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next(r=>{let i=W0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=W0();return this.indexManager.getCollectionParents(e,s).next(a=>oe.forEach(a,u=>{const l=(h=n,g=u.child(s),new ic(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,g;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(c=>{c.forEach((h,g)=>{o=o.insert(h,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();null===o.get(c)&&(o=o.insert(c,wr.newInvalidDocument(c)))});let a=W0();return o.forEach((u,l)=>{const c=s.get(u);void 0!==c&&J0(c.mutation,l,po.empty(),kr.now()),q0(n,l)&&(a=a.insert(u,l))}),a})}}class M0e{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return oe.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:di(i.createTime)}),oe.resolve();var i}getNamedQuery(e,n){return oe.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:IR(i.bundledQuery),readTime:di(i.readTime)}),oe.resolve();var i}}class F0e{constructor(){this.overlays=new pr(et.comparator),this.hr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=tl();return oe.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const i=tl(),s=n.length+1,o=new et(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new pr((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);null===c&&(c=tl(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=tl(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return oe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yR(n,r));let s=this.hr.get(n);void 0===s&&(s=Zt(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}class kR{constructor(){this.Pr=new Xn(Ui.Ir),this.Tr=new Xn(Ui.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Ui(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ui(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new et(new gn([])),r=new Ui(n,e),i=new Ui(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new et(new gn([])),r=new Ui(n,e),i=new Ui(n,e+1);let s=Zt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ui(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return et.comparator(e.key,n.key)||Ht(e.pr,n.pr)}static Er(e,n){return Ht(e.pr,n.pr)||et.comparator(e.key,n.key)}}class V0e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Xn(Ui.Ir)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++;const o=new mR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ui(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,n){return oe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ui(n,0),i=new Ui(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xn(Ht);return n.forEach(i=>{const s=new Ui(i,0),o=new Ui(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),oe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;et.isDocumentKey(s)||(s=s.child(""));const o=new Ui(new et(s),0);let a=new Xn(Ht);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),oe.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){wt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return oe.forEach(n.mutations,i=>{const s=new Ui(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Ui(n,0),i=this.wr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class L0e{constructor(e){this.vr=e,this.docs=new pr(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(n))}getEntries(e,n){let r=mo();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=mo();const o=n.path,a=new et(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||tR(wq(c),r)<=0||(i.has(c.key)||q0(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){at()}Fr(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $0e(this)}getSize(e){return oe.resolve(this.size)}}class $0e extends vW{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class j0e{constructor(e){this.persistence=e,this.Mr=new sc(n=>Sf(n),z0),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new kR,this.targetCount=0,this.Lr=Mf.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),oe.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Mf(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.qn(n),oe.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Nr.containsKey(n))}}class xR{constructor(e,n){this.Br={},this.overlays={},this.kr=new Uo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new j0e(this),this.indexManager=new C0e,this.remoteDocumentCache=new L0e(r=>this.referenceDelegate.Kr(r)),this.serializer=new J8(n),this.$r=new M0e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new F0e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new V0e(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Le("MemoryPersistence","Starting transaction:",e);const i=new B0e(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return oe.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class B0e extends Tq{constructor(e){super(),this.currentSequenceNumber=e}}class JA{constructor(e){this.persistence=e,this.zr=new kR,this.jr=null}static Hr(e){return new JA(e)}get Jr(){if(this.jr)return this.jr;throw at()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Jr,r=>{const i=et.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Tt.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return oe.or([()=>oe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class U0e{constructor(e){this.serializer=e}O(e,n,r,i){const s=new CA("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dq,{unique:!0}),u.createObjectStore("documentMutations"),AW(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),AW(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(c=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dq,{unique:!0});const h=l.store("mutations"),g=c.map(_=>h.put(_));return oe.waitFor(g)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:Dve});l.createIndex("collectionPathOverlayIndex",Nve,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Pve,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:yve});l.createIndex("documentKeyIndex",_ve),l.createIndex("collectionGroupIndex",vve)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Ive}).createIndex("sequenceNumberIndex",Ave,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Cve}).createIndex("documentKeyIndex",Sve,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=WA(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>oe.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>oe.forEach(a,u=>{wt(u.userId===s.userId);const l=xf(this.serializer,u);return hW(e,s.userId,l).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new gn(o),l=[0,gs(u)];s.push(n.get(l).next(c=>c?oe.resolve():n.put({targetId:0,path:gs(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Tve});const r=n.store("collectionParents"),i=new PR,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:gs(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new gn(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],l)=>{const c=Zu(a);return s(c.popLast())}))}ri(e){const n=e.store("targets");return n.J((r,i)=>{const s=nb(i),o=X8(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(h=o,h.document?new et(gn.fromString(h.document.name).popFirst(5)):h.noDocument?et.fromSegments(h.noDocument.path):h.unknownDocument?et.fromSegments(h.unknownDocument.path):at()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var h;i.push(a.put(l))}).next(()=>oe.waitFor(i))}si(e,n){const r=n.store("mutations"),i=bW(this.serializer),s=new xR(JA.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var l;let c=null!==(l=a.get(u.userId))&&void 0!==l?l:Zt();xf(this.serializer,u).keys().forEach(h=>c=c.add(h)),a.set(u.userId,c)}),oe.forEach(a,(u,l)=>{const c=new ji(l),h=zA.lt(this.serializer,c),g=s.getIndexManager(c),_=KA.lt(c,this.serializer,g,s.referenceDelegate);return new IW(i,_,h,g).recalculateAndSaveOverlaysForDocumentKeys(new iR(n,Uo.oe),u).next()})})}}function AW(t){t.createObjectStore("targetDocuments",{keyPath:wve}).createIndex("documentTargetsIndex",Eve,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bve,{unique:!0}),t.createObjectStore("targetGlobal")}const RR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OR{constructor(e,n,r,i,s,o,a,u,l,c,h=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=c,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!OR.D())throw new Me(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k0e(this,i),this.Ti=n+"main",this.serializer=new J8(u),this.Ei=new Xu(this.Ti,this.ui,new U0e(this.serializer)),this.Qr=new D0e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bW(this.serializer),this.$r=new b0e,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&ci("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,RR);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Uo(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,Y.A)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,Y.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,Y.A)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>XA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Pd(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ab(e).get("owner").next(n=>oe.resolve(this.Si(n)))}bi(e){return XA(e).delete(this.clientId)}Di(){var e=this;return(0,Y.A)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Bi(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return oe.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?oe.resolve(!0):ab(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,RR);return!1}}return!(!this.networkEnabled||!this.inForeground)||XA(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Le("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Y.A)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new iR(n,Uo.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>XA(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return KA.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S0e(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return zA.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=16===(u=this.ui)?xve:15===u?Rq:14===u?xq:13===u?kq:12===u?kve:11===u?Pq:void at();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new iR(a,this.kr?this.kr.next():Uo.oe),"readwrite-primary"===n?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw ci(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Me(me.FAILED_PRECONDITION,Eq);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return ab(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Me(me.FAILED_PRECONDITION,RR)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ab(e).put("owner",n)}static D(){return Xu.D()}yi(e){const n=ab(e);return n.get("owner").next(r=>this.Si(r)?(Le("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):oe.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(ci(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,rn.nr)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ci("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ci("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ab(t){return Bi(t,"owner")}function XA(t){return Bi(t,"clientMetadata")}function MR(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class FR{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Zt(),i=Zt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new FR(e,n.fromCache,r,i)}}class H0e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CW{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,rn.nr)()?8:Iq((0,rn.ZQ)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new H0e;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(vg()<=Yu.$b.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",Dg(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),oe.resolve()):(vg()<=Yu.$b.DEBUG&&Le("QueryEngine","Query:",Dg(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(vg()<=Yu.$b.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",Dg(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):oe.resolve())}ji(e,n){if(i8(n))return oe.resolve(null);let r=ys(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=FA(n,null,"F"),r=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Zt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(e,FA(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return i8(n)||i.isEqual(Tt.min())?oe.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?oe.resolve(null):(vg()<=Yu.$b.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dg(n)),this.es(e,o,n,bq(i,-1)).next(a=>a))})}Zi(e,n){let r=new Xn(l8(e));return n.forEach((i,s)=>{q0(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return vg()<=Yu.$b.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Dg(n)),this.zi.getDocumentsMatchingQuery(e,n,Bo.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class z0e{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new pr(Ht),this.rs=new sc(s=>Sf(s),z0),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IW(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function SW(t,e,n,r){return new z0e(t,e,n,r)}function DW(t,e){return VR.apply(this,arguments)}function VR(){return(VR=(0,Y.A)(function*(t,e){const n=Qe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Zt();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function NW(t){const e=Qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function PW(t,e,n){let r=Zt(),i=Zt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=mo();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Tt.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function W0e(t,e){const n=Qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $g(t,e){const n=Qe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ac(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function jg(t,e,n){return LR.apply(this,arguments)}function LR(){return(LR=(0,Y.A)(function*(t,e,n){const r=Qe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Pd(o))throw o;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function ZA(t,e,n){const r=Qe(t);let i=Tt.min(),s=Zt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const h=Qe(u),g=h.rs.get(c);return void 0!==g?oe.resolve(h.ns.get(g)):h.Qr.getTargetData(l,c)}(r,o,ys(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Tt.min(),n?s:Zt())).next(a=>(RW(r,u8(e),a),{documents:a,hs:s})))}function kW(t,e){const n=Qe(t),r=Qe(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function xW(t,e){const n=Qe(t),r=n.ss.get(e)||Tt.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,bq(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(RW(n,e,i),i))}function RW(t,e,n){let r=t.ss.get(e)||Tt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function $R(){return($R=(0,Y.A)(function*(t,e,n,r){const i=Qe(t);let s=Zt(),o=mo();for(const l of n){const c=e.Ps(l.metadata.name);l.document&&(s=s.add(c));const h=e.Is(l);h.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(c,h)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield $g(i,(c=r,ys(Cg(gn.fromString(`__bundle__/docs/${c}`)))));var c;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>PW(l,a,o).next(c=>(a.apply(l),c)).next(c=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,c.cs,c.ls)).next(()=>c.cs)))})).apply(this,arguments)}function Q0e(t,e){return jR.apply(this,arguments)}function jR(){return(jR=(0,Y.A)(function*(t,e,n=Zt()){const r=yield $g(t,ys(IR(e.bundledQuery))),i=Qe(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=di(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Ni.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function OW(t,e){return`firestore_clients_${t}_${e}`}function MW(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function BR(t,e){return`firestore_targets_${t}_${e}`}class eC{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Me(i.error.code,i.error.message))),o?new eC(e,n,i.state,s):(ci("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ub{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Me(r.error.code,r.error.message))),s?new ub(e,r.state,i):(ci("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tC{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=fR();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Cq(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new tC(e,s):(ci("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class UR{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new UR(n.clientId,n.onlineState):(ci("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HR{constructor(){this.activeTargetIds=fR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zR{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new pr(Ht),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=OW(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new HR),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Y.A)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Vs)continue;const s=e.getItem(OW(e.persistenceKey,i));if(s){const o=tC.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(BR(this.persistenceKey,e));if(r){const i=ub.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(BR(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Le("SharedClientState","READ",e,n),n}setItem(e,n){Le("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void ci("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,Y.A)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(o){let a=Uo.oe;if(null!=o)try{const u=JSON.parse(o);wt("number"==typeof u),a=u}catch(u){ci("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Uo.oe&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Ys(s)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new eC(this.currentUser,e,n,r),s=MW(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=MW(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=BR(this.persistenceKey,e),s=new ub(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return tC.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return eC.Es(new ji(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return ub.Es(i,n)}xs(e){return UR.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,Y.A)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=fR();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class FW{constructor(){this.no=new HR,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new HR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class J0e{io(e){}shutdown(){}}class VW{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nC=null;function GR(){return null===nC?nC=268435456+Math.round(2147483648*Math.random()):nC++,"0x"+nC.toString(16)}const Y0e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X0e{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const vs="WebChannelConnection";class Z0e extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=GR(),u=this.vo(n,r.toUriEncodedString());Le("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Le("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw fo("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+_g,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){return`${this.wo}/v1/${r}:${Y0e[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=GR();return new Promise((o,a)=>{const u=new lq;u.setWithCredentials(!0),u.listenOnce(dq.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case AA.NO_ERROR:const c=u.getResponseJson();Le(vs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case AA.TIMEOUT:Le(vs,`RPC '${e}' ${s} timed out`),a(new Me(me.DEADLINE_EXCEEDED,"Request time out"));break;case AA.HTTP_ERROR:const h=u.getStatus();if(Le(vs,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(I){const S=I.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(S)>=0?S:me.UNKNOWN}(_.status);a(new Me(v,_.message))}else a(new Me(me.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Me(me.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Le(vs,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Le(vs,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){const i=GR(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pq(),a=fq(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new cq({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Le(vs,`Creating RPC '${e}' stream ${i}: ${c}`,u);const h=o.createWebChannel(c,u);let g=!1,_=!1;const v=new X0e({lo:I=>{_?Le(vs,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(g||(Le(vs,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),Le(vs,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},ho:()=>h.close()}),w=(I,S,x)=>{I.listen(S,O=>{try{x(O)}catch(U){setTimeout(()=>{throw U},0)}})};return w(h,O0.EventType.OPEN,()=>{_||(Le(vs,`RPC '${e}' stream ${i} transport opened.`),v.mo())}),w(h,O0.EventType.CLOSE,()=>{_||(_=!0,Le(vs,`RPC '${e}' stream ${i} transport closed`),v.po())}),w(h,O0.EventType.ERROR,I=>{_||(_=!0,fo(vs,`RPC '${e}' stream ${i} transport errored:`,I),v.po(new Me(me.UNAVAILABLE,"The operation could not be completed")))}),w(h,O0.EventType.MESSAGE,I=>{var S;if(!_){const x=I.data[0];wt(!!x);const U=x.error||(null===(S=x[0])||void 0===S?void 0:S.error);if(U){Le(vs,`RPC '${e}' stream ${i} received error:`,U);const he=U.status;let de=function(F){const z=_i[F];if(void 0!==z)return D8(z)}(he),R=U.message;void 0===de&&(de=me.INTERNAL,R="Unknown error status: "+he+" with message "+U.message),_=!0,v.po(new Me(de,R)),h.close()}else Le(vs,`RPC '${e}' stream ${i} received:`,x),v.yo(x)}}),w(a,hq.STAT_EVENT,I=>{I.stat===Xx.PROXY?Le(vs,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Xx.NOPROXY&&Le(vs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}}function LW(){return typeof window<"u"?window:null}function rC(){return typeof document<"u"?document:null}function lb(t){return new l0e(t,!0)}class qR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class $W{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new qR(e,n)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,Y.A)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,Y.A)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){var r=this;return(0,Y.A)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):n&&n.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(n)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new Me(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,Y.A)(function*(){e.state=0,e.start()}))}c_(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ebe extends $W{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=function h0e(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:at(),i=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(wt(void 0===c||"string"==typeof c),Ni.fromBase64String(c||"")):(wt(void 0===c||c instanceof Buffer||c instanceof Uint8Array),Ni.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?me.UNKNOWN:D8(l.code);return new Me(c,l.message||"")}(o);n=new R8(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=nl(t,r.document.name),s=di(r.document.updateTime),o=r.document.createTime?di(r.document.createTime):Tt.min(),a=new is({mapValue:{fields:r.document.fields}}),u=wr.newFoundDocument(i,s,o,a);n=new BA(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=nl(t,r.document),s=r.readTime?di(r.readTime):Tt.min(),o=wr.newNoDocument(i,s);n=new BA([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=nl(t,r.document);n=new BA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new r0e(i,s);n=new x8(r.targetId,o)}}var l;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Tt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Tt.min():o.readTime?di(o.readTime):Tt.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=ER(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=OA(u)?{documents:z8(s,u)}:{query:UA(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=V8(s,o.resumeToken);const l=vR(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Tt.min())>0){a.readTime=Rg(s,o.snapshotVersion.toTimestamp());const l=vR(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function p0e(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=ER(this.serializer),n.removeTarget=e,this.i_(n)}}class tbe extends $W{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=function f0e(t,e){return t&&t.length>0?(wt(void 0!==e),t.map(n=>function(i,s){let o=di(i.updateTime?i.updateTime:s);return o.isEqual(Tt.min())&&(o=di(s)),new e0e(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.A_(r,n)}return wt(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=ER(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tb(this.serializer,r))};this.i_(n)}}class nbe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,wR(n,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(me.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,wR(n,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(me.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class rbe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ci(n),this.y_=!1):Le("OnlineStateTracker",n)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class ibe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,Y.A)(function*(){var u;Bd(o)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Y.A)(function*(c){const h=Qe(c);h.M_.add(4),yield Bg(h),h.N_.set("Unknown"),h.M_.delete(4),yield cb(h)}),function l(c){return u.apply(this,arguments)})(o))}))}),this.N_=new rbe(r,i)}}function cb(t){return WR.apply(this,arguments)}function WR(){return(WR=(0,Y.A)(function*(t){if(Bd(t))for(const e of t.x_)yield e(!0)})).apply(this,arguments)}function Bg(t){return KR.apply(this,arguments)}function KR(){return(KR=(0,Y.A)(function*(t){for(const e of t.x_)yield e(!1)})).apply(this,arguments)}function iC(t,e){const n=Qe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),YR(n)?JR(n):zg(n).Xo()&&QR(n,e))}function Ug(t,e){const n=Qe(t),r=zg(n);n.F_.delete(e),r.Xo()&&jW(n,e),0===n.F_.size&&(r.Xo()?r.n_():Bd(n)&&n.N_.set("Unknown"))}function QR(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zg(t).P_(e)}function jW(t,e){t.L_.xe(e),zg(t).I_(e)}function JR(t){t.L_=new s0e({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zg(t).start(),t.N_.w_()}function YR(t){return Bd(t)&&!zg(t).Zo()&&t.F_.size>0}function Bd(t){return 0===Qe(t).M_.size}function BW(t){t.L_=void 0}function sbe(t){return XR.apply(this,arguments)}function XR(){return(XR=(0,Y.A)(function*(t){t.N_.set("Online")})).apply(this,arguments)}function obe(t){return ZR.apply(this,arguments)}function ZR(){return(ZR=(0,Y.A)(function*(t){t.F_.forEach((e,n)=>{QR(t,e)})})).apply(this,arguments)}function abe(t,e){return eO.apply(this,arguments)}function eO(){return(eO=(0,Y.A)(function*(t,e){BW(t),YR(t)?(t.N_.D_(e),JR(t)):t.N_.set("Unknown")})).apply(this,arguments)}function ube(t,e,n){return tO.apply(this,arguments)}function tO(){return tO=(0,Y.A)(function*(t,e,n){if(t.N_.set("Online"),e instanceof R8&&2===e.state&&e.cause)try{yield(r=(0,Y.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.F_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.F_.delete(u),s.L_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sC(t,r)}else if(e instanceof BA?t.L_.Ke(e):e instanceof x8?t.L_.He(e):t.L_.We(e),!n.isEqual(Tt.min()))try{const r=yield NW(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ni.EMPTY_BYTE_STRING,c.snapshotVersion)),jW(s,u);const h=new ac(c.target,u,l,c.sequenceNumber);QR(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield sC(t,r)}var r}),tO.apply(this,arguments)}function sC(t,e,n){return nO.apply(this,arguments)}function nO(){return(nO=(0,Y.A)(function*(t,e,n){if(!Pd(e))throw e;t.M_.add(1),yield Bg(t),t.N_.set("Offline"),n||(n=()=>NW(t.localStore)),t.asyncQueue.enqueueRetryable((0,Y.A)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield cb(t)}))})).apply(this,arguments)}function UW(t,e){return e().catch(n=>sC(t,n,e))}function Hg(t){return rO.apply(this,arguments)}function rO(){return(rO=(0,Y.A)(function*(t){const e=Qe(t),n=Ud(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;lbe(e);)try{const i=yield W0e(e.localStore,r);if(null===i){0===e.v_.length&&n.n_();break}r=i.batchId,cbe(e,i)}catch(i){yield sC(e,i)}HW(e)&&zW(e)})).apply(this,arguments)}function lbe(t){return Bd(t)&&t.v_.length<10}function cbe(t,e){t.v_.push(e);const n=Ud(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function HW(t){return Bd(t)&&!Ud(t).Zo()&&t.v_.length>0}function zW(t){Ud(t).start()}function dbe(t){return iO.apply(this,arguments)}function iO(){return(iO=(0,Y.A)(function*(t){Ud(t).V_()})).apply(this,arguments)}function hbe(t){return sO.apply(this,arguments)}function sO(){return(sO=(0,Y.A)(function*(t){const e=Ud(t);for(const n of t.v_)e.d_(n.mutations)})).apply(this,arguments)}function fbe(t,e,n){return oO.apply(this,arguments)}function oO(){return(oO=(0,Y.A)(function*(t,e,n){const r=t.v_.shift(),i=gR.from(r,e,n);yield UW(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Hg(t)})).apply(this,arguments)}function pbe(t,e){return aO.apply(this,arguments)}function aO(){return aO=(0,Y.A)(function*(t,e){var n;e&&Ud(t).E_&&(yield(n=(0,Y.A)(function*(i,s){if(S8(a=s.code)&&a!==me.ABORTED){const o=i.v_.shift();Ud(i).t_(),yield UW(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Hg(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),HW(t)&&zW(t)}),aO.apply(this,arguments)}function GW(t,e){return uO.apply(this,arguments)}function uO(){return(uO=(0,Y.A)(function*(t,e){const n=Qe(t);n.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Bd(n);n.M_.add(3),yield Bg(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield cb(n)})).apply(this,arguments)}function lO(t,e){return cO.apply(this,arguments)}function cO(){return(cO=(0,Y.A)(function*(t,e){const n=Qe(t);e?(n.M_.delete(2),yield cb(n)):e||(n.M_.add(2),yield Bg(n),n.N_.set("Unknown"))})).apply(this,arguments)}function zg(t){return t.B_||(t.B_=function(n,r,i){const s=Qe(n);return s.f_(),new ebe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:sbe.bind(null,t),To:obe.bind(null,t),Ao:abe.bind(null,t),h_:ube.bind(null,t)}),t.x_.push(function(){var e=(0,Y.A)(function*(n){n?(t.B_.t_(),YR(t)?JR(t):t.N_.set("Unknown")):(yield t.B_.stop(),BW(t))});return function(n){return e.apply(this,arguments)}}())),t.B_}function Ud(t){return t.k_||(t.k_=function(n,r,i){const s=Qe(n);return s.f_(),new tbe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:dbe.bind(null,t),Ao:pbe.bind(null,t),R_:hbe.bind(null,t),A_:fbe.bind(null,t)}),t.x_.push(function(){var e=(0,Y.A)(function*(n){n?(t.k_.t_(),yield Hg(t)):(yield t.k_.stop(),t.v_.length>0&&(Le("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))});return function(n){return e.apply(this,arguments)}}())),t.k_}class dO{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new dO(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gg(t,e){if(ci("AsyncQueue",`${e}: ${t}`),Pd(t))return new Me(me.UNAVAILABLE,`${e}: ${t}`);throw t}class qg{constructor(e){this.comparator=e?(n,r)=>e(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=W0(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new qg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qg)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new qg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class qW{constructor(){this.q_=new pr(et.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(n,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(n):1===e.type&&2===r.type?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):at():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wg{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wg(e,n,qg.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&G0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class mbe{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class gbe{constructor(){this.queries=new sc(e=>a8(e),G0),this.onlineState="Unknown",this.z_=new Set}}function hO(t,e){return fO.apply(this,arguments)}function fO(){return(fO=(0,Y.A)(function*(t,e){const n=Qe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new mbe,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){const a=Gg(o,`Initialization of query '${Dg(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&gO(n)})).apply(this,arguments)}function pO(t,e){return mO.apply(this,arguments)}function mO(){return(mO=(0,Y.A)(function*(t,e){const n=Qe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function ybe(t,e){const n=Qe(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&gO(n)}function _be(t,e,n){const r=Qe(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function gO(t){t.z_.forEach(e=>{e.next()})}var yO,WW;(WW=yO||(yO={})).J_="default",WW.Cache="cache";class _O{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Wg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==yO.Cache}}class vbe{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}class KW{constructor(e){this.serializer=e}Ps(e){return nl(this.serializer,e)}Is(e){return e.metadata.exists?H8(this.serializer,e.document,!1):wr.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return di(e)}}class bbe{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QW(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const r=gn.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,r=new KW(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Zt()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,Y.A)(function*(){const n=yield function K0e(t,e,n,r){return $R.apply(this,arguments)}(e.localStore,new KW(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield Q0e(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:n}})()}}function QW(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class JW{constructor(e){this.key=e}}class YW{constructor(e){this.key=e}}class XW{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Zt(),this.mutatedKeys=Zt(),this.Ia=l8(e),this.Ta=new qg(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new qW,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const g=i.get(c),_=q0(this.query,h)?h:null,v=!!g&&this.mutatedKeys.has(g.key),w=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let I=!1;g&&_?g.data.isEqual(_.data)?v!==w&&(r.track({type:3,doc:_}),I=!0):this.Ra(g,_)||(r.track({type:2,doc:_}),I=!0,(u&&this.Ia(_,u)>0||l&&this.Ia(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),I=!0):g&&!_&&(r.track({type:1,doc:g}),I=!0,(u||l)&&(a=!0)),I&&(_?(o=o.add(_),s=w?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((c,h)=>function(_,v){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return w(_)-w(v)}(c.type,h.type)||this.Ia(c.doc,h.doc)),this.Va(r),i=null!=i&&i;const a=n&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,0!==o.length||l?{snapshot:new Wg(this.query,e.Ta,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new qW,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Zt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new YW(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new JW(r))}),n}pa(e){this.la=e.hs,this.Pa=Zt();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Wg.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class wbe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ebe{constructor(e){this.key=e,this.wa=!1}}class Tbe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new sc(a=>a8(a),G0),this.Da=new Map,this.Ca=new Set,this.va=new pr(et.comparator),this.Fa=new Map,this.Ma=new kR,this.xa={},this.Oa=new Map,this.Na=Mf.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Ibe(t,e){return vO.apply(this,arguments)}function vO(){return(vO=(0,Y.A)(function*(t,e,n=!0){const r=oC(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield ZW(r,e,n,!0),i})).apply(this,arguments)}function Abe(t,e){return bO.apply(this,arguments)}function bO(){return(bO=(0,Y.A)(function*(t,e){const n=oC(t);yield ZW(n,e,!0,!1)})).apply(this,arguments)}function ZW(t,e,n,r){return wO.apply(this,arguments)}function wO(){return(wO=(0,Y.A)(function*(t,e,n,r){const i=yield $g(t.localStore,ys(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield EO(t,e,s,"current"===o,i.resumeToken)),t.isPrimaryClient&&n&&iC(t.remoteStore,i),a})).apply(this,arguments)}function EO(t,e,n,r,i){return TO.apply(this,arguments)}function TO(){return TO=(0,Y.A)(function*(t,e,n,r,i){t.Ba=(h,g,_)=>{return(v=(0,Y.A)(function*(I,S,x,O){let U=S.view.da(x);U.Xi&&(U=yield ZA(I.localStore,S.query,!1).then(({documents:k})=>S.view.da(k,U)));const he=O&&O.targetChanges.get(S.targetId),de=O&&null!=O.targetMismatches.get(S.targetId),R=S.view.applyChanges(U,I.isPrimaryClient,he,de);return OO(I,S.targetId,R.fa),R.snapshot}),function w(I,S,x,O){return v.apply(this,arguments)})(t,h,g,_);var v};const s=yield ZA(t.localStore,e,!0),o=new XW(e,s.hs),a=o.da(s.documents),u=Z0.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,u);OO(t,n,l.fa);const c=new wbe(e,n,o);return t.ba.set(e,c),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot}),TO.apply(this,arguments)}function Cbe(t,e,n){return IO.apply(this,arguments)}function IO(){return(IO=(0,Y.A)(function*(t,e,n){const r=Qe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!G0(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ug(r.remoteStore,i.targetId),Kg(r,i.targetId)}).catch(Nd))):(Kg(r,i.targetId),yield jg(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Sbe(t,e){return AO.apply(this,arguments)}function AO(){return(AO=(0,Y.A)(function*(t,e){const n=Qe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ug(n.remoteStore,r.targetId))})).apply(this,arguments)}function CO(){return(CO=(0,Y.A)(function*(t,e,n){const r=GO(t);try{const i=yield function(o,a){const u=Qe(o),l=kr.now(),c=a.reduce((_,v)=>_.add(v.key),Zt());let h,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=mo(),w=Zt();return u.os.getEntries(_,c).next(I=>{v=I,v.forEach((S,x)=>{x.isValidDocument()||(w=w.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,v)).next(I=>{h=I;const S=[];for(const x of a){const O=n0e(x,h.get(x.key).overlayedDocument);null!=O&&S.push(new oc(x.key,O,Gq(O.value.mapValue),xr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,S,a)}).next(I=>{g=I;const S=I.applyToLocalDocumentSet(h,w);return u.documentOverlayCache.saveOverlays(_,I.batchId,S)})}).then(()=>({batchId:g.batchId,changes:d8(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new pr(Ht)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield uc(r,i.changes),yield Hg(r.remoteStore)}catch(i){const s=Gg(i,"Failed to persist write");n.reject(s)}})).apply(this,arguments)}function e9(t,e){return SO.apply(this,arguments)}function SO(){return(SO=(0,Y.A)(function*(t,e){const n=Qe(t);try{const r=yield function q0e(t,e){const n=Qe(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((c,h)=>{const g=i.get(h);if(!g)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,h)));let _=g.withSequenceNumber(s.currentSequenceNumber);var w,I,S;null!==e.targetMismatches.get(h)?_=_.withResumeToken(Ni.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):c.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(c.resumeToken,r)),i=i.insert(h,_),I=_,S=c,(0===(w=g).resumeToken.approximateByteSize()||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(s,_))});let u=mo(),l=Zt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(PW(s,o,e.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(Tt.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return oe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?wt(o.wa):i.removedDocuments.size>0&&(wt(o.wa),o.wa=!1))}),yield uc(n,r,e)}catch(r){yield Nd(r)}})).apply(this,arguments)}function t9(t,e,n){const r=Qe(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Qe(o);u.onlineState=a;let l=!1;u.queries.forEach((c,h)=>{for(const g of h.U_)g.j_(a)&&(l=!0)}),l&&gO(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Nbe(t,e,n){return DO.apply(this,arguments)}function DO(){return(DO=(0,Y.A)(function*(t,e,n){const r=Qe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new pr(et.comparator);o=o.insert(s,wr.newNoDocument(s,Tt.min()));const a=Zt().add(s),u=new X0(Tt.min(),new Map,new pr(Ht),o,a);yield e9(r,u),r.va=r.va.remove(s),r.Fa.delete(e),MO(r)}else yield jg(r.localStore,e,!1).then(()=>Kg(r,e,n)).catch(Nd)})).apply(this,arguments)}function Pbe(t,e){return NO.apply(this,arguments)}function NO(){return(NO=(0,Y.A)(function*(t,e){const n=Qe(t),r=e.batch.batchId;try{const i=yield function G0e(t,e){const n=Qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const h=l.batch,g=h.keys();let _=oe.resolve();return g.forEach(v=>{_=_.next(()=>c.getEntry(u,v)).next(w=>{const I=l.docVersions.get(v);wt(null!==I),w.version.compareTo(I)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),c.addEntry(w)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Zt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);RO(n,r,null),xO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield uc(n,i)}catch(i){yield Nd(i)}})).apply(this,arguments)}function kbe(t,e,n){return PO.apply(this,arguments)}function PO(){return(PO=(0,Y.A)(function*(t,e,n){const r=Qe(t);try{const i=yield function(o,a){const u=Qe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(h=>(wt(null!==h),c=h.keys(),u.mutationQueue.removeMutationBatch(l,h))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,e);RO(r,e,n),xO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield uc(r,i)}catch(i){yield Nd(i)}})).apply(this,arguments)}function kO(){return(kO=(0,Y.A)(function*(t,e){const n=Qe(t);Bd(n.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Qe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){const i=Gg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function xO(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function RO(t,e,n){const r=Qe(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Kg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||n9(t,r)})}function n9(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);null!==n&&(Ug(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),MO(t))}function OO(t,e,n){for(const r of n)r instanceof JW?(t.Ma.addReference(r.key,e),Rbe(t,r)):r instanceof YW?(Le("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||n9(t,r.key)):at()}function Rbe(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(Le("SyncEngine","New document in limbo: "+n),t.Ca.add(r),MO(t))}function MO(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new et(gn.fromString(e)),r=t.Na.next();t.Fa.set(r,new Ebe(n)),t.va=t.va.insert(n,r),iC(t.remoteStore,new ac(ys(Cg(n.path)),r,"TargetPurposeLimboResolution",Uo.oe))}}function uc(t,e,n){return FO.apply(this,arguments)}function FO(){return FO=(0,Y.A)(function*(t,e,n){const r=Qe(t),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const h=l?!l.fromCache:null===(c=n?.targetChanges.get(u.targetId))||void 0===c?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);const h=FR.Ki(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,Y.A)(function*(l,c){const h=Qe(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>oe.forEach(c,_=>oe.forEach(_.qi,v=>h.persistence.referenceDelegate.addReference(g,_.targetId,v)).next(()=>oe.forEach(_.Qi,v=>h.persistence.referenceDelegate.removeReference(g,_.targetId,v)))))}catch(g){if(!Pd(g))throw g;Le("LocalStore","Failed to update sequence numbers: "+g)}for(const g of c){const _=g.targetId;if(!g.fromCache){const v=h.ns.get(_),I=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);h.ns=h.ns.insert(_,I)}}}),function u(l,c){return a.apply(this,arguments)})(r.localStore,s))}),FO.apply(this,arguments)}function Obe(t,e){return VO.apply(this,arguments)}function VO(){return(VO=(0,Y.A)(function*(t,e){const n=Qe(t);if(!n.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield DW(n.localStore,e);n.currentUser=e,(s=n).Oa.forEach(a=>{a.forEach(u=>{u.reject(new Me(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uc(n,r.us)}var s})).apply(this,arguments)}function Mbe(t,e){const n=Qe(t),r=n.Fa.get(e);if(r&&r.wa)return Zt().add(r.key);{let i=Zt();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Fbe(t,e){return LO.apply(this,arguments)}function LO(){return(LO=(0,Y.A)(function*(t,e){const n=Qe(t),r=yield ZA(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&OO(n,e.targetId,i.fa),i})).apply(this,arguments)}function Vbe(t,e){return $O.apply(this,arguments)}function $O(){return($O=(0,Y.A)(function*(t,e){const n=Qe(t);return xW(n.localStore,e).then(r=>uc(n,r))})).apply(this,arguments)}function Lbe(t,e,n,r){return jO.apply(this,arguments)}function jO(){return(jO=(0,Y.A)(function*(t,e,n,r){const i=Qe(t),s=yield function(a,u){const l=Qe(a),c=Qe(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>c.vn(h,u).next(g=>g?l.localDocuments.getDocuments(h,g):oe.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield Hg(i.remoteStore):"acknowledged"===n||"rejected"===n?(RO(i,e,r||null),xO(i,e),u=e,Qe(Qe(i.localStore).mutationQueue).Mn(u)):at(),yield uc(i,s)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function BO(){return(BO=(0,Y.A)(function*(t,e){const n=Qe(t);if(oC(n),GO(n),!0===e&&!0!==n.La){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield r9(n,r.toArray());n.La=!0,yield lO(n.remoteStore,!0);for(const s of i)iC(n.remoteStore,s)}else if(!1===e&&!1!==n.La){const r=[];let i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Kg(n,o),jg(n.localStore,o,!0))),Ug(n.remoteStore,o)}),yield i,yield r9(n,r),function(o){const a=Qe(o);a.Fa.forEach((u,l)=>{Ug(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new pr(et.comparator)}(n),n.La=!1,yield lO(n.remoteStore,!1)}})).apply(this,arguments)}function r9(t,e,n){return UO.apply(this,arguments)}function UO(){return(UO=(0,Y.A)(function*(t,e,n){const r=Qe(t),i=[],s=[];for(const o of e){let a;const u=r.Da.get(o);if(u&&0!==u.length){a=yield $g(r.localStore,ys(u[0]));for(const l of u){const c=r.ba.get(l),h=yield Fbe(r,c);h.snapshot&&s.push(h.snapshot)}}else{const l=yield kW(r.localStore,o);a=yield $g(r.localStore,l),yield EO(r,i9(l),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function i9(t){return r8(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jbe(t){return n=Qe(t).localStore,Qe(Qe(n).persistence).Bi();var n}function Bbe(t,e,n,r){return HO.apply(this,arguments)}function HO(){return(HO=(0,Y.A)(function*(t,e,n,r){const i=Qe(t);if(i.La)return void Le("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield xW(i.localStore,u8(s[0])),a=X0.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ni.EMPTY_BYTE_STRING);yield uc(i,o,a);break}case"rejected":yield jg(i.localStore,e,!0),Kg(i,e,r);break;default:at()}})).apply(this,arguments)}function Ube(t,e,n){return zO.apply(this,arguments)}function zO(){return(zO=(0,Y.A)(function*(t,e,n){const r=oC(t);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Le("SyncEngine","Adding an already active target "+i);continue}const s=yield kW(r.localStore,i),o=yield $g(r.localStore,s);yield EO(r,i9(s),o.targetId,!1,o.resumeToken),iC(r.remoteStore,o)}for(const i of n)r.Da.has(i)&&(yield jg(r.localStore,i,!1).then(()=>{Ug(r.remoteStore,i),Kg(r,i)}).catch(Nd))}})).apply(this,arguments)}function oC(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=e9.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mbe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nbe.bind(null,e),e.Sa.h_=ybe.bind(null,e.eventManager),e.Sa.ka=_be.bind(null,e.eventManager),e}function GO(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pbe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kbe.bind(null,e),e}class Qg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Y.A)(function*(){n.serializer=lb(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SW(this.persistence,new CW,e.initialUser,this.serializer)}createPersistence(e){return new xR(JA.Hr,this.serializer)}createSharedClientState(e){return new FW}terminate(){var e=this;return(0,Y.A)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qO extends Qg{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Y.A)(function*(){yield n().call(r,e),yield r.Qa.initialize(r,e),yield GO(r.Qa.syncEngine),yield Hg(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return SW(this.persistence,new CW,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new yW(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new pve(n,this.persistence);return new fve(e.asyncQueue,r)}createPersistence(e){const n=MR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new OR(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,LW(),rC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new FW}}class s9 extends qO{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Y.A)(function*(){yield n().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof zR&&(r.sharedClientState.syncEngine={Zs:Lbe.bind(null,i),Xs:Bbe.bind(null,i),eo:Ube.bind(null,i),Bi:jbe.bind(null,i),Ys:Vbe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,Y.A)(function*(o){yield function $be(t,e){return BO.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=LW();if(!zR.D(n))throw new Me(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=MR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zR(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jg{initialize(e,n){var r=this;return(0,Y.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>t9(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Obe.bind(null,r.syncEngine),yield lO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gbe}createDatastore(e){const n=lb(e.databaseInfo.databaseId),r=new Z0e(e.databaseInfo);return new nbe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>t9(this.syncEngine,n,0),a=VW.D()?new VW:new J0e,new ibe(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,l,c){const h=new Tbe(i,s,o,a,u,l);return c&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,Y.A)(function*(){var n,r;yield(r=(0,Y.A)(function*(s){const o=Qe(s);Le("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield Bg(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function o9(t,e=10240){let n=0;return{read:()=>(0,Y.A)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Y.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class aC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Gbe{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Di,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,Y.A)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,Y.A)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,Y.A)(function*(){const n=yield e.za();if(null===n)return null;const r=e.Wa.decode(n),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new vbe(JSON.parse(s),n.length+i)})()}Ja(){return this.buffer.findIndex(e=>123===e)}za(){var e=this;return(0,Y.A)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const n=e.Ja();n<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ha(e){var n=this;return(0,Y.A)(function*(){for(;n.buffer.length<e;)(yield n.Ya())&&n.ja("Reached the end of bundle when more is expected.");const r=n.Wa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,Y.A)(function*(){const n=yield e.Ua.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class qbe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Y.A)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new Me(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,Y.A)(function*(o,a){const u=Qe(o),l={documents:a.map(_=>eb(u.serializer,_))},c=yield u.xo("BatchGetDocuments",u.serializer.databaseId,gn.emptyPath(),l,a.length),h=new Map;c.forEach(_=>{const v=function d0e(t,e){return"found"in e?function(r,i){wt(!!i.found);const s=nl(r,i.found.name),o=di(i.found.updateTime),a=i.found.createTime?di(i.found.createTime):Tt.min(),u=new is({mapValue:{fields:i.found.fields}});return wr.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){wt(!!i.missing),wt(!!i.readTime);const s=nl(r,i.missing),o=di(i.readTime);return wr.newNoDocument(s,o)}(t,e):at()}(u.serializer,_);h.set(v.key.toString(),v)});const g=[];return a.forEach(_=>{const v=h.get(_.toString());wt(!!v),g.push(v)}),g}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Y.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=et.fromPath(i);e.mutations.push(new pR(s,e.precondition(s)))}),yield(r=(0,Y.A)(function*(s,o){const a=Qe(s),u={writes:o.map(l=>tb(a.serializer,l))};yield a.Co("Commit",a.serializer.databaseId,gn.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw at();n=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Me(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Tt.min())?xr.exists(!1):xr.updateTime(n):xr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Tt.min()))throw new Me(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xr.updateTime(n)}return xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Wbe{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new qR(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,Y.A)(function*(){const n=new qbe(e.datastore),r=e.tu(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const n=this.updateFunction(e);return!V0(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!S8(n)}return!1}}class Kbe{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ji.UNAUTHENTICATED,this.clientId=_q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Y.A)(function*(a){Le("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Le("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Y.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Gg(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function uC(t,e){return WO.apply(this,arguments)}function WO(){return WO=(0,Y.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Y.A)(function*(s){r.isEqual(s)||(yield DW(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),WO.apply(this,arguments)}function KO(t,e){return QO.apply(this,arguments)}function QO(){return(QO=(0,Y.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield JO(t);Le("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GW(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GW(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function a9(t){return"FirebaseError"===t.name?t.code===me.FAILED_PRECONDITION||t.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function JO(t){return YO.apply(this,arguments)}function YO(){return(YO=(0,Y.A)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield uC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!a9(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),yield uC(t,new Qg)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield uC(t,new Qg);return t._offlineComponents})).apply(this,arguments)}function lC(t){return XO.apply(this,arguments)}function XO(){return(XO=(0,Y.A)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield KO(t,t._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield KO(t,new Jg))),t._onlineComponents})).apply(this,arguments)}function u9(t){return JO(t).then(e=>e.persistence)}function Yg(t){return JO(t).then(e=>e.localStore)}function l9(t){return lC(t).then(e=>e.remoteStore)}function ZO(t){return lC(t).then(e=>e.syncEngine)}function Xg(t){return eM.apply(this,arguments)}function eM(){return(eM=(0,Y.A)(function*(t){const e=yield lC(t),n=e.eventManager;return n.onListen=Ibe.bind(null,e.syncEngine),n.onUnlisten=Cbe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Abe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Sbe.bind(null,e.syncEngine),n})).apply(this,arguments)}function d9(t,e,n={}){const r=new Di;return t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function(s,o,a,u,l){const c=new aC({next:g=>{o.enqueueAndForget(()=>pO(s,h));const _=g.docs.has(a);!_&&g.fromCache?l.reject(new Me(me.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&"server"===u.source?l.reject(new Me(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),h=new _O(Cg(a.path),c,{includeMetadataChanges:!0,ra:!0});return hO(s,h)}(yield Xg(t),t.asyncQueue,e,n,r)})),r.promise}function h9(t,e,n={}){const r=new Di;return t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function(s,o,a,u,l){const c=new aC({next:g=>{o.enqueueAndForget(()=>pO(s,h)),g.fromCache&&"server"===u.source?l.reject(new Me(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),h=new _O(a,c,{includeMetadataChanges:!0,ra:!0});return hO(s,h)}(yield Xg(t),t.asyncQueue,e,n,r)})),r.promise}function f9(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const p9=new Map;function tM(t,e,n){if(!n)throw new Me(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m9(t,e,n,r){if(!0===e&&!0===r)throw new Me(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function g9(t){if(!et.isDocumentKey(t))throw new Me(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function y9(t){if(et.isDocumentKey(t))throw new Me(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cC(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":at()}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cC(t);throw new Me(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _9(t,e){if(e<=0)throw new Me(me.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class v9{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=f9(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Me(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Me(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Me(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class db{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v9({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v9(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new tve;switch(r.type){case"firstParty":return new sve(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=p9.get(n);r&&(Le("ComponentProvider","Removing Datastore"),p9.delete(n),r.terminate())}(this),Promise.resolve()}}class ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class Er{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Er(this.firestore,e,this._key)}}class rl extends ss{constructor(e,n,r){super(e,n,Cg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new et(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function w9(t,e,...n){if(t=(0,rn.Ku)(t),tM("collection","path",e),t instanceof db){const r=gn.fromString(e,...n);return y9(r),new rl(t,null,r)}{if(!(t instanceof Er||t instanceof rl))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gn.fromString(e,...n));return y9(r),new rl(t.firestore,null,r)}}function dC(t,e,...n){if(t=(0,rn.Ku)(t),1===arguments.length&&(e=_q.newId()),tM("doc","path",e),t instanceof db){const r=gn.fromString(e,...n);return g9(r),new Er(t,null,new et(r))}{if(!(t instanceof Er||t instanceof rl))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gn.fromString(e,...n));return g9(r),new Er(t.firestore,t instanceof rl?t.converter:null,new et(r))}}function E9(t,e){return t=(0,rn.Ku)(t),e=(0,rn.Ku)(e),(t instanceof Er||t instanceof rl)&&(e instanceof Er||e instanceof rl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nM(t,e){return t=(0,rn.Ku)(t),e=(0,rn.Ku)(e),t instanceof ss&&e instanceof ss&&t.firestore===e.firestore&&G0(t._query,e._query)&&t.converter===e.converter}class awe{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new qR(this,"async_queue_retry"),this.hu=()=>{const n=rC();n&&Le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=rC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=rC();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Di;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,Y.A)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(n){if(!Pd(n))throw n;Le("AsyncQueue","Operation failed with retryable error: "+n)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,ci("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=dO.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&at()}verifyOperationInProgress(){}du(){var e=this;return(0,Y.A)(function*(){let n;do{n=e.iu,yield n}while(n!==e.iu)})()}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function rM(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class uwe{constructor(){this._progressObserver={},this._taskCompletionResolver=new Di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Zn extends db{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new awe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||T9(this),this._firestoreClient.terminate()}}function Rr(t){return t._firestoreClient||T9(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function T9(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Mve(t._databaseId,u,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,f9(c.experimentalLongPollingOptions),c.useFetchStreams));var u,c;t._firestoreClient=new Kbe(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function I9(t,e,n){const r=new Di;return t.asyncQueue.enqueue((0,Y.A)(function*(){try{yield uC(t,n),yield KO(t,e),r.resolve()}catch(i){const s=i;if(!a9(s))throw s;fo("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function A9(t){if(t._initialized||t._terminated)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(Ni.fromBase64String(e))}catch(n){throw new Me(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new il(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Me(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vf{constructor(e){this._methodName=e}}class hC{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const vwe=/^__.*__$/;class bwe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new oc(e,this.data,this.fieldMask,n,this.fieldTransforms):new kg(e,this.data,n,this.fieldTransforms)}}class C9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new oc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function S9(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class fC{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new fC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return gC(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(S9(this.fu)&&vwe.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class wwe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lb(e)}Fu(e,n,r,i=!1){return new fC({fu:e,methodName:n,vu:r,path:br.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lf(t){const e=t._freezeSettings(),n=lb(t._databaseId);return new wwe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pC(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);cM("Data must be an object, but it was:",o,r);const a=P9(r,o);let u,l;if(s.merge)u=new po(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const g=pb(e,h,n);if(!o.contains(g))throw new Me(me.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);x9(c,g)||c.push(g)}u=new po(c),l=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=o.fieldTransforms;return new bwe(new is(a),u,l)}class fb extends Vf{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fb}}function D9(t,e,n){return new fC({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iM extends Vf{_toFieldTransform(e){return new Q0(e.path,new Ng)}isEqual(e){return e instanceof iM}}class sM extends Vf{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=D9(this,e,!0),r=this.Mu.map(s=>$f(s,n)),i=new Df(r);return new Q0(e.path,i)}isEqual(e){return e instanceof sM&&(0,rn.bD)(this.Mu,e.Mu)}}class oM extends Vf{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=D9(this,e,!0),r=this.Mu.map(s=>$f(s,n)),i=new Nf(r);return new Q0(e.path,i)}isEqual(e){return e instanceof oM&&(0,rn.bD)(this.Mu,e.Mu)}}class aM extends Vf{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new Pg(e.serializer,m8(e.serializer,this.xu));return new Q0(e.path,n)}isEqual(e){return e instanceof aM&&this.xu===e.xu}}function uM(t,e,n,r){const i=t.Fu(1,e,n);cM("Data must be an object, but it was:",i,r);const s=[],o=is.empty();kd(r,(u,l)=>{const c=mC(e,u,n);l=(0,rn.Ku)(l);const h=i.Su(c);if(l instanceof fb)s.push(c);else{const g=$f(l,h);null!=g&&(s.push(c),o.set(c,g))}});const a=new po(s);return new C9(o,a,i.fieldTransforms)}function lM(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[pb(e,r,n)],u=[i];if(s.length%2!=0)throw new Me(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(pb(e,s[g])),u.push(s[g+1]);const l=[],c=is.empty();for(let g=a.length-1;g>=0;--g)if(!x9(l,a[g])){const _=a[g];let v=u[g];v=(0,rn.Ku)(v);const w=o.Su(_);if(v instanceof fb)l.push(_);else{const I=$f(v,w);null!=I&&(l.push(_),c.set(_,I))}}const h=new po(l);return new C9(c,h,o.fieldTransforms)}function N9(t,e,n,r=!1){return $f(n,t.Fu(r?4:3,e))}function $f(t,e){if(k9(t=(0,rn.Ku)(t)))return cM("Unsupported field value:",e,t),P9(t,e);if(t instanceof Vf)return function(r,i){if(!S9(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=$f(a,i.bu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,rn.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return m8(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=kr.fromDate(r);return{timestampValue:Rg(i.serializer,s)}}if(r instanceof kr){const s=new kr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rg(i.serializer,s)}}if(r instanceof hC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof il)return{bytesValue:V8(i.serializer,r._byteString)};if(r instanceof Er){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bR(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${cC(r)}`)}(t,e)}function P9(t,e){const n={};return Fq(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kd(t,(r,i)=>{const s=$f(i,e.pu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function k9(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kr||t instanceof hC||t instanceof il||t instanceof Er||t instanceof Vf)}function cM(t,e,n){if(!k9(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=cC(n);throw e.Du("an object"===r?t+" a custom object":t+" "+r)}var i}function pb(t,e,n){if((e=(0,rn.Ku)(e))instanceof lc)return e._internalPath;if("string"==typeof e)return mC(t,e);throw gC("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ewe=new RegExp("[~\\*/\\[\\]]");function mC(t,e,n){if(e.search(Ewe)>=0)throw gC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lc(...e.split("."))._internalPath}catch{throw gC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gC(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Me(me.INVALID_ARGUMENT,a+t+u)}function x9(t,e){return t.some(n=>n.isEqual(e))}class mb{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Twe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Twe extends mb{data(){return super.data()}}function yC(t,e){return"string"==typeof e?mC(t,e):e instanceof lc?e._internalPath:e._delegate._internalPath}function R9(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Me(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dM{}class gb extends dM{}function Hd(t,e,...n){let r=[];e instanceof dM&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Zg).length,a=s.filter(u=>u instanceof yb).length;if(o>1||o>0&&a>0)throw new Me(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yb extends gb{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yb(e,n,r)}_apply(e){const n=this._parse(e);return V9(e._query,n),new ss(e.firestore,e.converter,hR(e._query,n))}_parse(e){const n=Lf(e.firestore);return function(s,o,a,u,l,c,h){let g;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){F9(h,c);const _=[];for(const v of h)_.push(M9(u,s,v));g={arrayValue:{values:_}}}else g=M9(u,s,h)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||F9(h,c),g=N9(a,"where",h,"in"===c||"not-in"===c);return yn.create(l,c,g)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zg extends dM{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)V9(o,u),o=hR(o,u)}(e._query,n),new ss(e.firestore,e.converter,hR(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hM extends gb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hM(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new H0(s,o)}(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ic(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class _C extends gb{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _C(e,n,r)}_apply(e){return new ss(e.firestore,e.converter,FA(e._query,this._limit,this._limitType))}}class vC extends gb{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new vC(e,n,r)}_apply(e){const n=O9(e,this.type,this._docOrFields,this._inclusive);return new ss(e.firestore,e.converter,(s=n,new ic((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class bC extends gb{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new bC(e,n,r)}_apply(e){const n=O9(e,this.type,this._docOrFields,this._inclusive);return new ss(e.firestore,e.converter,(s=n,new ic((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function O9(t,e,n,r){if(n[0]=(0,rn.Ku)(n[0]),n[0]instanceof mb)return function(s,o,a,u,l){if(!u)throw new Me(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const h of Sg(s))if(h.field.isKeyField())c.push(Cf(o,u.key));else{const g=u.data.field(h.field);if(NA(g))throw new Me(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const _=h.field.canonicalString();throw new Me(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}c.push(g)}return new Fd(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Lf(t.firestore);return function(o,a,u,l,c,h){const g=o.explicitOrderBy;if(c.length>g.length)throw new Me(me.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let v=0;v<c.length;v++){const w=c[v];if(g[v].field.isKeyField()){if("string"!=typeof w)throw new Me(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof w}`);if(!dR(o)&&-1!==w.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${w}' contains a slash.`);const I=o.path.child(gn.fromString(w));if(!et.isDocumentKey(I))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const S=new et(I);_.push(Cf(a,S))}else{const I=N9(u,l,w);_.push(I)}}return new Fd(_,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function M9(t,e,n){if("string"==typeof(n=(0,rn.Ku)(n))){if(""===n)throw new Me(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dR(e)&&-1!==n.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gn.fromString(n));if(!et.isDocumentKey(r))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cf(t,new et(r))}if(n instanceof Er)return Cf(t,n._key);throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cC(n)}.`)}function F9(t,e){if(!Array.isArray(t)||0===t.length)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V9(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Me(me.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fM{convertValue(e,n="none"){switch(Od(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw at()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return kd(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new hC(Zr(e.latitude),Zr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=PA(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($0(e));default:return null}}convertTimestamp(e){const n=nc(e);return new kr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gn.fromString(e);wt(Q8(r));const i=new xd(r.get(1),r.get(3)),s=new et(r.popFirst(5));return i.isEqual(n)||ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function wC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class xwe extends fM{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,n)}}class jf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cc extends mb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _b(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _b extends cc{data(e={}){return super.data(e)}}class zd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new jf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _b(this._firestore,this._userDataWriter,r.key,r,new jf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new _b(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new _b(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Owe(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Owe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function $9(t,e){return t instanceof cc&&e instanceof cc?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof zd&&e instanceof zd&&t._firestore===e._firestore&&nM(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Gd extends fM{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,n)}}function j9(t,e,n){t=hn(t,Er);const r=hn(t.firestore,Zn),i=wC(t.converter,e,n);return ey(r,[pC(Lf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,xr.none())])}function B9(t,e,n,...r){t=hn(t,Er);const i=hn(t.firestore,Zn),s=Lf(i);let o;return o="string"==typeof(e=(0,rn.Ku)(e))||e instanceof lc?lM(s,"updateDoc",t._key,e,n,r):uM(s,"updateDoc",t._key,e),ey(i,[o.toMutation(t._key,xr.exists(!0))])}function U9(t,...e){var n,r,i;t=(0,rn.Ku)(t);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||rM(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(rM(e[o])){const h=e[o];e[o]=null===(n=h.next)||void 0===n?void 0:n.bind(h),e[o+1]=null===(r=h.error)||void 0===r?void 0:r.bind(h),e[o+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)}let u,l,c;if(t instanceof Er)l=hn(t.firestore,Zn),c=Cg(t._key.path),u={next:h=>{e[o]&&e[o](pM(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=hn(t,ss);l=hn(h.firestore,Zn),c=h._query;const g=new Gd(l);u={next:_=>{e[o]&&e[o](new zd(l,g,h,_))},error:e[o+1],complete:e[o+2]},R9(t._query)}return function(g,_,v,w){const I=new aC(w),S=new _O(_,I,v);return g.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return hO(yield Xg(g),S)})),()=>{I.$a(),g.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return pO(yield Xg(g),S)}))}}(Rr(l),c,a,u)}function ey(t,e){return function(r,i){const s=new Di;return r.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function Dbe(t,e,n){return CO.apply(this,arguments)}(yield ZO(r),i,s)})),s.promise}(Rr(t),e)}function pM(t,e,n){const r=n.docs.get(e._key),i=new Gd(t);return new cc(t,i,e._key,r,new jf(n.hasPendingWrites,n.fromCache),e.converter)}const Xwe={maxAttempts:5};class H9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Lf(e)}set(e,n,r){this._verifyNotCommitted();const i=qd(e,this._firestore),s=wC(i.converter,n,r),o=pC(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,xr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=qd(e,this._firestore);let o;return o="string"==typeof(n=(0,rn.Ku)(n))||n instanceof lc?lM(this._dataReader,"WriteBatch.update",s._key,n,r,i):uM(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qd(e,this._firestore);return this._mutations=this._mutations.concat(new xg(n._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qd(t,e){if((t=(0,rn.Ku)(t)).firestore!==e)throw new Me(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class Zwe extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Lf(n)}get(n){const r=qd(n,this._firestore),i=new xwe(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return at();const o=s[0];if(o.isFoundDocument())return new mb(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new mb(this._firestore,i,r._key,null,r.converter);throw at()})}set(n,r,i){const s=qd(n,this._firestore),o=wC(s.converter,r,i),a=pC(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=qd(n,this._firestore);let a;return a="string"==typeof(r=(0,rn.Ku)(r))||r instanceof lc?lM(this._dataReader,"Transaction.update",o._key,r,i,s):uM(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=qd(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qd(e,this._firestore),r=new Gd(this._firestore);return super.get(e).then(i=>new cc(this._firestore,r,n._key,i._document,new jf(!1,!1),n.converter))}}function gM(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function W9(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function K9(){if(!function Rve(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){_g=Ju.SDK_VERSION,(0,Ju._registerComponent)(new TA.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zn(new rve(r.getProvider("auth-internal")),new ove(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Me(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xd(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Ju.registerVersion)(mq,"4.6.4",e),(0,Ju.registerVersion)(mq,"4.6.4","esm2017")}();class vb{constructor(e){this._delegate=e}static fromBase64String(e){return K9(),new vb(il.fromBase64String(e))}static fromUint8Array(e){return W9(),new vb(il.fromUint8Array(e))}toBase64(){return K9(),this._delegate.toBase64()}toUint8Array(){return W9(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yM(t){return function lEe(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class cEe{enableIndexedDbPersistence(e,n){return function cwe(t,e){A9(t=hn(t,Zn));const n=Rr(t);if(n._uninitializedComponentsProvider)throw new Me(me.FAILED_PRECONDITION,"SDK cache is already specified.");fo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Jg;return I9(n,i,new qO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function dwe(t){A9(t=hn(t,Zn));const e=Rr(t);if(e._uninitializedComponentsProvider)throw new Me(me.FAILED_PRECONDITION,"SDK cache is already specified.");fo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Jg;return I9(e,r,new s9(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hwe(t){if(t._initialized&&!t._terminated)throw new Me(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Di;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Y.A)(function*(){try{yield(n=(0,Y.A)(function*(i){if(!Xu.D())return Promise.resolve();const s=i+"main";yield Xu.delete(s)}),function r(i){return n.apply(this,arguments)})(MR(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Q9{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&fo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function b9(t,e,n,r={}){var i;const s=(t=hn(t,db))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ji.MOCK_USER;else{a=(0,rn.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Me(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ji(l)}t._authCredentials=new nve(new gq(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function pwe(t){return function Qbe(t){return t.asyncQueue.enqueue((0,Y.A)(function*(){const e=yield u9(t),n=yield l9(t);return e.setNetworkEnabled(!0),function(i){const s=Qe(i);return s.M_.delete(0),cb(s)}(n)}))}(Rr(t=hn(t,Zn)))}(this._delegate)}disableNetwork(){return function mwe(t){return function Jbe(t){return t.asyncQueue.enqueue((0,Y.A)(function*(){const e=yield u9(t),n=yield l9(t);return e.setNetworkEnabled(!1),(r=(0,Y.A)(function*(s){const o=Qe(s);o.M_.add(0),yield Bg(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(Rr(t=hn(t,Zn)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,m9("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fwe(t){return function(n){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function xbe(t,e){return kO.apply(this,arguments)}(yield ZO(n),r)})),r.promise}(Rr(t=hn(t,Zn)))}(this._delegate)}onSnapshotsInSync(e){return function Hwe(t,e){return function ewe(t,e){const n=new aC(e);return t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return i=yield Xg(t),s=n,Qe(i).z_.add(s),void s.next();var i,s})),()=>{n.$a(),t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return i=yield Xg(t),s=n,void Qe(i).z_.delete(s);var i,s}))}}(Rr(t=hn(t,Zn)),rM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ty(this,w9(this._delegate,e))}catch(n){throw qs(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,dC(this._delegate,e))}catch(n){throw qs(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ws(this,function owe(t,e){if(t=hn(t,db),tM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ss(t,null,(r=e,new ic(gn.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw qs(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function eEe(t,e,n){t=hn(t,Zn);const r=Object.assign(Object.assign({},Xwe),n);return function(s){if(s.maxAttempts<1)throw new Me(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Di;return s.asyncQueue.enqueueAndForget((0,Y.A)(function*(){const l=yield function c9(t){return lC(t).then(e=>e.datastore)}(s);new Wbe(s.asyncQueue,l,a,o,u).Xa()})),u.promise}(Rr(t),i=>e(new Zwe(t,i)),r)}(this._delegate,n=>e(new J9(this,n)))}batch(){return Rr(this._delegate),new Y9(new H9(this._delegate,e=>ey(this._delegate,e)))}loadBundle(e){return function gwe(t,e){const n=Rr(t=hn(t,Zn)),r=new uwe;return function twe(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?N8().encode(o):o,c=function(c,h){if(c instanceof Uint8Array)return o9(c,h);if(c instanceof ArrayBuffer)return o9(new Uint8Array(c),h);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new Gbe(c,a);var c}(n,lb(e));t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){!function Hbe(t,e,n){const r=Qe(t);var i;(i=(0,Y.A)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(v,w){const I=Qe(v),S=di(w.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",x=>I.$r.getBundleMetadata(x,w.id)).then(x=>!!x&&x.createTime.compareTo(S)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(v=l).totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}),Promise.resolve(new Set);u._updateProgress(QW(l));const c=new bbe(l,o.localStore,a.serializer);let h=yield a.qa();for(;h;){const _=yield c._a(h);_&&u._updateProgress(_),h=yield a.qa()}const g=yield c.complete();return yield uc(o,g.ca,void 0),yield function(v,w){const I=Qe(v);return I.persistence.runTransaction("Save bundle","readwrite",S=>I.$r.saveBundleMetadata(S,w))}(o.localStore,l),u._completeWith(g.progress),Promise.resolve(g.ua)}catch(l){return fo("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var v}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ZO(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ywe(t,e){return function nwe(t,e){return t.asyncQueue.enqueue((0,Y.A)(function*(){return function(r,i){const s=Qe(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Yg(t),e)}))}(Rr(t=hn(t,Zn)),e).then(n=>n?new ss(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Ws(this,n):null)}}class TC extends fM{constructor(e){super(),this.firestore=e}convertBytes(e){return new vb(new il(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(n,this.firestore,null)}}class J9{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new TC(e)}get(e){const n=Uf(e);return this._delegate.get(n).then(r=>new bb(this._firestore,new cc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Uf(e);return r?(gM("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Uf(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Uf(e);return this._delegate.delete(n),this}}class Y9{constructor(e){this._delegate=e}set(e,n,r){const i=Uf(e);return r?(gM("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Uf(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Uf(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Bf{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new _b(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wb(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Bf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Bf(e,new TC(e),n),i.set(n,s)),s}}Bf.INSTANCES=new WeakMap;class Ea{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new TC(e)}static forPath(e,n,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(n,new Er(n._delegate,r,new et(e)))}static forKey(e,n,r){return new Ea(n,new Er(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ty(this.firestore,w9(this._delegate,e))}catch(n){throw qs(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.Ku)(e))instanceof Er&&E9(this._delegate,e)}set(e,n){n=gM("DocumentReference.set",n);try{return n?j9(this._delegate,e,n):j9(this._delegate,e)}catch(r){throw qs(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?B9(this._delegate,e):B9(this._delegate,e,n,...r)}catch(i){throw qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Bwe(t){return ey(hn(t.firestore,Zn),[new xg(t._key,xr.none())])}(this._delegate)}onSnapshot(...e){const n=X9(e),r=Z9(e,i=>new bb(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return U9(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function Fwe(t){t=hn(t,Er);const e=hn(t.firestore,Zn),n=Rr(e),r=new Gd(e);return function Ybe(t,e){const n=new Di;return t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return(r=(0,Y.A)(function*(s,o,a){try{const u=yield function(c,h){const g=Qe(c);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,h))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new Me(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Gg(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Yg(t),e,n);var r})),n.promise}(n,t._key).then(i=>new cc(e,r,t._key,i,new jf(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function Vwe(t){t=hn(t,Er);const e=hn(t.firestore,Zn);return d9(Rr(e),t._key,{source:"server"}).then(n=>pM(e,t,n))}(this._delegate):function Mwe(t){t=hn(t,Er);const e=hn(t.firestore,Zn);return d9(Rr(e),t._key).then(n=>pM(e,t,n))}(this._delegate),n.then(r=>new bb(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function qs(t,e,n){return t.message=t.message.replace(e,n),t}function X9(t){for(const e of t)if("object"==typeof e&&!yM(e))return e;return{}}function Z9(t,e){var n,r;let i;return i=yM(t[0])?t[0]:yM(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class bb{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return $9(this._delegate,e._delegate)}}class wb extends bb{data(e){const n=this._delegate.data(e);return this._delegate._converter||function eve(t,e){t||at()}(void 0!==n),n}}class Ws{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new TC(e)}where(e,n,r){try{return new Ws(this.firestore,Hd(this._delegate,function Iwe(t,e,n){const r=e,i=yC("where",t);return yb._create(i,r,n)}(e,n,r)))}catch(i){throw qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ws(this.firestore,Hd(this._delegate,function Awe(t,e="asc"){const n=e,r=yC("orderBy",t);return hM._create(r,n)}(e,n)))}catch(r){throw qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ws(this.firestore,Hd(this._delegate,function Cwe(t){return _9("limit",t),_C._create("limit",t,"F")}(e)))}catch(n){throw qs(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ws(this.firestore,Hd(this._delegate,function Swe(t){return _9("limitToLast",t),_C._create("limitToLast",t,"L")}(e)))}catch(n){throw qs(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ws(this.firestore,Hd(this._delegate,function Dwe(...t){return vC._create("startAt",t,!0)}(...e)))}catch(n){throw qs(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ws(this.firestore,Hd(this._delegate,function Nwe(...t){return vC._create("startAfter",t,!1)}(...e)))}catch(n){throw qs(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ws(this.firestore,Hd(this._delegate,function Pwe(...t){return bC._create("endBefore",t,!1)}(...e)))}catch(n){throw qs(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ws(this.firestore,Hd(this._delegate,function kwe(...t){return bC._create("endAt",t,!0)}(...e)))}catch(n){throw qs(n,"endAt()","Query.endAt()")}}isEqual(e){return nM(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function $we(t){t=hn(t,ss);const e=hn(t.firestore,Zn),n=Rr(e),r=new Gd(e);return function Xbe(t,e){const n=new Di;return t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return(r=(0,Y.A)(function*(s,o,a){try{const u=yield ZA(s,o,!0),l=new XW(o,u.hs),c=l.da(u.documents),h=l.applyChanges(c,!1);a.resolve(h.snapshot)}catch(u){const l=Gg(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Yg(t),e,n);var r})),n.promise}(n,t._query).then(i=>new zd(e,r,t,i))}(this._delegate):"server"===e?.source?function jwe(t){t=hn(t,ss);const e=hn(t.firestore,Zn),n=Rr(e),r=new Gd(e);return h9(n,t._query,{source:"server"}).then(i=>new zd(e,r,t,i))}(this._delegate):function Lwe(t){t=hn(t,ss);const e=hn(t.firestore,Zn),n=Rr(e),r=new Gd(e);return R9(t._query),h9(n,t._query).then(i=>new zd(e,r,t,i))}(this._delegate),n.then(r=>new _M(this.firestore,new zd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=X9(e),r=Z9(e,i=>new _M(this.firestore,new zd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return U9(this._delegate,n,r)}withConverter(e){return new Ws(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}class hEe{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new wb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _M{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new hEe(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new wb(this._firestore,r))})}isEqual(e){return $9(this._delegate,e._delegate)}}class ty extends Ws{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?dC(this._delegate):dC(this._delegate,e))}catch(n){throw qs(n,"doc()","CollectionReference.doc()")}}add(e){return function Uwe(t,e){const n=hn(t.firestore,Zn),r=dC(t),i=wC(t.converter,e);return ey(n,[pC(Lf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ea(this.firestore,n))}isEqual(e){return E9(this._delegate,e._delegate)}withConverter(e){return new ty(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function Uf(t){return hn(t,Er)}class vM{constructor(...e){this._delegate=new lc(...e)}static documentId(){return new vM(br.keyField().canonicalString())}isEqual(e){return(e=(0,rn.Ku)(e))instanceof lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nEe(){return new iM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hf(e)}static delete(){const e=function tEe(){return new fb("deleteField")}();return e._methodName="FieldValue.delete",new Hf(e)}static arrayUnion(...e){const n=function rEe(...t){return new sM("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Hf(n)}static arrayRemove(...e){const n=function iEe(...t){return new oM("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Hf(n)}static increment(e){const n=function sEe(t){return new aM("increment",t)}(e);return n._methodName="FieldValue.increment",new Hf(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fEe={Firestore:Q9,GeoPoint:hC,Timestamp:kr,Blob:vb,Transaction:J9,WriteBatch:Y9,DocumentReference:Ea,DocumentSnapshot:bb,Query:Ws,QueryDocumentSnapshot:wb,QuerySnapshot:_M,CollectionReference:ty,FieldPath:vM,FieldValue:Hf,setLogLevel:function dEe(t){!function Z_e(t){Dd.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function eK(t,e){return function gEe(t,e=k0){return new On(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function bM(t,e){return eK(t,e).pipe(pt(n=>({payload:n,type:"query"})))}!function mEe(t){(function pEe(t,e){t.INTERNAL.registerComponent(new TA.uA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},fEe)))})(t,(e,n)=>new Q9(e,n,new cEe)),t.registerVersion("@firebase/firestore-compat","0.3.33")}(zs.A);class tK{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=aK(r,n);return new iK(i,s,this.afs)}snapshotChanges(){return function yEe(t,e){return eK(t,e).pipe(VI(void 0),Yx(),pt(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gs)}valueChanges(e={}){return this.snapshotChanges().pipe(pt(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return vn(this.ref.get(e)).pipe(Gs)}}function IC(t,e){return bM(t,e).pipe(VI(void 0),Yx(),pt(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(h=>h.doc.ref.isEqual(a.ref)),c=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&c&&JSON.stringify(c.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function nK(t,e,n){return IC(t,n).pipe($I((r,i)=>function _Ee(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function vEe(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return wM(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return wM(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wM(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),function Y_e(t,e=xs){return t=t??X_e,Ot((n,r)=>{let i,s=!0;n.subscribe(Pt(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),pt(r=>r.map(i=>({type:i.type,payload:i}))))}function wM(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function rK(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class iK{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=IC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(pt(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(VI(void 0),Yx(),wa(([r,i])=>i.length>0||!r),pt(([,r])=>r),Gs)}auditTrail(e){return this.stateChanges(e).pipe($I((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=rK(e);return nK(this.query,n,this.afs.schedulers.outsideAngular).pipe(Gs)}valueChanges(e={}){return bM(this.query,this.afs.schedulers.outsideAngular).pipe(pt(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Gs)}get(e){return vn(this.query.get(e)).pipe(Gs)}add(e){return this.ref.add(e)}doc(e){return new tK(this.ref.doc(e),this.afs)}}class bEe{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?IC(this.query,this.afs.schedulers.outsideAngular).pipe(pt(n=>n.filter(r=>e.indexOf(r.type)>-1)),wa(n=>n.length>0),Gs):IC(this.query,this.afs.schedulers.outsideAngular).pipe(Gs)}auditTrail(e){return this.stateChanges(e).pipe($I((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=rK(e);return nK(this.query,n,this.afs.schedulers.outsideAngular).pipe(Gs)}valueChanges(e={}){return bM(this.query,this.afs.schedulers.outsideAngular).pipe(pt(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Gs)}get(e){return vn(this.query.get(e)).pipe(Gs)}}const sK=new Fe("angularfire2.enableFirestorePersistence"),oK=new Fe("angularfire2.firestore.persistenceSettings"),wEe=new Fe("angularfire2.firestore.settings"),EEe=new Fe("angularfire2.firestore.use-emulator");function aK(t,e=(n=>n)){return{query:e(t),ref:t}}let EM=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,l,c,h,g,_,v,w,I,S,x){this.schedulers=u;const O=R0(n,a,r),U=c;h&&sq(O,a,g,v,w,I,_,S),[this.firestore,this.persistenceEnabled$]=EA(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{const he=a.runOutsideAngular(()=>O.firestore());if(s&&he.settings(s),U&&he.useEmulator(...U),i&&!PI(o)){const de=()=>{try{return vn(he.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(R){return typeof console<"u"&&console.warn(R),It(!1)}};return[he,a.runOutsideAngular(de)]}return[he,It(!1)]},[s,U,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=aK(i,r),a=this.schedulers.ngZone.run(()=>s);return new iK(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new bEe(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new tK(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(Se(gg),Se(yg,8),Se(sK,8),Se(wEe,8),Se(ya),Se(en),Se(wA),Se(oK,8),Se(EEe,8),Se(Jx,8),Se(Z5,8),Se(eq,8),Se(tq,8),Se(nq,8),Se(rq,8),Se(iq,8),Se(bA,8))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),TEe=(()=>{class t{constructor(){zs.A.registerVersion("angularfire",x0.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:sK,useValue:!0},{provide:oK,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ri({type:t});static \u0275inj=Jr({providers:[EM]})}return t})();const AEe=(t,e)=>(t.push(e),t);class NEe{refCount(e){return Ho("refCount")}incRef(e){return Ho("incRef")}timerAvailable(){return!0}time(e){return Ho("time")}read(e){return Ho("read")}readSync(e){return Ho("readSync")}readToGPU(e,n){return Ho("readToGPU")}numDataIds(){return Ho("numDataIds")}disposeData(e,n){return Ho("disposeData")}write(e,n,r){return Ho("write")}move(e,n,r,i,s){return Ho("move")}memory(){return Ho("memory")}floatPrecision(){return Ho("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Ho("dispose")}}function Ho(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function L(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function Ta(t,e,n=""){L(Wd(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function ny(t){L(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function Eb(t,e=[],n=!1){if(null==e&&(e=[]),Array.isArray(t)||sl(t)&&!n)for(let r=0;r<t.length;++r)Eb(t[r],e,n);else e.push(t);return e}function Hi(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Wd(t,e){if(t===e)return!0;if(null==t||null==e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Tb(t){return t%1==0}function AC(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function CC(t,e){const n=e.length;return L((t=null==t?e.map((r,i)=>i):[].concat(t)).every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),L(t.every(r=>Tb(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function sl(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function uK(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function IM(t){return"string"==typeof t||t instanceof String}function AM(t){return Array.isArray(t)?AM(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":function LEe(t){return"number"==typeof t}(t)?"float32":IM(t)?"string":function VEe(t){return"boolean"==typeof t}(t)?"bool":"float32"}function lK(t){return!!(t&&t.constructor&&t.call&&t.apply)}function CM(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function cK(t,e,n,r=!1){const i=new Array;if(1===e.length){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[t+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<s;u++)i[u]=cK(t+u*a,o,n,r)}return i}function ry(t,e,n=!1){if(0===t.length)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(0===r)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return cK(0,t,e,n)}function dK(t,e){const n=SM(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function SM(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function hK(t){t.forEach(e=>{L(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function iy(t){return t&&t.then&&"function"==typeof t.then}const fK="tfjsflags";class $Ee{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=jEe,this.populateURLFlags()}setPlatform(e,n){null!=this.platform&&(wn().getBool("IS_TEST")||wn().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},null!=this.urlFlags[e]){const i=this.urlFlags[e];wn().getBool("IS_TEST")||wn().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}getAsync(e){var n=this;return(0,Y.A)(function*(){return e in n.flags||(n.flags[e]=yield n.evaluateFlag(e)),n.flags[e]})()}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(iy(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);fK in e&&e[fK].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=function UEe(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}(i,s)})}}function jEe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(function BEe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,r[0],r[1]),r.join("="))),e}function wn(){return pK}let DM,pK=null;function mK(){if(null==DM){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(!(typeof self<"u"))throw new Error("Could not find a global object");t=self}DM=t}return DM}function NM(t,e){const n=function zEe(){const t=mK();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const BTe="Fill",_K="Identity",iIe="LinSpace",VIe="Range",PM="Transpose",bK="_FusedMatMul",wK="FusedConv2D",EK="FusedDepthwiseConv2D",sy=NM("kernelRegistry",()=>new Map),Ib=NM("gradRegistry",()=>new Map);function TK(t,e){const n=function xM(t,e){return`${e}_${t}`}(t,e);return sy.get(n)}function IK(t){return Ib.get(t)}function kM(t){const e=sy.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function Ab(...t){wn().getBool("IS_TEST")||wn().getBool("PROD")||console.warn(...t)}var AK=ee(929);const zf=ee.n(AK)()||AK;function SC(t){return zf.fromString(t,!0,16)}function OM(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Eb(t)),wn().getBool("DEBUG")&&function OEe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}(t,e),function FAe(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)0!==Math.round(t[r])&&(n[r]=1);return n}throw new Error(`Unknown data type ${e}`)}function NC(){return wn().platform.now()}function VAe(t,e){return wn().platform.fetch(t,e)}function PK(t,e="utf-8"){return e=e||"utf-8",wn().platform.decode(t,e)}SC("c3a5c85c97cb3127"),SC("b492b66fbe98f273"),SC("9ae16a3b2f90404f");class LAe{constructor(e,n){this.backendTimer=e,this.logger=n,null==n&&(this.logger=new jAe)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let o;const a=NC();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const l of i)l.dataSync();o=Promise.resolve({kernelMs:NC()-a})}if(wn().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<i.length;l++){const c=i[l];c.data().then(h=>{$Ae(h,c.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>null!=l.getExtraProfileInfo?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],s,u[2])})})}}function $Ae(t,e,n){if("float32"!==e)return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class jAe{logKernelProfile(e,n,r,i,s,o){const a="number"==typeof i?AC(`${i}ms`,9):i.error,u=AC(e,25),l=n.rank,c=n.size,h=AC(n.shape.toString(),14);let g="";for(const _ in s){const v=s[_];if(null!=v){const w=v.shape||n.shape,I=w.length;g+=`${_}: ${I}D ${I>0?w:""} `}}console.log(`%c${u}\t%c${a}\t%c${l}D ${h}\t%c${c}\t%c${g}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const kK=20,Cb=3,MM=7;function HAe(t,e,n,r){const i=CM(e),s=function zAe(t,e,n,r){const i=Hi(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,u="complex64"===n?Db(t):t;if(a>1)for(let l=0;l<i/s;l++){const c=l*s;for(let h=0;h<s;h++)o[h]=Math.max(o[h],Sb(u[c+h],0,n).length)}return o}(t,e,n,i),o=e.length,a=PC(t,e,n,i,s),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${o}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(a.map(l=>"    "+l).join("\n")),u.join("\n")}function Sb(t,e,n){let r;return r=Array.isArray(t)?`${parseFloat(t[0].toFixed(MM))} + ${parseFloat(t[1].toFixed(MM))}j`:IM(t)?`'${t}'`:"bool"===n?xK(t):parseFloat(t.toFixed(MM)).toString(),AC(r,e)}function xK(t){return 0===t?"false":"true"}function PC(t,e,n,r,i,s=!0){const o="complex64"===n?2:1,a=e[0],u=e.length;if(0===u)return"complex64"===n?[Sb(Db(t)[0],0,n)]:"bool"===n?[xK(t[0])]:[t[0].toString()];if(1===u){if(a>kK){let S=Array.from(t.slice(0,Cb*o)),x=Array.from(t.slice((a-Cb)*o,a*o));return"complex64"===n&&(S=Db(S),x=Db(x)),["["+S.map((O,U)=>Sb(O,i[U],n)).join(", ")+", ..., "+x.map((O,U)=>Sb(O,i[a-Cb+U],n)).join(", ")+"]"]}return["["+("complex64"===n?Db(t):Array.from(t)).map((I,S)=>Sb(I,i[S],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),h=r[0]*o,g=[];if(a>kK){for(let w=0;w<Cb;w++){const I=w*h;g.push(...PC(t.slice(I,I+h),l,n,c,i,!1))}g.push("...");for(let w=a-Cb;w<a;w++){const I=w*h;g.push(...PC(t.slice(I,I+h),l,n,c,i,w===a-1))}}else for(let w=0;w<a;w++){const I=w*h;g.push(...PC(t.slice(I,I+h),l,n,c,i,w===a-1))}const _=2===u?",":"";g[0]="["+g[0]+_;for(let w=1;w<g.length-1;w++)g[w]=" "+g[w]+_;let v=",\n";for(let w=2;w<u;w++)v+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(s?"":v),g}function Db(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}class FM{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Hi(e),null!=r){const i=r.length;L(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||function REe(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);n=new Array(e)}return n}(n,this.size),this.strides=CM(e)}set(e,...n){0===n.length&&(n=[0]),L(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){0===e.length&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n])throw new Error(`Requested out of range element at ${e}.   Buffer shape=${this.shape}`);n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return hu().makeTensor(this.values,this.shape,this.dtype)}}let hu=null,oy=null,RK=null;class os{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Hi(e),this.strides=CM(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){var e=this;return(0,Y.A)(function*(){const n=yield e.data();return oy.buffer(e.shape,e.dtype,n)})()}bufferSync(){return oy.buffer(this.shape,this.dtype,this.dataSync())}array(){var e=this;return(0,Y.A)(function*(){const n=yield e.data();return ry(e.shape,n,"complex64"===e.dtype)})()}arraySync(){return ry(this.shape,this.dataSync(),"complex64"===this.dtype)}data(){var e=this;return(0,Y.A)(function*(){e.throwIfDisposed();const n=hu().read(e.dataId);if("string"===e.dtype){const r=yield n;try{return r.map(i=>PK(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return n})()}dataToGPU(e){return this.throwIfDisposed(),hu().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=hu().readSync(this.dataId);if("string"===this.dtype)try{return e.map(n=>PK(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}bytes(){var e=this;return(0,Y.A)(function*(){e.throwIfDisposed();const n=yield hu().read(e.dataId);return"string"===e.dtype?n:new Uint8Array(n.buffer)})()}dispose(){this.isDisposed||(hu().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return oy.print(this,e)}clone(){return this.throwIfDisposed(),oy.clone(this)}toString(e=!1){return HAe(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),oy.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),hu().makeVariable(this,e,n,r)}}Object.defineProperty(os,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),function KAe(){NM("Tensor",()=>os)}();class VM extends os{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Wd(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);hu().disposeTensor(this),this.dataId=e.dataId,hu().incRef(this,null)}dispose(){hu().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(VM,Symbol.hasInstance,{value:t=>t instanceof os&&null!=t.assign&&t.assign instanceof Function});var OK=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(OK||{}),MK=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(MK||{}),FK=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(FK||{}),VK=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(VK||{});const JAe={float32:FK,int32:OK,bool:MK,complex64:VK};function Ur(t,e){if(t.dtype===e.dtype)return[t,e];const n=function LK(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return JAe[t][e]}(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function $K(t){const e=[];return jK(t,e,new Set),e}function jK(t,e,n){if(null==t)return;if(t instanceof os)return void e.push(t);if(!function XAe(t){return Array.isArray(t)||"object"==typeof t}(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),jK(s,e,n))}}function LM(t){return null!=t.kernelName}class BK{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}let ZAe=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new BK}ready(){var n=this;return(0,Y.A)(function*(){if(null!=n.pendingBackendInit)return n.pendingBackendInit.then(()=>{});if(null!=n.backendInstance)return;const r=n.getSortedBackends();for(let i=0;i<r.length;i++){const s=r[i];if(yield n.initializeBackend(s).success)return void(yield n.setBackend(s))}throw new Error("Could not initialize any backends, all backend initializations failed.")})()}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry)){if(!(n in this.registryFactory))return null;{const{asyncInit:r}=this.initializeBackend(n);if(r)return null}}return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,i=1){return n in this.registryFactory?(Ab(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:i},!0)}setBackend(n){var r=this;return(0,Y.A)(function*(){if(null==r.registryFactory[n])throw new Error(`Backend name '${n}' not found in registry`);if(r.backendName=n,null==r.registry[n]){r.backendInstance=null;const{success:i,asyncInit:s}=r.initializeBackend(n);if(!(s?yield i:i))return!1}return r.backendInstance=r.registry[n],r.setupRegisteredKernels(),r.profiler=new LAe(r.backendInstance),!0})()}setupRegisteredKernels(){kM(this.backendName).forEach(r=>{null!=r.setupFunc&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){kM(n).forEach(i=>{null!=i.disposeFunc&&i.disposeFunc(this.registry[n])})}initializeBackend(n){const r=this.registryFactory[n];if(null==r)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{const i=r.factory();if(!i||i instanceof NEe||"function"!=typeof i.then)return this.registry[n]=i,{success:!0,asyncInit:!1};{const s=++this.pendingBackendInitId,o=i.then(a=>!(s<this.pendingBackendInitId||(this.registry[n]=a,this.pendingBackendInit=null,0))).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Ab(`Initialization of backend ${n} failed`),Ab(a.stack||a.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}}catch(i){return Ab(`Initialization of backend ${n} failed`),Ab(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){const n=this.getSortedBackends();for(let r=0;r<n.length;r++){const i=n[r],{success:s,asyncInit:o}=this.initializeBackend(i);if(o||s)return{name:i,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){const i=this.state.tensorInfo.get(r),s=i.backend,o=this.readSync(r),a=s.refCount(r);s.disposeData(r,!0),i.backend=n,n.move(r,o,i.shape,i.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let s,i=null;if(null==r){if("function"!=typeof n)throw new Error("Please provide a function to tidy()");r=n}else{if("string"!=typeof n&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof r)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=n}return this.scopedRun(()=>this.startScope(i),()=>this.endScope(s),()=>(s=r(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(n,r,i){n();try{const s=i();return r(),s}catch(s){throw r(),s}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){const r=X.runKernel(_K,{x:n});return this.addTapeNode(this.state.activeScope.name,{x:n},[r],a=>({x:()=>X.runKernel("Cast",{x:a},{dtype:"float32"})}),[],{}),r}runKernel(n,r,i){if(null==TK(n,this.backendName))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,i){const s=this.backend.numDataIds();let o=0;i.forEach(l=>{o+="complex64"===l.dtype?3:1});const u=s-r-o-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let r,i=[];const s=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let u,l;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const c=LM(n)?n.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(LM(n)){const{kernelName:w,inputs:I,attrs:S}=n,x=TK(w,this.backendName);L(null!=x,()=>`Cannot find registered kernel '${w}' for backend '${this.backendName}'`),u=()=>{const O=this.backend.numDataIds();l=x.kernelFunc({inputs:I,attrs:S,backend:this.backend});const U=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(w,O,U);const he=U.map(de=>null!=de.rank?de:this.makeTensorFromTensorInfo(de));if(s){const de=this.getTensorsForGradient(w,I,he);i=this.saveTensorsForBackwardMode(de)}return he}}else{const{forwardFunc:w}=n,I=S=>{s&&(i=S.map(x=>this.keep(this.clone(x))))};u=()=>{const S=this.backend.numDataIds();l=this.tidy(()=>w(this.backend,I));const x=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,S,x),x}}const{inputs:h,attrs:g}=n,_=LM(n)?null:n.backwardsFunc;let v;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(v=this.profiler.profileKernel(c,h,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(v),r=v.outputs):r=u()}),s&&this.addTapeNode(c,h,r,_,i,g),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(w=>null!=h[w]?h[w].shape:null),outputShapes:r.map(w=>w.shape),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(l)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(n,r,i){const s=IK(n);if(null!=s){const o=s.inputsToSave||[],a=s.outputsToSave||[];let u;s.saveAllInputs?(L(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(r).map(c=>r[c])):u=o.map(c=>r[c]);const l=i.filter((c,h)=>a[h]);return u.concat(l)}return[]}makeTensor(n,r,i,s){if(null==n)throw new Error("Values passed to engine.makeTensor() are null");s=s||this.backend;let o=n;"string"===(i=i||"float32")&&IM(n[0])&&(o=n.map(l=>function NK(t,e="utf-8"){return e=e||"utf-8",wn().platform.encode(t,e)}(l)));const a=s.write(o,r,i),u=new os(r,i,a,this.nextTensorId());if(this.trackTensor(u,s),"string"===i){const l=this.state.tensorInfo.get(a),c=function FEe(t){if(null==t)return 0;let e=0;return t.forEach(n=>e+=n.length),e}(o);this.state.numBytes+=c-l.bytes,l.bytes=c}return u}makeTensorFromDataId(n,r,i,s){return this.makeTensorFromTensorInfo({dataId:n,shape:r,dtype:i=i||"float32"},s)}makeTensorFromTensorInfo(n,r){const{dataId:i,shape:s,dtype:o}=n,a=new os(s,o,i,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,i,s){i=i||this.nextVariableId().toString(),null!=s&&s!==n.dtype&&(n=n.cast(s));const o=new VM(n,r,i,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(n,r){this.state.numTensors++,"string"===n.dtype&&this.state.numStringTensors++;let i=0;"complex64"!==n.dtype&&"string"!==n.dtype&&(i=n.size*uK(n.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:i})),n instanceof VM||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;const r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,"string"===n.dtype&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),"complex64"!==n.dtype&&"string"!==n.dtype){const i=n.size*uK(n.dtype);this.state.numBytes-=i}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(const n in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[n])}disposeVariable(n){this.disposeTensor(n),null!=this.state.registeredVariables[n.name]&&delete this.state.registeredVariables[n.name]}memory(){const n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,null==n.reasons&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){var r=this;return(0,Y.A)(function*(){r.state.profiling=!0;const i=r.state.numBytes,s=r.state.numTensors;r.state.activeProfile.kernels=[],r.state.activeProfile.result=yield n(),r.state.profiling=!1,r.state.activeProfile.peakBytes=Math.max(...r.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),r.state.activeProfile.newBytes=r.state.numBytes-i,r.state.activeProfile.newTensors=r.state.numTensors-s;for(const o of r.state.activeProfile.kernels)o.kernelTimeMs=yield o.kernelTimeMs,o.extraInfo=yield o.extraInfo;return r.state.activeProfile})()}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(n,r,i,s,o,a){const u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:i,saved:o},l=IK(n);null!=l&&(s=l.gradFunc),null!=s&&(u.gradient=c=>(c=c.map((h,g)=>{if(null==h){const _=i[g],v=SM(_.size,_.dtype);return this.makeTensor(v,_.shape,_.dtype)}return h}),s(c.length>1?c:c[0],o,a))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){const r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){const r=$K(n),i=new Set(r.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const a=this.state.activeScope.track[o];!a.kept&&!i.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(o=>{!o.kept&&o.scopeId===s.id&&this.track(o)})}gradients(n,r,i,s=!1){if(L(r.length>0,()=>"gradients() received an empty list of xs."),null!=i&&"float32"!==i.dtype)throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));L(o instanceof os,()=>"The result y returned by f() must be a tensor.");const a=function BAe(t,e,n){const r={},i={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const h in c){const g=c[h];let _=!1;for(let v=0;v<e.length;v++)if(r[g.id]){l.outputs.forEach(w=>r[w.id]=!0),_=!0,i[l.id]=!0;break}if(_)break}}const s={};s[n.id]=!0;const o={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let h=0;h<l.outputs.length;h++)if(s[l.outputs[h].id]){for(const g in c)s[c[g].id]=!0,o[l.id]=!0;break}}const a=[];for(let u=0;u<t.length;u++){const l=t[u];if(i[l.id]&&o[l.id]){const c={};for(const g in l.inputs){const _=l.inputs[g];r[_.id]&&(c[g]=_)}const h=Object.assign({},l);h.inputs=c,h.outputs=l.outputs,a.push(h)}}return a}(this.state.activeTape,r,o);if(!s&&0===a.length&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const u={};u[o.id]=i??function eCe(t){const e=dK(Hi(t),"float32");return X.makeTensor(e,t,"float32")}(o.shape),function UAe(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(u=>{const l=t[u.id];o.push(null!=l?l:null)}),null==s.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const u in s.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);const l=n(()=>a[u]());if("float32"!==l.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=s.inputs[u];if(!Wd(l.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(null==t[c.id])t[c.id]=l;else{const h=t[c.id];t[c.id]=r(h,l),h.dispose()}}}}(u,a,c=>this.tidy(c),tCe);const l=r.map(c=>u[c.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(c=>{for(const h of c.saved)h.dispose()}),this.state.activeTape=null),{value:o,grads:l}})}customGrad(n){return L(lK(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{let i;L(r.every(u=>u instanceof os),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const s={};return r.forEach((u,l)=>{s[l]=u}),this.runKernelFunc({forwardFunc:(u,l)=>(i=n(...r,l),L(i.value instanceof os,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),L(lK(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),backwardsFunc:(u,l)=>{const c=i.gradFunc(u,l),h=Array.isArray(c)?c:[c];L(h.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),L(h.every(_=>_ instanceof os),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const g={};return h.forEach((_,v)=>{g[v]=()=>_}),g},inputs:s})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}time(n){var r=this;return(0,Y.A)(function*(){const i=NC(),s=yield r.backend.time(n);return s.wallMs=NC()-i,s})()}track(n){return null!=this.state.activeScope&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new BK;for(const n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function UK(){const t=mK();if(null==t._tfengine){const e=new $Ee(t);t._tfengine=new ZAe(e)}return function HEe(t){pK=t}(t._tfengine.ENV),function GAe(t){hu=t}(()=>t._tfengine),t._tfengine}const X=UK();function tCe(t,e){return X.runKernel("Add",{a:t,b:e})}const go=wn();function Qd(t,e){let n=t;if(sl(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||sl(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&wn().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&HK(t,r,[]),r}function HK(t,e,n){if(n=n||[],!Array.isArray(t)&&!sl(t))return void L(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);L(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),L(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)HK(t[i],r,n.concat(i))}function zK(t,e,n,r){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==e||"numeric"===t&&"string"===e)throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function N(t,e,n,r="numeric"){if(t instanceof os)return zK(r,t.dtype,e,n),t;let i=AM(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),zK(r,i,e,n),null==t||!sl(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${null==t?"null":t.constructor.name}'`);const s=Qd(t,i);!sl(t)&&!Array.isArray(t)&&(t=[t]);const a="string"!==i?OM(t,i):Eb(t,[],!0);return X.makeTensor(a,s,i)}function kC(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>N(s,`${e}[${o}]`,n,r))}go.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),go.registerFlag("IS_BROWSER",()=>function rCe(){return typeof window<"u"&&null!=window.document||typeof WorkerGlobalScope<"u"}()),go.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),go.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),go.registerFlag("PROD",()=>!1),go.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>go.getBool("DEBUG")),go.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),go.registerFlag("IS_TEST",()=>!1),go.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),go.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),go.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),go.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),go.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);const GK="__op";function H(t){const e=Object.keys(t);if(1!==e.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=GK;const i=(...s)=>{X.startScope(n);try{const o=r(...s);return iy(o)&&console.error("Cannot return a Promise inside of tidy."),X.endScope(o),o}catch(o){throw X.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}const Jd=H({complex_:function iCe(t,e){const n=N(t,"real","complex"),r=N(e,"imag","complex");return Ta(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`),X.runKernel("Complex",{real:n,imag:r})}});function Yd(t,e,n,r){if(null==r&&(r=AM(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!sl(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){hK(e);const i=Hi(e),s=Hi(n);L(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const u=o!==n.length-1||n[o]!==Hi(e.slice(o));L(n[o]===e[o]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!sl(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t="string"!==r?OM(t,r):Eb(t,[],!0),X.makeTensor(t,e,r)}function ol(t,e,n){return Yd(t,e,Qd(t,n),n)}const jM={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},xC=4;function sCe(t,e){return BM.apply(this,arguments)}function BM(){return BM=(0,Y.A)(function*(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],u=Array.isArray(t)?t[o].tensor:t[a];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype&&"complex64"!==u.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);const l={name:a,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){const c=new Promise(function(){var h=(0,Y.A)(function*(g){const _=yield u.bytes(),v=_.reduce((S,x)=>S+x.length,0)+xC*_.length,w=new Uint8Array(v);let I=0;for(let S=0;S<_.length;S++){const x=_[S],O=new Uint8Array(new Uint32Array([x.length]).buffer);w.set(O,I),I+=xC,w.set(x,I),I+=x.length}g(w)});return function(g){return h.apply(this,arguments)}}());r.push(c)}else r.push(u.data());null!=e&&(l.group=e),n.push(l)}return{data:oCe(yield Promise.all(r)),specs:n}}),BM.apply(this,arguments)}function qK(t,e){const n={};let r,i=0;for(const s of e){const o=s.name,a=s.dtype,u=s.shape,l=Hi(u);let c;if("quantization"in s){const h=s.quantization;if("uint8"===h.dtype||"uint16"===h.dtype){if(!("min"in h)||!("scale"in h))throw new Error(`Weight ${s.name} with quantization ${h.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==h.dtype)throw new Error(`Weight ${s.name} has unknown quantization dtype ${h.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==a)throw new Error(`Weight ${s.name} is quantized with ${h.dtype} which only supports weights of type float32 not ${a}.`)}const g=jM[h.dtype],_=t.slice(i,i+l*g),v="uint8"===h.dtype?new Uint8Array(_):new Uint16Array(_);if("float32"===a)if("uint8"===h.dtype||"uint16"===h.dtype){c=new Float32Array(v.length);for(let w=0;w<v.length;w++)c[w]=v[w]*h.scale+h.min}else{if("float16"!==h.dtype)throw new Error(`Unsupported quantization type ${h.dtype} for weight type float32.`);void 0===r&&(r=hCe()),c=r(v)}else{if("int32"!==a)throw new Error(`Unsupported dtype in weight '${o}': ${a}`);if("uint8"!==h.dtype&&"uint16"!==h.dtype)throw new Error(`Unsupported quantization type ${h.dtype} for weight type int32.`);c=new Int32Array(v.length);for(let w=0;w<v.length;w++)c[w]=Math.round(v[w]*h.scale+h.min)}i+=l*g}else if("string"===a){const h=Hi(s.shape);c=[];for(let g=0;g<h;g++){const _=new Uint32Array(t.slice(i,i+xC))[0];i+=xC;const v=new Uint8Array(t.slice(i,i+_));c.push(v),i+=_}}else{const h=jM[a],g=t.slice(i,i+l*h);if("float32"===a)c=new Float32Array(g);else if("int32"===a)c=new Int32Array(g);else if("bool"===a)c=new Uint8Array(g);else{if("complex64"!==a)throw new Error(`Unsupported dtype in weight '${o}': ${a}`);{c=new Float32Array(g);const _=new Float32Array(c.length/2),v=new Float32Array(c.length/2);for(let S=0;S<_.length;S++)_[S]=c[2*S],v[S]=c[2*S+1];const w=ol(_,u,"float32"),I=ol(v,u,"float32");n[o]=Jd(w,I),w.dispose(),I.dispose()}}i+=l*h}"complex64"!==a&&(n[o]=ol(c,u,a))}return n}function oCe(t){if(null===t)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const UM=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function WK(t){return UM?Buffer.byteLength(t):new Blob([t]).size}function HM(t){if(1===t.length)return t[0];let e=0;t.forEach(i=>{e+=i.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function KK(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const n=t.split("/");return n[n.length-1]}function QK(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),n}function JK(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),r}function zM(t,e){return GM.apply(this,arguments)}function GM(){return(GM=(0,Y.A)(function*(t,e){let n,r;return null!=t.weightsManifest&&([n,r]=yield e(t.weightsManifest)),JK(t,n,r)})).apply(this,arguments)}function Nb(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:WK(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:WK(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function YK(t){const e=[];for(const n of t)e.push(...n.weights);return e}function hCe(){const t=function lCe(){const t=n=>{let r=n<<13,i=0;for(;!(8388608&r);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}(),e=function cCe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function dCe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const a=r[o];s[o]=t[n[a>>10]+(1023&a)]+e[a>>10]}return new Float32Array(i)}}class Or{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Or.instance&&(Or.instance=new Or),Or.instance}static registerSaveRouter(e){Or.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Or.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Or.getHandlers(e,"save")}static getLoadHandlers(e,n){return Or.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return("load"===n?Or.getInstance().loadRouters:Or.getInstance().saveRouters).forEach(o=>{const a=o(e,r);null!==a&&i.push(a)}),i}}const fCe=t=>Or.registerSaveRouter(t),pCe=t=>Or.registerLoadRouter(t),mCe=t=>Or.getSaveHandlers(t),gCe=(t,e)=>Or.getLoadHandlers(t,e),RC="tensorflowjs",qf="models_store",Xd="model_info_store";function KM(){if(!wn().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function QM(t){const e=t.result;e.createObjectStore(qf,{keyPath:"modelPath"}),e.createObjectStore(Xd,{keyPath:"modelPath"})}let ay=(()=>{class t{constructor(n){if(this.indexedDB=KM(),null==n||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){var r=this;return(0,Y.A)(function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return r.databaseAction(r.modelPath,n)})()}load(){var n=this;return(0,Y.A)(function*(){return n.databaseAction(n.modelPath)})()}databaseAction(n,r){return new Promise((i,s)=>{const o=this.indexedDB.open(RC,1);o.onupgradeneeded=()=>QM(o),o.onsuccess=()=>{const a=o.result;if(null==r){const u=a.transaction(qf,"readonly"),c=u.objectStore(qf).get(this.modelPath);c.onsuccess=()=>{if(null==c.result)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(c.result.modelArtifacts)},c.onerror=h=>(a.close(),s(c.error)),u.oncomplete=()=>a.close()}else{const u=Nb(r),l=a.transaction(Xd,"readwrite");let c=l.objectStore(Xd);const h=c.put({modelPath:this.modelPath,modelArtifactsInfo:u});let g;h.onsuccess=()=>{g=a.transaction(qf,"readwrite");const v=g.objectStore(qf).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:u});v.onsuccess=()=>i({modelArtifactsInfo:u}),v.onerror=w=>{c=l.objectStore(Xd);const I=c.delete(this.modelPath);I.onsuccess=()=>(a.close(),s(v.error)),I.onerror=S=>(a.close(),s(v.error))}},h.onerror=_=>(a.close(),s(h.error)),l.oncomplete=()=>{null==g?a.close():g.oncomplete=()=>a.close()}}},o.onerror=a=>s(o.error)})}}return t.URL_SCHEME="indexeddb://",t})();const XK=t=>wn().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ay.URL_SCHEME)?function yCe(t){return new ay(t)}(t.slice(ay.URL_SCHEME.length)):null;Or.registerSaveRouter(XK),Or.registerLoadRouter(XK);class vCe{constructor(){this.indexedDB=KM()}listModels(){var e=this;return(0,Y.A)(function*(){return new Promise((n,r)=>{const i=e.indexedDB.open(RC,1);i.onupgradeneeded=()=>QM(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(Xd,"readonly"),u=o.objectStore(Xd).getAll();u.onsuccess=()=>{const l={};for(const c of u.result)l[c.modelPath]=c.modelArtifactsInfo;n(l)},u.onerror=l=>(s.close(),r(u.error)),o.oncomplete=()=>s.close()},i.onerror=s=>r(i.error)})})()}removeModel(e){var n=this;return(0,Y.A)(function*(){return e=function _Ce(t){return t.startsWith(ay.URL_SCHEME)?t.slice(ay.URL_SCHEME.length):t}(e),new Promise((r,i)=>{const s=n.indexedDB.open(RC,1);s.onupgradeneeded=()=>QM(s),s.onsuccess=()=>{const o=s.result,a=o.transaction(Xd,"readwrite"),u=a.objectStore(Xd),l=u.get(e);let c;l.onsuccess=()=>{if(null==l.result)return o.close(),i(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const h=u.delete(e),g=()=>{c=o.transaction(qf,"readwrite");const v=c.objectStore(qf).delete(e);v.onsuccess=()=>r(l.result.modelArtifactsInfo),v.onerror=w=>i(l.error)};h.onsuccess=g,h.onerror=_=>(g(),o.close(),i(l.error))}},l.onerror=h=>(o.close(),i(l.error)),a.oncomplete=()=>{null==c?o.close():c.oncomplete=()=>o.close()}},s.onerror=o=>i(s.error)})})()}}const al="/",Wf="tensorflowjs_models",ZK="info",bCe="model_topology",wCe="weight_specs",ECe="weight_data",TCe="model_metadata";function e7(t){return{info:[Wf,t,ZK].join(al),topology:[Wf,t,bCe].join(al),weightSpecs:[Wf,t,wCe].join(al),weightData:[Wf,t,ECe].join(al),modelMetadata:[Wf,t,TCe].join(al)}}function t7(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function n7(t){const e=t.split(al);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(al)}let uy=(()=>{class t{constructor(n){if(!wn().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==n||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=e7(this.modelPath)}save(n){var r=this;return(0,Y.A)(function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const i=JSON.stringify(n.modelTopology),s=JSON.stringify(n.weightSpecs),o=Nb(n);try{return r.LS.setItem(r.keys.info,JSON.stringify(o)),r.LS.setItem(r.keys.topology,i),r.LS.setItem(r.keys.weightSpecs,s),r.LS.setItem(r.keys.weightData,function aCe(t){if(UM)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(n.weightData)),r.LS.setItem(r.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:null!=n.signature?n.signature:void 0,userDefinedMetadata:null!=n.userDefinedMetadata?n.userDefinedMetadata:void 0,modelInitializer:null!=n.modelInitializer?n.modelInitializer:void 0,trainingConfig:null!=n.trainingConfig?n.trainingConfig:void 0})),{modelArtifactsInfo:o}}catch{throw t7(r.keys),new Error(`Failed to save model '${r.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}})()}load(){var n=this;return(0,Y.A)(function*(){const r=JSON.parse(n.LS.getItem(n.keys.info));if(null==r)throw new Error(`In local storage, there is no model with name '${n.modelPath}'`);if("JSON"!==r.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const i={},s=JSON.parse(n.LS.getItem(n.keys.topology));if(null==s)throw new Error(`In local storage, the topology of model '${n.modelPath}' is missing.`);i.modelTopology=s;const o=JSON.parse(n.LS.getItem(n.keys.weightSpecs));if(null==o)throw new Error(`In local storage, the weight specs of model '${n.modelPath}' are missing.`);i.weightSpecs=o;const a=n.LS.getItem(n.keys.modelMetadata);if(null!=a){const l=JSON.parse(a);i.format=l.format,i.generatedBy=l.generatedBy,i.convertedBy=l.convertedBy,null!=l.signature&&(i.signature=l.signature),null!=l.userDefinedMetadata&&(i.userDefinedMetadata=l.userDefinedMetadata),null!=l.modelInitializer&&(i.modelInitializer=l.modelInitializer),null!=l.trainingConfig&&(i.trainingConfig=l.trainingConfig)}const u=n.LS.getItem(n.keys.weightData);if(null==u)throw new Error(`In local storage, the binary weight values of model '${n.modelPath}' are missing.`);return i.weightData=function uCe(t){if(UM){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}(u),i})()}}return t.URL_SCHEME="localstorage://",t})();const r7=t=>wn().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(uy.URL_SCHEME)?function ACe(t){return new uy(t)}(t.slice(uy.URL_SCHEME.length)):null;Or.registerSaveRouter(r7),Or.registerLoadRouter(r7);class CCe{constructor(){L(wn().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),L(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){var e=this;return(0,Y.A)(function*(){const n={},r=Wf+al,i=al+ZK;for(let s=0;s<e.LS.length;++s){const o=e.LS.key(s);o.startsWith(r)&&o.endsWith(i)&&(n[n7(o)]=JSON.parse(e.LS.getItem(o)))}return n})()}removeModel(e){var n=this;return(0,Y.A)(function*(){const r=e7(e=function ICe(t){return t.startsWith(uy.URL_SCHEME)?t.slice(uy.URL_SCHEME.length):t}(e));if(null==n.LS.getItem(r.info))throw new Error(`Cannot find model at path '${e}'`);const i=JSON.parse(n.LS.getItem(r.info));return t7(r),i})()}}const ly="://";class ws{constructor(){this.managers={}}static getInstance(){return null==ws.instance&&(ws.instance=new ws),ws.instance}static registerManager(e,n){L(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(ly)&&(e=e.slice(0,e.indexOf(ly))),L(e.length>0,()=>"scheme must not be an empty string.");const r=ws.getInstance();L(null==r.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=ws.getInstance().managers[e];if(null==n)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(ws.getInstance().managers)}}function OC(t){if(-1===t.indexOf(ly))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${ws.getSchemes().join(",")}`);return{scheme:t.split(ly)[0],path:t.split(ly)[1]}}function i7(t,e){return JM.apply(this,arguments)}function JM(){return(JM=(0,Y.A)(function*(t,e,n=!1){L(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Or.getLoadHandlers(t);L(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),L(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const i=r[0],s=Or.getSaveHandlers(e);L(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),L(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=s[0],a=OC(t).scheme,u=OC(t).path,l=a===OC(t).scheme,c=yield i.load();n&&l&&(yield ws.getManager(a).removeModel(u));const h=yield o.save(c);return n&&!l&&(yield ws.getManager(a).removeModel(u)),h.modelArtifactsInfo})).apply(this,arguments)}function SCe(){return YM.apply(this,arguments)}function YM(){return(YM=(0,Y.A)(function*(){const t=ws.getSchemes(),e={};for(const n of t){const r=yield ws.getManager(n).listModels();for(const i in r)e[n+ly+i]=r[i]}return e})).apply(this,arguments)}function DCe(t){return XM.apply(this,arguments)}function XM(){return(XM=(0,Y.A)(function*(t){const e=OC(t);return ws.getManager(e.scheme).removeModel(e.path)})).apply(this,arguments)}function NCe(t,e){return ZM.apply(this,arguments)}function ZM(){return(ZM=(0,Y.A)(function*(t,e){return i7(t,e,!1)})).apply(this,arguments)}function PCe(t,e){return e2.apply(this,arguments)}function e2(){return(e2=(0,Y.A)(function*(t,e){return i7(t,e,!0)})).apply(this,arguments)}class kCe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if("utf-8"!==n&&"utf8"!==n)throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){window&&wn().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{r.source===window&&r.data.name===this.messageName&&(r.stopPropagation(),(0,this.functionRefs[r.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0))):setTimeout(e,n)}}if(wn().get("IS_BROWSER")){wn().setPlatform("browser",new kCe);try{ws.registerManager(uy.URL_SCHEME,new CCe)}catch{}try{ws.registerManager(ay.URL_SCHEME,new vCe)}catch{}}let cy;function dc(t,e="float32",n){return e=e||"float32",hK(t),new FM(t,e,n)}wn().get("IS_NODE")&&!wn().get("IS_BROWSER")&&wn().setPlatform("node",new class RCe{constructor(){this.util=ee(590),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=wn().global.fetch?wn().global.fetch(e,n):(null==cy&&(cy=ee(817)),cy(e,n))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,n){if("utf-8"!==n&&"utf8"!==n)throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return 0===e.length?"":new this.util.TextDecoder(n).decode(e)}});const ki=H({cast_:function OCe(t,e){const n=N(t,"x","cast");if(!function MEe(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return X.runKernel("Cast",{x:n},{dtype:e})}}),Zd=H({clone_:function MCe(t){const n={x:N(t,"x","clone","string_or_numeric")};return X.runKernel(_K,n)}});function s7(t,e=!1){console.log(t.toString(e))}function o7(t){return new Promise(e=>setTimeout(e)).then(t)}UK(),function qAe(t){oy=t}({buffer:dc,cast:ki,clone:Zd,print:s7});let t2=(()=>{class t{constructor(n){if(!wn().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(null==n||0===n.length)&&(n="model"),this.modelJsonFileName=n+".json",this.weightDataFileName=n+".weights.bin"}save(n){var r=this;return(0,Y.A)(function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const i=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const o=QK(n,[{paths:["./"+r.weightDataFileName],weights:n.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),u=null==r.modelJsonAnchor?document.createElement("a"):r.modelJsonAnchor;if(u.download=r.modelJsonFileName,u.href=a,yield o7(()=>u.dispatchEvent(new MouseEvent("click"))),null!=n.weightData){const l=null==r.weightDataAnchor?document.createElement("a"):r.weightDataAnchor;l.download=r.weightDataFileName,l.href=i,yield o7(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Nb(n)}}})()}}return t.URL_SCHEME="downloads://",t})();class $Ce{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}load(){var e=this;return(0,Y.A)(function*(){return new Promise((n,r)=>{const i=new FileReader;i.onload=s=>{const o=JSON.parse(s.target.result),a=o.modelTopology;if(null==a)return void r(new Error(`modelTopology field is missing from file ${e.jsonFile.name}`));if(null==o.weightsManifest)return void r(new Error(`weightManifest field is missing from file ${e.jsonFile.name}`));if(0===e.weightsFiles.length)return void n({modelTopology:a});const l=zM(o,c=>e.loadWeights(c));n(l)},i.onerror=s=>r(`Failed to read model topology and weights manifest JSON from file '${e.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(e.jsonFile)})})()}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const i=this.checkManifestAndWeightFiles(e),s=r.map(o=>this.loadWeightsFile(o,i[o]));return Promise.all(s).then(o=>[n,HM(o)])}loadWeightsFile(e,n){return new Promise((r,i)=>{const s=new FileReader;s.onload=o=>{r(o.target.result)},s.onerror=o=>i(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(s=>KK(s.name)),i={};for(const s of e)s.paths.forEach(o=>{const a=KK(o);if(-1!==n.indexOf(a))throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),-1===r.indexOf(a))throw new Error(`Weight file with basename '${a}' is not provided.`);i[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}function UCe(t){return new $Ce(t)}function a7(t,e,n,r){(function o(u){L(null!=u&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")})(t),function a(u,l){L(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),L(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),L(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}(n=n??0,r=r??1);let i=0;return Promise.all(t.map(u=>(u.then(l=>{const c=n+ ++i/t.length*(r-n);return e(c),l}),u)))}function u7(t,e){return n2.apply(this,arguments)}function n2(){return(n2=(0,Y.A)(function*(t,e){null==e&&(e={});const n=null==e.fetchFunc?wn().platform.fetch:e.fetchFunc,r=t.map(h=>n(h,e.requestInit,{isBinary:!0})),a=(null==e.onProgress?yield Promise.all(r):yield a7(r,e.onProgress,0,.5)).map(h=>h.arrayBuffer());return null==e.onProgress?yield Promise.all(a):yield a7(a,e.onProgress,.5,1)})).apply(this,arguments)}function HCe(t){return r2.apply(this,arguments)}function r2(){return(r2=(0,Y.A)(function*(t,e="",n,r){return l7(o=>u7(o,{requestInit:r}))(t,e,n)})).apply(this,arguments)}function l7(t){return function(){var e=(0,Y.A)(function*(n,r="",i){const s=n.map(()=>!1),o={},a=null!=i?i.map(()=>!1):[],u=[];if(n.forEach((v,w)=>{let I=0;v.weights.forEach(S=>{const O=jM["quantization"in S?S.quantization.dtype:S.dtype]*Hi(S.shape),U=()=>{s[w]=!0,null==o[w]&&(o[w]=[]),o[w].push({manifestEntry:S,groupOffset:I,sizeBytes:O})};null!=i?i.forEach((he,de)=>{he===S.name&&(U(),a[de]=!0)}):U(),u.push(S.name),I+=O})}),!a.every(v=>v)){const v=i.filter((w,I)=>!a[I]);throw new Error(`Could not find weights in manifest with names: ${v.join(", ")}. \nManifest JSON has weights with names: ${u.join(", ")}.`)}const l=s.reduce((v,w,I)=>(w&&v.push(I),v),[]),c=[];l.forEach(v=>{n[v].paths.forEach(w=>{const I=r+(r.endsWith("/")?"":"/")+w;c.push(I)})});const h=yield t(c),g={};let _=0;return l.forEach(v=>{const w=n[v].paths.length;let I=0;for(let he=0;he<w;he++)I+=h[_+he].byteLength;const S=new ArrayBuffer(I),x=new Uint8Array(S);let O=0;for(let he=0;he<w;he++){const de=new Uint8Array(h[_+he]);x.set(de,O),O+=de.byteLength}o[v].forEach(he=>{const R=qK(S.slice(he.groupOffset,he.groupOffset+he.sizeBytes),[he.manifestEntry]);for(const k in R)g[k]=R[k]}),_+=w}),g});return function(n){return e.apply(this,arguments)}}()}Or.registerSaveRouter(t=>wn().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(t2.URL_SCHEME)?function BCe(t="model"){return new t2(t)}(t.slice(t2.URL_SCHEME.length)):null);let c7=(()=>{class t{constructor(n,r){if(this.DEFAULT_METHOD="POST",null==r&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,this.weightUrlConverter=r.weightUrlConverter,null!=r.fetchFunc?(L("function"==typeof r.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=wn().platform.fetch,L(null!=n&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&L(2===n.length,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,null!=r.requestInit&&null!=r.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}save(n){var r=this;return(0,Y.A)(function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const i=Object.assign({method:r.DEFAULT_METHOD},r.requestInit);i.body=new FormData;const o=QK(n,[{paths:["./model.weights.bin"],weights:n.weightSpecs}]);i.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),null!=n.weightData&&i.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin");const a=yield r.fetch(r.path,i);if(a.ok)return{modelArtifactsInfo:Nb(n),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})()}load(){var n=this;return(0,Y.A)(function*(){const r=yield n.fetch(n.path,n.requestInit);if(!r.ok)throw new Error(`Request to ${n.path} failed with status code ${r.status}. Please verify this URL points to the model JSON of the model to load.`);let i;try{i=yield r.json()}catch{let u=`Failed to parse model JSON of response from ${n.path}.`;throw n.path.endsWith(".pb")?u+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":u+=" Please make sure the server is serving valid JSON for this request.",new Error(u)}if(null==i.modelTopology&&null==i.weightsManifest)throw new Error(`The JSON from HTTP path ${n.path} contains neither model topology or manifest for weights.`);return zM(i,a=>n.loadWeights(a))})()}loadWeights(n){var r=this;return(0,Y.A)(function*(){const i=Array.isArray(r.path)?r.path[1]:r.path,[s,o]=function qCe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(i),a=r.weightPathPrefix||s,u=YK(n),l=[],c=[];for(const g of n)for(const _ of g.paths)null!=r.weightUrlConverter?c.push(r.weightUrlConverter(_)):l.push(a+_+o);return r.weightUrlConverter&&l.push(...yield Promise.all(c)),[u,HM(yield u7(l,{requestInit:r.requestInit,fetchFunc:r.fetch,onProgress:r.onProgress}))]})()}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function i2(t){return null!=t.match(c7.URL_SCHEME_REGEX)}const d7=(t,e)=>{if(typeof fetch>"u"&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every(r=>i2(r)):i2(t),n)return s2(t,e)}return null};function s2(t,e){return new c7(t,e)}function WCe(t,e){return s2(t,e)}Or.registerSaveRouter(d7),Or.registerLoadRouter(d7);class o2{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class h7{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class KCe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function QCe(t,e,n,r){return new KCe(f7(...arguments))}function f7(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new o2(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new o2({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new o2({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function JCe(t){return new h7(t)}function YCe(t){return new h7(t)}const Ia=H({abs_:function XCe(t){const e=N(t,"x","abs");return X.runKernel("complex64"===e.dtype?"ComplexAbs":"Abs",{x:e})}}),eSe=H({acos_:function ZCe(t){const n={x:N(t,"x","acos")};return X.runKernel("Acos",n)}}),nSe=H({acosh_:function tSe(t){const n={x:N(t,"x","acosh")};return X.runKernel("Acosh",n)}}),xi=H({add_:function rSe(t,e){let n=N(t,"a","add"),r=N(e,"b","add");return[n,r]=Ur(n,r),X.runKernel("Add",{a:n,b:r})}}),sSe=H({addN_:function iSe(t){L(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),L(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((i,s)=>N(i,`tensors${s}`,"addN")),n=e[0];return e.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!Wd(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),X.runKernel("AddN",e)}}),aSe=H({all_:function oSe(t,e=null,n=!1){const i={x:N(t,"x","all","bool")};return X.runKernel("All",i,{axis:e,keepDims:n})}}),lSe=H({any_:function uSe(t,e=null,n=!1){const i={x:N(t,"x","any","bool")};return X.runKernel("Any",i,{axis:e,keepDims:n})}}),dSe=H({argMax_:function cSe(t,e=0){const r={x:N(t,"x","argMax")};return X.runKernel("ArgMax",r,{axis:e})}}),fSe=H({argMin_:function hSe(t,e=0){const r={x:N(t,"x","argMin")};return X.runKernel("ArgMin",r,{axis:e})}}),mSe=H({asin_:function pSe(t){const n={x:N(t,"x","asin")};return X.runKernel("Asin",n)}}),ySe=H({asinh_:function gSe(t){const n={x:N(t,"x","asinh")};return X.runKernel("Asinh",n)}}),vSe=H({atan_:function _Se(t){const n={x:N(t,"x","atan")};return X.runKernel("Atan",n)}}),wSe=H({atan2_:function bSe(t,e){let n=N(t,"a","atan2"),r=N(e,"b","atan2");return[n,r]=Ur(n,r),X.runKernel("Atan2",{a:n,b:r})}}),TSe=H({atanh_:function ESe(t){const n={x:N(t,"x","atanh")};return X.runKernel("Atanh",n)}});function MC(t,e,n,r,i,s,o=!1,a="channelsLast"){let[u,l,c,h]=[-1,-1,-1,-1];if("channelsLast"===a)[u,l,c,h]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[u,h,l,c]=t}const[g,_,,v]=e,[w,I]=FC(n),[S,x]=FC(r),O=dy(g,S),U=dy(_,x),{padInfo:he,outHeight:de,outWidth:R}=function DSe(t,e,n,r,i,s,o,a,u){let l,c,h;if("number"==typeof t){l={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const _=function CSe(t,e,n,r,i){null==r&&(r=function p7(t,e,n,r=1){const i=dy(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}(t,e,n));const o=t[1];return[Kf((t[0]-e+2*r)/n+1,i),Kf((o-e+2*r)/n+1,i)]}([e,n],s,r,t,a);c=_[0],h=_[1]}else if("same"===t){c=Math.ceil(e/r),h=Math.ceil(n/i);const g=Math.max(0,(c-1)*r+s-e),_=Math.max(0,(h-1)*i+o-n),v=Math.floor(g/2),w=g-v,I=Math.floor(_/2);l={top:v,bottom:w,left:I,right:_-I,type:"SAME"}}else if("valid"===t)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),h=Math.ceil((n-o+1)/i);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const g="channelsLast"===u?t[1][0]:t[2][0],_="channelsLast"===u?t[1][1]:t[2][1],v="channelsLast"===u?t[2][0]:t[3][0],w="channelsLast"===u?t[2][1]:t[3][1];l={top:g,bottom:_,left:v,right:w,type:0===g&&0===_&&0===v&&0===w?"VALID":"EXPLICIT"},c=Kf((e-s+g+_)/r+1,a),h=Kf((n-o+v+w)/i+1,a)}}return{padInfo:l,outHeight:c,outWidth:h}}(i,l,c,w,I,O,U,s,a),k=o?v*h:v;let F;return"channelsFirst"===a?F=[u,k,de,R]:"channelsLast"===a&&(F=[u,de,R,k]),{batchSize:u,dataFormat:a,inHeight:l,inWidth:c,inChannels:h,outHeight:de,outWidth:R,outChannels:k,padInfo:he,strideHeight:w,strideWidth:I,filterHeight:g,filterWidth:_,effectiveFilterHeight:O,effectiveFilterWidth:U,dilationHeight:S,dilationWidth:x,inShape:t,outShape:F,filterShape:e}}function FC(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function dy(t,e){return e<=1?t:t+(t-1)*(e-1)}function Kf(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function VC(t){const[e,n,r]=FC(t);return 1===e&&1===n&&1===r}function eh(t,e){return VC(t)||VC(e)}function fu(t,e,n){if(null!=n){if("string"==typeof e)throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if("number"==typeof e)L(Tb(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else{if("object"!=typeof e)throw Error(`Error in ${t}: Unknown padding parameter: ${e}`);e.forEach(r=>{r.forEach(i=>{L(Tb(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})})}}}const ke=H({reshape_:function kSe(t,e){const r={x:N(t,"x","reshape","string_or_numeric")};return X.runKernel("Reshape",r,{shape:e})}}),m7=H({avgPool_:function xSe(t,e,n,r,i){const s=N(t,"x","avgPool","float32");L(eh(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let a=s,u=!1;3===s.rank&&(u=!0,a=ke(s,[1,s.shape[0],s.shape[1],s.shape[2]])),L(4===a.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),fu("avgPool",r,i);let h=X.runKernel("AvgPool",{x:a},{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return h=ki(h,s.dtype),u?ke(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),OSe=H({avgPool3d_:function RSe(t,e,n,r,i,s="NDHWC"){const o=N(t,"x","avgPool3d","float32");let a=o,u=!1;4===o.rank&&(u=!0,a=ke(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(5===a.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),L("NDHWC"===s,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),fu("avgPool3d",r,i);let h=X.runKernel("AvgPool3D",{x:a},{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s});return h=ki(h,a.dtype),u?ke(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Es=H({concat_:function MSe(t,e=0){L(t.length>=1,()=>"Pass at least one tensor to concat");const n=kC(t,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach(s=>{if("complex64"!==s.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${s.dtype}. `)}),1===n.length?Zd(n[0]):X.runKernel("Concat",n,{axis:e})}}),Qn=H({matMul_:function FSe(t,e,n=!1,r=!1){let i=N(t,"a","matMul"),s=N(e,"b","matMul");return[i,s]=Ur(i,s),X.runKernel("BatchMatMul",{a:i,b:s},{transposeA:n,transposeB:r})}}),sn=H({mul_:function VSe(t,e){let n=N(t,"a","mul"),r=N(e,"b","mul");return[n,r]=Ur(n,r),X.runKernel("Multiply",{a:n,b:r})}}),hy=H({sigmoid_:function LSe(t){const n={x:N(t,"x","sigmoid","float32")};return X.runKernel("Sigmoid",n)}}),ir=H({slice_:function $Se(t,e,n){const r=N(t,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return X.runKernel("Slice",{x:r},{begin:e,size:n})}}),u2=H({tanh_:function jSe(t){const n={x:N(t,"x","tanh","float32")};return X.runKernel("Tanh",n)}}),USe=H({basicLSTMCell_:function BSe(t,e,n,r,i,s){const o=N(t,"forgetBias","basicLSTMCell"),a=N(e,"lstmKernel","basicLSTMCell"),u=N(n,"lstmBias","basicLSTMCell"),l=N(r,"data","basicLSTMCell"),c=N(i,"c","basicLSTMCell"),h=N(s,"h","basicLSTMCell"),g=Es([l,h],1),_=Qn(g,a),v=xi(_,u),I=v.shape[1]/4,S=[v.shape[0],I],x=ir(v,[0,0],S),O=ir(v,[0,I],S),U=ir(v,[0,2*I],S),he=ir(v,[0,3*I],S),de=xi(sn(hy(x),u2(O)),sn(c,hy(xi(o,U))));return[de,sn(u2(de),hy(he))]}}),g7=H({batchToSpaceND_:function HSe(t,e,n){const r=N(t,"x","batchToSpaceND"),i=e.reduce((a,u)=>a*u);return L(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),L(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),L(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`),X.runKernel("BatchToSpaceND",{x:r},{blockShape:e,crops:n})}});function zSe(t){let e;return e=0===t.rank||1===t.rank?ke(t,[1,1,1,t.size]):2===t.rank?ke(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?ke(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,e}const LC=H({batchNorm_:function GSe(t,e,n,r,i,s){null==s&&(s=.001);const o=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),u=N(n,"variance","batchNorm");let l,c;null!=i&&(l=N(i,"scale","batchNorm")),null!=r&&(c=N(r,"offset","batchNorm")),L(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),L(null==c||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),L(null==l||a.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const g={x:zSe(o),scale:l,offset:c,mean:a,variance:u},v=X.runKernel("FusedBatchNorm",g,{varianceEpsilon:s});return ke(v,o.shape)}}),WSe=H({batchNorm2d_:function qSe(t,e,n,r,i,s){const o=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),u=N(n,"variance","batchNorm");let l,c;return null!=i&&(l=N(i,"scale","batchNorm")),null!=r&&(c=N(r,"offset","batchNorm")),L(2===o.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),L(2===a.rank||1===a.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),L(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),null!=l&&L(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),null!=c&&L(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),LC(o,a,u,c,l,s)}}),QSe=H({batchNorm3d_:function KSe(t,e,n,r,i,s){const o=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),u=N(n,"variance","batchNorm");let l,c;return null!=i&&(l=N(i,"scale","batchNorm")),null!=r&&(c=N(r,"offset","batchNorm")),L(3===o.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),L(3===a.rank||1===a.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),L(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),null!=l&&L(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),null!=c&&L(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),LC(o,a,u,c,l,s)}}),YSe=H({batchNorm4d_:function JSe(t,e,n,r,i,s){const o=N(t,"x","batchNorm"),a=N(e,"mean","batchNorm"),u=N(n,"variance","batchNorm");let l,c;return null!=i&&(l=N(i,"scale","batchNorm")),null!=r&&(c=N(r,"offset","batchNorm")),L(4===o.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),L(4===a.rank||1===a.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),L(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),null!=l&&L(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),null!=c&&L(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),LC(o,a,u,c,l,s)}}),y7=H({bincount_:function XSe(t,e,n){const r=N(t,"x","bincount"),i=N(e,"weights","bincount");return L("int32"===r.dtype,()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),L(n>=0,()=>`size must be non-negative, but got ${n}.`),L(i.size===r.size||0===i.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`),X.runKernel("Bincount",{x:r,weights:i},{size:n})}}),eDe=H({broadcastArgs_:function ZSe(t,e){const n=N(t,"s0","broadcastArgs","int32"),r=N(e,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);return X.runKernel("BroadcastArgs",{s0:n,s1:r})}}),$C=H({broadcastTo_:function tDe(t,e){let n=N(t,"broadcastTo","x");const r=n.shape;if(e.some(l=>!(l>0)||l%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=ke(n,l)}const i=n.shape,s=Array.from(e);for(let l=e.length-1;l>=0;l--)if(i[l]===e[l])s[l]=1;else if(1!==n.shape[l])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);return 0===s.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length?Zd(n):X.runKernel("Tile",{x:n},{reps:s})}}),rDe=H({ceil_:function nDe(t){const n={x:N(t,"x","ceil","float32")};return X.runKernel("Ceil",n)}});function jC(t,e,n){return X.runKernel(BTe,{},{shape:t,value:e,dtype:n})}const sDe=H({clipByValue_:function iDe(t,e,n){const r=N(t,"x","clipByValue");return L(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n?jC(r.shape,e,r.dtype):X.runKernel("ClipByValue",{x:r},{clipValueMin:e,clipValueMax:n})}}),aDe=H({concat1d_:function oDe(t){return Es(t,0)}}),lDe=H({concat2d_:function uDe(t,e){return Es(t,e)}}),dDe=H({concat3d_:function cDe(t,e){return Es(t,e)}}),fDe=H({concat4d_:function hDe(t,e){return Es(t,e)}}),BC=H({conv2d_:function pDe(t,e,n,r,i="NHWC",s=[1,1],o){const a=N(t,"x","conv2d","float32"),u=N(e,"filter","conv2d","float32");let l=a,c=!1;3===a.rank&&(c=!0,l=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(4===l.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),L(4===u.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),fu("conv2d",r,o);const h="NHWC"===i?l.shape[3]:l.shape[1];L(h===u.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${u.shape[2]}.`),L(eh(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const v=X.runKernel("Conv2D",{x:l,filter:u},{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o});return c?ke(v,[v.shape[1],v.shape[2],v.shape[3]]):v}}),gDe=H({conv1d_:function mDe(t,e,n,r,i="NWC",s=1,o){const a=N(t,"x","conv1d"),u=N(e,"filter","conv1d");let l=a,c=!1;2===a.rank&&(c=!0,l=ke(a,[1,a.shape[0],a.shape[1]])),L(3===l.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),L(3===u.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),fu("conv1d",r,o),L(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),L(eh(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),L("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const h=ke(u,[1,u.shape[0],u.shape[1],u.shape[2]]),g=ke(l,[l.shape[0],1,l.shape[1],l.shape[2]]),I=BC(g,h,[1,n],r,"NHWC",[1,s],o);return ke(I,c?[I.shape[2],I.shape[3]]:[I.shape[0],I.shape[2],I.shape[3]])}}),_7=H({conv2DBackpropInput_:function yDe(t,e,n,r,i,s="NHWC",o){L(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,u=e,l=!1;3===e.rank&&(l=!0,u=ke(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),L(4===a.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),L(4===u.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),L(4===n.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c="NHWC"===s?a[3]:a[1],h="NHWC"===s?u.shape[3]:u.shape[1];L(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),L(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),fu("conv2dDerInput",i,o);const v=X.runKernel("Conv2DBackpropInput",{dy:u,filter:n},{strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a});return l?ke(v,[v.shape[1],v.shape[2],v.shape[3]]):v}}),vDe=H({conv2dTranspose_:function _De(t,e,n,r,i,s){const o=N(t,"x","conv2dTranspose"),a=N(e,"filter","conv2dTranspose");return _7(n,o,a,r,i,"NHWC",s)}}),wDe=H({conv3d_:function bDe(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=N(t,"x","conv3d"),a=N(e,"filter","conv3d");let u=o,l=!1;4===o.rank&&(l=!0,u=ke(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(5===u.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),L(5===a.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),L(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),L(eh(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),L("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);const g=X.runKernel("Conv3D",{x:u,filter:a},{strides:n,pad:r,dataFormat:i,dilations:s});return l?ke(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),TDe=H({conv3DBackpropInput_:function EDe(t,e,n,r,i){L(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;4===e.rank&&(a=!0,o=ke(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const u=s[4],l=o.shape[4];L(5===s.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),L(5===o.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),L(5===n.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),L(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),L(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const g=X.runKernel("Conv3DBackpropInputV2",{dy:o,filter:n},{pad:i,strides:r,inputShape:s});return a?ke(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),ADe=H({conv3dTranspose_:function IDe(t,e,n,r,i){const s=N(t,"x","conv3dTranspose"),o=N(e,"filter","conv3dTranspose");return TDe(n,s,o,r,i)}}),SDe=H({cos_:function CDe(t){const n={x:N(t,"x","cos","float32")};return X.runKernel("Cos",n)}}),NDe=H({cosh_:function DDe(t){const n={x:N(t,"x","cosh","float32")};return X.runKernel("Cosh",n)}}),kDe=H({cumprod_:function PDe(t,e=0,n=!1,r=!1){const s={x:N(t,"x","cumprod")};return X.runKernel("Cumprod",s,{axis:e,exclusive:n,reverse:r})}}),RDe=H({cumsum_:function xDe(t,e=0,n=!1,r=!1){const s={x:N(t,"x","cumsum")};return X.runKernel("Cumsum",s,{axis:e,exclusive:n,reverse:r})}}),MDe=H({denseBincount_:function ODe(t,e,n,r=!1){const i=N(t,"x","denseBincount"),s=N(e,"weights","denseBincount");return L("int32"===i.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),L(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),L(n>=0,()=>`size must be non-negative, but got ${n}.`),L(s.size===i.size||0===s.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`),X.runKernel("DenseBincount",{x:i,weights:s},{size:n,binaryOutput:r})}}),VDe=H({depthToSpace_:function FDe(t,e,n="NHWC"){const r=N(t,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return L(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),L(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${e}  for depthToSpace with input shape\n    ${r.shape}`),L(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${e} for depthToSpace with input shape\n        ${r.shape}`),L(o%(e*e)==0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`),X.runKernel("DepthToSpace",{x:r},{blockSize:e,dataFormat:n})}}),l2=H({depthwiseConv2d_:function LDe(t,e,n,r,i="NHWC",s=[1,1],o){const a=N(t,"x","depthwiseConv2d","float32"),u=N(e,"filter","depthwiseConv2d","float32");let l=a,c=!1;3===a.rank&&(c=!0,l=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(4===l.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),L(4===u.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const h="NHWC"===i?l.shape[3]:l.shape[1];L(h===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${u.shape[2]}.`),fu("depthwiseConv2d",r,o);const v=X.runKernel("DepthwiseConv2dNative",{x:l,filter:u},{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o});return c?ke(v,[v.shape[1],v.shape[2],v.shape[3]]):v}}),jDe=H({diag_:function $De(t){const n={x:N(t,"x","diag")};return X.runKernel("Diag",n)}}),UDe=H({dilation2d_:function BDe(t,e,n,r,i=[1,1],s="NHWC"){const o=N(t,"x","dilation2d"),a=N(e,"filter","dilation2d");L(3===o.rank||4===o.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),L(3===a.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),L("NHWC"===s,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=o,l=!1;3===o.rank&&(u=ke(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0);const g=X.runKernel("Dilation2D",{x:u,filter:a},{strides:n,pad:r,dilations:i});return l?ke(g,[g.shape[1],g.shape[2],g.shape[3]]):g}}),v7=H({floorDiv_:function HDe(t,e){let n=N(t,"a","floorDiv"),r=N(e,"b","floorDiv");return[n,r]=Ur(n,r),X.runKernel("FloorDiv",{a:n,b:r})}}),Ts=H({div_:function zDe(t,e){let n=N(t,"a","div"),r=N(e,"b","div");return[n,r]=Ur(n,r),"int32"===n.dtype&&"int32"===r.dtype?v7(n,r):X.runKernel("RealDiv",{a:n,b:r},{})}});function Ri(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let s=t[t.length-i-1];null==s&&(s=1);let o=e[e.length-i-1];if(null==o&&(o=1),1===s)n.unshift(o);else if(1===o)n.unshift(s);else{if(s!==o)throw Error(`Operands could not be broadcast together with shapes ${t} and ${e}.`);n.unshift(s)}}return n}const b7=H({equal_:function qDe(t,e){let n=N(t,"a","equal","string_or_numeric"),r=N(e,"b","equal","string_or_numeric");return[n,r]=Ur(n,r),Ri(n.shape,r.shape),X.runKernel("Equal",{a:n,b:r})}}),fy=H({where_:function WDe(t,e,n){const r=N(e,"a","where"),i=N(n,"b","where"),s=N(t,"condition","where","bool"),o=Ri(Ri(s.shape,r.shape),i.shape),a=$C(s,o),u=$C(r,o),l=$C(i,o);return X.runKernel("Select",{condition:a,t:u,e:l})}}),c2=H({zerosLike_:function KDe(t){const n={x:N(t,"x","zerosLike")};return X.runKernel("ZerosLike",n)}}),JDe=H({divNoNan_:function QDe(t,e){let n=N(t,"a","div"),r=N(e,"b","div");[n,r]=Ur(n,r);const i=Ts(n,r),s=c2(i),o=b7(r,s);return fy(o,s,i)}}),XDe=H({dot_:function YDe(t,e){const n=N(t,"t1","dot"),r=N(e,"t2","dot");L(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(L(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),1===n.rank&&1===r.rank){const o=ke(n,[1,-1]),a=ke(r,[-1,1]),u=Qn(o,a);return ke(u,[])}if(1===n.rank&&2===r.rank){const o=ke(n,[1,-1]),a=ke(r,[r.shape[0],r.shape[1]]),u=Qn(o,a);return ke(u,[u.size])}if(2===n.rank&&1===r.rank){const o=ke(r,[-1,1]),a=Qn(n,o);return ke(a,[a.size])}{const o=ke(r,[r.shape[0],r.shape[1]]);return Qn(n,o)}}}),e1e=H({einsum_:function ZDe(t,...e){const n=e.map((i,s)=>N(i,`tensors${s}`,"einsum"));return X.runKernel("Einsum",n,{equation:t})}}),w7=H({elu_:function t1e(t){const n={x:N(t,"x","elu","float32")};return X.runKernel("Elu",n)}}),r1e=H({erf_:function n1e(t){let e=N(t,"x","erf");return L("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=ki(e,"float32")),X.runKernel("Erf",{x:e})}});function UC(t,e){return function i1e(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)-1===n.indexOf(a)?i.push(t[s++]):i.push(e[o++]);return i}(t,e.map(r=>1),e)}const py=H({max_:function s1e(t,e=null,n=!1){const i={x:N(t,"x","max")};return X.runKernel("Max",i,{reductionIndices:e,keepDims:n})}}),d2=H({min_:function o1e(t,e=null,n=!1){const i={x:N(t,"x","min")};return X.runKernel("Min",i,{axis:e,keepDims:n})}}),h2=H({pow_:function a1e(t,e){let n=N(t,"base","pow"),r=N(e,"exp","pow");return[n,r]=Ur(n,r),X.runKernel("Pow",{a:n,b:r})}});function Un(t,e){if((sl(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&sl(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Yd(t,[],[],e)}const f2=H({sqrt_:function u1e(t){const n={x:N(t,"x","sqrt","float32")};return X.runKernel("Sqrt",n)}}),HC=H({square_:function l1e(t){const e=N(t,"x","square");return X.runKernel("Square",{x:e},{})}}),mr=H({sum_:function c1e(t,e=null,n=!1){let r=N(t,"x","sum");return"bool"===r.dtype&&(r=ki(r,"int32")),X.runKernel("Sum",{x:r},{axis:e,keepDims:n})}});function T7(t,e,n=null){if(0===t.rank)return Ia(t);if(1!==t.rank&&null===n)return T7(ke(t,[-1]),e,n);if(1===t.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===e)return mr(Ia(t),n);if(e===1/0)return py(Ia(t),n);if(e===-1/0)return d2(Ia(t),n);if("euclidean"===e||2===e)return f2(mr(h2(Ia(t),Un(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&2===n.length){if(1===e)return py(mr(Ia(t),n[0]),n[1]-1);if(e===1/0)return py(mr(Ia(t),n[1]),n[0]);if(e===-1/0)return d2(mr(Ia(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return f2(mr(HC(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const zC=H({norm_:function d1e(t,e="euclidean",n=null,r=!1){const i=T7(t=N(t,"x","norm"),e,n);let s=i.shape;if(r){const o=CC(n,t.shape);s=UC(i.shape,o)}return ke(i,s)}}),f1e=H({euclideanNorm_:function h1e(t,e=null,n=!1){return zC(t,"euclidean",e,n)}}),Qf=H({exp_:function p1e(t){const n={x:N(t,"x","exp")};return X.runKernel("Exp",n)}}),Jf=H({expandDims_:function m1e(t,e=0){const n=N(t,"x","expandDims","string_or_numeric");return L(e<=n.rank,()=>"Axis must be <= rank of the tensor"),X.runKernel("ExpandDims",{input:n},{dim:e})}}),y1e=H({expm1_:function g1e(t){const n={x:N(t,"x","expm1")};return X.runKernel("Expm1",n)}}),Pb=H({tile_:function _1e(t,e){const n=N(t,"x","tile","string_or_numeric");return L(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`),X.runKernel("Tile",{x:n},{reps:e})}}),I7=H({eye_:function v1e(t,e,n,r="float32"){null==e&&(e=t);const i=dc([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=ke(i.toTensor(),[t,e]);if(null==n)return o;if(1===n.length)return Pb(Jf(o,0),[n[0],1,1]);if(2===n.length)return Pb(Jf(Jf(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return Pb(Jf(Jf(Jf(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}}),A7=H({floor_:function b1e(t){const n={x:N(t,"x","floor","float32")};return X.runKernel("Floor",n)}}),C7=H({gather_:function w1e(t,e,n=0,r=0){const i=N(t,"x","gather"),s=N(e,"indices","gather","int32");return X.runKernel("GatherV2",{x:i,indices:s},{axis:n,batchDims:r})}}),GC=H({greater_:function E1e(t,e){let n=N(t,"a","greater","string_or_numeric"),r=N(e,"b","greater","string_or_numeric");return[n,r]=Ur(n,r),Ri(n.shape,r.shape),X.runKernel("Greater",{a:n,b:r})}}),S7=H({greaterEqual_:function T1e(t,e){let n=N(t,"a","greaterEqual","string_or_numeric"),r=N(e,"b","greaterEqual","string_or_numeric");return[n,r]=Ur(n,r),Ri(n.shape,r.shape),X.runKernel("GreaterEqual",{a:n,b:r})}}),qC=H({imag_:function I1e(t){const n={input:N(t,"input","imag")};return X.runKernel("Imag",n)}}),C1e=H({isFinite_:function A1e(t){const n={x:N(t,"x","isFinite")};return X.runKernel("IsFinite",n)}}),D1e=H({isInf_:function S1e(t){const n={x:N(t,"x","isInf")};return X.runKernel("IsInf",n)}}),P1e=H({isNaN_:function N1e(t){const n={x:N(t,"x","isNaN")};return X.runKernel("IsNan",n)}}),D7=H({leakyRelu_:function k1e(t,e=.2){const r={x:N(t,"x","leakyRelu")};return X.runKernel("LeakyRelu",r,{alpha:e})}}),R1e=H({less_:function x1e(t,e){let n=N(t,"a","less","string_or_numeric"),r=N(e,"b","less","string_or_numeric");return[n,r]=Ur(n,r),Ri(n.shape,r.shape),X.runKernel("Less",{a:n,b:r})}}),p2=H({lessEqual_:function O1e(t,e){let n=N(t,"a","lessEqual","string_or_numeric"),r=N(e,"b","lessEqual","string_or_numeric");return[n,r]=Ur(n,r),Ri(n.shape,r.shape),X.runKernel("LessEqual",{a:n,b:r})}});function M1e(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return X.runKernel(iIe,{},{start:t,stop:e,num:n})}const V1e=H({localResponseNormalization_:function F1e(t,e=5,n=1,r=1,i=.5){const s=N(t,"x","localResponseNormalization");L(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`),L(Tb(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;3===s.rank&&(a=!0,o=ke(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const c=X.runKernel("LRN",{x:o},{depthRadius:e,bias:n,alpha:r,beta:i});return a?ke(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),kb=H({log_:function L1e(t){const n={x:N(t,"x","log","float32")};return X.runKernel("Log",n)}}),N7=H({log1p_:function $1e(t){const n={x:N(t,"x","log1p")};return X.runKernel("Log1p",n)}});function hc(t){return X.customGrad(t)}const fc=H({neg_:function j1e(t){const n={x:N(t,"x","neg")};return X.runKernel("Neg",n)}}),P7=H({softplus_:function B1e(t){const n={x:N(t,"x","softplus")};return X.runKernel("Softplus",n)}}),H1e=H({logSigmoid_:function U1e(t){const e=N(t,"x","logSigmoid");return hc(r=>({value:fc(P7(fc(r))),gradFunc:o=>sn(o,hy(fc(r)))}))(e)}}),Cn=H({sub_:function z1e(t,e){let n=N(t,"a","sub"),r=N(e,"b","sub");return[n,r]=Ur(n,r),X.runKernel("Sub",{a:n,b:r})}}),q1e=H({logSoftmax_:function G1e(t,e=-1){const n=N(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return hc((i,s)=>{const a=py(i,e,!0),u=Cn(i,a),l=Cn(ki(u,"float32"),kb(mr(Qf(u),e,!0)));return s([l]),{value:l,gradFunc:(h,g)=>{const[_]=g,w=Qf(_);return Cn(h,sn(mr(h,e,!0),w))}}})(n)}}),k7=H({logSumExp_:function W1e(t,e=null,n=!1){const r=N(t,"x","logSumExp"),i=CC(e,r.shape),s=py(r,i,!0),o=Cn(r,s),a=Qf(o),u=mr(a,i),l=kb(u),c=xi(ke(s,l.shape),l);if(n){const h=UC(c.shape,i);return ke(c,h)}return c}}),KC=H({logicalAnd_:function K1e(t,e){const n=N(t,"a","logicalAnd","bool"),r=N(e,"b","logicalAnd","bool");return Ri(n.shape,r.shape),X.runKernel("LogicalAnd",{a:n,b:r})}}),x7=H({logicalNot_:function Q1e(t){const n={x:N(t,"x","logicalNot","bool")};return X.runKernel("LogicalNot",n)}}),R7=H({logicalOr_:function J1e(t,e){const n=N(t,"a","logicalOr","bool"),r=N(e,"b","logicalOr","bool");return Ri(n.shape,r.shape),X.runKernel("LogicalOr",{a:n,b:r})}}),X1e=H({logicalXor_:function Y1e(t,e){const n=N(t,"a","logicalXor","bool"),r=N(e,"b","logicalXor","bool");return Ri(n.shape,r.shape),KC(R7(t,e),x7(KC(t,e)))}}),QC=2147483648,m2=H({searchSorted_:function Z1e(t,e,n="left"){const r=N(t,"sortedSequence","searchSorted"),i=N(e,"values","searchSorted"),o=i.shape[i.shape.length-1],a=ke(r,[-1,r.shape[r.shape.length-1]]),u=ke(i,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Hi(u.shape)>=QC)throw new Error(`values tensor size must less than ${QC}`);if(a.shape[1]>=QC)throw new Error(`trailing dim_size must less than ${QC} for int32 output type, was ${a.shape[1]}`);return X.runKernel("SearchSorted",{sortedSequence:a,values:u},{side:n})}});function eNe(t,e){return m2(t,e,"left")}const O7=H({maxPool_:function tNe(t,e,n,r,i){const s=N(t,"x","maxPool");let a=s,u=!1;3===s.rank&&(u=!0,a=ke(s,[1,s.shape[0],s.shape[1],s.shape[2]])),L(4===a.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),L(eh(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),fu("maxPool",r,i);const h=X.runKernel("MaxPool",{x:a},{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return u?ke(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),rNe=H({maxPool3d_:function nNe(t,e=[1,1,1],n,r,i,s="NDHWC"){const o=N(t,"x","maxPool3d");let a=o,u=!1;4===o.rank&&(u=!0,a=ke(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(5===a.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),L("NDHWC"===s,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),fu("maxPool3d",r,i);const h=X.runKernel("MaxPool3D",{x:a},{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s});return u?ke(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),sNe=H({maxPoolWithArgmax_:function iNe(t,e,n,r,i=!1){const o={x:N(t,"x","maxPoolWithArgmax")},u=X.runKernel("MaxPoolWithArgmax",o,{filterSize:e,strides:n,pad:r,includeBatchInIndex:i});return{result:u[0],indexes:u[1]}}}),aNe=H({maximum_:function oNe(t,e){let n=N(t,"a","maximum"),r=N(e,"b","maximum");return[n,r]=Ur(n,r),"bool"===n.dtype&&(n=ki(n,"int32"),r=ki(r,"int32")),Ri(n.shape,r.shape),X.runKernel("Maximum",{a:n,b:r})}}),JC=H({mean_:function uNe(t,e=null,n=!1){const i={x:N(t,"x","mean")};return X.runKernel("Mean",i,{axis:e,keepDims:n})}});function my(t,e="float32"){if("complex64"===e){const r=my(t,"float32"),i=my(t,"float32");return Jd(r,i)}const n=SM(Hi(t),e);return X.makeTensor(n,t,e)}function Yf(t,e="float32"){if("complex64"===e){const r=Yf(t,"float32"),i=my(t,"float32");return Jd(r,i)}const n=dK(Hi(t),e);return X.makeTensor(n,t,e)}function lNe(t,e,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===t)return[];let r=N(t,"x","meshgrid",t instanceof os?t.dtype:"float32");if(void 0===e)return[r];let i=N(e,"y","meshgrid",e instanceof os?e.dtype:"float32");const s=Hi(r.shape),o=Hi(i.shape);return"xy"===n?(r=ke(r,[1,-1]),i=ke(i,[-1,1]),[Qn(Yf([o,1],r.dtype),r),Qn(i,Yf([1,s],i.dtype))]):(r=ke(r,[-1,1]),i=ke(i,[1,-1]),[Qn(r,Yf([1,o],r.dtype)),Qn(Yf([s,1],i.dtype),i)])}const M7=H({minimum_:function cNe(t,e){let n=N(t,"a","minimum"),r=N(e,"b","minimum");return[n,r]=Ur(n,r),"bool"===n.dtype&&(n=ki(n,"int32"),r=ki(r,"int32")),Ri(n.shape,r.shape),X.runKernel("Minimum",{a:n,b:r})}}),hNe=H({mirrorPad_:function dNe(t,e,n){L("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=N(t,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");L(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i="reflect"===n?1:0;for(let a=0;a<r.rank;a++)L(2===e[a].length,()=>"Invalid number of paddings. Must be length of 2 each."),L(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);return X.runKernel("MirrorPad",{x:r},{paddings:e,mode:n})}}),pNe=H({mod_:function fNe(t,e){let n=N(t,"a","mod"),r=N(e,"b","mod");return[n,r]=Ur(n,r),X.runKernel("Mod",{a:n,b:r})}}),gNe=H({moments_:function mNe(t,e=null,n=!1){const r=CC(e,(t=N(t,"x","moments")).shape),i=JC(t,r,n);let s=i.shape;n||(s=UC(i.shape,r));const o=HC(Cn(ki(t,"float32"),ke(i,s)));return{mean:i,variance:JC(o,r,n)}}}),_Ne=H({multiRNNCell_:function yNe(t,e,n,r){const i=N(e,"data","multiRNNCell"),s=kC(n,"c","multiRNNCell"),o=kC(r,"h","multiRNNCell");let a=i;const u=[];for(let h=0;h<t.length;h++){const g=t[h](a,s[h],o[h]);u.push(g[0]),u.push(g[1]),a=g[1]}const l=[],c=[];for(let h=0;h<u.length;h+=2)l.push(u[h]),c.push(u[h+1]);return[l,c]}}),bNe=H({multinomial_:function vNe(t,e,n,r=!1){const i=N(t,"logits","multinomial"),s=i.size,o=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const u={logits:1===o?ke(i,[1,-1]):i},c=X.runKernel("Multinomial",u,{numSamples:e,seed:n,normalized:r});return 1===o?ke(c,[c.size]):c}}),F7=H({notEqual_:function wNe(t,e){let n=N(t,"a","notEqual","string_or_numeric"),r=N(e,"b","notEqual","string_or_numeric");return[n,r]=Ur(n,r),Ri(n.shape,r.shape),X.runKernel("NotEqual",{a:n,b:r})}}),TNe=H({oneHot_:function ENe(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:N(t,"indices","oneHot","int32")};return X.runKernel("OneHot",o,{dtype:i,depth:e,onValue:n,offValue:r})}}),ANe=H({onesLike_:function INe(t){const n={x:N(t,"x","onesLike")};return X.runKernel("OnesLike",n)}}),SNe=H({outerProduct_:function CNe(t,e){const n=N(t,"v1","outerProduct"),r=N(e,"v2","outerProduct");L(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=ke(n,[-1,1]),s=ke(r,[1,-1]);return Qn(i,s)}}),xb=H({pad_:function DNe(t,e,n=0){const r=N(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return X.runKernel("PadV2",{x:r},{paddings:e,constantValue:n})}}),PNe=H({pad1d_:function NNe(t,e,n=0){return L(2===e.length,()=>"Invalid number of paddings. Must be length of 2."),xb(t,[e],n)}}),xNe=H({pad2d_:function kNe(t,e,n=0){return L(2===e.length&&2===e[0].length&&2===e[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),xb(t,e,n)}}),ONe=H({pad3d_:function RNe(t,e,n=0){return L(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),xb(t,e,n)}}),FNe=H({pad4d_:function MNe(t,e,n=0){return L(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),xb(t,e,n)}}),V7=H({spaceToBatchND_:function VNe(t,e,n){const r=N(t,"x","spaceToBatchND");return L(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),L(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),L(r.shape.reduce((o,a,u)=>u>0&&u<=e.length?o&&(a+n[u-1][0]+n[u-1][1])%e[u-1]==0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`),X.runKernel("SpaceToBatchND",{x:r},{blockShape:e,paddings:n})}}),BNe=H({pool_:function LNe(t,e,n,r,i,s,o){null==i&&(i=[1,1]),null==s&&(s=1),0===r&&(r="valid");const a=N(t,"x","maxPool");let u=a,l=!1;3===a.rank&&(l=!0,u=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(eh(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const c=function ISe(t,e,n,r,i,s,o="channelsLast"){const[a,u]=FC(e);let l;if("channelsLast"===o)l=[a,u,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);l=[a,u,t[1],t[1]]}return MC(t,l,n,r,i,s,!1,o)}(u.shape,e,s,i,r),h=[c.dilationHeight,c.dilationWidth];let g;g="same"===r?function jNe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}([c.filterHeight,c.filterWidth],h):[[0,0],[0,0]];const _=1===h[0]&&1===h[1],[v,w]=function $Ne(t,e,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),s=t.concat(r,i),o=e.map((c,h)=>(c-s[h]%c)%c),a=i.map((c,h)=>c+o[h]),u=e.map((c,h)=>[r[h],a[h]]),l=e.map((c,h)=>[0,o[h]]);return[u,l]}([c.inHeight,c.inWidth],h,g),I=_?r:"valid",S=_?u:V7(u,h,v),O=("avg"===n?()=>m7(S,e,s,I,o):()=>O7(S,e,s,I,o))(),U=_?O:g7(O,h,w);return l?ke(U,[U.shape[1],U.shape[2],U.shape[3]]):U}}),L7=H({prelu_:function UNe(t,e){const n=N(t,"x","prelu"),r=N(e,"alpha","prelu");return X.runKernel("Prelu",{x:n,alpha:r})}}),zNe=H({prod_:function HNe(t,e=null,n=!1){let r=N(t,"x","prod");return"bool"===r.dtype&&(r=ki(r,"int32")),X.runKernel("Prod",{x:r},{axis:e,keepDims:n})}}),qNe=H({raggedGather_:function GNe(t,e,n,r){const i=t.map((c,h)=>N(c,`tensors${h}`,"raggedGather","int32")),s=N(e,"paramsDenseValues","raggedGather"),o=N(n,"indices","raggedGather","int32"),l=X.runKernel("RaggedGather",{paramsNestedSplits:i,paramsDenseValues:s,indices:o},{outputRaggedRank:r});return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}}),KNe=H({raggedTensorToTensor_:function WNe(t,e,n,r,i){const s=N(t,"shape","raggedTensorToTensor","int32"),o=N(e,"values","raggedTensorToTensor"),a=N(n,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map((h,g)=>N(h,`tensors${g}`,"raggedTensorToTensor","int32"));return X.runKernel("RaggedTensorToTensor",{shape:s,values:o,defaultValue:a,rowPartitionTensors:u},{rowPartitionTypes:i})}}),JNe=H({rand_:function QNe(t,e,n){const r=Hi(t);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);i=new Uint8Array(r)}for(let s=0;s<r;s++)i[s]=e();return X.makeTensor(i,t,n)}});var g2=ee(814);class y2{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=s||Math.random();this.random=g2.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,o;do{i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class YNe{constructor(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;const s=i||Math.random();this.randu=g2.alea(s.toString()),this.randn=new y2(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,i,s,o;for(;;){do{i=this.randn.nextValue(),o=1+this.c*i}while(o<=0);if(o*=o*o,e=i*i,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),s=this.randu(),s<n||Math.log(s)<r)break}return o*=1/this.beta*this.d,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class XNe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=n-e,this.dtype=r,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=g2.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const rPe=H({randomGamma_:function nPe(t,e,n=1,r="float32",i){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const s=new YNe(e,n,r,i),o=dc(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),$7=H({randomNormal_:function iPe(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const s=new y2(e,n,r,!1,i),o=dc(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),oPe=H({randomStandardNormal_:function sPe(t,e,n){if(null!=e&&"bool"===e)throw new Error(`Unsupported data type ${e}`);return $7(t,0,1,e,n)}}),j7=H({randomUniform_:function aPe(t,e=0,n=1,r="float32",i){const s=dc(t,r),o=new XNe(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}});function Rb(t,e,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return X.runKernel(VIe,{},{start:t,stop:e,step:n,dtype:r})}const Ob=H({real_:function uPe(t){const n={input:N(t,"input","real")};return X.runKernel("Real",n)}}),cPe=H({reciprocal_:function lPe(t){const n={x:N(t,"x","reciprocal")};return X.runKernel("Reciprocal",n)}}),YC=H({relu_:function dPe(t){const n={x:N(t,"x","relu")};return X.runKernel("Relu",n)}}),B7=H({relu6_:function hPe(t){const n={x:N(t,"x","relu6")};return X.runKernel("Relu6",n)}}),Xf=H({reverse_:function fPe(t,e){const r={x:N(t,"x","reverse")};return X.runKernel("Reverse",r,{dims:e})}}),mPe=H({reverse1d_:function pPe(t){const e=N(t,"x","reverse");return L(1===e.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Xf(e,0)}}),yPe=H({reverse2d_:function gPe(t,e){const n=N(t,"x","reverse");return L(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Xf(n,e)}}),vPe=H({reverse3d_:function _Pe(t,e){const n=N(t,"x","reverse");return L(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Xf(n,e)}}),wPe=H({reverse4d_:function bPe(t,e){const n=N(t,"x","reverse");return L(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Xf(n,e)}}),U7=H({round_:function EPe(t){const n={x:N(t,"x","round")};return X.runKernel("Round",n)}}),IPe=H({rsqrt_:function TPe(t){const n={x:N(t,"x","rsqrt","float32")};return X.runKernel("Rsqrt",n)}}),CPe=H({selu_:function APe(t){const n={x:N(t,"x","selu")};return X.runKernel("Selu",n)}}),DPe=H({separableConv2d_:function SPe(t,e,n,r,i,s=[1,1],o="NHWC"){const a=N(t,"x","separableConv2d"),u=N(e,"depthwiseFilter","separableConv2d"),l=N(n,"pointwiseFilter","separableConv2d");let c=a,h=!1;if(3===a.rank&&(h=!0,c=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");L(4===c.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),L(4===u.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),L(4===l.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),L(1===l.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),L(1===l.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const g=u.shape[2],_=u.shape[3];L(l.shape[2]===g*_,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${g*_}, but got ${l.shape[2]}.`);const v=l2(c,u,r,i,o,s),I=BC(v,l,1,"valid",o);return h?ke(I,[I.shape[1],I.shape[2],I.shape[3]]):I}});function v2(){return(v2=(0,Y.A)(function*(t,e){const n=N(t,"x","setdiff1d"),r=N(e,"y","setdiff1d");L(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),L(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),L(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=yield n.data(),s=yield r.data(),o=new Set(s);let a=0;for(let c=0;c<i.length;c++)o.has(i[c])||a++;const u=new FM([a],n.dtype),l=new FM([a],"int32");for(let c=0,h=0;c<i.length;c++)o.has(i[c])||(u.values[h]=i[c],l.values[h]=c,h++);return[u.toTensor(),l.toTensor()]})).apply(this,arguments)}const PPe=function NPe(t,e){return v2.apply(this,arguments)},xPe=H({sign_:function kPe(t){const n={x:N(t,"x","sign")};return X.runKernel("Sign",n)}}),OPe=H({sin_:function RPe(t){const n={x:N(t,"x","sin","float32")};return X.runKernel("Sin",n)}}),FPe=H({sinh_:function MPe(t){const n={x:N(t,"x","sinh")};return X.runKernel("Sinh",n)}}),LPe=H({slice1d_:function VPe(t,e,n){const r=N(t,"x","slice1d");return L(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ir(r,[e],[n])}}),jPe=H({slice2d_:function $Pe(t,e,n){const r=N(t,"x","slice2d");return L(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ir(r,e,n)}}),UPe=H({slice3d_:function BPe(t,e,n){const r=N(t,"x","slice3d");return L(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ir(r,e,n)}}),zPe=H({slice4d_:function HPe(t,e,n){const r=N(t,"x","slice4d");return L(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ir(r,e,n)}}),qPe=H({softmax_:function GPe(t,e=-1){const n=N(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);return X.runKernel("Softmax",{logits:n},{dim:e})}}),b2=H({fft_:function WPe(t){return L("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`),X.runKernel("FFT",{input:t})}}),XC=H({ifft_:function KPe(t){return L("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`),X.runKernel("IFFT",{input:t})}}),H7=H({irfft_:function QPe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=ke(t,[n,e]);r=XC(i)}else{const i=[n,2*(e-1)],s=ke(Ob(t),[n,e]),o=ke(qC(t),[n,e]),a=Xf(ir(s,[0,1],[n,e-2]),1),u=sn(Xf(ir(o,[0,1],[n,e-2]),1),Un(-1)),l=Es([s,a],1),c=Es([o,u],1),h=ke(Jd(l,c),[i[0],i[1]]);r=XC(h)}if(r=Ob(r),3===t.rank&&0!==t.shape[0]){const i=r,s=t.shape[0];r=ke(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}}),Mb=H({split_:function JPe(t,e,n=0){const i={x:N(t,"x","split")};return X.runKernel("SplitV",i,{numOrSizeSplits:e,axis:n})}}),w2=H({rfft_:function YPe(t,e){L("float32"===t.dtype,()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(null!=e&&e<n){const v=t.shape.map(I=>0),w=t.shape.map(I=>I);w[t.shape.length-1]=e,i=ir(t,v,w),n=e}else if(null!=e&&e>n){const v=t.shape.map(w=>w);v[t.shape.length-1]=e-n,i=Es([t,my(v)],t.shape.length-1),n=e}else i=t;const s=c2(i),o=ke(Jd(i,s),[r,n]),a=b2(o),u=Math.floor(n/2)+1,l=Ob(a),c=qC(a),h=Mb(l,[u,n-u],l.shape.length-1),g=Mb(c,[u,n-u],c.shape.length-1),_=i.shape.slice();return _[i.shape.length-1]=u,ke(Jd(h[0],g[0]),_)}}),z7=H({squaredDifference_:function XPe(t,e){let n=N(t,"a","squaredDifference"),r=N(e,"b","squaredDifference");return[n,r]=Ur(n,r),Ri(n.shape,r.shape),X.runKernel("SquaredDifference",{a:n,b:r},{})}}),E2=H({squeeze_:function ZPe(t,e){const n=N(t,"x","squeeze","string_or_numeric");return ke(n,function kEe(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,s=null==e||i?null:CC(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(null!=s){if(s[o]===a&&1!==t[a])throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(null==s[o]||s[o]>a)&&1===t[a]&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}1!==t[a]&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}(n.shape,e).newShape)}}),pc=H({stack_:function eke(t,e=0){const n=kC(t,"tensors","stack","string_or_numeric");return L(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&L(e<=n[0].rank,()=>"Axis must be <= rank of the tensor"),X.runKernel("Pack",n,{axis:e})}}),G7=H({step_:function tke(t,e=0){const r={x:N(t,"x","step")};return X.runKernel("Step",r,{alpha:e})}}),rke=H({stridedSlice_:function nke(t,e,n,r,i=0,s=0,o=0,a=0,u=0){const c={x:N(t,"x","stridedSlice","string_or_numeric")};return X.runKernel("StridedSlice",c,{begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:u})}}),ske=H({tan_:function ike(t){const n={x:N(t,"x","tan","float32")};return X.runKernel("Tan",n)}});function Aa(t,e){ny(t);const n=Qd(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Yd(t,null,n,e)}function Zf(t,e,n){if(ny(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Qd(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Yd(t,e,r,n)}function oke(t,e,n){if(ny(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const r=Qd(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Yd(t,e,r,n)}function ake(t,e,n){if(ny(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Qd(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Yd(t,e,r,n)}function uke(t,e,n){if(ny(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Qd(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Yd(t,e,r,n)}function lke(t,e,n){if(ny(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Qd(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Yd(t,e=e||r,r,n)}const dke=H({topk_:function cke(t,e=1,n=!0){const r=N(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[a,u]=X.runKernel("TopK",s,o);return{values:a,indices:u}}}),fke=H({truncatedNormal_:function hke(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const s=new y2(e,n,r,!0,i),o=dc(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),mke=H({unique_:function pke(t,e=0){const n=N(t,"x","unique","string_or_numeric");L(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,o]=X.runKernel("Unique",r,i);return{values:s,indices:o}}}),yke=H({unsortedSegmentSum_:function gke(t,e,n){const r=N(t,"x","unsortedSegmentSum"),i=N(e,"segmentIds","unsortedSegmentSum","int32");return L(Tb(n),()=>"numSegments must be of dtype int"),X.runKernel("UnsortedSegmentSum",{x:r,segmentIds:i},{numSegments:n})}}),ep=H({unstack_:function _ke(t,e=0){const n=N(t,"x","unstack","string_or_numeric");return L(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`),X.runKernel("Unpack",{value:n},{axis:e})}});function vke(t,e){return m2(t,e,"right")}function bke(t,e=!0,n,r){return X.makeVariable(t,e,n,r)}function T2(){return(T2=(0,Y.A)(function*(t){const e=N(t,"condition","whereAsync","bool"),n=yield e.data(),r=function wke(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=dc(t,"int32"),i=dc([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]);i.values.set(o,s*t.length)}return i.toTensor()}(e.shape,n);return t!==e&&e.dispose(),r})).apply(this,arguments)}const q7=function Eke(t){return T2.apply(this,arguments)};function I2(){return(I2=(0,Y.A)(function*(t,e,n){const r=N(t,"tensor","boolMask"),i=N(e,"mask","boolMask","bool"),s=n??0,o=i.rank,a=r.shape;L(o>0,()=>"mask cannot be scalar"),Ta(a.slice(s,s+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let w=s;w<s+o;w++)u*=a[w];const l=a.slice(0,s).concat([u],a.slice(s+o)),c=ke(r,l),h=ke(i,[-1]),g=yield q7(h),_=E2(g,[1]),v=C7(c,_,s);return t!==r&&r.dispose(),e!==i&&i.dispose(),_.dispose(),c.dispose(),h.dispose(),g.dispose(),v})).apply(this,arguments)}const Ike=function Tke(t,e,n){return I2.apply(this,arguments)};function Ca(t,e){return X.tidy(t,e)}function Cke(t){$K(t).forEach(n=>n.dispose())}function th(t){return X.keep(t)}!function WAe(t){RK=t}(function Ake(t){wn().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")});const A2=H({transpose_:function Ske(t,e,n){const r=N(t,"x","transpose");if(null==e&&(e=r.shape.map((o,a)=>a).reverse()),L(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{L(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return"complex64"===r.dtype?Ca(()=>{let o=Ob(r),a=qC(r);return o=X.runKernel(PM,{x:o},s),a=X.runKernel(PM,{x:a},s),n&&(a=fc(a)),Jd(o,a)}):X.runKernel(PM,i,s)}}),Nke=H({movingAverage_:function Dke(t,e,n,r,i=!0){const s=N(t,"v","movingAverage"),o=N(e,"x","movingAverage"),a=N(n,"decay","movingAverage");(function YAe(t,e){L(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)})(s,o),L(Wd(s.shape,o.shape),()=>"Shape mismatch in v and x");const u=Un(1),l=Cn(u,a);let c=sn(Cn(o,s),l);if(i){L(null!=r,()=>"When using zeroDebias: true, step is required.");const h=N(r,"step","movingAverage");c=Ts(c,Cn(u,h2(a,h)))}return xi(s,c)}});const Rke=H({scatterND_:function xke(t,e,n){const r=N(t,"indices","scatterND","int32"),i=N(e,"updates","scatterND");return function kke(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===e.size)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(0===t.size)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}!function Pke(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+" update.rank != "+(i+t.length-r));for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}(n,e,t)}(i,r,n),X.runKernel("ScatterNd",{indices:r,updates:i},{shape:n})}}),Fke=H({sparseToDense_:function Mke(t,e,n,r=0){const i=N(t,"sparseIndices","sparseToDense","int32"),s=N(e,"sparseValues","sparseToDense","string_or_numeric"),o=N(r,"defaultValue","sparseToDense",s.dtype);return function Oke(t,e,n,r){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);if(0!==e.rank&&(1!==e.rank||e.size!==i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,s,n,o),X.runKernel("SparseToDense",{sparseIndices:i,sparseValues:s,defaultValue:o},{outputShape:n})}}),Lke=H({gatherND_:function Vke(t,e){const n=N(e,"indices","gatherND","int32"),i={params:N(t,"x","gatherND","string_or_numeric"),indices:n};return X.runKernel("GatherNd",i)}}),Bke=H({dropout_:function jke(t,e,n,r){const i=N(t,"x","dropout");if(L("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),L(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof os?i.clone():i;const s=function $ke(t,e){if(null==e)return t.shape.slice();if(Wd(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)n.push(null==e[r]&&null!=t.shape[r]?t.shape[r]:e[r]);return n}return e}(i,n),o=1-e,a=Ts(A7(xi(j7(s,0,1,"float32",r),o)),o);return sn(i,a)}});function W7(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function C2(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){const o=2*Math.PI*s/(t+r-1);i[s]=e-n*Math.cos(o)}return Aa(i,"float32")}function S2(){return(S2=(0,Y.A)(function*(t,e,n=1){const r=N(t,"predictions","inTopK"),i=N(e,"targets","inTopK");L(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),L(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Ta(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];L(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const o=yield r.data(),a=yield i.data(),[u,l]=[o.length/s,s],c=function xEe(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);n=new Uint8Array(e)}return n}("bool",u);for(let h=0;h<u;h++){const g=h*l,_=o.subarray(g,g+l),v=[];for(let w=0;w<_.length;w++)v.push({value:_[w],index:w});v.sort((w,I)=>I.value-w.value),c[h]=0;for(let w=0;w<n;w++)if(v[w].index===a[h]){c[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),ol(c,i.shape,"bool")})).apply(this,arguments)}const Hke=function Uke(t,e){return S2.apply(this,arguments)},Gke=H({conv2DBackpropFilter_:function zke(t,e,n,r,i,s="NHWC",o){let a=t;3===t.rank&&(a=ke(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;3===u.rank&&(u=ke(e,[1,e.shape[0],e.shape[1],e.shape[2]])),L(4===a.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),L(4===u.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),L(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l="NHWC"===s?a.shape[3]:a.shape[1],c="NHWC"===s?u.shape[3]:u.shape[1];return L(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),L(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),fu("conv2dDerFilter",i,o),X.runKernel("Conv2DBackpropFilter",{x:a,dy:u},{strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n})}});function D2(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return sn(t,G7(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function N2(t,e){let n=e;const r=function GDe(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1;(null==i||1===i&&e[s]>1)&&n.unshift(s)}return n}(t.shape,e.shape);return r.length>0&&(n=mr(n,r)),ke(n,t.shape)}function P2(t,e,n,r){if("linear"===e)return t;if("relu"===e)return YC(t);if("elu"===e)return w7(t);if("relu6"===e)return B7(t);if("prelu"===e)return L7(t,n);if("leakyrelu"===e)return D7(t,r);if("sigmoid"===e)return hy(t);throw new Error(`Unknown fused activation ${e}.`)}const k2=(t,e)=>!(t>0)||"linear"===e,Wke=H({fusedConv2d_:function qke({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(!1===k2(X.state.gradientDepth,u=u||"linear")){L("NHWC"===i,()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let de=BC(t,e,n,r,i,s,o);return null!=a&&(de=xi(de,a)),P2(de,u,l,c)}const h=N(t,"x","conv2d","float32"),g=N(e,"filter","conv2d","float32");let _=h,v=!1;3===h.rank&&(v=!0,_=ke(h,[1,h.shape[0],h.shape[1],h.shape[2]])),L(4===_.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${_.rank}.`),L(4===g.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${g.rank}.`),fu("fused conv2d",r,o);const w="NHWC"===i?_.shape[3]:_.shape[1];L(g.shape[2]===w,()=>`Error in conv2d: depth of input (${w}) must match input depth for filter ${g.shape[2]}.`),L(eh(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const I=MC(_.shape,g.shape,n,s,r,o);let S,x;if(null!=a&&(S=N(a,"bias","fused conv2d"),[S]=Ur(S,h),"NHWC"===i?Ri(I.outShape,S.shape):(L(S.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${S.shape.length}.`),L(0===S.shape.length||S.shape[0]===I.outChannels||1===S.shape[0],()=>`Error in fused conv2d: bias shape (${S.shape}) is not compatible with the number of output channels (${I.outChannels})`))),null!=l){const de=l.shape;if(L(de.length<=1||3===de.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${de.length}.`),1===de.length)L(1===de[0]||de[0]===I.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${de}) is not compatible with the number of output channels (${I.outChannels}).`);else if(3===de.length)try{Ri(de,I.outShape)}catch{throw Error(`Error in fused conv2d: PReLU activation weights (${de}) is not compatible with the output shape of the conv2d (${I.outShape}).`)}x=N(l,"prelu weights","fused conv2d")}const O=(de,R)=>{L("NHWC"===i,()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[k,F,z,q]=R,Z=D2(de,z,u);L(VC(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const Gr=[_7(F.shape,Z,k,n,r),Gke(F,Z,k.shape,n,r)];if(null!=q){const st=N2(q,Z);Gr.push(st)}return Gr},U={x:_,filter:g,bias:S,preluActivationWeights:x},he={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return null==a?hc((R,k,F)=>{let z=X.runKernel(wK,U,he);return F([k,R,z]),v&&(z=ke(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:O}})(_,g):hc((R,k,F,z)=>{let q=X.runKernel(wK,U,he);return z([k,R,q,F]),v&&(q=ke(q,[q.shape[1],q.shape[2],q.shape[3]])),{value:q,gradFunc:O}})(_,g,S)}}),Qke=H({depthwiseConv2dNativeBackpropFilter_:function Kke(t,e,n,r,i,s=[1,1],o){let a=t;3===t.rank&&(a=ke(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;return 3===u.rank&&(u=ke(e,[1,e.shape[0],e.shape[1],e.shape[2]])),X.runKernel("DepthwiseConv2dNativeBackpropFilter",{x:a,dy:u},{strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n})}}),Yke=H({depthwiseConv2dNativeBackpropInput_:function Jke(t,e,n,r,i,s=[1,1],o){let a=e,u=!1;3===e.rank&&(u=!0,a=ke(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const h=X.runKernel("DepthwiseConv2dNativeBackpropInput",{dy:a,filter:n},{strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:t});return u?ke(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Zke=H({fusedDepthwiseConv2d_:function Xke({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(!1===k2(X.state.gradientDepth,u)){let he=l2(t,e,n,r,i,s,o);return null!=a&&(he=xi(he,a)),P2(he,u,l,c)}const h=N(t,"x","depthwiseConv2d","float32"),g=N(e,"filter","depthwiseConv2d","float32");let _=h,v=!1;3===h.rank&&(v=!0,_=ke(h,[1,h.shape[0],h.shape[1],h.shape[2]])),L(4===_.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${_.rank}.`),L(4===g.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${g.rank}.`),L(_.shape[3]===g.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${_.shape[3]}) must match the inChannels dimension in filter ${g.shape[2]}.`),null==s&&(s=[1,1]),L(eh(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),fu("fused depthwiseConv2d",r,o);const w=MC(_.shape,g.shape,n,s,r,o,!0);let I,S;null!=a&&(I=N(a,"bias","fused conv2d"),[I]=Ur(I,h),Ri(w.outShape,I.shape)),null!=l&&(S=N(l,"prelu weights","fused depthwiseConv2d"));const x=(he,de)=>{L(VC(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[R,k,F,z]=de,q=D2(he,F,u),Z=Yke(k.shape,q,R,n,r,s,o),$=Qke(k,q,R.shape,n,r,s,o);return null!=z?[Z,$,N2(I,q)]:[Z,$]},O={x:_,filter:g,bias:I,preluActivationWeights:S},U={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return null==a?hc((de,R,k)=>{let F=X.runKernel(EK,O,U);return k([R,de,F]),v&&(F=ke(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:x}})(_,g):hc((de,R,k,F)=>{let z=X.runKernel(EK,O,U);return F([R,de,z,k]),v&&(z=ke(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:x}})(_,g,I)}}),txe=H({fusedMatMul_:function exe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(!1===k2(X.state.gradientDepth,s)){let q=Qn(t,e,n,r);return null!=i&&(q=xi(q,i)),P2(q,s,o,a)}let u=N(t,"a","fused matMul"),l=N(e,"b","fused matMul");[u,l]=Ur(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],h=r?l.shape[l.rank-1]:l.shape[l.rank-2],g=n?u.shape[u.rank-1]:u.shape[u.rank-2],_=r?l.shape[l.rank-2]:l.shape[l.rank-1],v=u.shape.slice(0,-2),w=l.shape.slice(0,-2),I=Hi(v),S=Hi(w);L(c===h,()=>`Error in fused matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const O=Ri(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([g,_]),U=ke(u,n?[I,c,g]:[I,g,c]),he=ke(l,r?[S,_,h]:[S,h,_]);let de,R;null!=i&&(de=N(i,"bias","fused matMul"),[de]=Ur(de,u),Ri(O,de.shape)),null!=o&&(R=N(o,"prelu weights","fused matMul"));const k=(q,Z)=>{const[$,Jn,Gr,st]=Z,ut=D2(ke(q,Gr.shape),Gr,s);let _t,Kt;return n||r?!n&&r?(_t=Qn(ut,Jn,!1,!1),Kt=Qn(ut,$,!0,!1)):n&&!r?(_t=Qn(Jn,ut,!1,!0),Kt=Qn($,ut,!1,!1)):(_t=Qn(Jn,ut,!0,!0),Kt=Qn(ut,$,!0,!0)):(_t=Qn(ut,Jn,!1,!0),Kt=Qn($,ut,!0,!1)),null!=i?[_t,Kt,N2(st,ut)]:[_t,Kt]},F={a:U,b:he,bias:de,preluActivationWeights:R},z={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return null==i?hc((Z,$,Jn)=>{const Gr=X.runKernel(bK,F,z);return Jn([Z,$,Gr]),{value:ke(Gr,O),gradFunc:k}})(U,he):hc((Z,$,Jn,Gr)=>{const st=X.runKernel(bK,F,z);return Gr([Z,$,st,Jn]),{value:ke(st,O),gradFunc:k}})(U,he,de)}}),rxe=H({hammingWindow_:function nxe(t){return C2(t,.54,.46)}}),K7=H({hannWindow_:function ixe(t){return C2(t,.5,.5)}}),Q7=H({frame_:function sxe(t,e,n,r=!1,i=0){let s=0;const o=[];for(;s+e<=t.size;)o.push(ir(t,s,e)),s+=n;if(r)for(;s<t.size;){const a=s+e-t.size,u=Es([ir(t,s,e-a),jC([a],i)]);o.push(u),s+=n}return 0===o.length?Zf([],[0,e]):ke(Es(o),[o.length,e])}}),axe=H({stft_:function oxe(t,e,n,r,i=K7){null==r&&(r=W7(e));const s=Q7(t,e,n),o=sn(s,i(e));return w2(o,r)}}),lxe=H({cropAndResize_:function uxe(t,e,n,r,i="bilinear",s=0){const o=N(t,"image","cropAndResize"),a=N(e,"boxes","cropAndResize","float32"),u=N(n,"boxInd","cropAndResize","int32"),l=a.shape[0];return L(4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),L(2===a.rank&&4===a.shape[1],()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${a.shape}.`),L(1===u.rank&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${a.shape}.`),L(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),L(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),L("bilinear"===i||"nearest"===i,()=>`method must be bilinear or nearest, but was ${i}`),X.runKernel("CropAndResize",{image:o,boxes:a,boxInd:u},{method:i,extrapolationValue:s,cropSize:r})}}),dxe=H({flipLeftRight_:function cxe(t){const e=N(t,"image","flipLeftRight","float32");return L(4===e.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`),X.runKernel("FlipLeftRight",{image:e},{})}}),fxe=H({grayscaleToRGB_:function hxe(t){const e=N(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];L(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),L(1===r,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,Pb(e,i)}}),mxe=H({rotateWithOffset_:function pxe(t,e,n=0,r=.5){const i=N(t,"image","rotateWithOffset","float32");return L(4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`),X.runKernel("RotateWithOffset",{image:i},{radians:e,fillValue:n,center:r})}});function gy(t,e,n,r,i,s){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==s&&(s=0);const o=t.shape[0];return n=Math.min(n,o),L(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),L(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),L(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),L(1===e.rank,()=>"scores must be a 1D tensor"),L(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),L(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}const yxe=H({nonMaxSuppression_:function gxe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=N(t,"boxes","nonMaxSuppression","float32"),o=N(e,"scores","nonMaxSuppression","float32"),a=gy(s,o,n,r,i);return X.runKernel("NonMaxSuppressionV3",{boxes:s,scores:o},{maxOutputSize:n=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:i=a.scoreThreshold})}});function _xe(t,e,n){const r=function vxe(t,e,n){return function wxe(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}(t,e,n||bxe)}(t,e,n);t.splice(r<0?-(r+1):r,0,e)}function bxe(t,e){return t>e?1:t<e?-1:0}function x2(t,e,n,r,i,s,o=!1,a=!1,u=!1){const l=[];for(let I=0;I<e.length;I++)e[I]>i&&l.push({score:e[I],boxIndex:I,suppressBeginIndex:0});l.sort(J7);const c=s>0?-.5/s:0,h=[],g=[];for(;h.length<n&&l.length>0;){const I=l.pop(),{score:S,boxIndex:x,suppressBeginIndex:O}=I;if(S<i)break;let U=!1;for(let he=h.length-1;he>=O;--he){const de=Axe(t,x,h[he]);if(de>=r){U=!0;break}if(I.score=I.score*Cxe(r,c,de),I.score<=i)break}I.suppressBeginIndex=h.length,U||(I.score===S?(h.push(x),g.push(I.score)):I.score>i&&_xe(l,I,J7))}const _=h.length,v=n-_;a&&v>0&&(h.push(...new Array(v).fill(0)),g.push(...new Array(v).fill(0)));const w={selectedIndices:h};return o&&(w.selectedScores=g),u&&(w.validOutputs=_),w}function Axe(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),g=Math.max(i[1],i[3]),_=(a-s)*(u-o),v=(h-l)*(g-c);if(_<=0||v<=0)return 0;const w=Math.max(s,l),I=Math.max(o,c),S=Math.min(a,h),x=Math.min(u,g),O=Math.max(S-w,0)*Math.max(x-I,0);return O/(_+v-O)}function Cxe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function J7(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function R2(){return(R2=(0,Y.A)(function*(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=N(t,"boxes","nonMaxSuppressionAsync"),o=N(e,"scores","nonMaxSuppressionAsync"),a=gy(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const u=yield Promise.all([s.data(),o.data()]),l=u[0],c=u[1],{selectedIndices:h}=function Exe(t,e,n,r,i){return x2(t,e,n,r,i,0)}(l,c,n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),Aa(h,"int32")})).apply(this,arguments)}const Pxe=H({nonMaxSuppressionWithScore_:function Nxe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=N(t,"boxes","nonMaxSuppression"),a=N(e,"scores","nonMaxSuppression"),u=gy(o,a,n,r,i,s),h=X.runKernel("NonMaxSuppressionV5",{boxes:o,scores:a},{maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:s=u.softNmsSigma});return{selectedIndices:h[0],selectedScores:h[1]}}});function O2(){return(O2=(0,Y.A)(function*(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=N(t,"boxes","nonMaxSuppressionAsync"),a=N(e,"scores","nonMaxSuppressionAsync"),u=gy(o,a,n,r,i,s);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;const l=yield Promise.all([o.data(),a.data()]),c=l[0],h=l[1],{selectedIndices:g,selectedScores:_}=function Ixe(t,e,n,r,i,s){return x2(t,e,n,r,i,s,!0)}(c,h,n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Aa(g,"int32"),selectedScores:Aa(_)}})).apply(this,arguments)}const Oxe=H({nonMaxSuppressionPadded_:function Rxe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=N(t,"boxes","nonMaxSuppression"),a=N(e,"scores","nonMaxSuppression"),u=gy(o,a,n,r,i,null),v=X.runKernel("NonMaxSuppressionV4",{boxes:o,scores:a},{maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:s});return{selectedIndices:v[0],validOutputs:v[1]}}});function M2(){return(M2=(0,Y.A)(function*(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=N(t,"boxes","nonMaxSuppressionAsync"),a=N(e,"scores","nonMaxSuppressionAsync"),u=gy(o,a,n,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,h=u.scoreThreshold,[g,_]=yield Promise.all([o.data(),a.data()]),{selectedIndices:v,validOutputs:w}=function Txe(t,e,n,r,i,s){return x2(t,e,n,r,i,0,!1,s,!0)}(g,_,l,c,h,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Aa(v,"int32"),validOutputs:Un(w,"int32")}})).apply(this,arguments)}const Lxe=H({resizeBilinear_:function Vxe(t,e,n=!1,r=!1){const i=N(t,"images","resizeBilinear");L(3===i.rank||4===i.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),L(2===e.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),L(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;3===i.rank&&(o=!0,s=ke(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=e,l=X.runKernel("ResizeBilinear",{images:s},{alignCorners:n,halfPixelCenters:r,size:e});return o?ke(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),jxe=H({resizeNearestNeighbor_:function $xe(t,e,n=!1,r=!1){const i=N(t,"images","resizeNearestNeighbor");L(3===i.rank||4===i.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),L(2===e.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),L("float32"===i.dtype||"int32"===i.dtype,()=>"`images` must have `int32` or `float32` as dtype"),L(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;3===i.rank&&(o=!0,s=ke(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=e,l=X.runKernel("ResizeNearestNeighbor",{images:s},{alignCorners:n,halfPixelCenters:r,size:e});return o?ke(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Hxe=H({threshold_:function Bxe(t,e="binary",n=!1,r=.5){const i=N(t,"image","threshold"),u=i.shape[0]*i.shape[1];let c,h,g,_,l=sn(Aa([r]),255);if(L(3===i.rank,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),L(3===i.shape[2]||1===i.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),L("int32"===i.dtype||"float32"===i.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),L("otsu"===e||"binary"===e,()=>`Method must be binary or otsu, but was ${e}`),3===i.shape[2]){[c,h,g]=Mb(i,[1,1,1],-1);const I=sn(c,.2989),S=sn(h,.587),x=sn(g,.114);_=xi(xi(I,S),x)}else _=t;"otsu"===e&&(l=function Uxe(t,e){let s,o,a,u,l,c,n=Aa([-1]),r=Aa([0]),i=Aa([0]);for(let h=0;h<t.size-1;h++){s=ir(t,0,h+1),o=ir(t,h+1),l=Ts(mr(s),e),c=Ts(mr(o),e);const g=mr(sn(s,Rb(0,s.size)));a=Ts(g,mr(s));const _=jC(o.shape,s.size),v=xi(Rb(0,o.size),_),w=sn(o,v);u=Ts(mr(w),mr(o));const I=Cn(a,u),S=Cn(a,u),x=sn(l,c);i=sn(sn(x,I),S);const O=GC(i,r);r=fy(O,i,r),n=fy(O,Aa([h]),n)}return n}(y7(ki(U7(_),"int32"),ol([]),256),u));const v=n?p2(_,l):GC(_,l);return ki(sn(v,255),"int32")}}),Gxe=H({transform_:function zxe(t,e,n="nearest",r="constant",i=0,s){const o=N(t,"image","transform","float32"),a=N(e,"transforms","transform","float32");return L(4===o.rank,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),L(2===a.rank&&(a.shape[0]===o.shape[0]||1===a.shape[0])&&8===a.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),L(null==s||2===s.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`),X.runKernel("Transform",{image:o,transforms:a},{interpolation:n,fillMode:r,fillValue:i,outputShape:s})}}),Wxe=H({bandPart_:function qxe(t,e,n){L(e%1==0,()=>`bandPart(): numLower must be an integer, got ${e}.`),L(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=N(t,"a","bandPart");L(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);if(!(e<=s))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=s),n<0&&(n=o);const a=ke(Rb(0,s,1,"int32"),[-1,1]),u=Rb(0,o,1,"int32"),l=Cn(a,u),c=KC(p2(l,Un(+e,"int32")),S7(l,Un(-n,"int32"))),h=my([s,o],r.dtype);return ke(pc(ep(ke(r,[-1,s,o])).map(g=>fy(c,g,h))),i)}}),Qxe=H({gramSchmidt_:function Kxe(t){let e;if(Array.isArray(t)){e=!1,L(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)L(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=Mb(t,t.shape[0],0).map(i=>E2(i,[0]));L(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(X.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=sn(mr(sn(n[o],s)),n[o]);s=Cn(s,a)}return Ts(s,zC(s,"euclidean"))}));return e?pc(n,0):n}});function Y7(t,e=!1){return X.tidy(()=>{L(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=I7(n),s=Zd(t);const o=Zf([[1]],[1,1]);let a=Zd(o);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=s,h=a,g=i;[a,s,i]=X.tidy(()=>{const _=ir(s,[l,l],[n-l,1]),v=zC(_),w=ir(s,[l,l],[1,1]),I=fy(GC(w,0),Zf([[-1]]),Zf([[1]])),S=Cn(w,sn(I,v)),x=Ts(_,S);a=1===x.shape[0]?Zd(o):Es([o,ir(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const O=fc(Ts(Qn(I,S),v)),U=ir(s,[l,0],[n-l,r]),he=sn(O,a),de=A2(a);if(0===l)s=Cn(U,Qn(he,Qn(de,U)));else{const F=Cn(U,Qn(he,Qn(de,U)));s=Es([ir(s,[0,0],[l,r]),F],0)}const R=A2(he),k=ir(i,[0,l],[n,i.shape[1]-l]);if(0===l)i=Cn(k,Qn(Qn(k,a),R));else{const F=Cn(k,Qn(Qn(k,a),R));i=Es([ir(i,[0,0],[n,l]),F],1)}return[a,s,i]}),Cke([c,h,g])}return!e&&n>r&&(i=ir(i,[0,0],[n,r]),s=ir(s,[0,0],[r,r])),[i,s]})}const Yxe=H({qr_:function Jxe(t,e=!1){if(L(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),2===t.rank)return Y7(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=ep(ke(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];return r.forEach(u=>{const[l,c]=Y7(u,e);i.push(l),s.push(c)}),[ke(pc(i,0),t.shape),ke(pc(s,0),t.shape)]}}});var yo=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(yo||{});const mc=H({computeWeightedLoss_:function Xxe(t,e,n=yo.SUM_BY_NONZERO_WEIGHTS){const r=N(t,"losses","computeWeightedLoss");let i=null;null!=e&&(i=N(e,"weights","computeWeightedLoss"));const s=null==i?r:sn(r,i);if(n===yo.NONE)return s;if(n===yo.SUM)return mr(s);if(n===yo.MEAN){if(null==i)return JC(s);{const o=r.size/i.size,a=Ts(mr(s),mr(i));return o>1?Ts(a,Un(o)):a}}if(n===yo.SUM_BY_NONZERO_WEIGHTS){if(null==i)return Ts(mr(s),Un(r.size));{const o=sn(i,Yf(r.shape)),a=ki(mr(F7(o,Un(0))),"float32");return Ts(mr(s),a)}}throw Error(`Unknown reduction: ${n}`)}}),eRe=H({absoluteDifference_:function Zxe(t,e,n,r=yo.SUM_BY_NONZERO_WEIGHTS){const i=N(t,"labels","absoluteDifference"),s=N(e,"predictions","absoluteDifference");let o=null;null!=n&&(o=N(n,"weights","absoluteDifference")),Ta(i.shape,s.shape,"Error in absoluteDifference: ");const a=Ia(Cn(i,s));return mc(a,o,r)}}),nRe=H({cosineDistance_:function tRe(t,e,n,r,i=yo.SUM_BY_NONZERO_WEIGHTS){const s=N(t,"labels","cosineDistance"),o=N(e,"predictions","cosineDistance");let a=null;null!=r&&(a=N(r,"weights","cosineDistance")),Ta(s.shape,o.shape,"Error in cosineDistance: ");const u=Un(1),l=Cn(u,mr(sn(s,o),n,!0));return mc(l,a,i)}}),iRe=H({hingeLoss_:function rRe(t,e,n,r=yo.SUM_BY_NONZERO_WEIGHTS){let i=N(t,"labels","hingeLoss");const s=N(e,"predictions","hingeLoss");let o=null;null!=n&&(o=N(n,"weights","hingeLoss")),Ta(i.shape,s.shape,"Error in hingeLoss: ");const a=Un(1);i=Cn(sn(Un(2),i),a);const u=YC(Cn(a,sn(i,s)));return mc(u,o,r)}}),oRe=H({huberLoss_:function sRe(t,e,n,r=1,i=yo.SUM_BY_NONZERO_WEIGHTS){const s=N(t,"labels","huberLoss"),o=N(e,"predictions","huberLoss");let a=null;null!=n&&(a=N(n,"weights","huberLoss")),Ta(s.shape,o.shape,"Error in huberLoss: ");const u=Un(r),l=Ia(Cn(o,s)),c=M7(l,u),h=Cn(l,c),g=xi(sn(Un(.5),HC(c)),sn(u,h));return mc(g,a,i)}}),uRe=H({logLoss_:function aRe(t,e,n,r=1e-7,i=yo.SUM_BY_NONZERO_WEIGHTS){const s=N(t,"labels","logLoss"),o=N(e,"predictions","logLoss");let a=null;null!=n&&(a=N(n,"weights","logLoss")),Ta(s.shape,o.shape,"Error in logLoss: ");const u=Un(1),l=Un(r),c=fc(sn(s,kb(xi(o,l)))),h=sn(Cn(u,s),kb(xi(Cn(u,o),l))),g=Cn(c,h);return mc(g,a,i)}}),cRe=H({meanSquaredError_:function lRe(t,e,n,r=yo.SUM_BY_NONZERO_WEIGHTS){const i=N(t,"labels","meanSquaredError"),s=N(e,"predictions","meanSquaredError");let o=null;null!=n&&(o=N(n,"weights","meanSquaredError")),Ta(i.shape,s.shape,"Error in meanSquaredError: ");const a=z7(i,s);return mc(a,o,r)}}),fRe=H({sigmoidCrossEntropy_:function hRe(t,e,n,r=0,i=yo.SUM_BY_NONZERO_WEIGHTS){let s=N(t,"multiClassLabels","sigmoidCrossEntropy");const o=N(e,"logits","sigmoidCrossEntropy");let a=null;if(null!=n&&(a=N(n,"weights","sigmoidCrossEntropy")),Ta(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=Un(r),c=Un(1),h=Un(.5);s=xi(sn(s,Cn(c,l)),sn(h,l))}const u=function dRe(t,e){const n=N(t,"labels","sigmoidCrossEntropyWithLogits"),r=N(e,"logits","sigmoidCrossEntropyWithLogits");Ta(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=YC(r),s=sn(r,n),o=N7(Qf(fc(Ia(r))));return xi(Cn(i,s),o)}(s,o);return mc(u,a,i)}}),gRe=H({softmaxCrossEntropy_:function mRe(t,e,n,r=0,i=yo.SUM_BY_NONZERO_WEIGHTS){let s=N(t,"onehotLabels","softmaxCrossEntropy");const o=N(e,"logits","softmaxCrossEntropy");let a=null;if(null!=n&&(a=N(n,"weights","softmaxCrossEntropy")),Ta(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const l=Un(r),c=Un(1),h=Un(s.shape[1]);s=xi(sn(s,Cn(c,l)),Ts(l,h))}const u=function pRe(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return hc((i,s,o)=>{const u=k7(s,[n],!0),l=Cn(ki(s,"float32"),u);o([i,l]);const c=fc(sn(l,i));return{value:mr(c,[n]),gradFunc:(_,v)=>{const[w,I]=v,S=UC(_.shape,[n]);return[sn(ke(_,S),Cn(ki(w,"float32"),Qf(I))),sn(ke(_,S),Cn(Qf(I),ki(w,"float32")))]}}})(t,e)}(s,o);return mc(u,a,i)}}),_Re=H({sparseFillEmptyRows_:function yRe(t,e,n,r){const i=N(t,"indices","sparseFillEmptyRows","int32"),s=N(e,"values","sparseFillEmptyRows"),o=N(n,"denseShape","sparseFillEmptyRows","int32"),a=N(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==i.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${i.shape}`);if(1!==s.rank)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(1!==o.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==a.rank)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l=X.runKernel("SparseFillEmptyRows",{indices:i,values:s,denseShape:o,defaultValue:a});return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}}),bRe=H({sparseReshape_:function vRe(t,e,n){const r=N(t,"inputIndices","sparseReshape","int32"),i=N(e,"inputShape","sparseReshape","int32"),s=N(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==i.rank)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(1!==s.rank)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const a=X.runKernel("SparseReshape",{inputIndices:r,inputShape:i,newShape:s});return{outputIndices:a[0],outputShape:a[1]}}}),ERe=H({sparseSegmentMean_:function wRe(t,e,n){const r=N(t,"data","sparseSegmentMean"),i=N(e,"indices","sparseSegmentMean","int32"),s=N(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${i.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${s.shape}`);return X.runKernel("SparseSegmentMean",{data:r,indices:i,segmentIds:s})}}),IRe=H({sparseSegmentSum_:function TRe(t,e,n){const r=N(t,"data","sparseSegmentSum"),i=N(e,"indices","sparseSegmentSum","int32"),s=N(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${i.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${s.shape}`);return X.runKernel("SparseSegmentSum",{data:r,indices:i,segmentIds:s})}}),CRe=H({stringNGrams_:function ARe(t,e,n,r,i,s,o,a){const u=N(t,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=N(e,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");const g=X.runKernel("StringNGrams",{data:u,dataSplits:l},{separator:n,nGramWidths:r,leftPad:i,rightPad:s,padWidth:o,preserveShortSequences:a});return{nGrams:g[0],nGramsSplits:g[1]}}}),DRe=H({stringSplit_:function SRe(t,e,n=!0){const r=N(t,"input","stringSplit","string"),i=N(e,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==i.rank)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const a=X.runKernel("StringSplit",{input:r,delimiter:i},{skipEmpty:n});return{indices:a[0],values:a[1],shape:a[2]}}}),PRe=H({stringToHashBucketFast_:function NRe(t,e){const n=N(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");return X.runKernel("StringToHashBucketFast",{input:n},r)}}),kRe={fft:b2,ifft:XC,rfft:w2,irfft:H7},xRe={hammingWindow:rxe,hannWindow:K7,frame:Q7,stft:axe},RRe={flipLeftRight:dxe,grayscaleToRGB:fxe,resizeNearestNeighbor:jxe,resizeBilinear:Lxe,rotateWithOffset:mxe,cropAndResize:lxe,nonMaxSuppression:yxe,nonMaxSuppressionAsync:function Sxe(t,e,n){return R2.apply(this,arguments)},nonMaxSuppressionWithScore:Pxe,nonMaxSuppressionWithScoreAsync:function kxe(t,e,n){return O2.apply(this,arguments)},nonMaxSuppressionPadded:Oxe,nonMaxSuppressionPaddedAsync:function Mxe(t,e,n){return M2.apply(this,arguments)},threshold:Hxe,transform:Gxe},ORe={bandPart:Wxe,gramSchmidt:Qxe,qr:Yxe},MRe={absoluteDifference:eRe,computeWeightedLoss:mc,cosineDistance:nRe,hingeLoss:iRe,huberLoss:oRe,logLoss:uRe,meanSquaredError:cRe,sigmoidCrossEntropy:fRe,softmaxCrossEntropy:gRe},FRe={sparseFillEmptyRows:_Re,sparseReshape:bRe,sparseSegmentMean:ERe,sparseSegmentSum:IRe},VRe={stringNGrams:CRe,stringSplit:DRe,stringToHashBucketFast:PRe};wn().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var X7,pu=function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t}(pu||{});!function(t){let e;var n;(n=e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"}(X7||(X7={}));const F2={};function Z7(t){return F2[t]}function T(t,e,n,r,i){const s=e.inputParams[t];if(s&&void 0!==s.inputIndexStart){const a=s.inputIndexStart,u=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?a+1:s.inputIndexEnd;if("tensor"===s.type)return Is(e.inputNames[s.inputIndexStart],n,r,i);if("tensors"===s.type)return e.inputNames.slice(a,u).map(g=>Is(g,n,r,i));const l=Is(e.inputNames.slice(a)[0],n,r,i),c=l.dataSync();return"number"===s.type?c[0]:ry(l.shape,c)}const o=e.attrParams[t];return o&&o.value}function Is(t,e,n,r){const[i,s]=_o(t);if(null!=r){const a=r.getHashTableHandleByName(i);if(null!=a)return a}const o=n.currentContextIds.find(a=>!!e[ZC(i,a)]);return void 0!==o?e[ZC(i,o)][s]:void 0}function ul(t,e){const[n,r,i]=_o(t);return[ZC(n,e&&e.currentContextId),r,i]}function ZC(t,e){return e?`${t}-${e}`:t}function _o(t){const e=t.split(":");if(1===e.length)return[t,0,void 0];const r=3===e.length?e[1]:void 0;return[e[0],Number(e[e.length-1]),r]}function eS(t,e,n){let r=T("pad",t,e,n);if("explicit"===r){r=T("explicitPaddings",t,e,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)i[s][0]=r[2*s],i[s][1]=r[2*s+1];return i}return r}function gc(t){return t.kept?t:Zd(t)}const $Re=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],jRe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],BRe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],URe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],HRe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],zRe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],GRe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],qRe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],WRe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],KRe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],QRe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],JRe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],YRe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],XRe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],ZRe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],eOe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],tOe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],nOe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],rOe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class eQ{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const n=[].concat(...[Ne,ae,dt,tt,lt,ze,K,G,ne,te,ge,$e,qe,mt,ct,vt,Dn,Rn,ht].map(r=>r.json));this.opMappers=n.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,n={}){const i=[],s=[],o=[],a=e.node.reduce((w,I)=>(w[I.name]=this.mapNode(I),I.op.startsWith("Placeholder")?i.push(w[I.name]):"Const"===I.op?s.push(w[I.name]):(null==I.input||0===I.input.length)&&o.push(w[I.name]),w),{});let u=[];const l=[];let c={},h={};null!=n&&(c=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));const g=Object.keys(a);g.forEach(w=>{const I=a[w];I.inputNames.forEach((S,x)=>{const[O,,U]=ul(S),he=a[O];if(null!=he.outputs){const de=he.outputs.indexOf(U);-1!==de&&(I.inputNames[x]=`${O}:${de}`)}I.inputs.push(he),he.children.push(I)})}),0===Object.keys(h).length?g.forEach(w=>{const I=a[w];0===I.children.length&&l.push(I)}):Object.keys(h).forEach(w=>{const[I]=ul(w),S=a[I];null!=S&&(S.signatureKey=h[w],l.push(S))}),Object.keys(c).length>0?Object.keys(c).forEach(w=>{const[I]=ul(w),S=a[I];S&&(S.signatureKey=c[w],u.push(S))}):u=i;let _={};null!=e.library&&null!=e.library.function&&(_=e.library.function.reduce((w,I)=>(w[I.signature.name]=this.mapFunction(I),w),{}));const v={nodes:a,inputs:u,outputs:l,weights:s,placeholders:i,signature:n,functions:_};return o.length>0&&(v.initNodes=o),v}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=Z7(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return null!=n.inputs&&(r.inputParams=n.inputs.reduce((i,s)=>(i[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},i),{})),null!=n.attrs&&(r.attrParams=n.attrs.reduce((i,s)=>{const o=s.type;let a;switch(s.type){case"string":a=V2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=V2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":a=G2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=G2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":a=$2(e.attr,s.tfName,s.defaultValue||0),void 0===a&&s.tfDeprecatedName&&(a=$2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":a=z2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=z2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":a=L2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=L2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":a=W2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=W2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":a=H2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=H2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":a=q2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=q2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":a=B2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=B2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":a=U2(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=U2(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":a=nQ(e.attr,s.tfName,s.defaultValue),void 0===a&&s.tfDeprecatedName&&(a=nQ(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return i[s.name]={value:a,type:o},i},{})),r}mapFunction(e){const n=e.nodeDef,i=[];let s={};null!=n&&(s=n.reduce((h,g)=>(h[g.name]=this.mapNode(g),"Const"===g.op&&i.push(h[g.name]),h),{}));const o=[],a=[];e.signature.inputArg.forEach(h=>{const[g]=ul(h.name),_={name:g,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:j2(h.type),type:"dtype"}},children:[]};_.signatureKey=h.name,o.push(_),s[g]=_}),Object.keys(s).forEach(h=>{const g=s[h];g.inputNames.forEach((_,v)=>{const[w,,I]=ul(_),S=s[w];if(null!=S.outputs){const x=S.outputs.indexOf(I);-1!==x&&(g.inputNames[v]=`${w}:${x}`)}g.inputs.push(S),S.children.push(g)})});const l=e.ret;e.signature.outputArg.forEach(h=>{const[g,_]=ul(l[h.name]),v=s[g];null!=v&&(v.defaultOutput=_,a.push(v))});const c=this.mapArgsToSignature(e);return{nodes:s,inputs:o,outputs:a,weights:i,placeholders:[],signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return null!=n&&(r=n[r]),{name:r,dtype:e.type}}}function tQ(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):function iOe(t){const e=wn().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function V2(t,e,n,r=!1){const i=t[e];return null!=i?tQ(i.s,r):n}function L2(t,e,n){const r=t[e];return r?r.b:n}function $2(t,e,n){const r=t[e]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function j2(t){switch("string"==typeof t&&(t=pu[t]),t){case pu.DT_FLOAT:case pu.DT_HALF:return"float32";case pu.DT_INT32:case pu.DT_INT64:case pu.DT_INT8:case pu.DT_UINT8:return"int32";case pu.DT_BOOL:return"bool";case pu.DT_DOUBLE:return"float32";case pu.DT_STRING:return"string";default:return null}}function nQ(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function B2(t,e,n){const r=t[e];return r&&r.type?j2(r.type):n}function U2(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(i=>j2(i)):n}function rQ(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function H2(t,e,n){const r=t[e];return r&&r.shape?rQ(r.shape):n}function z2(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>"number"==typeof i?i:parseInt(i,10)):n}function G2(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(s=>tQ(s,r)):n}function q2(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>rQ(i)):n}function W2(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}class sOe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,s)=>(i[s]=this.getAttr(s),i),{}))}getInput(e){return Is(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(null!=r.tensor)return Is(e,this.tensorMap,this.context);if(null!=r.i||null!=r.f)return $2(this.node.rawAttrs,e,n);if(null!=r.s)return V2(this.node.rawAttrs,e,n);if(null!=r.b)return L2(this.node.rawAttrs,e,n);if(null!=r.shape)return H2(this.node.rawAttrs,e,n);if(null!=r.type)return B2(this.node.rawAttrs,e,n);if(null!=r.list){if(null!=r.list.i||null!=r.list.f)return z2(this.node.rawAttrs,e,n);if(null!=r.list.s)return G2(this.node.rawAttrs,e,n);if(null!=r.list.shape)return q2(this.node.rawAttrs,e,n);if(null!=r.list.b)return W2(this.node.rawAttrs,e,n);if(null!=r.list.type)return U2(this.node.rawAttrs,e,n)}return n}}function Sa(t,e,n=""){if("number"!=typeof t&&"number"!=typeof e){L(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const i=t[r],s=e[r];L(i<0||s<0||i===s,()=>n+` Shapes ${t} and ${e} must match`)}}}function iQ(t){return!("number"==typeof t||t.some(e=>e<0))}function Fb(t,e,n){let r=K2(t,n);const i=!iQ(r);if(i&&0===e.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(s=>{r=K2(s.shape,r)}),!iQ(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function K2(t,e){if("number"==typeof t)return e;if("number"==typeof e)return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const i=t[r],s=e[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=i>=0?i:s}return n}class uOe{constructor(e,n,r,i,s,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=s,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Un(0),th(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(null==e||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=n.shape),Sa(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,th(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,i)=>this.write(r,n[i]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(0===e.length)return ol([],[0].concat(this.elementShape));const r=this.readMany(e);return Sa(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),pc(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return ol([],[0].concat(this.elementShape));const n=[];for(let i=0;i<this.size();i++)n.push(i);const r=this.readMany(n);return Sa(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Es(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,ep(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const i=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=0===r?0:n.size/r,o=[];Ca(()=>{n=ke(n,[1,r,s]);for(let u=0;u<e.length;++u)o[u]=ke(ir(n,[0,0===u?0:i[u-1],0],[1,e[u],s]),this.elementShape);return o});const a=[];for(let u=0;u<e.length;u++)a[u]=u;this.writeMany(a,o)}}class tp{constructor(e,n,r,i=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);Sa(n,s.shape,"TensorList shape mismatch: "),th(s)}),this.idTensor=Un(0),this.maxNumElements=i,th(this.idTensor)}get id(){return this.idTensor.id}copy(){return new tp([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(null==e||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Sa(e,this.elementShape,"TensorList shape mismatch: ");const i=Fb(this.elementShape,this.tensors,e);return Ca(()=>{const s=this.tensors.map(o=>ke(o,i));return pc(s,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const r=Fb(this.elementShape,this.tensors,e),i=this.tensors.pop();return i.kept=!1,Sa(i.shape,e,"TensorList shape mismatch: "),ke(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Sa(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");th(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new tp([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);Sa(this.tensors[e].shape,n,"TensorList shape mismatch: ");const i=Fb(this.elementShape,this.tensors,n);return ke(this.tensors[e],i)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Sa(this.elementShape,n.shape,"TensorList shape mismatch: "),th(n),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Sa(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=Fb(this.elementShape,this.tensors,r);return 0===e.length?ol([],[0].concat(i)):Ca(()=>{const s=e.map(o=>ke(this.tensors[o],i));return pc(s,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Sa(this.elementShape,n,"TensorList shape mismatch: ");const r=Fb(this.elementShape,this.tensors,n);return 0===this.size()?ol([],[0].concat(r)):Ca(()=>{const i=this.tensors.map(s=>ke(s,r));return Es(i,0)})}}const fOe=function(){var t=(0,Y.A)(function*(e,n,r){switch(e.op){case"If":case"StatelessIf":{const i=T("thenBranch",e,n,r),s=T("elseBranch",e,n,r),o=T("cond",e,n,r),a=T("args",e,n,r);return(yield o.data())[0]?r.functionMap[i].executeFunctionAsync(a,r.tensorArrayMap,r.tensorListMap):r.functionMap[s].executeFunctionAsync(a,r.tensorArrayMap,r.tensorListMap)}case"While":case"StatelessWhile":{const i=T("body",e,n,r),s=T("cond",e,n,r),o=T("args",e,n,r),a=yield r.functionMap[s].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap),u=o.map(h=>h.id);let l=yield a[0].data();a.forEach(h=>{!h.kept&&-1===u.indexOf(h.id)&&h.dispose()});let c=o;for(;l[0];){const h=c;c=yield r.functionMap[i].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);const g=c.map(v=>v.id);h.forEach(v=>{!v.kept&&-1===u.indexOf(v.id)&&-1===g.indexOf(v.id)&&v.dispose()});const _=yield r.functionMap[s].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);l=yield _[0].data(),_.forEach(v=>{!v.kept&&-1===u.indexOf(v.id)&&-1===g.indexOf(v.id)&&v.dispose()})}return c}case"LoopCond":return[gc(T("pred",e,n,r))];case"Switch":{const i=T("pred",e,n,r);let s=T("data",e,n,r);return s.kept||(s=gc(s)),(yield i.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const i=e.inputNames.find(s=>void 0!==Is(s,n,r));return i?[gc(Is(i,n,r))]:void 0}case"Enter":{const i=T("frameName",e,n,r),s=T("tensor",e,n,r);return r.enterFrame(i),[gc(s)]}case"Exit":{const i=T("tensor",e,n,r);return r.exitFrame(),[gc(i)]}case"NextIteration":{const i=T("tensor",e,n,r);return r.nextIteration(),[gc(i)]}case"TensorArrayV3":{const i=T("size",e,n,r),s=T("dtype",e,n,r),o=T("elementShape",e,n,r),a=T("dynamicSize",e,n,r),u=T("clearAfterRead",e,n,r),l=T("identicalElementShapes",e,n,r),c=T("name",e,n,r),h=new uOe(c,s,i,o,l,a,u);return r.addTensorArray(h),[h.idTensor,Un(1)]}case"TensorArrayWriteV3":{const i=T("tensorArrayId",e,n,r),s=T("index",e,n,r),o=T("tensor",e,n,r),a=r.getTensorArray(i.id);return a.write(s,o),[a.idTensor]}case"TensorArrayReadV3":{const i=T("tensorArrayId",e,n,r),s=T("index",e,n,r);return[r.getTensorArray(i.id).read(s)]}case"TensorArrayGatherV3":{const i=T("tensorArrayId",e,n,r),s=T("indices",e,n,r),o=T("dtype",e,n,r);return[r.getTensorArray(i.id).gather(s,o)]}case"TensorArrayScatterV3":{const i=T("tensorArrayId",e,n,r),s=T("indices",e,n,r),o=T("tensor",e,n,r),a=r.getTensorArray(i.id);return a.scatter(s,o),[a.idTensor]}case"TensorArrayConcatV3":{const i=T("tensorArrayId",e,n,r),s=r.getTensorArray(i.id),o=T("dtype",e,n,r);return[s.concat(o)]}case"TensorArraySplitV3":{const i=T("tensorArrayId",e,n,r),s=T("tensor",e,n,r),o=T("lengths",e,n,r),a=r.getTensorArray(i.id);return a.split(o,s),[a.idTensor]}case"TensorArraySizeV3":{const i=T("tensorArrayId",e,n,r);return[Un(r.getTensorArray(i.id).size(),"int32")]}case"TensorArrayCloseV3":{const i=T("tensorArrayId",e,n,r),s=r.getTensorArray(i.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const i=T("tensorListId",e,n,r),s=T("index",e,n,r),o=T("tensor",e,n,r),a=r.getTensorList(i.id);return a.setItem(s,o),[a.idTensor]}case"TensorListGetItem":{const i=T("tensorListId",e,n,r),s=T("index",e,n,r),o=T("elementShape",e,n,r),a=T("elementDType",e,n,r);return[r.getTensorList(i.id).getItem(s,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const i=T("indices",e,n,r),u=function dOe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new tp([],n,t.dtype,r),o=ep(t,0);return e.forEach((a,u)=>{s.setItem(a,o[u])}),s}(T("tensor",e,n,r),i,T("elementShape",e,n,r),T("numElements",e,n,r));return r.addTensorList(u),[u.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const i=T("elementShape",e,n,r),s=T("elementDType",e,n,r);let o;o="TensorListReserve"===e.op?"numElements":"maxNumElements";const a=T(o,e,n,r),l=function cOe(t,e,n,r){return new tp([],t,e,r)}(i,s,0,"TensorListReserve"===e.op?-1:a);return r.addTensorList(l),[l.idTensor]}case"TensorListGather":{const i=T("tensorListId",e,n,r),s=T("indices",e,n,r),o=T("elementShape",e,n,r),a=T("elementDType",e,n,r);return[r.getTensorList(i.id).gather(s,a,o)]}case"TensorListStack":{const i=T("tensorListId",e,n,r),s=T("elementShape",e,n,r),o=T("elementDType",e,n,r),a=T("numElements",e,n,r);return[r.getTensorList(i.id).stack(s,o,a)]}case"TensorListFromTensor":{const a=function lOe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);Sa(t.shape.slice(1),e,"TensorList shape mismatch: ");const s=ep(t);return new tp(s,e,r)}(T("tensor",e,n,r),T("elementShape",e,n,r),T("elementDType",e,n,r));return r.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const i=T("tensorListId",e,n,r),s=r.getTensorList(i.id),o=T("dtype",e,n,r),a=T("elementShape",e,n,r);return[s.concat(o,a)]}case"TensorListPushBack":{const i=T("tensorListId",e,n,r),s=T("tensor",e,n,r),o=r.getTensorList(i.id);return o.pushBack(s),[o.idTensor]}case"TensorListPopBack":{const i=T("tensorListId",e,n,r),s=T("elementShape",e,n,r),o=T("elementDType",e,n,r);return[r.getTensorList(i.id).popBack(s,o)]}case"TensorListSplit":{const i=T("tensor",e,n,r),s=T("elementShape",e,n,r),a=function hOe(t,e,n){let r=0;const i=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${t.shape}`);const o=K2(t.shape.slice(1),n),a=0===r?0:t.size/r,u=Ca(()=>{const c=[];t=ke(t,[1,r,a]);for(let h=0;h<e.length;++h)c[h]=ke(ir(t,[0,0===h?0:i[h-1],0],[1,e[h],a]),o);return t.dispose(),c}),l=new tp([],n,t.dtype,e.length);for(let c=0;c<u.length;c++)l.setItem(c,u[c]);return l}(i,T("lengths",e,n,r),s);return r.addTensorList(a),[a.idTensor]}case"TensorListLength":{const i=T("tensorListId",e,n,r);return[Un(r.getTensorList(i.id).size(),"int32")]}case"TensorListResize":{const i=T("tensorListId",e,n,r),s=T("size",e,n,r),a=r.getTensorList(i.id).resize(s);return r.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}});return function(n,r,i){return t.apply(this,arguments)}}();function sQ(t,e,n){const[r,i]=T("fusedOps",t,e,n),s="biasadd"===r,o=!s,a="prelu"===i,u="fusedbatchnorm"===r,l=T("numArgs",t,e,n);if(s){if(a&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&s&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=T("strides",t,e,n),h=eS(t,e,n),g=T("dataFormat",t,e,n).toUpperCase(),_=T("dilations",t,e,n);let[v,w]=T("args",t,e,n);return o&&(w=v,v=void 0),{stride:c,pad:h,dataFormat:g,dilations:_,biasArg:v,preluArg:w,activationFunc:i,leakyreluAlpha:T("leakyreluAlpha",t,e,n)}}function Q2(t,e,n){return{boxes:T("boxes",t,e,n),scores:T("scores",t,e,n),maxOutputSize:T("maxOutputSize",t,e,n),iouThreshold:T("iouThreshold",t,e,n),scoreThreshold:T("scoreThreshold",t,e,n),softNmsSigma:T("softNmsSigma",t,e,n)}}const gOe=function(){var t=(0,Y.A)(function*(e,n,r,i,s=We){switch(e.op){case"NonMaxSuppressionV5":{const{boxes:o,scores:a,maxOutputSize:u,iouThreshold:l,scoreThreshold:c,softNmsSigma:h}=Q2(e,n,r),g=yield s.image.nonMaxSuppressionWithScoreAsync(o,a,u,l,c,h);return[g.selectedIndices,g.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:o,scores:a,maxOutputSize:u,iouThreshold:l,scoreThreshold:c}=Q2(e,n,r),h=T("padToMaxOutputSize",e,n,r),g=yield s.image.nonMaxSuppressionPaddedAsync(o,a,u,l,c,h);return[g.selectedIndices,g.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:o,scores:a,maxOutputSize:u,iouThreshold:l,scoreThreshold:c}=Q2(e,n,r);return[yield s.image.nonMaxSuppressionAsync(o,a,u,l,c)]}case"Where":{const o=s.cast(T("condition",e,n,r),"bool"),a=[yield s.whereAsync(o)];return o.dispose(),a}case"ListDiff":return s.setdiff1dAsync(T("x",e,n,r),T("y",e,n,r));default:throw TypeError(`Node type ${e.op} is not implemented`)}});return function(n,r,i,s){return t.apply(this,arguments)}}();class vOe{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Un(0),this.tensorMap=new Map,th(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Un(this.size(),"int32")}import(e,n){var r=this;return(0,Y.A)(function*(){r.checkKeyAndValueTensor(e,n);const i=yield e.data();return r.tensorMap.forEach(s=>s.dispose()),r.tensorMap.clear(),Ca(()=>{const s=ep(n),o=i.length,a=s.length;L(o===a,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${a} elements.`);for(let u=0;u<o;u++){const l=i[u],c=s[u];th(c),r.tensorMap.set(l,c)}return r.handle})})()}find(e,n){var r=this;return(0,Y.A)(function*(){r.checkKeyAndValueTensor(e,n);const i=yield e.data();return Ca(()=>{const s=[];for(let o=0;o<i.length;o++){const u=r.findWithDefault(i[o],n);s.push(u)}return pc(s)})})()}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}const bOe=function(){var t=(0,Y.A)(function*(e,n,r,i){switch(e.op){case"HashTable":case"HashTableV2":{const s=T("keyDType",e,n,r),o=T("valueDType",e,n,r),a=new vOe(s,o);return i.addHashTable(e.name,a),[a.handle]}case"LookupTableImport":case"LookupTableImportV2":{const s=T("tableHandle",e,n,r,i),o=T("keys",e,n,r),a=T("values",e,n,r);return[yield i.getHashTableById(s.id).import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const s=T("tableHandle",e,n,r,i),o=T("keys",e,n,r),a=T("defaultValue",e,n,r);return[yield i.getHashTableById(s.id).find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=T("tableHandle",e,n,r,i);return[i.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}});return function(n,r,i,s){return t.apply(this,arguments)}}();function oQ(t,e,n,r,i=Ca){const s=((o,a,u)=>{switch(o.category){case"arithmetic":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(T("a",t,e,n),T("b",t,e,n))];case"AddN":return[r.addN(T("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(T("a",t,e,n),T("b",t,e,n))];case"Mul":return[r.mul(T("a",t,e,n),T("b",t,e,n))];case"RealDiv":case"Div":return[r.div(T("a",t,e,n),T("b",t,e,n))];case"DivNoNan":return[r.divNoNan(T("a",t,e,n),T("b",t,e,n))];case"FloorDiv":return[r.floorDiv(T("a",t,e,n),T("b",t,e,n))];case"Sub":return[r.sub(T("a",t,e,n),T("b",t,e,n))];case"Minimum":return[r.minimum(T("a",t,e,n),T("b",t,e,n))];case"Maximum":return[r.maximum(T("a",t,e,n),T("b",t,e,n))];case"Pow":return[r.pow(T("a",t,e,n),T("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"basic_math":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(T("x",t,e,n))];case"Acos":return[r.acos(T("x",t,e,n))];case"Acosh":return[r.acosh(T("x",t,e,n))];case"Asin":return[r.asin(T("x",t,e,n))];case"Asinh":return[r.asinh(T("x",t,e,n))];case"Atan":return[r.atan(T("x",t,e,n))];case"Atan2":return[r.atan2(T("x",t,e,n),T("y",t,e,n))];case"Atanh":return[r.atanh(T("x",t,e,n))];case"Ceil":return[r.ceil(T("x",t,e,n))];case"Complex":return[r.complex(T("real",t,e,n),T("imag",t,e,n))];case"Cos":return[r.cos(T("x",t,e,n))];case"Cosh":return[r.cosh(T("x",t,e,n))];case"Elu":return[r.elu(T("x",t,e,n))];case"Erf":return[r.erf(T("x",t,e,n))];case"Exp":return[r.exp(T("x",t,e,n))];case"Expm1":return[r.expm1(T("x",t,e,n))];case"Floor":return[r.floor(T("x",t,e,n))];case"Log":return[r.log(T("x",t,e,n))];case"Log1p":return[r.log1p(T("x",t,e,n))];case"Imag":return[r.imag(T("x",t,e,n))];case"Neg":return[r.neg(T("x",t,e,n))];case"Reciprocal":return[r.reciprocal(T("x",t,e,n))];case"Real":return[r.real(T("x",t,e,n))];case"Relu":return[r.relu(T("x",t,e,n))];case"Round":return[r.round(T("x",t,e,n))];case"Selu":return[r.selu(T("x",t,e,n))];case"Sigmoid":return[r.sigmoid(T("x",t,e,n))];case"Sin":return[r.sin(T("x",t,e,n))];case"Sign":return[r.sign(T("x",t,e,n))];case"Sinh":return[r.sinh(T("x",t,e,n))];case"Softplus":return[r.softplus(T("x",t,e,n))];case"Sqrt":return[r.sqrt(T("x",t,e,n))];case"Square":return[r.square(T("x",t,e,n))];case"Tanh":return[r.tanh(T("x",t,e,n))];case"Tan":return[r.tan(T("x",t,e,n))];case"ClipByValue":return[r.clipByValue(T("x",t,e,n),T("clipValueMin",t,e,n),T("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(T("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Is(t.inputNames[0],e,n))];case"Prod":return[r.prod(T("x",t,e,n),T("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu(T("x",t,e,n),T("alpha",t,e,n))];case"Prelu":return[r.prelu(T("x",t,e,n),T("alpha",t,e,n))];case"IsNan":return[r.isNaN(Is(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"control":return fOe(o,a,u);case"convolution":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"Conv1D":{const i=T("stride",t,e,n),s=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilation",t,e,n);return[r.conv1d(T("x",t,e,n),T("filter",t,e,n),i,s,o,a)]}case"Conv2D":{const i=T("strides",t,e,n),s=eS(t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv2d(T("x",t,e,n),T("filter",t,e,n),[i[1],i[2]],s,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:i,pad:s,dataFormat:o,dilations:a,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:h}=sQ(t,e,n);return[r.fused.conv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[i[1],i[2]],pad:s,dataFormat:o,dilations:[a[1],a[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:s,dataFormat:o,dilations:a,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:h}=sQ(t,e,n);return[r.fused.depthwiseConv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[i[1],i[2]],pad:s,dataFormat:o,dilations:[a[1],a[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=T("outputShape",t,e,n),s=T("strides",t,e,n),o=eS(t,e,n);return[r.conv2dTranspose(T("x",t,e,n),T("filter",t,e,n),i,[s[1],s[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=T("strides",t,e,n),s=eS(t,e,n),o=T("dilations",t,e,n),a=T("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(T("input",t,e,n),T("filter",t,e,n),[i[1],i[2]],s,a,[o[1],o[2]])]}case"Conv3D":{const i=T("strides",t,e,n),s=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv3d(T("x",t,e,n),T("filter",t,e,n),[i[1],i[2],i[3]],s,o,[a[1],a[2],a[3]])]}case"AvgPool":{const i=T("strides",t,e,n),s=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool(T("x",t,e,n),[o[1],o[2]],[i[1],i[2]],s)]}case"MaxPool":{const i=T("strides",t,e,n),s=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool(T("x",t,e,n),[o[1],o[2]],[i[1],i[2]],s)]}case"MaxPoolWithArgmax":{const i=T("strides",t,e,n),s=T("pad",t,e,n),o=T("kernelSize",t,e,n),a=T("includeBatchInIndex",t,e,n),{result:u,indexes:l}=r.maxPoolWithArgmax(T("x",t,e,n),[o[1],o[2]],[i[1],i[2]],s,a);return[u,l]}case"AvgPool3D":{const i=T("strides",t,e,n),s=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],s)]}case"MaxPool3D":{const i=T("strides",t,e,n),s=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],s)]}case"Dilation2D":{const i=T("strides",t,e,n),s=T("pad",t,e,n),o=T("dilations",t,e,n),a=i[1],u=i[2],l=o[1],c=o[2];return[r.dilation2d(T("x",t,e,n),T("filter",t,e,n),[a,u],s,[l,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"creation":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"Fill":{const i=T("shape",t,e,n),s=T("dtype",t,e,n),o=T("value",t,e,n);return[r.fill(i,o,s)]}case"LinSpace":{const i=T("start",t,e,n),s=T("stop",t,e,n),o=T("num",t,e,n);return[r.linspace(i,s,o)]}case"Multinomial":{const i=T("logits",t,e,n),s=T("numSamples",t,e,n),o=T("seed",t,e,n);return[r.multinomial(i,s,o)]}case"OneHot":{const i=T("indices",t,e,n),s=T("depth",t,e,n),o=T("onValue",t,e,n),a=T("offValue",t,e,n),u=T("dtype",t,e,n);return[r.oneHot(i,s,o,a,u)]}case"Ones":return[r.ones(T("shape",t,e,n),T("dtype",t,e,n))];case"OnesLike":return[r.onesLike(T("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(T("shape",t,e,n),T("dtype",t,e,n),T("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("dtype",t,e,n))];case"Range":{const i=T("start",t,e,n),s=T("stop",t,e,n),o=T("step",t,e,n);return[r.range(i,s,o,T("dtype",t,e,n))]}case"TruncatedNormal":{const i=T("shape",t,e,n),s=T("mean",t,e,n),o=T("stdDev",t,e,n),a=T("seed",t,e,n);return[r.truncatedNormal(i,s,o,T("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(T("shape",t,e,n),T("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"dynamic":return gOe(o,a,u);case"evaluation":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"LowerBound":{const i=T("sortedSequence",t,e,n),s=T("values",t,e,n);return[r.lowerBound(i,s)]}case"TopKV2":{const i=T("x",t,e,n),s=T("k",t,e,n),o=T("sorted",t,e,n),a=r.topk(i,s,o);return[a.values,a.indices]}case"UpperBound":{const i=T("sortedSequence",t,e,n),s=T("values",t,e,n);return[r.upperBound(i,s)]}case"Unique":{const i=T("x",t,e,n),s=r.unique(i);return[s.values,s.indices]}case"UniqueV2":{const i=T("x",t,e,n),s=T("axis",t,e,n),o=r.unique(i,s);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"image":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"ResizeBilinear":{const i=T("images",t,e,n),s=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(i,[s[0],s[1]],o,a)]}case"ResizeNearestNeighbor":{const i=T("images",t,e,n),s=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(i,[s[0],s[1]],o,a)]}case"CropAndResize":{const i=T("image",t,e,n),s=T("boxes",t,e,n),o=T("boxInd",t,e,n),a=T("cropSize",t,e,n),u=T("method",t,e,n),l=T("extrapolationValue",t,e,n);return[r.image.cropAndResize(i,s,o,a,u,l)]}case"ImageProjectiveTransformV3":{const i=T("images",t,e,n),s=T("transforms",t,e,n),o=T("outputShape",t,e,n),a=T("fillValue",t,e,n),u=T("interpolation",t,e,n),l=T("fillMode",t,e,n);return[r.image.transform(i,s,u.toLowerCase(),l.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"graph":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const i=T("default",t,e,n);return[Is(t.name,e,n)||i];case"Placeholder":return[Is(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[gc(T("x",t,e,n))];case"IdentityN":return T("x",t,e,n).map(c=>gc(c));case"Shape":return[r.tensor1d(T("x",t,e,n).shape,"int32")];case"ShapeN":return T("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(T("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(T("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=T("x",t,e,n),a=T("data",t,e,n),u=T("message",t,e,n),l=T("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"logical":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"Equal":return[r.equal(T("a",t,e,n),T("b",t,e,n))];case"NotEqual":return[r.notEqual(T("a",t,e,n),T("b",t,e,n))];case"Greater":return[r.greater(T("a",t,e,n),T("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(T("a",t,e,n),T("b",t,e,n))];case"Less":return[r.less(T("a",t,e,n),T("b",t,e,n))];case"LessEqual":return[r.lessEqual(T("a",t,e,n),T("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(T("a",t,e,n),T("b",t,e,n))];case"LogicalNot":return[r.logicalNot(T("a",t,e,n))];case"LogicalOr":return[r.logicalOr(T("a",t,e,n),T("b",t,e,n))];case"Select":case"SelectV2":return[r.where(T("condition",t,e,n),T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"matrices":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(T("a",t,e,n),T("b",t,e,n),T("transposeA",t,e,n),T("transposeB",t,e,n))];case"Einsum":return[r.einsum(T("equation",t,e,n),...T("tensors",t,e,n))];case"Transpose":return[r.transpose(T("x",t,e,n),T("perm",t,e,n))];case"_FusedMatMul":const[i,s]=T("fusedOps",t,e,n),o="biasadd"===i,a="prelu"===s,u=T("numArgs",t,e,n),l=T("leakyreluAlpha",t,e,n);if(o){if(a&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,h]=T("args",t,e,n);return[r.fused.matMul({a:T("a",t,e,n),b:T("b",t,e,n),transposeA:T("transposeA",t,e,n),transposeB:T("transposeB",t,e,n),bias:c,activation:s,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"normalization":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(T("x",t,e,n),T("axis",t,e,n),T("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(T("x",t,e,n),T("radius",t,e,n),T("bias",t,e,n),T("alpha",t,e,n),T("beta",t,e,n))];case"Softmax":return[r.softmax(T("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(T("x",t,e,n))];case"SparseToDense":return[r.sparseToDense(T("sparseIndices",t,e,n),T("outputShape",t,e,n),T("sparseValues",t,e,n),T("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"reduction":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"Max":{const a=T("axis",t,e,n),u=T("keepDims",t,e,n);return[r.max(T("x",t,e,n),a,u)]}case"Mean":{const a=T("axis",t,e,n),u=T("keepDims",t,e,n);return[r.mean(T("x",t,e,n),a,u)]}case"Min":{const a=T("axis",t,e,n),u=T("keepDims",t,e,n);return[r.min(T("x",t,e,n),a,u)]}case"Sum":{const a=T("axis",t,e,n),u=T("keepDims",t,e,n);return[r.sum(T("x",t,e,n),a,u)]}case"All":{const a=T("axis",t,e,n),u=T("keepDims",t,e,n);return[r.all(T("x",t,e,n),a,u)]}case"Any":{const a=T("axis",t,e,n),u=T("keepDims",t,e,n);return[r.any(T("x",t,e,n),a,u)]}case"ArgMax":{const a=T("axis",t,e,n);return[r.argMax(T("x",t,e,n),a)]}case"ArgMin":{const a=T("axis",t,e,n);return[r.argMin(T("x",t,e,n),a)]}case"Prod":{const a=T("axis",t,e,n),u=T("keepDims",t,e,n);return[r.prod(T("x",t,e,n),a,u)]}case"Cumprod":{const a=T("axis",t,e,n),u=T("exclusive",t,e,n),l=T("reverse",t,e,n);return[r.cumprod(T("x",t,e,n),a,u,l)]}case"Cumsum":{const a=T("axis",t,e,n),u=T("exclusive",t,e,n),l=T("reverse",t,e,n);return[r.cumsum(T("x",t,e,n),a,u,l)]}case"Bincount":const i=T("x",t,e,n),s=T("weights",t,e,n),o=T("size",t,e,n);return[r.bincount(i,s,o)];case"DenseBincount":{const a=T("x",t,e,n),u=T("weights",t,e,n),l=T("size",t,e,n),c=T("binaryOutput",t,e,n);return[r.denseBincount(a,u,l,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"slice_join":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"ConcatV2":case"Concat":{const i=T("n",t,e,n),s=T("axis",t,e,n);let o=T("tensors",t,e,n);return o=o.slice(0,i),[r.concat(o,s)]}case"Gather":{const i=T("x",t,e,n),s=T("indices",t,e,n);return[r.gather(i,r.cast(s,"int32"),0)]}case"GatherV2":{const i=T("axis",t,e,n),s=T("batchDims",t,e,n),o=T("x",t,e,n),a=T("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),i,s)]}case"Reverse":{const i=T("dims",t,e,n),s=[];for(let a=0;a<i.length;a++)i[a]&&s.push(a);const o=T("x",t,e,n);return[r.reverse(o,s)]}case"ReverseV2":{const i=T("axis",t,e,n),s=T("x",t,e,n);return[r.reverse(s,i)]}case"Slice":{const i=T("begin",t,e,n),s=T("size",t,e,n);return[r.slice(T("x",t,e,n),i,s)]}case"StridedSlice":{const i=T("begin",t,e,n),s=T("end",t,e,n),o=T("strides",t,e,n),a=T("beginMask",t,e,n),u=T("endMask",t,e,n),l=T("ellipsisMask",t,e,n),c=T("newAxisMask",t,e,n),h=T("shrinkAxisMask",t,e,n),g=T("x",t,e,n);return[r.stridedSlice(g,i,s,o,a,u,l,c,h)]}case"Pack":return Ca(()=>{const i=T("axis",t,e,n),s=T("tensors",t,e,n),o=s[0].shape,a=r.squeeze(s[0]).shape,u=s.map(l=>{const c=Wd(l.shape,o);if(!c&&!Wd(r.squeeze(l).shape,a))throw new Error("the input tensors shape does not match");return c?l:r.reshape(l,o)});return[r.stack(u,i)]});case"Unpack":{const i=T("axis",t,e,n),s=T("tensor",t,e,n);return r.unstack(s,i)}case"Tile":{const i=T("reps",t,e,n);return[r.tile(T("x",t,e,n),i)]}case"Split":case"SplitV":{const i=T("axis",t,e,n),s=T("numOrSizeSplits",t,e,n),o=T("x",t,e,n);return r.split(o,s,i)}case"ScatterNd":{const i=T("indices",t,e,n),s=T("values",t,e,n),o=T("shape",t,e,n);return[r.scatterND(i,s,o)]}case"GatherNd":{const i=T("x",t,e,n),s=T("indices",t,e,n);return[r.gatherND(i,s)]}case"SparseToDense":{const i=T("sparseIndices",t,e,n),s=T("outputShape",t,e,n),o=T("sparseValues",t,e,n),a=T("defaultValue",t,e,n);return[r.sparseToDense(i,o,s,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"sparse":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:s,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(T("indices",t,e,n),T("values",t,e,n),T("denseShape",t,e,n),T("defaultValue",t,e,n));return[i,s,o,a]}case"SparseReshape":{const{outputIndices:i,outputShape:s}=r.sparse.sparseReshape(T("inputIndices",t,e,n),T("inputShape",t,e,n),T("newShape",t,e,n));return[i,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"spectral":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"FFT":return[r.fft(T("x",t,e,n))];case"IFFT":return[r.ifft(T("x",t,e,n))];case"RFFT":return[r.rfft(T("x",t,e,n))];case"IRFFT":return[r.irfft(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"string":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"StringNGrams":{const{nGrams:i,nGramsSplits:s}=r.string.stringNGrams(T("data",t,e,n),T("dataSplits",t,e,n),T("separator",t,e,n),T("nGramWidths",t,e,n),T("leftPad",t,e,n),T("rightPad",t,e,n),T("padWidth",t,e,n),T("preserveShortSequences",t,e,n));return[i,s]}case"StringSplit":{const{indices:i,values:s,shape:o}=r.string.stringSplit(T("input",t,e,n),T("delimiter",t,e,n),T("skipEmpty",t,e,n));return[i,s,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(T("input",t,e,n),T("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"transformation":return i(()=>((t,e,n,r=We)=>{switch(t.op){case"Cast":return[r.cast(T("x",t,e,n),T("dtype",t,e,n))];case"ExpandDims":{const i=T("axis",t,e,n);return[r.expandDims(T("x",t,e,n),i)]}case"Squeeze":{const i=T("axis",t,e,n);return[r.squeeze(T("x",t,e,n),i)]}case"Reshape":return[r.reshape(T("x",t,e,n),T("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(T("x",t,e,n),T("padding",t,e,n),T("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(T("x",t,e,n),T("padding",t,e,n),T("constantValue",t,e,n))];case"SpaceToBatchND":{const i=T("blockShape",t,e,n),s=T("paddings",t,e,n);return[r.spaceToBatchND(T("x",t,e,n),i,s)]}case"BatchToSpaceND":{const i=T("blockShape",t,e,n),s=T("crops",t,e,n);return[r.batchToSpaceND(T("x",t,e,n),i,s)]}case"DepthToSpace":{const i=T("blockSize",t,e,n),s=T("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(T("x",t,e,n),i,s)]}case"BroadcastTo":return[r.broadcastTo(T("x",t,e,n),T("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(T("s0",t,e,n),T("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,u));case"hash_table":return bOe(o,a,u,r);case"custom":const l=Z7(o.op);if(l&&l.customExecutor)return l.customExecutor(new sOe(o,a,u));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return iy(s)?s.then(o=>[].concat(o)):[].concat(s)}class aQ{constructor(e={},n={},r={},i={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>0===n.id&&0===n.iterationId?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}function uQ(t,e,n,r){const i=new Set,s=[];let o=null,a=null;const u=new Set,l=Object.keys(t).map(g=>_o(g)[0]);let c=[];null!=r&&(c=r.map(g=>_o(g.name)[0]));const h=[...e];for(;h.length>0;){const g=h.pop();if((lQ(g)||MOe(g)||FOe(g))&&null==o&&(o=g,a=o.children.map(_=>_.name).filter(_=>i.has(_))),i.add(g.name),null==n[g.name]&&-1===l.indexOf(g.name)&&-1===c.indexOf(g.name)){if(0===g.inputs.length){s.push(g.name);continue}g.inputs.forEach(_=>{u.has(_.name)||(u.add(_.name),h.push(_))})}}return{inputs:t,outputs:e,usedNodes:i,missingInputs:s,dynamicNode:o,syncInputs:a}}const xOe=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],ROe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],OOe=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function lQ(t){return xOe.indexOf(t.op)>=0}function MOe(t){return ROe.indexOf(t.op)>=0}function FOe(t){return OOe.indexOf(t.op)>=0}class tS{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new tS(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(s=>s.name).sort(),i=n.map(s=>s.name).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)}compile(e,n){const r=uQ(e,n,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:s,syncInputs:o}=r;if(null!=s)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(i.length>0){const a=n.map(l=>l.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${a}] from the provided inputs [${u}]. Missing the following inputs: [${i}]`)}return function kOe(t,e,n){const{usedNodes:r,inputs:i}=n,s=[],o=Object.keys(i).map(c=>_o(c)[0]).map(c=>t.nodes[c]),a=t.initNodes;o.forEach(c=>{r.has(c.name)&&s.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&s.push(c)}),a?.forEach(c=>{r.has(c.name)&&s.push(c)});const u=new Set,l=[];for(;s.length>0;){const c=s.pop();u.add(c.name),e[c.name]||l.push(c),c.children.forEach(h=>{!u.has(h.name)&&r.has(h.name)&&h.inputs.every(g=>u.has(g.name))&&s.push(h)})}return l}(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const i=r.map(h=>this.graph.nodes[_o(h)[0]]),s=n.map(h=>_o(h)[0]);let o=s.map(h=>this.graph.nodes[h]);this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);const a=this.getCompilationKey(i,o);let u=this.compiledMap.get(a);null==u&&(u=this.compile(e,o),this.compiledMap.set(a,u));const l={},c={};return Ca(()=>{const h=new aQ(this.weightMap,l,c,this.functionExecutorMap),g=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[I,S]=_o(w),x=[];x[S]=e[w],g[I]=x});const _=this.getFrozenTensorIds(g),v={};for(let w=0;w<u.length;w++){const I=u[w];if(!g[I.name]){const S=oQ(I,g,h,this._resourceManager);if(iy(S))throw new Error(`The execution of the op '${I.op}' returned a promise. Please use model.executeAsync() instead.`);g[I.name]=S,this.checkTensorForDisposal(I.name,I,g,h,_,s,v)}}return null==this.parent&&h.dispose(_),n.map(w=>Is(w,g,h))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(n)}checkTensorForDisposal(e,n,r,i,s,o,a){"control"===n.category||-1!==o.indexOf(e)||(r[e].forEach(u=>{null!=u&&(a[u.id]=(a[u.id]||0)+n.children.length)}),n.inputs.forEach(u=>{if("control"!==u.category){const l=function LRe(t,e,n){return e[ZC(t,n.currentContextId)]}(u.name,r,i);l?.forEach(c=>{if(c&&!c.kept&&!s.has(c.id)){const h=a[c.id];if(1===h){if(this.keepTensorForDebug){const[g,_]=ul(n.name,i);this.intermediateTensors[g]||(this.intermediateTensors[g]=[]),this.intermediateTensors[g][_]=c}else c.dispose();delete a[c.id]}else null!=h&&a[c.id]--}})}}))}executeAsync(e,n){var r=this;return(0,Y.A)(function*(){return r._executeAsync(e,n)})()}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(r=>{r&&!r.kept&&!r.isDisposed&&!this.keepIds.has(r.id)&&r.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}_executeAsync(e,n,r=!1,i={},s={}){var o=this;return(0,Y.A)(function*(){r||(e=o.mapInputs(e),o.checkInputs(e),o.checkInputShapeAndType(e),n=o.mapOutputs(n),o.checkOutputs(n));try{o.keepTensorForDebug=wn().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){console.warn(h.message)}o.resetIntermediateTensors();const a=new aQ(o.weightMap,i,s,o.functionExecutorMap);o.tensorsMap=yield o.executeWithControlFlow(e,a,n,r);const u=n.map(h=>Is(h,o.tensorsMap,a)),l=u.map(h=>h.id),c=Object.keys(e).map(h=>e[h].id);return o.keepIds=new Set([...l,...c,...o.weightIds]),o.keepTensorForDebug||o.disposeTensorsMap(),null==o.parent&&a.dispose(o.keepIds),u})()}executeFunctionAsync(e,n,r){var i=this;return(0,Y.A)(function*(){const s=e.reduce((o,a,u)=>(o[i.inputs[u].name]=a,o),{});return i._executeAsync(s,i.outputNodes,!0,n,r)})()}executeWithControlFlow(e,n,r,i){var s=this;return(0,Y.A)(function*(){const o=Object.keys(e),a=o.map(U=>s.graph.nodes[_o(U)[0]]),u=r.map(U=>_o(U)[0]);let l=u.map(U=>s.graph.nodes[U]);0===l.length&&(l=s._outputs);const{usedNodes:c,missingInputs:h,dynamicNode:g,syncInputs:_}=uQ(e,l,s.weightMap,s._initNodes),v=[...a,...s.graph.weights,...s._initNodes||[]].map(U=>({node:U,contexts:n.currentContext})),w=Object.assign({},s.weightMap);Object.keys(e).forEach(U=>{const[he,de]=_o(U),R=[];R[de]=e[U],w[he]=R});const I={},S=s.getFrozenTensorIds(w),x={};for(;v.length>0;){const U=s.processStack(a,v,n,w,x,S,u,I,c);yield Promise.all(U)}null==g&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const O=l.filter(U=>!lQ(U)&&!Is(U.name,w,n)).map(U=>U.name);if(O.length>0){let U="";throw null!=g&&(U=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${_}]`),new Error(`Cannot compute the outputs [${O}] from the provided inputs [${o}]. Consider providing the following inputs: [${h}]. ${U}`)}return w})()}processStack(e,n,r,i,s,o,a,u,l){const c=[];for(;n.length>0;){const h=n.pop();r.currentContext=h.contexts;let g="";if("Enter"===h.node.op&&T("isConstant",h.node,i,r)&&([g]=ul(h.node.name,r)),null==i[h.node.name]){const _=oQ(h.node,i,r,this._resourceManager);g||([g]=ul(h.node.name,r));const v=r.currentContext;iy(_)?c.push(_.then(w=>(i[g]=w,r.currentContext=v,this.checkTensorForDisposal(g,h.node,i,r,o,a,u),this.processChildNodes(h.node,n,r,i,s,l),w))):(i[g]=_,this.checkTensorForDisposal(g,h.node,i,r,o,a,u),this.processChildNodes(h.node,n,r,i,s,l))}else this.processChildNodes(h.node,n,r,i,s,l)}return c}processChildNodes(e,n,r,i,s,o){e.children.forEach(a=>{const[u]=ul(a.name,r);s[u]||!o.has(a.name)||("Merge"===a.op?a.inputNames.some(l=>!!Is(l,i,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(l=>!!Is(l,i,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[i]=_o(n),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const o=s.attrParams.shape.value;L(o.length===r.shape.length&&r.shape.every((u,l)=>-1===o[l]||o[l]===u),()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&L(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[r]?n[this._signature.inputs[r].name]=e[r]:n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[i]=_o(r);return null==this.graph.nodes[i]});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[n]?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=_o(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class VOe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const LOe="?tfjs-format=file",$Oe="model.json";class cQ{constructor(e,n={},r=P){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new VOe}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(0===n.length)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return iy(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const s=this.artifacts.userDefinedMetadata;null!=s.signature&&(r=s.signature),null!=s.structuredOutputKeys&&(this.structuredOutputKeys=s.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const i=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new tS(eQ.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const s=eQ.Instance.transformGraph(e.modelInitializer);this.initializer=new tS(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}save(e,n){var r=this;return(0,Y.A)(function*(){if("string"==typeof e){const i=r.io.getSaveHandlers(e);if(0===i.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(i.length>1)throw new Error(`Found more than one (${i.length}) save handlers for URL '${e}'`);e=i[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(r.artifacts)})()}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const s={};return(r instanceof os?[r]:r).forEach((o,a)=>s[this.structuredOutputKeys[a]]=o),s}return r}normalizeInputs(e){if(!(e instanceof os||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,i)=>(n[r]=e[i],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}executeAsync(e,n){var r=this;return(0,Y.A)(function*(){e=r.normalizeInputs(e),n=r.normalizeOutputs(n);const i=yield r.executor.executeAsync(e,n);return i.length>1?i:i[0]})()}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}function J2(t){return Y2.apply(this,arguments)}function Y2(){return(Y2=(0,Y.A)(function*(t,e={},n=P){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&"string"==typeof t&&(t=function jOe(t){return t.endsWith("/")||(t+="/"),`${t}${$Oe}${LOe}`}(t));const r=new cQ(t,e,n);return yield r.load(),r})).apply(this,arguments)}function yc(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(h){h(c)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function _c(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(h){c=[6,h],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var dQ=function(t){for(var e=[],n=0,r=t;n<r.length;n++)e.push(r[n]);return e},hQ=function(){return function(){this.parent=null,this.children={},this.end=!1,this.word=[[],0,0]}}(),BOe=function(){function t(){this.root=new hQ}return t.prototype.insert=function(e,n,r){for(var i=this.root,s=dQ(e),o=0;o<s.length;o++)i.children[s[o]]||(i.children[s[o]]=new hQ,i.children[s[o]].parent=i,i.children[s[o]].word[0]=i.word[0].concat(s[o])),i=i.children[s[o]],o===s.length-1&&(i.end=!0,i.word[1]=n,i.word[2]=r)},t.prototype.commonPrefixSearch=function(e){for(var n=[],r=this.root.children[e[0]],i=0;i<e.length&&r;i++)r.end&&n.push(r.word),r=r.children[e[i+1]];return n.length||n.push([[e[0]],0,0]),n},t}(),X2=function(){function t(e,n){void 0===n&&(n=6),this.vocabulary=e,this.reservedSymbolsCount=n,this.trie=new BOe;for(var r=this.reservedSymbolsCount;r<this.vocabulary.length;r++)this.trie.insert(this.vocabulary[r][0],this.vocabulary[r][1],r)}return t.prototype.encode=function(e){var n=[],r=[],i=[];e=function UOe(t){var e=t.normalize("NFKC");return e.length>0?"\u2581"+e.replace(/ /g,"\u2581"):e}(e);for(var s=dQ(e),o=0;o<=s.length;o++)n.push({}),r.push(0),i.push(0);for(o=0;o<s.length;o++)for(var a=this.trie.commonPrefixSearch(s.slice(o)),u=0;u<a.length;u++){var l=a[u],c={key:l[0],score:l[1],index:l[2]};null==n[o+(h=l[0].length)][o]&&(n[o+h][o]=[]),n[o+h][o].push(c)}for(var h=0;h<=s.length;h++)for(var g in n[h]){var _=n[h][g];for(u=0;u<_.length;u++){var v=_[u],w=v.score+i[h-v.key.length];(0===i[h]||w>=i[h])&&(i[h]=w,r[h]=_[u].index)}}for(var I=[],S=r.length-1;S>0;)I.push(r[S]),S-=this.vocabulary[r[S]][0].length;var x=[],O=!1;for(o=0;o<I.length;o++){var U=I[o];O&&0===U||x.push(U),O=0===U}return x.reverse()},t}();function Z2(t){return yc(this,void 0,void 0,function(){return _c(this,function(e){switch(e.label){case 0:return[4,VAe(t)];case 1:return[2,e.sent().json()]}})})}var pQ="https://tfhub.dev/google/tfjs-model/universal-sentence-encoder-qa-ondevice/1",zOe=[0,1,2];!function(){function t(){}t.prototype.loadModel=function(){return yc(this,void 0,void 0,function(){return _c(this,function(e){return[2,J2(pQ,{fromTFHub:!0})]})})},t.prototype.load=function(){return yc(this,void 0,void 0,function(){var e,r;return _c(this,function(i){switch(i.label){case 0:return[4,Promise.all([this.loadModel(),Z2(pQ+"/vocab.json?tfjs-format=file")])];case 1:return e=i.sent(),r=e[1],this.model=e[0],this.tokenizer=new X2(r,3),[2]}})})},t.prototype.embed=function(e){var n=this,r=Ca(function(){var i=n.tokenizeStrings(e.queries,192),s=n.tokenizeStrings(e.responses,192);if(null!=e.contexts&&e.contexts.length!==e.responses.length)throw new Error("The length of response strings and context strings need to match.");var o=e.contexts||[];null==e.contexts&&(o.length=e.responses.length,o.fill(""));var a=n.tokenizeStrings(o,192),u={};return u.input_inp_text=i,u.input_res_text=s,u.input_res_context=a,n.model.execute(u,["Final/EncodeQuery/mul","Final/EncodeResult/mul"])});return{queryEmbedding:r[0],responseEmbedding:r[1]}},t.prototype.tokenizeStrings=function(e,n){var r=this;return Zf(e.map(function(s){return r.shiftTokens(r.tokenizer.encode(s),192)}),[e.length,192],"int32")},t.prototype.shiftTokens=function(e,n){e.unshift(1);for(var r=0;r<n;r++)r>=e.length?e[r]=2:zOe.includes(e[r])||(e[r]+=3);return e.slice(0,n)}}();var rMe=function(){function t(){}return t.prototype.loadModel=function(e){return yc(this,void 0,void 0,function(){return _c(this,function(n){return[2,e?J2(e):J2("https://tfhub.dev/tensorflow/tfjs-model/universal-sentence-encoder-lite/1/default/1",{fromTFHub:!0})]})})},t.prototype.load=function(e){return void 0===e&&(e={}),yc(this,void 0,void 0,function(){var n,i;return _c(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.loadModel(e.modelUrl),Z2(e.vocabUrl||"https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder/vocab.json")])];case 1:return n=s.sent(),i=n[1],this.model=n[0],this.tokenizer=new X2(i),[2]}})})},t.prototype.embed=function(e){return yc(this,void 0,void 0,function(){var n,r,i,s,o,a,l,c=this;return _c(this,function(h){switch(h.label){case 0:for("string"==typeof e&&(e=[e]),n=e.map(function(g){return c.tokenizer.encode(g)}),r=n.map(function(g,_){return g.map(function(v,w){return[_,w]})}),i=[],s=0;s<r.length;s++)i=i.concat(r[s]);return o=Zf(i,[i.length,2],"int32"),a=Aa(Eb(n),"int32"),[4,this.model.executeAsync({indices:o,values:a})];case 1:return l=h.sent(),o.dispose(),a.dispose(),[2,l]}})})},t}();const eF={methods:{one:{},two:{},three:{},four:{}},model:{one:{},two:{},three:{}},compute:{},hooks:[]},sMe={compute:function(t){const{world:e}=this,n=e.compute;return"string"==typeof t&&n.hasOwnProperty(t)?n[t](this):(t=>"[object Array]"===Object.prototype.toString.call(t))(t)?t.forEach(r=>{e.compute.hasOwnProperty(r)?n[r](this):console.warn("no compute:",t)}):"function"==typeof t?t(this):console.warn("no compute:",t),this}},oMe={forEach:function(t){return this.fullPointer.forEach((n,r)=>{let i=this.update([n]);t(i,r)}),this},map:function(t,e){let r=this.fullPointer.map((s,o)=>{let a=this.update([s]),u=t(a,o);return void 0===u?this.none():u});if(0===r.length)return e||this.update([]);if(void 0!==r[0]&&("string"==typeof r[0]||"object"==typeof r[0]&&(null===r[0]||!r[0].isView)))return r;let i=[];return r.forEach(s=>{i=i.concat(s.fullPointer)}),this.toView(i)},filter:function(t){let e=this.fullPointer;return e=e.filter((r,i)=>{let s=this.update([r]);return t(s,i)}),this.update(e)},find:function(t){let n=this.fullPointer.find((r,i)=>{let s=this.update([r]);return t(s,i)});return this.update([n])},some:function(t){return this.fullPointer.some((n,r)=>{let i=this.update([n]);return t(i,r)})},random:function(t=1){let e=this.fullPointer,n=Math.floor(Math.random()*e.length);return n+t>this.length&&(n=this.length-t,n=n<0?0:n),e=e.slice(n,n+t),this.update(e)}},mu={termList:function(){return this.methods.one.termList(this.docs)},terms:function(t){let e=this.match(".");return"number"==typeof t?e.eq(t):e},groups:function(t){if(t||0===t)return this.update(this._groups[t]||[]);let e={};return Object.keys(this._groups).forEach(n=>{e[n]=this.update(this._groups[n])}),e},eq:function(t){let e=this.pointer;return e||(e=this.docs.map((n,r)=>[r])),e[t]?this.update([e[t]]):this.none()},first:function(){return this.eq(0)},last:function(){return this.eq(this.fullPointer.length-1)},firstTerms:function(){return this.match("^.")},lastTerms:function(){return this.match(".$")},slice:function(t,e){let n=this.pointer||this.docs.map((r,i)=>[i]);return n=n.slice(t,e),this.update(n)},all:function(){return this.update().toView()},fullSentences:function(){let t=this.fullPointer.map(e=>[e[0]]);return this.update(t).toView()},none:function(){return this.update([])},isDoc:function(t){if(!t||!t.isView)return!1;let e=this.fullPointer,n=t.fullPointer;return!e.length!==n.length&&e.every((r,i)=>!!n[i]&&r[0]===n[i][0]&&r[1]===n[i][1]&&r[2]===n[i][2])},wordCount:function(){return this.docs.reduce((t,e)=>t+e.filter(n=>""!==n.text).length,0)},isFull:function(){let t=this.pointer;if(!t)return!0;if(0===t.length||0!==t[0][0])return!1;let e=0,n=0;return this.document.forEach(r=>e+=r.length),this.docs.forEach(r=>n+=r.length),e===n},getNth:function(t){return"number"==typeof t?this.eq(t):"string"==typeof t?this.if(t):this}};mu.group=mu.groups,mu.fullSentence=mu.fullSentences,mu.sentence=mu.fullSentences,mu.lastTerm=mu.lastTerms,mu.firstTerm=mu.firstTerms;const tF=Object.assign({},mu,sMe,oMe);tF.get=tF.eq;const aMe=tF;class yy{constructor(e,n,r={}){[["document",e],["world",eF],["_groups",r],["_cache",null],["viewType","View"]].forEach(s=>{Object.defineProperty(this,s[0],{value:s[1],writable:!0})}),this.ptrs=n}get docs(){let e=this.document;return this.ptrs&&(e=eF.methods.one.getDoc(this.ptrs,this.document)),e}get pointer(){return this.ptrs}get methods(){return this.world.methods}get model(){return this.world.model}get hooks(){return this.world.hooks}get isView(){return!0}get found(){return this.docs.length>0}get length(){return this.docs.length}get fullPointer(){let{docs:e,ptrs:n,document:r}=this;return(n||e.map((s,o)=>[o])).map(s=>{let[o,a,u,l,c]=s;return a=a||0,u=u||(r[o]||[]).length,r[o]&&r[o][a]&&(l=l||r[o][a].id,r[o][u-1]&&(c=c||r[o][u-1].id)),[o,a,u,l,c]})}update(e){let n=new yy(this.document,e);if(this._cache&&e&&e.length>0){let r=[];e.forEach((i,s)=>{let[o,a,u]=i;(1===i.length||0===a&&this.document[o].length===u)&&(r[s]=this._cache[o])}),r.length>0&&(n._cache=r)}return n.world=this.world,n}toView(e){return new yy(this.document,e||this.pointer)}fromText(e){const{methods:n}=this;let r=n.one.tokenize.fromString(e,this.world),i=new yy(r);return i.world=this.world,i.compute(["normal","freeze","lexicon"]),this.world.compute.preTagger&&i.compute("preTagger"),i.compute("unfreeze"),i}clone(){let e=this.document.slice(0);e=e.map(r=>r.map(i=>((i=Object.assign({},i)).tags=new Set(i.tags),i)));let n=this.update(this.pointer);return n.document=e,n._cache=this._cache,n}}Object.assign(yy.prototype,aMe);const nF=yy,mQ=function(t){return t&&"object"==typeof t&&!Array.isArray(t)};function gQ(t,e){if(mQ(e))for(const n in e)mQ(e[n])?(t[n]||Object.assign(t,{[n]:{}}),gQ(t[n],e[n])):Object.assign(t,{[n]:e[n]});return t}const dMe=function(t,e,n,r){const{methods:i,model:s,compute:o,hooks:a}=e;t.methods&&function lMe(t,e){for(const n in e)t[n]=t[n]||{},Object.assign(t[n],e[n])}(i,t.methods),t.model&&gQ(s,t.model),t.irregulars&&function(t,e){let n=t.two.models||{};Object.keys(e).forEach(r=>{e[r].pastTense&&(n.toPast&&(n.toPast.ex[r]=e[r].pastTense),n.fromPast&&(n.fromPast.ex[e[r].pastTense]=r)),e[r].presentTense&&(n.toPresent&&(n.toPresent.ex[r]=e[r].presentTense),n.fromPresent&&(n.fromPresent.ex[e[r].presentTense]=r)),e[r].gerund&&(n.toGerund&&(n.toGerund.ex[r]=e[r].gerund),n.fromGerund&&(n.fromGerund.ex[e[r].gerund]=r)),e[r].comparative&&(n.toComparative&&(n.toComparative.ex[r]=e[r].comparative),n.fromComparative&&(n.fromComparative.ex[e[r].comparative]=r)),e[r].superlative&&(n.toSuperlative&&(n.toSuperlative.ex[r]=e[r].superlative),n.fromSuperlative&&(n.fromSuperlative.ex[e[r].superlative]=r))})}(s,t.irregulars),t.compute&&Object.assign(o,t.compute),a&&(e.hooks=a.concat(t.hooks||[])),t.api&&t.api(n),t.lib&&Object.keys(t.lib).forEach(u=>r[u]=t.lib[u]),t.tags&&r.addTags(t.tags),t.words&&r.addWords(t.words),t.frozen&&r.addWords(t.frozen,!0),t.mutate&&t.mutate(e)},rF=function(t){return"[object Array]"===Object.prototype.toString.call(t)},yQ=function(t,e,n){const{methods:r}=n;let i=new e([]);if(i.world=n,"number"==typeof t&&(t=String(t)),!t)return i;if("string"==typeof t)return new e(r.one.tokenize.fromString(t,n));if((t=>"[object Object]"===Object.prototype.toString.call(t))(t)&&t.isView)return new e(t.document,t.ptrs);if(rF(t)){if(rF(t[0])){let o=function(t){return t.map(e=>e.map(n=>({text:n,normal:n,pre:"",post:" ",tags:new Set})))}(t);return new e(o)}let s=function(t){return t.map(e=>e.terms.map(n=>(rF(n.tags)&&(n.tags=new Set(n.tags)),n)))}(t);return new e(s)}return i};let nS=Object.assign({},eF);const vo=function(t,e){e&&vo.addWords(e);let n=yQ(t,nF,nS);return t&&n.compute(nS.hooks),n};Object.defineProperty(vo,"_world",{value:nS,writable:!0}),vo.tokenize=function(t,e){const{compute:n}=this._world;e&&vo.addWords(e);let r=yQ(t,nF,nS);return n.contractions&&r.compute(["alias","normal","machine","contractions"]),r},vo.plugin=function(t){return dMe(t,this._world,nF,this),this},vo.extend=vo.plugin,vo.world=function(){return this._world},vo.model=function(){return this._world.model},vo.methods=function(){return this._world.methods},vo.hooks=function(){return this._world.hooks},vo.verbose=function(t){const e=typeof process>"u"||!process.env?self.env||{}:process.env;return e.DEBUG_TAGS="tagger"===t||!0===t||"",e.DEBUG_MATCH="match"===t||!0===t||"",e.DEBUG_CHUNKS="chunker"===t||!0===t||"",this},vo.version="14.13.0";const bo=vo,gMe={one:{cacheDoc:function(t){return t.map(n=>{let r=new Set;return n.forEach(i=>{""!==i.normal&&r.add(i.normal),i.switch&&r.add(`%${i.switch}%`),i.implicit&&r.add(i.implicit),i.machine&&r.add(i.machine),i.root&&r.add(i.root),i.alias&&i.alias.forEach(o=>r.add(o));let s=Array.from(i.tags);for(let o=0;o<s.length;o+=1)r.add("#"+s[o])}),r})}}},yMe={cache:function(){return this._cache=this.methods.one.cacheDoc(this.document),this},uncache:function(){return this._cache=null,this}},_Me={api:function(t){Object.assign(t.prototype,yMe)},compute:{cache:function(t){t._cache=t.methods.one.cacheDoc(t.document)}},methods:gMe},_Q=t=>new RegExp("^\\p{Lu}[\\p{Ll}'\u2019]","u").test(t)||new RegExp("^\\p{Lu}$","u").test(t),vQ=(t,e,n)=>{if(n.forEach(r=>r.dirty=!0),t){let r=[e,0].concat(n);Array.prototype.splice.apply(t,r)}return t},_y=function(t){let r=t[t.length-1];r&&!/ $/.test(r.post)&&!/[-\u2013\u2014]/.test(r.post)&&(r.post+=" ")},bQ=(t,e,n)=>{const r=/[-.?!,;:)\u2013\u2014'"]/g;let i=t[e-1];if(!i)return;let s=i.post;if(r.test(s)){let o=s.match(r).join(""),a=n[n.length-1];a.post=o+a.post,i.post=i.post.replace(r,"")}};let Lb=0;const wQ=t=>(t=t.length<3?"0"+t:t).length<3?"0"+t:t,EQ=function(t){let[e,n]=t.index||[0,0];Lb+=1,Lb=Lb>46655?0:Lb,e=e>46655?0:e,n=n>1294?0:n;let r=wQ(Lb.toString(36));r+=wQ(e.toString(36));let i=n.toString(36);return i=i.length<2?"0"+i:i,r+=i,r+=parseInt(36*Math.random(),10).toString(36),t.normal+"|"+r.toUpperCase()},TQ=function(t){t.has("@hasContraction")&&"function"==typeof t.contractions&&t.grow("@hasContraction").contractions().expand()},IQ=t=>"[object Array]"===Object.prototype.toString.call(t),AQ=function(t,e,n){const{document:r,world:i}=e;e.uncache();let s=e.fullPointer,o=e.fullPointer;e.forEach((u,l)=>{let c=u.fullPointer[0],[h]=c,g=r[h],_=function(t,e){const{methods:n}=e;return"string"==typeof t?n.one.tokenize.fromString(t,e)[0]:"object"==typeof t&&t.isView?t.clone().docs[0]||[]:IQ(t)?IQ(t[0])?t[0]:t:[]}(t,i);0!==_.length&&(_=function(t){return t.map(e=>(e.id=EQ(e),e))}(_),n?(TQ(e.update([c]).firstTerm()),function(t,e,n,r){let[i,s,o]=e;0===s||o===r[i].length?_y(n):(_y(n),_y([t[e[1]]])),function(t,e,n){if(0!==e||!_Q(t[e].text))return;n[0].text=(t=>t.replace(new RegExp("^\\p{Ll}","u"),e=>e.toUpperCase()))(n[0].text);let i=t[e];i.tags.has("ProperNoun")||i.tags.has("Acronym")||_Q(i.text)&&i.text.length>1&&(i.text=(t=>t.replace(new RegExp("^\\p{Lu}","u"),e=>e.toLowerCase()))(i.text))}(t,s,n),vQ(t,s,n)}(g,c,_,r)):(TQ(e.update([c]).lastTerm()),function(t,e,n,r){let[i,,s]=e,o=(r[i]||[]).length;s<o?(bQ(t,s,n),_y(n)):o===s&&(_y(t),bQ(t,s,n),r[i+1]&&(n[n.length-1].post+=" ")),vQ(t,e[2],n),e[4]=n[n.length-1].id}(g,c,_,r)),r[h]&&r[h][c[1]]&&(c[3]=r[h][c[1]].id),o[l]=c,c[2]+=_.length,s[l]=c)});let a=e.toView(s);return e.ptrs=o,a.compute(["id","index","freeze","lexicon"]),a.world.compute.preTagger&&a.compute("preTagger"),a.compute("unfreeze"),a},np={insertAfter:function(t){return AQ(t,this,!1)},insertBefore:function(t){return AQ(t,this,!0)}};np.append=np.insertAfter,np.prepend=np.insertBefore,np.insert=np.insertAfter;const SMe=np,DMe=/\$[0-9a-z]+/g,iF={replaceWith:function(t,e={}){let n=this.fullPointer,r=this;if(this.uncache(),"function"==typeof t)return function(t,e){return t.forEach(n=>{let r=e(n);n.replaceWith(r)}),t}(r,t);let i=r.docs[0],s=e.possessives&&i[i.length-1].tags.has("Possessive");t=function(t,e){if("string"!=typeof t)return t;let n=e.groups();return t.replace(DMe,r=>{let i=r.replace(/\$/,"");return n.hasOwnProperty(i)?n[i].text():r})}(t,r);let o=this.update(n);n=n.map(l=>l.slice(0,3));let a=(o.docs[0]||[]).map(l=>Array.from(l.tags));if("string"==typeof t&&(t=this.fromText(t).compute("id")),r.insertAfter(t),o.has("@hasContraction")&&r.contractions&&r.grow("@hasContraction+").contractions().expand(),r.delete(o),s){let l=r.docs[0],c=l[l.length-1];c.tags.has("Possessive")||(c.text+="'s",c.normal+="'s",c.tags.add("Possessive"))}let u=r.toView(n).compute(["index","freeze","lexicon"]);return u.world.compute.preTagger&&u.compute("preTagger"),u.compute("unfreeze"),e.tags&&u.terms().forEach((l,c)=>{l.tagSafe(a[c])}),e.case&&u.docs[0]&&u.docs[0][0]&&0===u.docs[0][0].index[1]&&(u.docs[0][0].text=function(t){return t.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())}(u.docs[0][0].text)),u},replace:function(t,e,n){if(t&&!e)return this.replaceWith(t,n);let r=this.match(t);return r.found?(this.soften(),r.replaceWith(e,n)):this}},xMe=iF,sF={remove:function(t){const{indexN:e}=this.methods.one.pointer;this.uncache();let n=this.all(),r=this;t&&(n=this,r=this.match(t));let i=!n.ptrs;r.has("@hasContraction")&&r.contractions&&r.grow("@hasContraction").contractions().expand();let s=n.fullPointer,o=r.fullPointer.reverse(),a=function(t,e){e.forEach(n=>{let[r,i,s]=n,o=s-i;t[r]&&(s===t[r].length&&s>1&&function(t,e){let n=t.length-1,r=t[n],i=t[n-e];i&&r&&(i.post+=r.post,i.post=i.post.replace(/ +([.?!,;:])/,"$1"),i.post=i.post.replace(/[,;:]+([.?!])/,"$1"))}(t[r],o),t[r].splice(i,o))});for(let n=t.length-1;n>=0;n-=1)if(0===t[n].length&&(t.splice(n,1),n===t.length&&t[n-1])){let r=t[n-1],i=r[r.length-1];i&&(i.post=i.post.trimEnd())}return t}(this.document,o);return s=function(t,e){return(t=t.map(n=>{let[r]=n;return e[r]&&e[r].forEach(i=>{n[1]<=i[1]&&n[2]>=i[2]&&(n[2]-=i[2]-i[1])}),n})).forEach((n,r)=>{if(0===n[1]&&0==n[2])for(let i=r+1;i<t.length;i+=1)t[i][0]-=1,t[i][0]<0&&(t[i][0]=0)}),t=(t=t.filter(n=>n[2]-n[1]>0)).map(n=>(n[3]=null,n[4]=null,n))}(s,e(o)),n.ptrs=s,n.document=a,n.compute("index"),i&&(n.ptrs=void 0),t?n.toView(s):(this.ptrs=[],n.none())}};sF.delete=sF.remove;const FMe=sF,$b={pre:function(t,e){return void 0===t&&this.found?this.docs[0][0].pre:(this.docs.forEach(n=>{let r=n[0];!0===e?r.pre+=t:r.pre=t}),this)},post:function(t,e){if(void 0===t){let n=this.docs[this.docs.length-1];return n[n.length-1].post}return this.docs.forEach(n=>{let r=n[n.length-1];!0===e?r.post+=t:r.post=t}),this},trim:function(){if(!this.found)return this;let t=this.docs,e=t[0][0];e.pre=e.pre.trimStart();let n=t[t.length-1],r=n[n.length-1];return r.post=r.post.trimEnd(),this},hyphenate:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{0!==n&&(e.pre=""),t[n+1]&&(e.post="-")})}),this},dehyphenate:function(){const t=/[-\u2013\u2014]/;return this.docs.forEach(e=>{e.forEach(n=>{t.test(n.post)&&(n.post=" ")})}),this},toQuotations:function(t,e){return t=t||'"',e=e||'"',this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this},toParentheses:function(t,e){return t=t||"(",e=e||")",this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this}};$b.deHyphenate=$b.dehyphenate,$b.toQuotation=$b.toQuotations;const VMe=$b,oF={alpha:(t,e)=>t.normal<e.normal?-1:t.normal>e.normal?1:0,length:(t,e)=>{let n=t.normal.trim().length,r=e.normal.trim().length;return n<r?1:n>r?-1:0},wordCount:(t,e)=>t.words<e.words?1:t.words>e.words?-1:0,sequential:(t,e)=>t[0]<e[0]?1:t[0]>e[0]?-1:t[1]>e[1]?1:-1,byFreq:function(t){let e={};return t.forEach(n=>{e[n.normal]=e[n.normal]||0,e[n.normal]+=1}),t.sort((n,r)=>{let i=e[n.normal],s=e[r.normal];return i<s?1:i>s?-1:0}),t}},LMe=new Set(["index","sequence","seq","sequential","chron","chronological"]),$Me=new Set(["freq","frequency","topk","repeats"]),jMe=new Set(["alpha","alphabetical"]),UMe={unique:function(){let t=new Set;return this.filter(n=>{let r=n.text("machine");return!t.has(r)&&(t.add(r),!0)})},reverse:function(){let t=this.pointer||this.docs.map((e,n)=>[n]);return t=[].concat(t),t=t.reverse(),this._cache&&(this._cache=this._cache.reverse()),this.update(t)},sort:function(t){let{docs:e,pointer:n}=this;if(this.uncache(),"function"==typeof t)return function(t,e){let n=t.fullPointer;return n=n.sort((r,i)=>(r=t.update([r]),i=t.update([i]),e(r,i))),t.ptrs=n,t}(this,t);t=t||"alpha";let r=n||e.map((s,o)=>[o]),i=e.map((s,o)=>({index:o,words:s.length,normal:s.map(a=>a.machine||a.normal||"").join(" "),pointer:r[o]}));return LMe.has(t)&&(t="sequential"),jMe.has(t)&&(t="alpha"),$Me.has(t)?(i=oF.byFreq(i),this.update(i.map(s=>s.pointer))):"function"==typeof oF[t]?(i=i.sort(oF[t]),this.update(i.map(s=>s.pointer))):this}},CQ=function(t,e){if(t.length>0){let n=t[t.length-1],r=n[n.length-1];!1===/ /.test(r.post)&&(r.post+=" ")}return t.concat(e)},GMe=Object.assign({},{toLowerCase:function(){return this.termList().forEach(t=>{t.text=t.text.toLowerCase()}),this},toUpperCase:function(){return this.termList().forEach(t=>{t.text=t.text.toUpperCase()}),this},toTitleCase:function(){return this.termList().forEach(t=>{t.text=t.text.replace(/^ *[a-z\u00C0-\u00FF]/,e=>e.toUpperCase())}),this},toCamelCase:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{0!==n&&(e.text=e.text.replace(/^ *[a-z\u00C0-\u00FF]/,r=>r.toUpperCase())),n!==t.length-1&&(e.post="")})}),this}},SMe,xMe,FMe,VMe,UMe,{concat:function(t){if("string"==typeof t){let e=this.fromText(t);if(this.found&&this.ptrs){let n=this.fullPointer;this.document.splice(n[n.length-1][0],0,...e.document)}else this.document=this.document.concat(e.document);return this.all().compute("index")}if("object"==typeof t&&t.isView)return function(t,e){if(t.document===e.document){let r=t.fullPointer.concat(e.fullPointer);return t.toView(r).compute("index")}return e.fullPointer.forEach(r=>{r[0]+=t.document.length}),t.document=CQ(t.document,e.docs),t.all()}(this,t);if((t=>"[object Array]"===Object.prototype.toString.call(t))(t)){let e=CQ(this.document,t);return this.document=e,this.all()}return this}},{harden:function(){return this.ptrs=this.fullPointer,this},soften:function(){let t=this.ptrs;return!t||t.length<1||(t=t.map(e=>e.slice(0,3)),this.ptrs=t),this}}),qMe={api:function(t){Object.assign(t.prototype,GMe)},compute:{id:function(t){let e=t.docs;for(let n=0;n<e.length;n+=1)for(let r=0;r<e[n].length;r+=1){let i=e[n][r];i.id=i.id||EQ(i)}}}},zo=!0,KMe={one:{contractions:[{word:"@",out:["at"]},{word:"arent",out:["are","not"]},{word:"alot",out:["a","lot"]},{word:"brb",out:["be","right","back"]},{word:"cannot",out:["can","not"]},{word:"dun",out:["do","not"]},{word:"can't",out:["can","not"]},{word:"shan't",out:["should","not"]},{word:"won't",out:["will","not"]},{word:"that's",out:["that","is"]},{word:"what's",out:["what","is"]},{word:"let's",out:["let","us"]},{word:"dunno",out:["do","not","know"]},{word:"gonna",out:["going","to"]},{word:"gotta",out:["have","got","to"]},{word:"gimme",out:["give","me"]},{word:"outta",out:["out","of"]},{word:"tryna",out:["trying","to"]},{word:"gtg",out:["got","to","go"]},{word:"im",out:["i","am"]},{word:"imma",out:["I","will"]},{word:"imo",out:["in","my","opinion"]},{word:"irl",out:["in","real","life"]},{word:"ive",out:["i","have"]},{word:"rn",out:["right","now"]},{word:"tbh",out:["to","be","honest"]},{word:"wanna",out:["want","to"]},{word:"c'mere",out:["come","here"]},{word:"c'mon",out:["come","on"]},{word:"shoulda",out:["should","have"]},{word:"coulda",out:["coulda","have"]},{word:"woulda",out:["woulda","have"]},{word:"musta",out:["must","have"]},{word:"tis",out:["it","is"]},{word:"twas",out:["it","was"]},{word:"y'know",out:["you","know"]},{word:"ne'er",out:["never"]},{word:"o'er",out:["over"]},{after:"ll",out:["will"]},{after:"ve",out:["have"]},{after:"re",out:["are"]},{after:"m",out:["am"]},{before:"c",out:["ce"]},{before:"m",out:["me"]},{before:"n",out:["ne"]},{before:"qu",out:["que"]},{before:"s",out:["se"]},{before:"t",out:["tu"]},{word:"shouldnt",out:["should","not"]},{word:"couldnt",out:["could","not"]},{word:"wouldnt",out:["would","not"]},{word:"hasnt",out:["has","not"]},{word:"wasnt",out:["was","not"]},{word:"isnt",out:["is","not"]},{word:"cant",out:["can","not"]},{word:"dont",out:["do","not"]},{word:"wont",out:["will","not"]},{word:"howd",out:["how","did"]},{word:"whatd",out:["what","did"]},{word:"whend",out:["when","did"]},{word:"whered",out:["where","did"]}],numberSuffixes:{st:zo,nd:zo,rd:zo,th:zo,am:zo,pm:zo,max:zo,"\xb0":zo,s:zo,e:zo,er:zo,\u00e8re:zo,\u00e8me:zo}}},aF=function(t,e,n){let[r,i]=e;!n||0===n.length||((n=n.map((s,o)=>(s.implicit=s.text,s.machine=s.text,s.pre="",s.post="",s.text="",s.normal="",s.index=[r,i+o],s)))[0]&&(n[0].pre=t[r][i].pre,n[n.length-1].post=t[r][i].post,n[0].text=t[r][i].text,n[0].normal=t[r][i].normal),t[r].splice(i,1,...n))},QMe=/'/,JMe=new Set(["what","how","when","where","why"]),YMe=new Set(["be","go","start","think","need"]),XMe=new Set(["been","gone"]),uF=/'/,t2e=/(e|\xe9|aison|sion|tion)$/,n2e=/(age|isme|acle|ege|oire)$/,r2e=/^([0-9.]{1,4}[a-z]{0,2}) ?[-\u2013\u2014] ?([0-9]{1,4}[a-z]{0,2})$/i,i2e=/^([0-9]{1,2}(:[0-9][0-9])?(am|pm)?) ?[-\u2013\u2014] ?([0-9]{1,2}(:[0-9][0-9])?(am|pm)?)$/i,s2e=/^[0-9]{3}-[0-9]{4}$/,o2e=function(t,e){let n=t[e],r=n.text.match(r2e);return null!==r?!0===n.tags.has("PhoneNumber")||s2e.test(n.text)?null:[r[1],"to",r[2]]:(r=n.text.match(i2e),null!==r?[r[1],"to",r[4]]:null)},a2e=/^([+-]?[0-9][.,0-9]*)([a-z\xb0\xb2\xb3\xb5/]+)$/,u2e=function(t,e,n){const r=n.model.one.numberSuffixes||{};let s=t[e].text.match(a2e);if(null!==s){let o=s[2].toLowerCase().trim();return r.hasOwnProperty(o)?null:[s[1],o]}return null},SQ=/'/,l2e=/^[0-9][^-\u2013\u2014]*[-\u2013\u2014].*?[0-9]/,DQ=function(t,e,n,r){let i=e.update();i.document=[t];let s=n+r;n>0&&(n-=1),t[s]&&(s+=1),i.ptrs=[[0,n,s]]},NQ={t:(t,e)=>function(t,e){return"ain't"===t[e].normal||"aint"===t[e].normal?null:[t[e].normal.replace(/n't/,""),"not"]}(t,e),d:(t,e)=>function(t,e){let n=t[e].normal.split(QMe)[0];if(JMe.has(n))return[n,"did"];if(t[e+1]){if(XMe.has(t[e+1].normal))return[n,"had"];if(YMe.has(t[e+1].normal))return[n,"would"]}return null}(t,e)},PQ={j:(t,e)=>((t,e)=>["je",t[e].normal.split(uF)[1]])(t,e),l:(t,e)=>((t,e)=>{let n=t[e].normal.split(uF)[1];return n&&n.endsWith("e")?["la",n]:["le",n]})(t,e),d:(t,e)=>((t,e)=>{let n=t[e].normal.split(uF)[1];return n&&t2e.test(n)&&!n2e.test(n)?["du",n]:n&&n.endsWith("s")?["des",n]:["de",n]})(t,e)},c2e=function(t,e,n,r){for(let i=0;i<t.length;i+=1){let s=t[i];if(s.word===e.normal)return s.out;if(null!==r&&r===s.after)return[n].concat(s.out);if(null!==n&&n===s.before&&r&&r.length>2)return s.out.concat(r)}return null},cF=function(t,e){let n=e.fromText(t.join(" "));return n.compute(["id","alias"]),n.docs[0]},d2e=function(t,e){for(let n=e+1;n<5&&t[n];n+=1)if("been"===t[n].normal)return["there","has"];return["there","is"]},h2e={model:KMe,compute:{contractions:t=>{let{world:e,document:n}=t;const{model:r,methods:i}=e;let s=r.one.contractions||[];n.forEach((o,a)=>{for(let u=o.length-1;u>=0;u-=1){let l=null,c=null;if(!0===SQ.test(o[u].normal)){let g=o[u].normal.split(SQ);l=g[0],c=g[1]}let h=c2e(s,o[u],l,c);!h&&NQ.hasOwnProperty(c)&&(h=NQ[c](o,u,e)),!h&&PQ.hasOwnProperty(l)&&(h=PQ[l](o,u)),"there"===l&&"s"===c&&(h=d2e(o,u)),h?(h=cF(h,t),aF(n,[a,u],h),DQ(n[a],t,u,h.length)):l2e.test(o[u].normal)?(h=o2e(o,u),h&&(h=cF(h,t),aF(n,[a,u],h),i.one.setTag(h,"NumberRange",e),h[2]&&h[2].tags.has("Time")&&i.one.setTag([h[0]],"Time",e,null,"time-range"),DQ(n[a],t,u,h.length))):(h=u2e(o,u,e),h&&(h=cF(h,t),aF(n,[a,u],h),i.one.setTag([h[1]],"Unit",e,null,"contraction-unit")))}})}},hooks:["contractions"]},kQ=function(t){const e=t.world,{model:n,methods:r}=t.world,i=r.one.setTag,{frozenLex:s}=n.one,o=n.one._multiCache||{};t.docs.forEach(a=>{for(let u=0;u<a.length;u+=1){let l=a[u],c=l.machine||l.normal;if(void 0!==o[c]&&a[u+1])for(let g=u+o[c]-1;g>u;g-=1){let _=a.slice(u,g+1),v=_.map(w=>w.machine||w.normal).join(" ");!0!==s.hasOwnProperty(v)||(i(_,s[v],e,!1,"1-frozen-multi-lexicon"),_.forEach(w=>w.frozen=!0))}void 0!==s[c]&&s.hasOwnProperty(c)&&(i([l],s[c],e,!1,"1-freeze-lexicon"),l.frozen=!0)}})},f2e={frozen:kQ,freeze:kQ,unfreeze:function(t){return t.docs.forEach(e=>{e.forEach(n=>{delete n.frozen})}),t}},xQ=t=>"\x1b[34m"+t+"\x1b[0m",RQ=t=>"\x1b[3m\x1b[2m"+t+"\x1b[0m",OQ=function(t){t.docs.forEach(e=>{console.log(xQ("\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500")),e.forEach(n=>{let r=`  ${RQ("\u2502")}  `,i=n.implicit||n.text||"-";r+=!0===n.frozen?`${xQ(i)} \u2744\ufe0f`:RQ(i),console.log(r)})})},p2e={compute:f2e,mutate:t=>{const e=t.methods.one;e.termMethods.isFrozen=n=>!0===n.frozen,e.debug.freeze=OQ,e.debug.frozen=OQ},api:function(t){t.prototype.freeze=function(){return this.docs.forEach(e=>{e.forEach(n=>{n.frozen=!0})}),this},t.prototype.unfreeze=function(){this.compute("unfreeze")},t.prototype.isFrozen=function(){return this.match("@isFrozen+")}},hooks:["freeze"]},m2e=function(t,e,n){const{model:r,methods:i}=n,s=i.one.setTag,o=r.one._multiCache||{},{lexicon:a}=r.one||{};let u=t[e],l=u.machine||u.normal;if(void 0!==o[l]&&t[e+1]){for(let h=e+o[l]-1;h>e;h-=1){let g=t.slice(e,h+1);if(g.length<=1)return!1;let _=g.map(v=>v.machine||v.normal).join(" ");if(!0===a.hasOwnProperty(_)){let v=a[_];return s(g,v,n,!1,"1-multi-lexicon"),v&&2===v.length&&("PhrasalVerb"===v[0]||"PhrasalVerb"===v[1])&&s([g[1]],"Particle",n,!1,"1-phrasal-particle"),!0}}return!1}return null},MQ=/^(under|over|mis|re|un|dis|semi|pre|post)-?/,g2e=new Set(["Verb","Infinitive","PastTense","Gerund","PresentTense","Adjective","Participle"]),y2e=function(t,e,n){const{model:r,methods:i}=n,s=i.one.setTag,{lexicon:o}=r.one;let a=t[e],u=a.machine||a.normal;if(void 0!==o[u]&&o.hasOwnProperty(u))return s([a],o[u],n,!1,"1-lexicon"),!0;if(a.alias){let l=a.alias.find(c=>o.hasOwnProperty(c));if(l)return s([a],o[l],n,!1,"1-lexicon-alias"),!0}if(!0===MQ.test(u)){let l=u.replace(MQ,"");if(o.hasOwnProperty(l)&&l.length>3&&g2e.has(o[l]))return s([a],o[l],n,!1,"1-lexicon-prefix"),!0}return null},_2e={model:{one:{lexicon:{},_multiCache:{},frozenLex:{}}},methods:{one:{expandLexicon:function(t){let e={},n={};return Object.keys(t).forEach(r=>{let i=t[r],s=(r=(r=r.toLowerCase().trim()).replace(/'s\b/,"")).split(/ /);s.length>1&&(void 0===n[s[0]]||s.length>n[s[0]])&&(n[s[0]]=s.length),e[r]=e[r]||i}),delete e[""],delete e.null,delete e[" "],{lex:e,_multi:n}}}},compute:{lexicon:function(t){const e=t.world;t.docs.forEach(n=>{for(let r=0;r<n.length;r+=1)if(0===n[r].tags.size){let i=null;i=i||m2e(n,r,e),i=i||y2e(n,r,e)}})}},lib:{addWords:function(t,e=!1){const n=this.world(),{methods:r,model:i}=n;if(!t)return;if(Object.keys(t).forEach(a=>{"string"==typeof t[a]&&t[a].startsWith("#")&&(t[a]=t[a].replace(/^#/,""))}),!0===e){let{lex:a,_multi:u}=r.one.expandLexicon(t,n);return Object.assign(i.one._multiCache,u),void Object.assign(i.one.frozenLex,a)}if(r.two.expandLexicon){let{lex:a,_multi:u}=r.two.expandLexicon(t,n);Object.assign(i.one.lexicon,a),Object.assign(i.one._multiCache,u)}let{lex:s,_multi:o}=r.one.expandLexicon(t,n);Object.assign(i.one.lexicon,s),Object.assign(i.one._multiCache,o)}},hooks:["lexicon"]},FQ=function(t,e){let n=[{}],r=[null],i=[0],s=[],o=0;t.forEach(function(a){let u=0,l=function(t,e){const{methods:n,model:r}=e;return n.one.tokenize.splitTerms(t,r).map(s=>n.one.tokenize.splitWhitespace(s,r)).map(s=>s.text.toLowerCase())}(a,e);for(let c=0;c<l.length;c++){let h=l[c];n[u]&&n[u].hasOwnProperty(h)?u=n[u][h]:(o++,n[u][h]=o,n[o]={},u=o,r[o]=null)}r[u]=[l.length]});for(let a in n[0])o=n[0][a],i[o]=0,s.push(o);for(;s.length;){let a=s.shift(),u=Object.keys(n[a]);for(let l=0;l<u.length;l+=1){let c=u[l],h=n[a][c];for(s.push(h),o=i[a];o>0&&!n[o].hasOwnProperty(c);)o=i[o];if(n.hasOwnProperty(o)){let g=n[o][c];i[h]=g,r[g]&&(r[h]=r[h]||[],r[h]=r[h].concat(r[g]))}else i[h]=0}}return{goNext:n,endAs:r,failTo:i}},b2e=function(t,e,n){let r=0,i=[];for(let s=0;s<t.length;s++){let o=t[s][n.form]||t[s].normal;for(;r>0&&(void 0===e.goNext[r]||!e.goNext[r].hasOwnProperty(o));)r=e.failTo[r]||0;if(e.goNext[r].hasOwnProperty(o)&&(r=e.goNext[r][o],e.endAs[r])){let a=e.endAs[r];for(let u=0;u<a.length;u++){let l=a[u],c=t[s-l+1],[h,g]=c.index;i.push([h,g,g+l,c.id])}}}return i},w2e=function(t,e){for(let n=0;n<t.length;n+=1)if(!0===e.has(t[n]))return!1;return!0},dF=(t,e)=>{for(let n=t.length-1;n>=0;n-=1)if(t[n]!==e)return t.slice(0,n+1);return t},hF={buildTrie:function(t){return function(t){return t.goNext=t.goNext.map(e=>{if(0!==Object.keys(e).length)return e}),t.goNext=dF(t.goNext,void 0),t.failTo=dF(t.failTo,0),t.endAs=dF(t.endAs,null),t}(FQ(t,this.world()))}};hF.compile=hF.buildTrie;const C2e={api:function I2e(t){t.prototype.lookup=function(e,n={}){if(!e)return this.none();"string"==typeof e&&(e=[e]);let r=(t=>"[object Object]"===Object.prototype.toString.call(t))(e)?e:FQ(e,this.world),i=function(t,e,n){let r=[];n.form=n.form||"normal";let i=t.docs;if(!e.goNext||!e.goNext[0])return console.error("Compromise invalid lookup trie"),t.none();let s=Object.keys(e.goNext[0]);for(let o=0;o<i.length;o++){if(t._cache&&t._cache[o]&&!0===w2e(s,t._cache[o]))continue;let u=b2e(i[o],e,n);u.length>0&&(r=r.concat(u))}return t.update(r)}(this,r,n);return i=i.settle(),i}},lib:hF},VQ=function(t,e){return e&&t.forEach(n=>{let r=n[0];e[r]&&(n[0]=e[r][0],n[1]+=e[r][1],n[2]+=e[r][1])}),t},LQ=function(t,e){let{ptrs:n,byGroup:r}=t;return n=VQ(n,e),Object.keys(r).forEach(i=>{r[i]=VQ(r[i],e)}),{ptrs:n,byGroup:r}},jb=function(t,e,n){const r=n.methods.one;return"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=r.killUnicode(t,n),t=r.parseMatch(t,e,n)),t},$Q=t=>"[object Object]"===Object.prototype.toString.call(t),Bb=t=>t&&$Q(t)&&!0===t.isView,Ub=t=>t&&$Q(t)&&!0===t.isNet,S2e={matchOne:function(t,e,n){const r=this.methods.one;if(Bb(t))return this.intersection(t).eq(0);if(Ub(t))return this.sweep(t,{tagger:!1,matchOne:!0}).view;t=jb(t,n,this.world);let s=r.match(this.docs,{regs:t,group:e,justOne:!0},this._cache),{ptrs:o,byGroup:a}=LQ(s,this.fullPointer),u=this.toView(o);return u._groups=a,u},match:function(t,e,n){const r=this.methods.one;if(Bb(t))return this.intersection(t);if(Ub(t))return this.sweep(t,{tagger:!1}).view.settle();t=jb(t,n,this.world);let s=r.match(this.docs,{regs:t,group:e},this._cache),{ptrs:o,byGroup:a}=LQ(s,this.fullPointer),u=this.toView(o);return u._groups=a,u},has:function(t,e,n){const r=this.methods.one;return Bb(t)?this.intersection(t).fullPointer.length>0:Ub(t)?this.sweep(t,{tagger:!1}).view.found:(t=jb(t,n,this.world),r.match(this.docs,{regs:t,group:e,justOne:!0},this._cache).ptrs.length>0)},if:function(t,e,n){const r=this.methods.one;if(Bb(t))return this.filter(u=>u.intersection(t).found);if(Ub(t)){let u=this.sweep(t,{tagger:!1}).view.settle();return this.if(u)}let i={regs:t=jb(t,n,this.world),group:e,justOne:!0},s=this.fullPointer,o=this._cache||[];s=s.filter((u,l)=>{let c=this.update([u]);return r.match(c.docs,i,o[l]).ptrs.length>0});let a=this.update(s);return this._cache&&(a._cache=s.map(u=>o[u[0]])),a},ifNo:function(t,e,n){const{methods:r}=this,i=r.one;if(Bb(t))return this.filter(a=>!a.intersection(t).found);if(Ub(t)){let a=this.sweep(t,{tagger:!1}).view.settle();return this.ifNo(a)}t=jb(t,n,this.world);let s=this._cache||[],o=this.filter((a,u)=>0===i.match(a.docs,{regs:t,group:e,justOne:!0},s[u]).ptrs.length);return this._cache&&(o._cache=o.ptrs.map(a=>s[a[0]])),o}},D2e={before:function(t,e,n){const{indexN:r}=this.methods.one.pointer;let i=[],s=r(this.fullPointer);Object.keys(s).forEach(a=>{let u=s[a].sort((l,c)=>l[1]>c[1]?1:-1)[0];u[1]>0&&i.push([u[0],0,u[1]])});let o=this.toView(i);return t?o.match(t,e,n):o},after:function(t,e,n){const{indexN:r}=this.methods.one.pointer;let i=[],s=r(this.fullPointer),o=this.document;Object.keys(s).forEach(u=>{let l=s[u].sort((g,_)=>g[1]>_[1]?-1:1)[0],[c,,h]=l;h<o[c].length&&i.push([c,h,o[c].length])});let a=this.toView(i);return t?a.match(t,e,n):a},growLeft:function(t,e,n){"string"==typeof t&&(t=this.world.methods.one.parseMatch(t,n,this.world)),t[t.length-1].end=!0;let r=this.fullPointer;return this.forEach((i,s)=>{let o=i.before(t,e);if(o.found){let a=o.terms();r[s][1]-=a.length,r[s][3]=a.docs[0][0].id}}),this.update(r)},growRight:function(t,e,n){"string"==typeof t&&(t=this.world.methods.one.parseMatch(t,n,this.world)),t[0].start=!0;let r=this.fullPointer;return this.forEach((i,s)=>{let o=i.after(t,e);if(o.found){let a=o.terms();r[s][2]+=a.length,r[s][4]=null}}),this.update(r)},grow:function(t,e,n){return this.growRight(t,e,n).growLeft(t,e,n)}},jQ=function(t,e){return[t[0],t[1],e[2]]},fF=(t,e,n)=>"string"==typeof t||function(t){return"[object Array]"===Object.prototype.toString.call(t)}(t)?e.match(t,n):t||e.none(),pF=function(t,e){let[n,r,i]=t;return e.document[n]&&e.document[n][r]&&(t[3]=t[3]||e.document[n][r].id,e.document[n][i-1]&&(t[4]=t[4]||e.document[n][i-1].id)),t},vy={splitOn:function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=fF(t,this,e).fullPointer,i=n(this.fullPointer,r),s=[];return i.forEach(o=>{s.push(o.passthrough),s.push(o.before),s.push(o.match),s.push(o.after)}),s=s.filter(o=>o),s=s.map(o=>pF(o,this)),this.update(s)},splitBefore:function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=fF(t,this,e).fullPointer,i=n(this.fullPointer,r);for(let o=0;o<i.length;o+=1)!i[o].after&&i[o+1]&&i[o+1].before&&i[o].match&&i[o].match[0]===i[o+1].before[0]&&(i[o].after=i[o+1].before,delete i[o+1].before);let s=[];return i.forEach(o=>{s.push(o.passthrough),s.push(o.before),s.push(o.match&&o.after?jQ(o.match,o.after):o.match)}),s=s.filter(o=>o),s=s.map(o=>pF(o,this)),this.update(s)},splitAfter:function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=fF(t,this,e).fullPointer,i=n(this.fullPointer,r),s=[];return i.forEach(o=>{s.push(o.passthrough),o.before&&o.match?s.push(jQ(o.before,o.match)):(s.push(o.before),s.push(o.match)),s.push(o.after)}),s=s.filter(o=>o),s=s.map(o=>pF(o,this)),this.update(s)}};vy.split=vy.splitAfter;const k2e=function(t,e){return!(!t||!e||t[0]!==e[0])&&t[2]===e[1]},BQ=function(t,e,n){const r=t.world,i=r.methods.one.parseMatch;n=n||"^.";let s=i(e=e||".$",{},r),o=i(n,{},r);s[s.length-1].end=!0,o[0].start=!0;let a=t.fullPointer,u=[a[0]];for(let l=1;l<a.length;l+=1){let c=u[u.length-1],h=a[l],g=t.update([c]),_=t.update([h]);k2e(c,h)&&g.has(s)&&_.has(o)?u[u.length-1]=[c[0],c[1],h[2],c[3],h[4]]:u.push(h)}return t.update(u)},gu=Object.assign({},S2e,D2e,vy,{joinIf:function(t,e){return BQ(this,t,e)},join:function(){return BQ(this)}});gu.lookBehind=gu.before,gu.lookBefore=gu.before,gu.lookAhead=gu.after,gu.lookAfter=gu.after,gu.notIf=gu.ifNo;const R2e=/(?:^|\s)([![^]*(?:<[^<]*>)?\/.*?[^\\/]\/[?\]+*$~]*)(?:\s|$)/,O2e=/([!~[^]*(?:<[^<]*>)?\([^)]+[^\\)]\)[?\]+*$~]*)(?:\s|$)/,M2e=/ /g,UQ=t=>/^[![^]*(<[^<]*>)?\//.test(t)&&/\/[?\]+*$~]*$/.test(t),HQ=function(t){return(t=t.map(e=>e.trim())).filter(e=>e)},zQ=/\{([0-9]+)?(, *[0-9]*)?\}/,GQ=/&&/,L2e=new RegExp(/^<\s*(\S+)\s*>/),qQ=t=>t.charAt(0).toUpperCase()+t.substring(1),Da=t=>t.charAt(t.length-1),Go=t=>t.charAt(0),by=t=>t.substring(1),wy=t=>t.substring(0,t.length-1),Hb=function(t){return t=by(t),wy(t)},WQ=function(t,e){let n={};for(let r=0;r<2;r+=1){if("$"===Da(t)&&(n.end=!0,t=wy(t)),"^"===Go(t)&&(n.start=!0,t=by(t)),"?"===Da(t)&&(n.optional=!0,t=wy(t)),("["===Go(t)||"]"===Da(t))&&(n.group=null,"["===Go(t)&&(n.groupStart=!0),"]"===Da(t)&&(n.groupEnd=!0),t=(t=t.replace(/^\[/,"")).replace(/\]$/,""),"<"===Go(t))){const i=L2e.exec(t);i.length>=2&&(n.group=i[1],t=t.replace(i[0],""))}if("+"===Da(t)&&(n.greedy=!0,t=wy(t)),"*"!==t&&"*"===Da(t)&&"\\*"!==t&&(n.greedy=!0,t=wy(t)),"!"===Go(t)&&(n.negative=!0,t=by(t)),"~"===Go(t)&&"~"===Da(t)&&t.length>2&&(t=Hb(t),n.fuzzy=!0,n.min=e.fuzzy||.85,!1===/\(/.test(t)))return n.word=t,n;if("/"===Go(t)&&"/"===Da(t))return t=Hb(t),e.caseSensitive&&(n.use="text"),n.regex=new RegExp(t),n;if(!0===zQ.test(t)&&(t=t.replace(zQ,(i,s,o)=>(void 0===o?(n.min=Number(s),n.max=Number(s)):(o=o.replace(/, */,""),void 0===s?(n.min=0,n.max=Number(o)):(n.min=Number(s),n.max=Number(o||999))),n.greedy=!0,n.min||(n.optional=!0),""))),"("===Go(t)&&")"===Da(t)){GQ.test(t)?(n.choices=t.split(GQ),n.operator="and"):(n.choices=t.split("|"),n.operator="or"),n.choices[0]=by(n.choices[0]);let i=n.choices.length-1;n.choices[i]=wy(n.choices[i]),n.choices=n.choices.map(s=>s.trim()),n.choices=n.choices.filter(s=>s),n.choices=n.choices.map(s=>s.split(/ /g).map(o=>WQ(o,e))),t=""}if("{"===Go(t)&&"}"===Da(t)){if(t=Hb(t),n.root=t,/\//.test(t)){let i=n.root.split(/\//);n.root=i[0],n.pos=i[1],"adj"===n.pos&&(n.pos="Adjective"),n.pos=n.pos.charAt(0).toUpperCase()+n.pos.substr(1).toLowerCase(),void 0!==i[2]&&(n.sense=i[2])}return n}if("<"===Go(t)&&">"===Da(t))return t=Hb(t),n.chunk=qQ(t),n.greedy=!0,n;if("%"===Go(t)&&"%"===Da(t))return t=Hb(t),n.switch=t,n}return"#"===Go(t)?(n.tag=by(t),n.tag=qQ(n.tag),n):"@"===Go(t)?(n.method=by(t),n):"."===t?(n.anything=!0,n):"*"===t?(n.anything=!0,n.greedy=!0,n.optional=!0,n):(t&&(t=(t=t.replace("\\*","*")).replace("\\.","."),e.caseSensitive?n.use="text":t=t.toLowerCase(),n.word=t),n)},$2e=WQ,j2e=/[a-z0-9][-\u2013\u2014][a-z]/i,KQ=function(t,e){let{all:n}=e.methods.two.transform.verb||{};return n?n(t.root,e.model):[]},QQ=function(t,e){let{all:n}=e.methods.two.transform.noun||{};return n?n(t.root,e.model):[t.root]},JQ=function(t,e){let{all:n}=e.methods.two.transform.adjective||{};return n?n(t.root,e.model):[t.root]},K2e=function(t,e){for(let n of e)if(t.has(n))return!0;return!1},Q2e=function(t,e){for(let n=0;n<t.length;n+=1){let r=t[n];if(!0!==r.optional&&!0!==r.negative&&!0!==r.fuzzy){if(void 0!==r.word&&!1===e.has(r.word)||void 0!==r.tag&&!1===e.has("#"+r.tag))return!0;if(r.fastOr&&!1===K2e(r.fastOr,e))return!1}}return!1},X2e=/([\u0022\uFF02\u0027\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F])/,Z2e=/([\u0022\uFF02\u0027\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4])/,YQ=/^[-\u2013\u2014]$/,XQ=/ [-\u2013\u2014]{1,3} /,ll=(t,e)=>-1!==t.post.indexOf(e),mF={hasQuote:t=>X2e.test(t.pre)||Z2e.test(t.post),hasComma:t=>ll(t,","),hasPeriod:t=>!0===ll(t,".")&&!1===ll(t,"..."),hasExclamation:t=>ll(t,"!"),hasQuestionMark:t=>ll(t,"?")||ll(t,"\xbf"),hasEllipses:t=>ll(t,"..")||ll(t,"\u2026"),hasSemicolon:t=>ll(t,";"),hasColon:t=>ll(t,":"),hasSlash:t=>/\//.test(t.text),hasHyphen:t=>YQ.test(t.post)||YQ.test(t.pre),hasDash:t=>XQ.test(t.post)||XQ.test(t.pre),hasContraction:t=>!!t.implicit,isAcronym:t=>t.tags.has("Acronym"),isKnown:t=>t.tags.size>0,isTitleCase:t=>new RegExp("^\\p{Lu}[a-z'\\u00C0-\\u00FF]","u").test(t.text),isUpperCase:t=>new RegExp("^\\p{Lu}+$","u").test(t.text)};mF.hasQuotation=mF.hasQuote;const gF=mF;let rS=function(){};rS=function(t,e,n,r){let i=function(t,e,n,r){if(!0===e.anything)return!0;if(!0===e.start&&0!==n||!0===e.end&&n!==r-1)return!1;if(void 0!==e.id&&e.id===t.id)return!0;if(void 0!==e.word)return e.use?e.word===t[e.use]:!!(null!==t.machine&&t.machine===e.word||void 0!==t.alias&&t.alias.hasOwnProperty(e.word)||!0===e.fuzzy&&(e.word===t.root||function(t,e,n=3){if(t===e)return 1;if(t.length<n||e.length<n)return 0;const r=function(t,e){let n=t.length,r=e.length;if(0===n)return r;if(0===r)return n;let i=(r>n?r:n)+1;if(Math.abs(n-r)>(i||100))return i||100;let o,a,u,l,c,h,s=[];for(let g=0;g<i;g++)s[g]=[g],s[g].length=i;for(let g=0;g<i;g++)s[0][g]=g;for(let g=1;g<=n;++g)for(a=t[g-1],o=1;o<=r;++o){if(g===o&&s[g][o]>4)return n;u=e[o-1],l=a===u?0:1,c=s[g-1][o]+1,(h=s[g][o-1]+1)<c&&(c=h),(h=s[g-1][o-1]+l)<c&&(c=h),s[g][o]=g>1&&o>1&&a===e[o-2]&&t[g-2]===u&&(h=s[g-2][o-2]+l)<c?h:c}return s[n][r]}(t,e);let i=Math.max(t.length,e.length);return 1-(0===i?0:r/i)}(e.word,t.normal)>=e.min)||t.alias&&t.alias.some(i=>i===e.word))||e.word===t.text||e.word===t.normal;if(void 0!==e.tag)return!0===t.tags.has(e.tag);if(void 0!==e.method)return"function"==typeof gF[e.method]&&!0===gF[e.method](t);if(void 0!==e.pre)return t.pre&&t.pre.includes(e.pre);if(void 0!==e.post)return t.post&&t.post.includes(e.post);if(void 0!==e.regex){let i=t.normal;return e.use&&(i=t[e.use]),e.regex.test(i)}return void 0!==e.chunk?t.chunk===e.chunk:void 0!==e.switch?t.switch===e.switch:void 0!==e.machine?t.normal===e.machine||t.machine===e.machine||t.root===e.machine:void 0!==e.sense?t.sense===e.sense:void 0!==e.fastOr?e.pos&&!t.tags.has(e.pos)?null:e.fastOr.has(t.root||t.implicit||t.machine||t.normal)||e.fastOr.has(t.text):void 0!==e.choices&&("and"===e.operator?e.choices.every(i=>rS(t,i,n,r)):e.choices.some(i=>rS(t,i,n,r)))}(t,e,n,r);return!0===e.negative?!i:i};const Ks=rS,rFe=function(t,e){if(!0===t.end&&!0===t.greedy&&e.start_i+e.t<e.phrase_length-1){let n=Object.assign({},t,{end:!1});if(!0===Ks(e.terms[e.t],n,e.start_i+e.t,e.phrase_length))return!0}return!1},iS=function(t,e){return t.groups[t.inGroup]||(t.groups[t.inGroup]={start:e,length:0}),t.groups[t.inGroup]},iFe=function(t){let{regs:e}=t,n=e[t.r],r=function(t,e){let n=t.t;if(!e)return t.terms.length;for(;n<t.terms.length;n+=1)if(!0===Ks(t.terms[n],e,t.start_i+n,t.phrase_length))return n;return null}(t,e[t.r+1]);return null===r||0===r||void 0!==n.min&&r-t.t<n.min?null:void 0!==n.max&&r-t.t>n.max?(t.t=t.t+n.max,!0):(!0===t.hasGroup&&(iS(t,t.t).length=r-t.t),t.t=r,!0)},sFe=function(t){return"[object Array]"===Object.prototype.toString.call(t)},ZQ=function(t,e=0){let n=t.regs[t.r],r=!1;for(let i=0;i<n.choices.length;i+=1){let s=n.choices[i];if(!sFe(s))return!1;if(r=s.every((o,a)=>{let u=0,l=t.t+a+e+u;if(void 0===t.terms[l])return!1;let c=Ks(t.terms[l],o,l+t.start_i,t.phrase_length);if(!0===c&&!0===o.greedy)for(let h=1;h<t.terms.length;h+=1){let g=t.terms[l+h];if(g){if(!0!==Ks(g,o,t.start_i+h,t.phrase_length))break;u+=1}}return e+=u,c}),r){e+=s.length;break}}return r&&!0===n.greedy?ZQ(t,e):e},aFe=function(t){const{regs:e}=t;let n=e[t.r],r=ZQ(t);return r?!0===n.negative?null:(!0===t.hasGroup&&(iS(t,t.t).length+=r),!0===n.end&&t.t+t.start_i+r!==t.phrase_length?null:(t.t+=r,!0)):!!n.optional||null},uFe=function(t){const{regs:e}=t;let n=e[t.r],r=function(t){let e=0;return!0===t.regs[t.r].choices.every(i=>{let s=i.every((o,a)=>{let u=t.t+a;return void 0!==t.terms[u]&&Ks(t.terms[u],o,u,t.phrase_length)});return!0===s&&i.length>e&&(e=i.length),s})&&e}(t);return r?!0===n.negative?null:(!0===t.hasGroup&&(iS(t,t.t).length+=r),!0===n.end&&t.t+t.start_i!==t.phrase_length-1?null:(t.t+=r,!0)):!!n.optional||null},cFe=function(t){const{regs:e}=t;let n=e[t.r],r=Object.assign({},n);if(r.negative=!1,Ks(t.terms[t.t],r,t.start_i+t.t,t.phrase_length))return!1;if(n.optional){let s=e[t.r+1];s&&(Ks(t.terms[t.t],s,t.start_i+t.t,t.phrase_length)?t.r+=1:s.optional&&e[t.r+2]&&Ks(t.terms[t.t],e[t.r+2],t.start_i+t.t,t.phrase_length)&&(t.r+=2))}return n.greedy?function(t,e,n){let r=0;for(let i=t.t;i<t.terms.length;i+=1){let s=Ks(t.terms[i],e,t.start_i+t.t,t.phrase_length);if(s||n&&(s=Ks(t.terms[i],n,t.start_i+t.t,t.phrase_length),s)||(r+=1,void 0!==e.max&&r===e.max))break}return!(0===r||e.min&&e.min>r||(t.t+=r,0))}(t,r,e[t.r+1]):(t.t+=1,!0)},yF=function(t){const{regs:e}=t;let n=e[t.r],r=t.terms[t.t],i=t.t;return!!(n.optional&&e[t.r+1]&&n.negative)||(n.optional&&e[t.r+1]&&function(t){const{regs:e}=t;let n=e[t.r],i=Ks(t.terms[t.t],e[t.r+1],t.start_i+t.t,t.phrase_length);if(n.negative||i){let s=t.terms[t.t+1];(!s||!Ks(s,e[t.r+1],t.start_i+t.t,t.phrase_length))&&(t.r+=1)}}(t),r.implicit&&t.terms[t.t+1]&&function(t){let e=t.terms[t.t],n=t.regs[t.r];if(e.implicit&&t.terms[t.t+1]){if(!t.terms[t.t+1].implicit)return;n.word===e.normal&&(t.t+=1),"hasContraction"===n.method&&(t.t+=1)}}(t),t.t+=1,!0===n.end&&t.t!==t.terms.length&&!0!==n.greedy||!0===n.greedy&&!function(t){const{regs:e,phrase_length:n}=t;let r=e[t.r];return t.t=function(t,e){let n=Object.assign({},t.regs[t.r],{start:!1,end:!1}),r=t.t;for(;t.t<t.terms.length;t.t+=1){if(e&&Ks(t.terms[t.t],e,t.start_i+t.t,t.phrase_length))return t.t;let i=t.t-r+1;if(void 0!==n.max&&i===n.max)return t.t;if(!1===Ks(t.terms[t.t],n,t.start_i+t.t,t.phrase_length))return void 0!==n.min&&i<n.min?null:t.t}return t.t}(t,e[t.r+1]),!(null===t.t||r.min&&r.min>t.t||!0===r.end&&t.start_i+t.t!==n)||null}(t)?null:(!0===t.hasGroup&&function(t,e){let n=t.regs[t.r];const r=iS(t,e);t.t>1&&n.greedy?r.length+=t.t-e:r.length++}(t,i),!0))},_F=function(t,e,n,r){if(0===t.length||0===e.length)return null;let i={t:0,terms:t,r:0,regs:e,groups:{},start_i:n,phrase_length:r,inGroup:null};for(;i.r<e.length;i.r+=1){let a=e[i.r];if(i.hasGroup=!!a.group,i.inGroup=!0===i.hasGroup?a.group:null,!i.terms[i.t]){if(!1===e.slice(i.r).some(c=>!c.optional))break;return null}if(!0!==a.anything||!0!==a.greedy){if(void 0===a.choices||"or"!==a.operator){if(void 0===a.choices||"and"!==a.operator){if(!0!==a.anything){if(!0!==rFe(a,i)){if(a.negative){if(!cFe(i))return null}else if(!0!==Ks(i.terms[i.t],a,i.start_i+i.t,i.phrase_length)){if(!0!==a.optional)return null}else if(!yF(i))return null}else if(!yF(i))return null}else if(a.negative&&a.anything||!yF(i))return null}else if(!uFe(i))return null}else if(!aFe(i))return null}else if(!iFe(i))return null}let s=[null,n,i.t+n];if(s[1]===s[2])return null;let o={};return Object.keys(i.groups).forEach(a=>{let u=i.groups[a],l=n+u.start;o[a]=[null,l,l+u.length]}),{pointer:s,groups:o}},eJ=function(t,e){return t.pointer[0]=e,Object.keys(t.groups).forEach(n=>{t.groups[n][0]=e}),t},yFe=function(t,e,n){let r=_F(t,e,0,t.length);return r?(r=eJ(r,n),r):null},_Fe={api:function(t){Object.assign(t.prototype,gu)},methods:{one:{termMethods:gF,parseMatch:function(t,e,n){if(null==t||""===t)return[];e=e||{},"number"==typeof t&&(t=String(t));let r=function(t){let e=t.split(R2e),n=[];e.forEach(i=>{UQ(i)?n.push(i):n=n.concat(i.split(O2e))}),n=HQ(n);let r=[];return n.forEach(i=>{(t=>/^[![^]*(<[^<]*>)?\(/.test(t)&&/\)[?\]+*$~]*$/.test(t))(i)||UQ(i)?r.push(i):r=r.concat(i.split(M2e))}),r=HQ(r),r}(t);return r=r.map(i=>$2e(i,e)),r=function(t,e){let n=e.model.one.prefixes;for(let r=t.length-1;r>=0;r-=1){let i=t[r];if(i.word&&j2e.test(i.word)){let s=i.word.split(/[-\u2013\u2014]/g);if(n.hasOwnProperty(s[0]))continue;s=s.filter(o=>o).reverse(),t.splice(r,1),s.forEach(o=>{let a=Object.assign({},i);a.word=o,t.splice(r,0,a)})}}return t}(r,n),r=function(t,e){return t.map(n=>{if(n.root)if(e.methods.two&&e.methods.two.transform){let r=[];n.pos?"Verb"===n.pos?r=r.concat(KQ(n,e)):"Noun"===n.pos?r=r.concat(QQ(n,e)):"Adjective"===n.pos&&(r=r.concat(JQ(n,e))):(r=r.concat(KQ(n,e)),r=r.concat(QQ(n,e)),r=r.concat(JQ(n,e))),r=r.filter(i=>i),r.length>0&&(n.operator="or",n.fastOr=new Set(r))}else n.machine=n.root,delete n.id,delete n.root;return n})}(r,n),r=function(t){return function(t){return t.map(e=>(e.fuzzy&&e.choices&&e.choices.forEach(n=>{1===n.length&&n[0].word&&(n[0].fuzzy=!0,n[0].min=e.min)}),e))}(t=function(t){return t.map(e=>{if(void 0!==e.choices){if("or"!==e.operator||!0===e.fuzzy)return e;!0===e.choices.every(r=>{if(1!==r.length)return!1;let i=r[0];return!0!==i.fuzzy&&!i.start&&!i.end&&void 0!==i.word&&!0!==i.negative&&!0!==i.optional&&!0!==i.method})&&(e.fastOr=new Set,e.choices.forEach(r=>{e.fastOr.add(r[0].word)}),delete e.choices)}return e})}(t=function(t){let e=0,n=null;for(let r=0;r<t.length;r++){const i=t[r];!0===i.groupStart&&(n=i.group,null===n&&(n=String(e),e+=1)),null!==n&&(i.group=n),!0===i.groupEnd&&(n=null)}return t}(t)))}(r),r},match:function(t,e,n){n=n||[];let{regs:r,group:i,justOne:s}=e,o=[];if(!r||0===r.length)return{ptrs:[],byGroup:{}};const a=r.filter(u=>!0!==u.optional&&!0!==u.negative).length;e:for(let u=0;u<t.length;u+=1){let l=t[u];if(!n[u]||!Q2e(r,n[u])){if(!0===r[0].start){let c=yFe(l,r,u);c&&o.push(c);continue}for(let c=0;c<l.length;c+=1){let h=l.slice(c);if(h.length<a)break;let g=_F(h,r,c,l.length);if(g){if(g=eJ(g,u),o.push(g),!0===s)break e;let _=g.pointer[2];Math.abs(_-1)>c&&(c=Math.abs(_-1))}}}}return!0===r[r.length-1].end&&(o=o.filter(u=>t[u.pointer[0]].length===u.pointer[2])),e.notIf&&(o=function(t,e,n){return t.filter(r=>{let[i,s,o]=r.pointer,a=n[i].slice(s,o);for(let u=0;u<a.length;u+=1){let l=a.slice(u);if(null!==_F(l,e,u,a.length))return!1}return!0})}(o,e.notIf,t)),o=function(t,e){let n=[],r={};return 0===t.length||("number"==typeof e&&(e=String(e)),t.forEach(e?i=>{i.groups[e]&&n.push(i.groups[e])}:i=>{n.push(i.pointer),Object.keys(i.groups).forEach(s=>{r[s]=r[s]||[],r[s].push(i.groups[s])})})),{ptrs:n,byGroup:r}}(o,i),o.ptrs.forEach(u=>{let[l,c,h]=u;u[3]=t[l][c].id,u[4]=t[l][h-1].id}),o}}},lib:{parseMatch:function(t,e){const n=this.world();let r=n.methods.one.killUnicode;return r&&(t=r(t,n)),n.methods.one.parseMatch(t,e,n)}}},vFe=/^\../,bFe=/^#./,IFe={html:function(t){let{starts:e,ends:n}=function(t,e){let n={},r={};return Object.keys(e).forEach(i=>{let s=e[i],o=function(t){let e="",n="</span>";return t=(t=>(t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&apos;"))(t),vFe.test(t)?e=`<span class="${t.replace(/^\./,"")}"`:bFe.test(t)?e=`<span id="${t.replace(/^#/,"")}"`:(e=`<${t}`,n=`</${t}>`),e+=">",{start:e,end:n}}(i);"string"==typeof s&&(s=t.match(s)),s.docs.forEach(a=>{if(a.every(c=>c.implicit))return;let u=a[0].id;n[u]=n[u]||[],n[u].push(o.start);let l=a[a.length-1].id;r[l]=r[l]||[],r[l].push(o.end)})}),{starts:n,ends:r}}(this,t),r="";return this.docs.forEach(i=>{for(let s=0;s<i.length;s+=1){let o=i[s];e.hasOwnProperty(o.id)&&(r+=e[o.id].join("")),r+=o.pre||"",r+=o.text||"",n.hasOwnProperty(o.id)&&(r+=n[o.id].join("")),r+=o.post||""}}),r}},tJ=/[,:;)\]*.?~!\u0022\uFF02\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4\u2014-]+$/,vF=/^[(['"*~\uFF02\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F]+/,AFe=/[,:;)('"\u201D\]]/,CFe=/^[-\u2013\u2014]$/,SFe=/ /,rp=function(t,e,n=!0){let r="";return t.forEach(i=>{let s=i.pre||"",o=i.post||"";"some"===e.punctuation&&(s=s.replace(vF,""),CFe.test(o)&&(o=" "),o=o.replace(AFe,""),o=o.replace(/\?!+/,"?"),o=o.replace(/!+/,"!"),o=o.replace(/\?+/,"?"),o=o.replace(/\.{2,}/,""),i.tags.has("Abbreviation")&&(o=o.replace(/\./,""))),"some"===e.whitespace&&(s=s.replace(/\s/,""),o=o.replace(/\s+/," ")),e.keepPunct||(s=s.replace(vF,""),o="-"===o?" ":o.replace(tJ,""));let a=i[e.form||"text"]||i.normal||"";"implicit"===e.form&&(a=i.implicit||i.text),"root"===e.form&&i.implicit&&(a=i.root||i.implicit||i.normal),("machine"===e.form||"implicit"===e.form||"root"===e.form)&&i.implicit&&(!o||!SFe.test(o))&&(o+=" "),r+=s+a+o}),!1===n&&(r=r.trim()),!0===e.lowerCase&&(r=r.toLowerCase()),r},zb={text:{form:"text"},normal:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"normal"},machine:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"none",unicode:"some",form:"machine"},root:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"root"},implicit:{form:"implicit"}};zb.clean=zb.normal,zb.reduced=zb.root;const sS=zb;let nJ=[],ip=0;for(;ip<64;)nJ[ip]=0|4294967296*Math.sin(++ip%Math.PI);const bF=function(t){let e,n,r,i=[e=1732584193,n=4023233417,~e,~n],s=[],o=decodeURI(encodeURI(t))+"\x80",a=o.length;for(t=--a/4+2|15,s[--t]=8*a;~a;)s[a>>2]|=o.charCodeAt(a)<<8*a--;for(ip=o=0;ip<t;ip+=16){for(a=i;o<64;a=[r=a[3],e+((r=a[0]+[e&n|~e&r,r&e|~r&n,e^n^r,n^(e|~r)][a=o>>4]+nJ[o]+~~s[ip|15&[o,5*o+1,3*o+5,7*o][a]])<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+o++%4])|r>>>-a),e,n])e=0|a[1],n=a[2];for(o=4;o;)i[--o]+=a[o]}for(t="";o<32;)t+=(i[o>>3]>>4*(1^o++)&15).toString(16);return t},NFe={text:!0,terms:!0};let rJ={case:"none",unicode:"some",form:"machine",punctuation:"some"};const wF=function(t,e){return Object.assign({},t,e)},vc={text:t=>rp(t,{keepPunct:!0},!1),normal:t=>rp(t,wF(sS.normal,{keepPunct:!0}),!1),implicit:t=>rp(t,wF(sS.implicit,{keepPunct:!0}),!1),machine:t=>rp(t,rJ,!1),root:t=>rp(t,wF(rJ,{form:"root"}),!1),hash:t=>bF(rp(t,{keepPunct:!0},!1)),offset:t=>{let e=vc.text(t).length;return{index:t[0].offset.index,start:t[0].offset.start,length:e}},terms:t=>t.map(e=>{let n=Object.assign({},e);return n.tags=Array.from(e.tags),n}),confidence:(t,e,n)=>e.eq(n).confidence(),syllables:(t,e,n)=>e.eq(n).syllables(),sentence:(t,e,n)=>e.eq(n).fullSentence().text(),dirty:t=>t.some(e=>!0===e.dirty)};vc.sentences=vc.sentence,vc.clean=vc.normal,vc.reduced=vc.root;const EF={json:function(t){let e=function(t,e){return"string"==typeof(e=e||{})&&(e={}),(e=Object.assign({},NFe,e)).offset&&t.compute("offset"),t.docs.map((n,r)=>{let i={};return Object.keys(e).forEach(s=>{e[s]&&vc[s]&&(i[s]=vc[s](n,t,r))}),i})}(this,t);return"number"==typeof t?e[t]:e}};EF.data=EF.json;const OFe=function(t){return(t.pre||"")+t.text+(t.post||"")},iJ=function(t,e){let n=function(t,e){let n={};return Object.keys(e).forEach(r=>{t.match(r).fullPointer.forEach(s=>{n[s[3]]={fn:e[r],end:s[2]}})}),n}(t,e),r="";return t.docs.forEach((i,s)=>{for(let o=0;o<i.length;o+=1){let a=i[o];if(n.hasOwnProperty(a.id)){let{fn:u,end:l}=n[a.id],c=t.update([[s,o,l]]);r+=i[o].pre||"",r+=u(c),o=l-1,r+=i[o].post||""}else r+=OFe(a)}}),r},LFe={debug:function(t){let e=this.methods.one.debug||{};return t&&e.hasOwnProperty(t)?(e[t](this),this):typeof window<"u"&&window.document?(e.clientSide(this),this):(e.tags(this),this)},out:function(t){if((t=>"[object Object]"===Object.prototype.toString.call(t))(t))return iJ(this,t);if("text"===t)return this.text();if("normal"===t)return this.text("normal");if("root"===t)return this.text("root");if("machine"===t||"reduced"===t)return this.text("machine");if("hash"===t||"md5"===t)return bF(this.text());if("json"===t)return this.json();if("offset"===t||"offsets"===t)return this.compute("offset"),this.json({offset:!0});if("array"===t)return this.docs.map(n=>n.reduce((r,i)=>r+i.pre+i.text+i.post,"").trim()).filter(n=>n);if("freq"===t||"frequency"===t||"topk"===t)return function(t){let e={};return t.forEach(r=>{e[r]=e[r]||0,e[r]+=1}),Object.keys(e).map(r=>({normal:r,count:e[r]})).sort((r,i)=>r.count>i.count?-1:0)}(this.json({normal:!0}).map(e=>e.normal));if("terms"===t){let e=[];return this.docs.forEach(n=>{let r=n.map(i=>i.text);r=r.filter(i=>i),e=e.concat(r)}),e}return"tags"===t?this.docs.map(e=>e.reduce((n,r)=>(n[r.implicit||r.normal]=Array.from(r.tags),n),{})):"debug"===t?this.debug():this.text()},wrap:function(t){return iJ(this,t)}},jFe=Object.assign({},LFe,{text:function(t){let e={};if(t&&"string"==typeof t&&sS.hasOwnProperty(t)?e=Object.assign({},sS[t]):t&&(t=>"[object Object]"===Object.prototype.toString.call(t))(t)&&(e=Object.assign({},t)),void 0===e.keepSpace&&!this.isFull()&&(e.keepSpace=!1),void 0===e.keepEndPunct&&this.pointer){let n=this.pointer[0];e.keepEndPunct=!n||!n[1]}return void 0===e.keepPunct&&(e.keepPunct=!0),void 0===e.keepSpace&&(e.keepSpace=!0),function(t,e){let n="";if(!t||!t[0]||!t[0][0])return n;for(let r=0;r<t.length;r+=1)n+=rp(t[r],e,!0);if(e.keepSpace||(n=n.trim()),!1===e.keepEndPunct){t[0][0].tags.has("Emoticon")||(n=n.replace(vF,""));let r=t[t.length-1];r[r.length-1].tags.has("Emoticon")||(n=n.replace(tJ,"")),n.endsWith("'")&&!n.endsWith("s'")&&(n=n.replace(/'/,""))}return!0===e.cleanWhitespace&&(n=n.trim()),n}(this.docs,e)}},EF,IFe),bc="\x1b[0m",qo={green:t=>"\x1b[32m"+t+bc,red:t=>"\x1b[31m"+t+bc,blue:t=>"\x1b[34m"+t+bc,magenta:t=>"\x1b[35m"+t+bc,cyan:t=>"\x1b[36m"+t+bc,yellow:t=>"\x1b[33m"+t+bc,black:t=>"\x1b[30m"+t+bc,dim:t=>"\x1b[2m"+t+bc,i:t=>"\x1b[3m"+t+bc},KFe={api:function(t){Object.assign(t.prototype,jFe)},methods:{one:{hash:bF,debug:{tags:function(t){let{docs:e,model:n}=t;0===e.length&&console.log(qo.blue("\n     \u2500\u2500\u2500\u2500\u2500\u2500")),e.forEach(r=>{console.log(qo.blue("\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500")),r.forEach(i=>{let s=[...i.tags||[]],o=i.text||"-";i.sense&&(o=`{${i.normal}/${i.sense}}`),i.implicit&&(o="["+i.implicit+"]"),o=qo.yellow(o);let a="'"+o+"'";if(i.reference){let l=t.update([i.reference]).text("normal");a+=` - ${qo.dim(qo.i("["+l+"]"))}`}a=a.padEnd(18);let u=qo.blue("  \u2502 ")+qo.i(a)+"  - "+function(t,e){return e.one.tagSet&&(t=t.map(n=>e.one.tagSet.hasOwnProperty(n)?qo[e.one.tagSet[n].color||"blue"](n):n)),t.join(", ")}(s,n);console.log(u)})}),console.log("\n")},clientSide:function(t){console.log("%c -=-=- ","background-color:#6699cc;"),t.forEach(e=>{console.groupCollapsed(e.text());let r=e.docs[0].map(i=>{let s=i.text||"-";return i.implicit&&(s="["+i.implicit+"]"),{text:s,tags:"["+Array.from(i.tags).join(", ")+"]"}});console.table(r,["text","tags"]),console.groupEnd()})},chunks:function(t){let{docs:e}=t;console.log(""),e.forEach(n=>{let r=[];n.forEach(i=>{r.push("Noun"===i.chunk?qo.blue(i.implicit||i.normal):"Verb"===i.chunk?qo.green(i.implicit||i.normal):"Adjective"===i.chunk?qo.yellow(i.implicit||i.normal):"Pivot"===i.chunk?qo.red(i.implicit||i.normal):i.implicit||i.normal)}),console.log(r.join(" "),"\n")}),console.log("\n")},highlight:function(t){if(!t.found)return;let e={};t.fullPointer.forEach(n=>{e[n[0]]=e[n[0]]||[],e[n[0]].push(n)}),Object.keys(e).forEach(n=>{let i=t.update([[Number(n)]]).text();t.update(e[n]).json({offset:!0}).forEach((a,u)=>{i=function(t,e,n){let r=((t,e,n)=>{let i=e.start+9*n,s=i+e.length;return[t.substring(0,i),t.substring(i,s),t.substring(s,t.length)]})(t,e,n);return`${r[0]}${qo.blue(r[1])}${r[2]}`}(i,a.offset,u)}),console.log(i)}),console.log("\n")}}}}},sJ=function(t,e){if(t[0]!==e[0])return!1;let[,n,r]=t,[,i,s]=e;return n<=i&&r>i||i<=n&&s>n},oS=function(t){let e={};return t.forEach(n=>{e[n[0]]=e[n[0]]||[],e[n[0]].push(n)}),e},oJ=function(t,e){let n=oS(e),r=[];return t.forEach(i=>{let[s]=i,o=n[s]||[];if(o=o.filter(u=>function(t,e){return t[1]<=e[1]&&e[2]<=t[2]}(i,u)),0===o.length)return void r.push({passthrough:i});o=o.sort((u,l)=>u[1]-l[1]);let a=i;o.forEach((u,l)=>{let c=function(t,e){let[n,r]=t,i=e[1],s=e[2],o={};return r<i&&(o.before=[n,r,i<t[2]?i:t[2]]),o.match=e,t[2]>s&&(o.after=[n,s,t[2]]),o}(a,u);o[l+1]?(r.push({before:c.before,match:c.match}),c.after&&(a=c.after)):r.push(c)})}),r},nVe={one:{termList:function(t){let e=[];for(let n=0;n<t.length;n+=1)for(let r=0;r<t[n].length;r+=1)e.push(t[n][r]);return e},getDoc:function(t,e){let n=[];return t.forEach((r,i)=>{if(!r)return;let[s,o,a,u,l]=r,c=e[s]||[];if(void 0===o&&(o=0),void 0===a&&(a=c.length),!u||c[o]&&c[o].id===u)c=c.slice(o,a);else{let h=function(t,e,n){for(let r=0;r<20;r+=1){if(e[n-r]){let i=e[n-r].findIndex(s=>s.id===t);if(-1!==i)return[n-r,i]}if(e[n+r]){let i=e[n+r].findIndex(s=>s.id===t);if(-1!==i)return[n+r,i]}}return null}(u,e,s);if(null!==h){let g=a-o;c=e[h[0]].slice(h[1],h[1]+g),t[i]=[h[0],h[1],h[1]+g,c[0]?c[0].id:null]}}0!==c.length&&o!==a&&(l&&c[c.length-1].id!==l&&(c=function(t,e){let[n,r,,,i]=t,s=e[n],o=s.findIndex(a=>a.id===i);return-1===o?(t[2]=e[n].length,t[4]=s.length?s[s.length-1].id:null):t[2]=o,e[n].slice(r,t[2]+1)}(r,e)),n.push(c))}),n=n.filter(r=>r.length>0),n},pointer:{indexN:oS,splitAll:oJ}}},aJ=function(t,e){let n=t.concat(e),r=oS(n),i=[];return n.forEach(s=>{let[o]=s;if(1===r[o].length)return void i.push(s);let a=r[o].filter(l=>sJ(s,l));a.push(s);let u=function(t){let e=t[0][1],n=t[0][2];return t.forEach(r=>{r[1]<e&&(e=r[1]),r[2]>n&&(n=r[2])}),[t[0][0],e,n]}(a);i.push(u)}),i=function(t){let e={};for(let n=0;n<t.length;n+=1)e[t[n].join(",")]=t[n];return Object.values(e)}(i),i},uJ=function(t,e){let n=[];return oJ(t,e).forEach(i=>{i.passthrough&&n.push(i.passthrough),i.before&&n.push(i.before),i.after&&n.push(i.after)}),n},TF=(t,e)=>"string"==typeof t||function(t){return"[object Array]"===Object.prototype.toString.call(t)}(t)?e.match(t):t||e.none(),Gb=function(t,e){return t.map(n=>{let[r,i]=n;return e[r]&&e[r][i]&&(n[3]=e[r][i].id),n})},cl={union:function(t){t=TF(t,this);let e=aJ(this.fullPointer,t.fullPointer);return e=Gb(e,this.document),this.toView(e)}};cl.and=cl.union,cl.intersection=function(t){t=TF(t,this);let e=function(t,e){let n=oS(e),r=[];return t.forEach(i=>{let s=n[i[0]]||[];s=s.filter(o=>sJ(i,o)),0!==s.length&&s.forEach(o=>{let a=function(t,e){let n=t[1]<e[1]?e[1]:t[1],r=t[2]>e[2]?e[2]:t[2];return n<r?[t[0],n,r]:null}(i,o);a&&r.push(a)})}),r}(this.fullPointer,t.fullPointer);return e=Gb(e,this.document),this.toView(e)},cl.not=function(t){t=TF(t,this);let e=uJ(this.fullPointer,t.fullPointer);return e=Gb(e,this.document),this.toView(e)},cl.difference=cl.not,cl.complement=function(){let t=this.all(),e=uJ(t.fullPointer,this.fullPointer);return e=Gb(e,this.document),this.toView(e)},cl.settle=function(){let t=this.fullPointer;return t.forEach(e=>{t=aJ(t,[e])}),t=Gb(t,this.document),this.update(t)};const oVe={methods:nVe,api:function(t){Object.assign(t.prototype,cl)}},IF=function(t){return!0===t.optional||!0===t.negative?null:t.tag?"#"+t.tag:t.word?t.word:t.switch?`%${t.switch}%`:null},vVe={lib:{buildNet:function(t){let n=this.methods().one.buildNet(t,this.world());return n.isNet=!0,n}},api:function(t){t.prototype.sweep=function(e,n={}){const{world:r,docs:i}=this,{methods:s}=r;let o=s.one.bulkMatch(i,e,this.methods,n);!1!==n.tagger&&s.one.bulkTagger(o,i,this.world),o=o.map(u=>{let l=u.pointer,c=i[l[0]][l[1]];return c.index&&(u.pointer=[c.index[0],c.index[1],l[1]+(l[2]-l[1])]),u});let a=o.map(u=>u.pointer);return o=o.map(u=>(u.view=this.update([u.pointer]),delete u.regs,delete u.needs,delete u.pointer,delete u._expanded,u)),{view:this.update(a),found:o}}},methods:{one:{buildNet:function(t,e){t=function(t,e){const n=e.methods.one.parseMatch;return t.forEach(r=>{r.regs=n(r.match,{},e),"string"==typeof r.ifNo&&(r.ifNo=[r.ifNo]),r.notIf&&(r.notIf=n(r.notIf,{},e)),r.needs=function(t){let e=[];return t.forEach(n=>{e.push(IF(n)),"and"===n.operator&&n.choices&&n.choices.forEach(r=>{r.forEach(i=>{e.push(IF(i))})})}),e.filter(n=>n)}(r.regs);let{wants:i,count:s}=function(t){let e=[],n=0;return t.forEach(r=>{"or"===r.operator&&!r.optional&&!r.negative&&(r.fastOr&&Array.from(r.fastOr).forEach(i=>{e.push(i)}),r.choices&&r.choices.forEach(i=>{i.forEach(s=>{let o=IF(s);o&&e.push(o)})}),n+=1)}),{wants:e,count:n}}(r.regs);r.wants=i,r.minWant=s,r.minWords=r.regs.filter(o=>!o.optional).length}),t}(t,e);let n={};t.forEach(i=>{i.needs.forEach(s=>{n[s]=Array.isArray(n[s])?n[s]:[],n[s].push(i)}),i.wants.forEach(s=>{n[s]=Array.isArray(n[s])?n[s]:[],n[s].push(i)})}),Object.keys(n).forEach(i=>{let s={};n[i]=n[i].filter(o=>"boolean"!=typeof s[o.match]&&(s[o.match]=!0,!0))});let r=t.filter(i=>0===i.needs.length&&0===i.wants.length);return{hooks:n,always:r}},bulkMatch:function(t,e,n,r={}){let i=n.one.cacheDoc(t),s=function(t,e){return t.map((n,r)=>{let i=[];Object.keys(e).forEach(o=>{t[r].has(o)&&(i=i.concat(e[o]))});let s={};return i=i.filter(o=>"boolean"!=typeof s[o.match]&&(s[o.match]=!0,!0)),i})}(i,e.hooks);return s=function(t,e){return t.map((n,r)=>{let i=e[r];return(n=(n=n.filter(s=>s.needs.every(o=>i.has(o)))).filter(s=>!(void 0!==s.ifNo&&!0===s.ifNo.some(o=>i.has(o))))).filter(s=>0===s.wants.length||s.wants.filter(a=>i.has(a)).length>=s.minWant)})}(s,i),e.always.length>0&&(s=s.map(a=>a.concat(e.always))),s=function(t,e){return t.map((n,r)=>{let i=e[r].length;return n.filter(s=>i>=s.minWords)})}(s,t),function(t,e,n,r,i){let s=[];for(let o=0;o<t.length;o+=1)for(let a=0;a<t[o].length;a+=1){let u=t[o][a],l=r.one.match([e[o]],u);if(l.ptrs.length>0&&(l.ptrs.forEach(c=>{c[0]=o;let h=Object.assign({},u,{pointer:c});void 0!==u.unTag&&(h.unTag=u.unTag),s.push(h)}),!0===i.matchOne))return[s[0]]}return s}(s,t,0,n,r)},bulkTagger:function(t,e,n){const{model:r,methods:i}=n,{getDoc:s,setTag:o,unTag:a}=i.one,u=i.two.looksPlural;return 0===t.length?t:((typeof process>"u"||!process.env?self.env||{}:process.env).DEBUG_TAGS&&console.log(`\n\n  \x1b[32m\u2192 ${t.length} post-tagger:\x1b[0m`),t.map(c=>{if(!c.tag&&!c.chunk&&!c.unTag)return;let h=c.reason||c.match,g=s([c.pointer],e)[0];if(!0!==c.safe||!1!==function(t,e,n){let r=n.one.tagSet;if(!r.hasOwnProperty(e))return!0;let i=r[e].not||[];for(let s=0;s<t.length;s+=1){let o=t[s];for(let a=0;a<i.length;a+=1)if(!0===o.tags.has(i[a]))return!1}return!0}(g,c.tag,r)&&"-"!==g[g.length-1].post){if(void 0!==c.tag){if(o(g,c.tag,n,c.safe,`[post] '${h}'`),"Noun"===c.tag&&u){let _=g[g.length-1];u(_.text)?o([_],"Plural",n,c.safe,"quick-plural"):o([_],"Singular",n,c.safe,"quick-singular")}!0===c.freeze&&g.forEach(_=>_.frozen=!0)}void 0!==c.unTag&&a(g,c.unTag,n,c.safe,h),c.chunk&&g.forEach(_=>_.chunk=c.chunk)}}))}}}},lJ=/ /,cJ=function(t,e){"Noun"===e&&(t.chunk=e),"Verb"===e&&(t.chunk=e)},dJ=function(t,e,n,r){if(!0===t.tags.has(e)||"."===e)return null;!0===t.frozen&&(r=!0);let i=n[e];if(i){if(i.not&&i.not.length>0)for(let s=0;s<i.not.length;s+=1){if(!0===r&&t.tags.has(i.not[s]))return null;t.tags.delete(i.not[s])}if(i.parents&&i.parents.length>0)for(let s=0;s<i.parents.length;s+=1)t.tags.add(i.parents[s]),cJ(t,i.parents[s])}return t.tags.add(e),t.dirty=!0,cJ(t,e),!0},hJ=function(t,e,n={},r,i){const s=n.model.one.tagSet||{};if(!e)return;const o=typeof process>"u"||!process.env?self.env||{}:process.env;if(o&&o.DEBUG_TAGS&&((t,e,n="")=>{let s=t.map(o=>o.text||"["+o.implicit+"]").join(" ");var o;"string"!=typeof e&&e.length>2&&(e=e.slice(0,2).join(", #")+" +"),e="string"!=typeof e?e.join(", #"):e,console.log(` ${(o=s,"\x1b[33m\x1b[3m"+o+"\x1b[0m").padEnd(24)} \x1b[32m\u2192\x1b[0m #${e.padEnd(22)}  ${(o=>"\x1b[3m"+o+"\x1b[0m")(n)}`)})(t,e,i),!0!==function(t){return"[object Array]"===Object.prototype.toString.call(t)}(e))if("string"==typeof e)if(e=e.trim(),lJ.test(e))!function(t,e,n,r){let i=e.split(lJ);t.forEach((s,o)=>{let a=i[o];a&&(a=a.replace(/^#/,""),dJ(s,a,n,r))})}(t,e,s,r);else{e=e.replace(/^#/,"");for(let a=0;a<t.length;a+=1)dJ(t[a],e,s,r)}else console.warn(`compromise: Invalid tag '${e}'`);else e.forEach(a=>hJ(t,a,n,r))},TVe=hJ,nh=function(t){return t.children=t.children||[],t._cache=t._cache||{},t.props=t.props||{},t._cache.parents=t._cache.parents||[],t._cache.children=t._cache.children||[],t},CVe=/^ *(#|\/\/)/,SVe=function(t){let e=t.trim().split(/->/),n=[];e.forEach(i=>{n=n.concat(function(s){if(!(s=s.trim()))return null;if(/^\[/.test(s)&&/\]$/.test(s)){let o=(s=(s=s.replace(/^\[/,"")).replace(/\]$/,"")).split(/,/);return o=o.map(a=>a.trim()).filter(a=>a),o=o.map(a=>nh({id:a})),o}return[nh({id:s})]}(i))}),n=n.filter(i=>i);let r=n[0];for(let i=1;i<n.length;i+=1)r.children.push(n[i]),r=n[i];return n[0]},wc=(t,e)=>{let n=[],r=[t];for(;r.length>0;){let i=r.pop();n.push(i),i.children&&i.children.forEach(s=>{e&&e(i,s),r.push(s)})}return n},AF=t=>"[object Array]"===Object.prototype.toString.call(t),aS=t=>(t=t||"").trim(),CF=function(t,e){let n="-> ";e&&(n="\x1b[2m\u2192 \x1b[0m");let r="";return wc(t).forEach((i,s)=>{let o=i.id||"";e&&(o=(t=>"\x1b[31m"+t+"\x1b[0m")(o)),(0!==s||i.id)&&(r+="    ".repeat(i._cache.parents.length)+n+o+"\n")}),r},fJ=function(t){let e=wc(t);e.forEach(r=>{delete(r=Object.assign({},r)).children});let n=e[0];return n&&!n.id&&0===Object.keys(n.props).length&&e.shift(),e},pJ={text:CF,txt:CF,array:fJ,flat:fJ},mJ=function(t,e){return"nested"===e||"json"===e?t:"debug"===e?(console.log(CF(t,!0)),null):pJ.hasOwnProperty(e)?pJ[e](t):t},SF=t=>{wc(t,(e,n)=>{e.id&&(e._cache.parents=e._cache.parents||[],n._cache.parents=e._cache.parents.concat([e.id]))})},xVe=/\//;class qb{constructor(e={}){Object.defineProperty(this,"json",{enumerable:!1,value:e,writable:!0})}get children(){return this.json.children}get id(){return this.json.id}get found(){return this.json.id||this.json.children.length>0}props(e={}){let n=this.json.props||{};return"string"==typeof e&&(n[e]=!0),this.json.props=Object.assign(n,e),this}get(e){if(e=aS(e),!xVe.test(e)){let r=this.json.children.find(i=>i.id===e);return new qb(r)}let n=((r,i)=>{let s="string"!=typeof(o=i=i||"")?o:(o=o.replace(/^\//,"")).split(/\//);var o;for(let o=0;o<s.length;o+=1){let a=r.children.find(u=>u.id===s[o]);if(!a)return null;r=a}return r})(this.json,e)||nh({});return new qb(n)}add(e,n={}){if(AF(e))return e.forEach(i=>this.add(aS(i),n)),this;e=aS(e);let r=nh({id:e,props:n});return this.json.children.push(r),new qb(r)}remove(e){return e=aS(e),this.json.children=this.json.children.filter(n=>n.id!==e),this}nodes(){return wc(this.json).map(e=>(delete(e=Object.assign({},e)).children,e))}cache(){return(e=>{let n=wc(e,(i,s)=>{i.id&&(i._cache.parents=i._cache.parents||[],i._cache.children=i._cache.children||[],s._cache.parents=i._cache.parents.concat([i.id]))}),r={};n.forEach(i=>{i.id&&(r[i.id]=i)}),n.forEach(i=>{i._cache.parents.forEach(s=>{r.hasOwnProperty(s)&&r[s]._cache.children.push(i.id)})}),e._cache.children=Object.keys(r)})(this.json),this}list(){return wc(this.json)}fillDown(){return wc(this.json,(n,r)=>{r.props=((t,e)=>(Object.keys(e).forEach(n=>{var r;e[n]instanceof Set?t[n]=new Set([...t[n]||new Set,...e[n]]):(r=e[n])&&"object"==typeof r&&!Array.isArray(r)?t[n]=Object.assign({},e[n],t[n]||{}):AF(e[n])?t[n]=e[n].concat(t[n]||[]):void 0===t[n]&&(t[n]=e[n])}),t))(r.props,n.props)}),this}depth(){SF(this.json);let e=wc(this.json),n=e.length>1?1:0;return e.forEach(r=>{if(0===r._cache.parents.length)return;let i=r._cache.parents.length+1;i>n&&(n=i)}),n}out(e){return SF(this.json),mJ(this.json,e)}debug(){return SF(this.json),mJ(this.json,"debug"),this}}const gJ=function(t){let e=function(t=[]){return"string"==typeof t?function(n){let r=n.split(/\r?\n/),i=[];r.forEach(o=>{if(!o.trim()||CVe.test(o))return;let a=(u=>{const l=/^( {2}|\t)/;let c=0;for(;l.test(u);)u=u.replace(l,""),c+=1;return c})(o);i.push({indent:a,node:SVe(o)})});let s=function(o){let a={children:[]};return o.forEach((u,l)=>{0===u.indent?a.children=a.children.concat(u.node):o[l-1]&&function(c,h){let g=c[h].indent;for(;h>=0;h-=1)if(c[h].indent<g)return c[h];return c[0]}(o,l).node.children.push(u.node)}),a}(i);return s=nh(s),s}(t):AF(t)?function(n){let r={};n.forEach(s=>{r[s.id]=s});let i=nh({});return n.forEach(s=>{if((s=nh(s)).parent)if(r.hasOwnProperty(s.parent)){let o=r[s.parent];delete s.parent,o.children.push(s)}else console.warn(`[Grad] - missing node '${s.parent}'`);else i.children.push(s)}),i}(t):(wc(e=t).forEach(nh),e);var e}(t);return new qb(e)};gJ.prototype.plugin=function(t){t(this)};const Ey={Noun:"blue",Verb:"green",Negative:"green",Date:"red",Value:"red",Adjective:"magenta",Preposition:"cyan",Conjunction:"cyan",Determiner:"cyan",Hyphenated:"cyan",Adverb:"cyan"},RVe=function(t){if(Ey.hasOwnProperty(t.id))return Ey[t.id];if(Ey.hasOwnProperty(t.is))return Ey[t.is];let e=t._cache.parents.find(n=>Ey[n]);return Ey[e]},yJ=function(t){return t?"string"==typeof t?[t]:t:[]},$Ve={one:{setTag:TVe,unTag:function(t,e,n){e=e.trim().replace(/^#/,"");for(let r=0;r<t.length;r+=1){let i=t[r];if(!0===i.frozen)continue;if("*"===e){i.tags.clear();continue}let s=n[e];if(s&&s.children.length>0)for(let o=0;o<s.children.length;o+=1)i.tags.delete(s.children[o]);i.tags.delete(e)}},addTags:function(t,e){Object.keys(e).length>0&&(t=function(t){return Object.keys(t).forEach(e=>{t[e]=Object.assign({},t[e]),t[e].novel=!0}),t}(t)),t=function(t,e){return t=function(t,e){return Object.keys(t).forEach(n=>{t[n].isA&&(t[n].is=t[n].isA),t[n].notA&&(t[n].not=t[n].notA),t[n].is&&"string"==typeof t[n].is&&!e.hasOwnProperty(t[n].is)&&!t.hasOwnProperty(t[n].is)&&(t[t[n].is]={}),t[n].not&&"string"==typeof t[n].not&&!t.hasOwnProperty(t[n].not)&&!e.hasOwnProperty(t[n].not)&&!t.hasOwnProperty(t[n].not)&&(t[t[n].not]={})}),t}(t,e),Object.keys(t).forEach(n=>{t[n].children=yJ(t[n].children),t[n].not=yJ(t[n].not)}),Object.keys(t).forEach(n=>{(t[n].not||[]).forEach(i=>{t[i]&&t[i].not&&t[i].not.push(n)})}),t}(t,e);const r=function(t){const e=Object.keys(t).map(r=>{let i=t[r];const s={not:new Set(i.not),also:i.also,is:i.is,novel:i.novel};return{id:r,parent:i.is,props:s,children:[]}});return gJ(e).cache().fillDown().out("array")}(Object.assign({},e,t));return function(t){const e={};return t.forEach(n=>{let{not:r,also:i,is:s,novel:o}=n.props,a=n._cache.parents;i&&(a=a.concat(i)),e[n.id]={is:s,not:r,novel:o,also:i,parents:a,children:n._cache.children,color:RVe(n)}}),Object.keys(e).forEach(n=>{let r=new Set(e[n].not);e[n].not.forEach(i=>{e[i]&&e[i].children.forEach(s=>r.add(s))}),e[n].not=Array.from(r)}),e}(r)},canBe:function(t,e,n){if(!n.hasOwnProperty(e))return!0;let r=n[e].not||[];for(let i=0;i<r.length;i+=1)if(t.tags.has(r[i]))return!1;return!0}}},_J=function(t){return"[object Array]"===Object.prototype.toString.call(t)},jVe={tag:function(t,e="",n){if(!this.found||!t)return this;let r=this.termList();if(0===r.length)return this;const{methods:i,verbose:s,world:o}=this;return!0===s&&console.log(" +  ",t,e||""),_J(t)?t.forEach(a=>i.one.setTag(r,a,o,n,e)):i.one.setTag(r,t,o,n,e),this.uncache(),this},tagSafe:function(t,e=""){return this.tag(t,e,!0)},unTag:function(t,e){if(!this.found||!t)return this;let n=this.termList();if(0===n.length)return this;const{methods:r,verbose:i,model:s}=this;!0===i&&console.log(" -  ",t,e||"");let o=s.one.tagSet;return _J(t)?t.forEach(a=>r.one.unTag(n,a,o)):r.one.unTag(n,t,o),this.uncache(),this},canBe:function(t){t=t.replace(/^#/,"");let e=this.model.one.tagSet,n=this.methods.one.canBe,r=[];this.document.forEach((s,o)=>{s.forEach((a,u)=>{n(a,t,e)||r.push([o,u,u+1])})});let i=this.update(r);return this.difference(i)}},vJ=new Set(["Auxiliary","Possessive"]),zVe={model:{one:{tagSet:{}}},compute:{tagRank:function(t){const{document:e,world:n}=t,r=n.model.one.tagSet;e.forEach(i=>{i.forEach(s=>{let o=Array.from(s.tags);s.tagRank=function(t,e){return t.sort((n,r)=>{if(vJ.has(n)||!e.hasOwnProperty(r))return 1;if(vJ.has(r)||!e.hasOwnProperty(n))return-1;let i=e[n].children||[],s=i.length;return i=e[r].children||[],s-i.length})}(o,r)})})}},methods:$Ve,api:function(t){Object.assign(t.prototype,jVe)},lib:{addTags:function(t){const{model:e,methods:n}=this.world();let s=(0,n.one.addTags)(t,e.one.tagSet);return e.one.tagSet=s,this}}},GVe=/([.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s)/g,qVe=/^[.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s$/,WVe=/((?:\r?\n|\r)+)/,QVe=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i,JVe=/\S/,wJ={'"':'"',"\uff02":"\uff02","\u201c":"\u201d","\u201f":"\u201d","\u201e":"\u201d","\u2e42":"\u201d","\u201a":"\u2019","\xab":"\xbb","\u2039":"\u203a","\u2035":"\u2032","\u2036":"\u2033","\u2037":"\u2034","\u301d":"\u301e","\u301f":"\u301e"},ZVe=RegExp("["+Object.keys(wJ).join("")+"]","g"),eLe=RegExp("["+Object.values(wJ).join("")+"]","g"),EJ=function(t){if(!t)return!1;let e=t.match(eLe);return null!==e&&1===e.length},TJ=/\(/g,rLe=/\)/g,sLe=/\S/,IJ=/^\s+/,aLe=function(t,e){let n=t.split(/[-\u2013\u2014]/);if(n.length<=1)return!1;const{prefixes:r,suffixes:i}=e.one;return!(1===n[0].length&&/[a-z]/i.test(n[0])||r.hasOwnProperty(n[0])||(n[1]=n[1].trim().replace(/[.?!]$/,""),i.hasOwnProperty(n[1]))||!0!==/^([a-z\u00C0-\u00FF`"'/]+)[-\u2013\u2014]([a-z0-9\u00C0-\u00FF].*)/i.test(t)&&!0!==/^[('"]?([0-9]{1,4})[-\u2013\u2014]([a-z\u00C0-\u00FF`"'/-]+[)'"]?$)/i.test(t))},uLe=function(t){let e=[];const n=t.split(/[-\u2013\u2014]/);let r="-",i=t.match(/[-\u2013\u2014]/);i&&i[0]&&(r=i);for(let s=0;s<n.length;s++)e.push(s===n.length-1?n[s]:n[s]+r);return e},cLe=new RegExp("\\p{L} ?\\/ ?\\p{L}+$","u"),hLe=/\S/,fLe=/^[!?.]+$/,pLe=/(\S+)/;let DF=[".","?","!",":",";","-","\u2013","\u2014","--","...","(",")","[","]",'"',"'","`","\xab","\xbb","*","\u2022"];DF=DF.reduce((t,e)=>(t[e]=!0,t),{});const AJ=new RegExp("\\p{Letter}","u"),uS=/[\p{Number}\p{Currency_Symbol}]/u,yLe=/^[a-z]\.([a-z]\.)+/i,_Le=/[sn]['\u2019]$/,TLe=/([A-Z]\.)+[A-Z]?,?$/,ILe=/^[A-Z]\.,?$/,ALe=/[A-Z]{2,}('s|,)?$/,CLe=/([a-z]\.)+[a-z]\.?$/,CJ=function(t,e){const n=e.methods.one.killUnicode;let r=t.text||"";r=function(t){let e=t=(t=(t=t||"").toLowerCase()).trim();return t=(t=(t=t.replace(/[,;.!?]+$/,"")).replace(/\u2026/g,"...")).replace(/\u2013/g,"-"),!1===/^[:;]/.test(t)&&(t=(t=(t=t.replace(/\.{3,}$/g,"")).replace(/[",.!:;?)]+$/g,"")).replace(/^['"(]+/g,"")),""===(t=(t=t.replace(/[\u200B-\u200D\uFEFF]/g,"")).trim())&&(t=e),t.replace(/([0-9]),([0-9])/g,"$1$2")}(r),r=n(r,e),r=function(t){return function(t){return!0===TLe.test(t)||!0===CLe.test(t)||!0===ILe.test(t)||!0===ALe.test(t)}(t)&&(t=t.replace(/\./g,"")),t}(r),t.normal=r},PLe=/[ .][A-Z]\.? *$/i,kLe=/(?:\u2026|\.{2,}) *$/,xLe=new RegExp("\\p{L}","u"),RLe=/\. *$/,OLe=/^[A-Z]\. $/,MLe={one:{killUnicode:function(t,e){const n=e.model.one.unicode||{};let r=(t=t||"").split("");return r.forEach((i,s)=>{n[i]&&(r[s]=n[i])}),r.join("")},tokenize:{splitSentences:function(t,e){if(t=t||"",!(t=String(t))||"string"!=typeof t||!1===sLe.test(t))return[];let n=function(t){let e=[],n=t.split(WVe);for(let r=0;r<n.length;r++){let i=n[r].split(GVe);for(let s=0;s<i.length;s++)i[s+1]&&!0===qVe.test(i[s+1])&&(i[s]+=i[s+1],i[s+1]=""),""!==i[s]&&e.push(i[s])}return e}(t=t.replace("\xa0"," ")),r=function(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];if(void 0!==r&&""!==r){if(!1===JVe.test(r)||!1===QVe.test(r)){if(e[e.length-1]){e[e.length-1]+=r;continue}if(t[n+1]){t[n+1]=r+t[n+1];continue}}e.push(r)}}return e}(n);if(r=function(t,e){const n=e.methods.one.tokenize.isSentence,r=e.model.one.abbreviations||new Set;let i=[];for(let s=0;s<t.length;s++){let o=t[s];t[s+1]&&!1===n(o,r)?t[s+1]=o+(t[s+1]||""):o&&o.length>0&&(i.push(o),t[s]="")}return i}(r,e),r=function(t){let e=[];for(let n=0;n<t.length;n+=1){let i=t[n].match(ZVe);if(null!==i&&1===i.length){if(EJ(t[n+1])&&t[n+1].length<280){t[n]+=t[n+1],e.push(t[n]),t[n+1]="",n+=1;continue}if(EJ(t[n+2])){let s=t[n+1]+t[n+2];if(s.length<280){t[n]+=s,e.push(t[n]),t[n+1]="",t[n+2]="",n+=2;continue}}}e.push(t[n])}return e}(r),r=function(t){let e=[];for(let n=0;n<t.length;n+=1){let i=t[n].match(TJ);null!==i&&1===i.length&&t[n+1]&&t[n+1].length<250&&null!==t[n+1].match(rLe)&&1===i.length&&!TJ.test(t[n+1])?(t[n]+=t[n+1],e.push(t[n]),t[n+1]="",n+=1):e.push(t[n])}return e}(r),0===r.length)return[t];for(let i=1;i<r.length;i+=1){let s=r[i].match(IJ);null!==s&&(r[i-1]+=s[0],r[i]=r[i].replace(IJ,""))}return r},isSentence:function(t,e){if(!1===xLe.test(t)||!0===PLe.test(t)||3===t.length&&OLe.test(t)||!0===kLe.test(t))return!1;let r=t.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),i=r[r.length-1].toLowerCase();return!(!0===e.hasOwnProperty(i)&&!0===RLe.test(t))},splitTerms:function(t,e){let n=[],r=[];if("number"==typeof(t=t||"")&&(t=String(t)),function(t){return"[object Array]"===Object.prototype.toString.call(t)}(t))return t;const i=t.split(pLe);for(let o=0;o<i.length;o++)!0!==aLe(i[o],e)?r.push(i[o]):r=r.concat(uLe(i[o]));let s="";for(let o=0;o<r.length;o++){let a=r[o];!0===hLe.test(a)&&!1===DF.hasOwnProperty(a)&&!1===fLe.test(a)?(n.length>0?(n[n.length-1]+=s,n.push(a)):n.push(s+a),s=""):s+=a}return s&&(0===n.length&&(n[0]=""),n[n.length-1]+=s),n=function(t){for(let e=1;e<t.length-1;e++)cLe.test(t[e])&&(t[e-1]+=t[e]+t[e+1],t[e]=null,t[e+1]=null);return t}(n),n=function(t){const e=/^[0-9]{1,4}(:[0-9][0-9])?([a-z]{1,2})? ?[-\u2013\u2014] ?$/,n=/^[0-9]{1,4}([a-z]{1,2})? ?$/;for(let r=0;r<t.length-1;r+=1)t[r+1]&&e.test(t[r])&&n.test(t[r+1])&&(t[r]=t[r]+t[r+1],t[r+1]=null);return t}(n),n=n.filter(o=>o),n},splitWhitespace:(t,e)=>{let{str:n,pre:r,post:i}=function(t,e){let{prePunctuation:n,postPunctuation:r,emoticons:i}=e.one,s=t,o="",a="",u=Array.from(t);if(i.hasOwnProperty(t.trim()))return{str:t.trim(),pre:o,post:" "};let l=u.length;for(let c=0;c<l;c+=1){let h=u[0];if(!0!==n[h]){if(("+"===h||"-"===h)&&uS.test(u[1])||"'"===h&&3===h.length&&uS.test(u[1])||AJ.test(h)||uS.test(h))break;o+=u.shift()}}l=u.length;for(let c=0;c<l;c+=1){let h=u[u.length-1];if(!0!==r[h]){if(AJ.test(h)||uS.test(h))break;"."===h&&!0===yLe.test(s)||"'"===h&&!0===_Le.test(s)||(a=u.pop()+a)}}return""===(t=u.join(""))&&(s=s.replace(/ *$/,c=>(a=c||"","")),t=s,o=""),{str:t,pre:o,post:a}}(t,e);return{text:n,pre:r,post:i,tags:new Set}},fromString:function(t,e){const{methods:n,model:r}=e,{splitSentences:i,splitTerms:s,splitWhitespace:o}=n.one.tokenize;return i(t=t||"",e).map(u=>{let l=s(u,r);return l=l.map(c=>o(c,r)),l.forEach(c=>{CJ(c,e)}),l})}}}};let SJ={},lS={};[[["approx","apt","bc","cyn","eg","esp","est","etc","ex","exp","prob","pron","gal","min","pseud","fig","jd","lat","lng","vol","fm","def","misc","plz","ea","ps","sec","pt","pref","pl","pp","qt","fr","sq","nee","ss","tel","temp","vet","ver","fem","masc","eng","adj","vb","rb","inf","situ","vivo","vitro","wr"]],[["dl","ml","gal","qt","pt","tbl","tsp","tbsp","km","dm","cm","mm","mi","td","hr","hrs","kg","hg","dg","cg","mg","\xb5g","lb","oz","sq ft","hz","mps","mph","kmph","kb","mb","tb","lx","lm","fl oz","yb"],"Unit"],[["ad","al","arc","ba","bl","ca","cca","col","corp","ft","fy","ie","lit","ma","md","pd","tce"],"Noun"],[["adj","adm","adv","asst","atty","bldg","brig","capt","cmdr","comdr","cpl","det","dr","esq","gen","gov","hon","jr","llb","lt","maj","messrs","mlle","mme","mr","mrs","ms","mstr","phd","prof","pvt","rep","reps","res","rev","sen","sens","sfc","sgt","sir","sr","supt","surg"],"Honorific"],[["jan","feb","mar","apr","jun","jul","aug","sep","sept","oct","nov","dec"],"Month"],[["dept","univ","assn","bros","inc","ltd","co"],"Organization"],[["rd","st","dist","mt","ave","blvd","cl","cres","hwy","ariz","cal","calif","colo","conn","fla","fl","ga","ida","ia","kan","kans","minn","neb","nebr","okla","penna","penn","pa","dak","tenn","tex","ut","vt","va","wis","wisc","wy","wyo","usafa","alta","ont","que","sask"],"Place"]].forEach(t=>{t[0].forEach(e=>{SJ[e]=!0,lS[e]="Abbreviation",void 0!==t[1]&&(lS[e]=[lS[e],t[1]])})});const LLe=["anti","bi","co","contra","de","extra","infra","inter","intra","macro","micro","mis","mono","multi","peri","pre","pro","proto","pseudo","re","sub","supra","trans","tri","un","out","ex"].reduce((t,e)=>(t[e]=!0,t),{});let DJ={"!":"\xa1","?":"\xbf\u0241",'"':'\u201c\u201d"\u275d\u275e',"'":"\u2018\u201b\u275b\u275c\u2019","-":"\u2014\u2013",a:"\xaa\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\u0100\u0101\u0102\u0103\u0104\u0105\u01cd\u01ce\u01de\u01df\u01e0\u01e1\u01fa\u01fb\u0200\u0201\u0202\u0203\u0226\u0227\u023a\u0386\u0391\u0394\u039b\u03ac\u03b1\u03bb\u0410\u0430\u0466\u0467\u04d0\u04d1\u04d2\u04d3\u019b\xe6",b:"\xdf\xfe\u0180\u0181\u0182\u0183\u0184\u0185\u0243\u0392\u03b2\u03d0\u03e6\u0411\u0412\u042a\u042c\u0432\u044a\u044c\u0462\u0463\u048c\u048d",c:"\xa2\xa9\xc7\xe7\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u0186\u0187\u0188\u023b\u023c\u037b\u037c\u03f2\u03f9\u03fd\u03fe\u0421\u0441\u0454\u0480\u0481\u04aa\u04ab",d:"\xd0\u010e\u010f\u0110\u0111\u0189\u018a\u0221\u018b\u018c",e:"\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u0190\u0204\u0205\u0206\u0207\u0228\u0229\u0246\u0247\u0388\u0395\u039e\u03a3\u03ad\u03b5\u03be\u03f5\u0400\u0401\u0415\u0435\u0450\u0451\u04bc\u04bd\u04be\u04bf\u04d6\u04d7\u1ec5",f:"\u0191\u0192\u03dc\u03dd\u04fa\u04fb\u0492\u0493\u017f",g:"\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0193\u01e4\u01e5\u01e6\u01e7\u01f4\u01f5",h:"\u0124\u0125\u0126\u0127\u0195\u01f6\u021e\u021f\u0389\u0397\u0402\u040a\u040b\u041d\u043d\u0452\u045b\u04a2\u04a3\u04a4\u04a5\u04ba\u04bb\u04c9\u04ca",I:"\xcc\xcd\xce\xcf",i:"\xec\xed\xee\xef\u0128\u0129\u012a\u012b\u012c\u012d\u012e\u012f\u0130\u0131\u0196\u0197\u0208\u0209\u020a\u020b\u038a\u0390\u03aa\u03af\u03b9\u03ca\u0406\u0407\u0456\u0457i\u0307",j:"\u0134\u0135\u01f0\u0237\u0248\u0249\u03f3\u0408\u0458",k:"\u0136\u0137\u0138\u0198\u0199\u01e8\u01e9\u039a\u03ba\u040c\u0416\u041a\u0436\u043a\u045c\u049a\u049b\u049c\u049d\u049e\u049f\u04a0\u04a1",l:"\u0139\u013a\u013b\u013c\u013d\u013e\u013f\u0140\u0141\u0142\u019a\u01aa\u01c0\u01cf\u01d0\u0234\u023d\u0399\u04c0\u04cf",m:"\u039c\u03fa\u03fb\u041c\u043c\u04cd\u04ce",n:"\xd1\xf1\u0143\u0144\u0145\u0146\u0147\u0148\u0149\u014a\u014b\u019d\u019e\u01f8\u01f9\u0220\u0235\u039d\u03a0\u03ae\u03b7\u03de\u040d\u0418\u0419\u041b\u041f\u0438\u0439\u043b\u043f\u045d\u048a\u048b\u04c5\u04c6\u04e2\u04e3\u04e4\u04e5\u03c0",o:"\xd2\xd3\xd4\xd5\xd6\xd8\xf0\xf2\xf3\xf4\xf5\xf6\xf8\u014c\u014d\u014e\u014f\u0150\u0151\u019f\u01a0\u01a1\u01d1\u01d2\u01ea\u01eb\u01ec\u01ed\u01fe\u01ff\u020c\u020d\u020e\u020f\u022a\u022b\u022c\u022d\u022e\u022f\u0230\u0231\u038c\u0398\u039f\u03b8\u03bf\u03c3\u03cc\u03d5\u03d8\u03d9\u03ec\u03f4\u041e\u0424\u043e\u0472\u0473\u04e6\u04e7\u04e8\u04e9\u04ea\u04eb",p:"\u01a4\u03a1\u03c1\u03f7\u03f8\u03fc\u0420\u0440\u048e\u048f\xde",q:"\u024a\u024b",r:"\u0154\u0155\u0156\u0157\u0158\u0159\u01a6\u0210\u0211\u0212\u0213\u024c\u024d\u0403\u0413\u042f\u0433\u044f\u0453\u0490\u0491",s:"\u015a\u015b\u015c\u015d\u015e\u015f\u0160\u0161\u01a7\u01a8\u0218\u0219\u023f\u0405\u0455",t:"\u0162\u0163\u0164\u0165\u0166\u0167\u01ab\u01ac\u01ad\u01ae\u021a\u021b\u0236\u023e\u0393\u03a4\u03c4\u03ee\u0422\u0442",u:"\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc\u0168\u0169\u016a\u016b\u016c\u016d\u016e\u016f\u0170\u0171\u0172\u0173\u01af\u01b0\u01b1\u01b2\u01d3\u01d4\u01d5\u01d6\u01d7\u01d8\u01d9\u01da\u01db\u01dc\u0214\u0215\u0216\u0217\u0244\u03b0\u03c5\u03cb\u03cd",v:"\u03bd\u0474\u0475\u0476\u0477",w:"\u0174\u0175\u019c\u03c9\u03ce\u03d6\u03e2\u03e3\u0428\u0429\u0448\u0449\u0461\u047f",x:"\xd7\u03a7\u03c7\u03d7\u03f0\u0425\u0445\u04b2\u04b3\u04fc\u04fd\u04fe\u04ff",y:"\xdd\xfd\xff\u0176\u0177\u0178\u01b3\u01b4\u0232\u0233\u024e\u024f\u038e\u03a5\u03ab\u03b3\u03c8\u03d2\u03d3\u03d4\u040e\u0423\u0443\u0447\u045e\u0470\u0471\u04ae\u04af\u04b0\u04b1\u04ee\u04ef\u04f0\u04f1\u04f2\u04f3",z:"\u0179\u017a\u017b\u017c\u017d\u017e\u01b5\u01b6\u0224\u0225\u0240\u0396"},NJ={};Object.keys(DJ).forEach(function(t){DJ[t].split("").forEach(function(e){NJ[e]=t})});const jLe={one:{aliases:{"&":"and","@":"at","%":"percent",plz:"please",bein:"being"},abbreviations:SJ,prefixes:LLe,suffixes:{like:!0,ish:!0,less:!0,able:!0,elect:!0,type:!0,designate:!0},prePunctuation:{"#":!0,"@":!0,_:!0,"\xb0":!0,"\u200b":!0,"\u200c":!0,"\u200d":!0,"\ufeff":!0},postPunctuation:{"%":!0,_:!0,"\xb0":!0,"\u200b":!0,"\u200c":!0,"\u200d":!0,"\ufeff":!0},lexicon:lS,unicode:NJ,emoticons:{"<3":!0,"</3":!0,"<\\3":!0,":^P":!0,":^p":!0,":^O":!0,":^3":!0}}},PJ=/\//,BLe=/[a-z]\.[a-z]/i,ULe=/[0-9]/,HLe=function(t,e){let n=t.normal||t.text||t.machine;const r=e.model.one.aliases;if(r.hasOwnProperty(n)&&(t.alias=t.alias||[],t.alias.push(r[n])),PJ.test(n)&&!BLe.test(n)&&!ULe.test(n)){let i=n.split(PJ);i.length<=3&&i.forEach(s=>{""!==(s=s.trim())&&(t.alias=t.alias||[],t.alias.push(s))})}return t},zLe=new RegExp("^\\p{Letter}+-\\p{Letter}+$","u"),GLe=function(t){let e=t.implicit||t.normal||t.text;e=e.replace(/['\u2019]s$/,""),e=e.replace(/s['\u2019]$/,"s"),e=e.replace(/([aeiou][ktrp])in'$/,"$1ing"),zLe.test(e)&&(e=e.replace(/-/g,"")),e=e.replace(/^[#@]/,""),e!==t.normal&&(t.machine=e)},NF=function(t,e){let n=t.docs;for(let r=0;r<n.length;r+=1)for(let i=0;i<n[r].length;i+=1)e(n[r][i],t.world)},JLe={compute:{alias:t=>NF(t,HLe),machine:t=>NF(t,GLe),normal:t=>NF(t,CJ),freq:function(t){let e=t.docs,n={};for(let r=0;r<e.length;r+=1)for(let i=0;i<e[r].length;i+=1){let s=e[r][i],o=s.machine||s.normal;n[o]=n[o]||0,n[o]+=1}for(let r=0;r<e.length;r+=1)for(let i=0;i<e[r].length;i+=1){let s=e[r][i];s.freq=n[s.machine||s.normal]}},offset:function(t){let e=0,n=0,r=t.document;for(let i=0;i<r.length;i+=1)for(let s=0;s<r[i].length;s+=1){let o=r[i][s];o.offset={index:n,start:e+o.pre.length,length:o.text.length},e+=o.pre.length+o.text.length+o.post.length,n+=1}},index:function(t){let e=t.document;for(let n=0;n<e.length;n+=1)for(let r=0;r<e[n].length;r+=1)e[n][r].index=[n,r]},wordCount:function(t){let e=0,n=t.docs;for(let r=0;r<n.length;r+=1)for(let i=0;i<n[r].length;i+=1)""!==n[r][i].normal&&(e+=1,n[r][i].wordCount=e)}},methods:MLe,model:jLe,hooks:["alias","machine","index","id"]},YLe={typeahead:function(t){const e=t.model.one.typeahead,n=t.docs;if(0===n.length||0===Object.keys(e).length)return;let r=n[n.length-1]||[],i=r[r.length-1];if(!i.post&&e.hasOwnProperty(i.normal)){let s=e[i.normal];i.implicit=s,i.machine=s,i.typeahead=!0,t.compute.preTagger&&t.last().unTag("*").compute(["lexicon","preTagger"])}}},XLe=function(){const t=this.docs;if(0===t.length)return this;let e=t[t.length-1]||[],n=e[e.length-1];return!0===n.typeahead&&n.machine&&(n.text=n.machine,n.normal=n.machine),this},n3e={safe:!0,min:3},r3e={model:{one:{typeahead:{}}},api:function(t){t.prototype.autoFill=XLe},lib:{typeahead:function(t=[],e={}){let n=this.model();e=Object.assign({},n3e,e),(t=>"[object Object]"===Object.prototype.toString.call(t))(t)&&(Object.assign(n.one.lexicon,t),t=Object.keys(t));let r=function(t,e,n){let r={},i=[],s=n.prefixes||{};return t.forEach(o=>{let a=(o=o.toLowerCase().trim()).length;e.max&&a>e.max&&(a=e.max);for(let u=e.min;u<a;u+=1){let l=o.substring(0,u);if(!e.safe||!n.model.one.lexicon.hasOwnProperty(l)){if(!0===s.hasOwnProperty(l)){i.push(l);continue}if(!0===r.hasOwnProperty(l)){i.push(l);continue}r[l]=o}}}),r=Object.assign({},s,r),i.forEach(o=>{delete r[o]}),r}(t,e,this.world());return Object.keys(r).forEach(i=>{n.one.typeahead.hasOwnProperty(i)?delete n.one.typeahead[i]:n.one.typeahead[i]=r[i]}),this}},compute:YLe,hooks:["typeahead"]};bo.extend(qMe),bo.extend(KFe),bo.extend(_Fe),bo.extend(oVe),bo.extend(zVe),bo.plugin(h2e),bo.extend(JLe),bo.extend(p2e),bo.plugin(_Me),bo.extend(C2e),bo.extend(r3e),bo.extend(_2e),bo.extend(vVe);const Ty=bo,kJ={addendum:"addenda",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",opus:"opera",ovum:"ova",phenomenon:"phenomena",referendum:"referenda",alga:"algae",alumna:"alumnae",antenna:"antennae",formula:"formulae",larva:"larvae",nebula:"nebulae",vertebra:"vertebrae",analysis:"analyses",axis:"axes",diagnosis:"diagnoses",parenthesis:"parentheses",prognosis:"prognoses",synopsis:"synopses",thesis:"theses",neurosis:"neuroses",appendix:"appendices",index:"indices",matrix:"matrices",ox:"oxen",sex:"sexes",alumnus:"alumni",bacillus:"bacilli",cactus:"cacti",fungus:"fungi",hippopotamus:"hippopotami",libretto:"libretti",modulus:"moduli",nucleus:"nuclei",octopus:"octopi",radius:"radii",stimulus:"stimuli",syllabus:"syllabi",cookie:"cookies",calorie:"calories",auntie:"aunties",movie:"movies",pie:"pies",rookie:"rookies",tie:"ties",zombie:"zombies",leaf:"leaves",loaf:"loaves",thief:"thieves",foot:"feet",goose:"geese",tooth:"teeth",beau:"beaux",chateau:"chateaux",tableau:"tableaux",bus:"buses",gas:"gases",circus:"circuses",crisis:"crises",virus:"viruses",database:"databases",excuse:"excuses",abuse:"abuses",avocado:"avocados",barracks:"barracks",child:"children",clothes:"clothes",echo:"echoes",embargo:"embargoes",epoch:"epochs",deer:"deer",halo:"halos",man:"men",woman:"women",mosquito:"mosquitoes",mouse:"mice",person:"people",quiz:"quizzes",rodeo:"rodeos",shoe:"shoes",sombrero:"sombreros",stomach:"stomachs",tornado:"tornados",tuxedo:"tuxedos",volcano:"volcanoes"},xJ={Comparative:"true\xa6bett1f0;arth0ew0in0;er",Superlative:"true\xa6earlier",PresentTense:"true\xa6bests,sounds",Condition:"true\xa6lest,unless",PastTense:"true\xa6began,came,d4had,kneel3l2m0sa4we1;ea0sg2;nt;eap0i0;ed;id",Participle:"true\xa60:09;a06b01cZdXeat0fSgQhPoJprov0rHs7t6u4w1;ak0ithdra02o2r1;i02uY;k0v0;nd1pr04;ergoJoJ;ak0hHo3;e9h7lain,o6p5t4un3w1;o1um;rn;g,k;ol0reS;iQok0;ught,wn;ak0o1runk;ne,wn;en,wn;ewriNi1uJ;dd0s0;ut3ver1;do4se0t1;ak0h2;do2g1;roG;ne;ast0i7;iv0o1;ne,tt0;all0loBor1;bi3g2s1;ak0e0;iv0o9;dd0;ove,r1;a5eamt,iv0;hos0lu1;ng;e4i3lo2ui1;lt;wn;tt0;at0en,gun;r2w1;ak0ok0;is0;en",Gerund:"true\xa6accord0be0doin,go0result0stain0;ing",Expression:"true\xa6a0Yb0Uc0Sd0Oe0Mfarew0Lg0FhZjeez,lWmVnToOpLsJtIuFvEw7y0;a5e3i1u0;ck,p;k04p0;ee,pee;a0p,s;!h;!a,h,y;a5h2o1t0;af,f;rd up,w;atsoever,e1o0;a,ops;e,w;hoo,t;ery w06oi0L;gh,h0;! 0h,m;huh,oh;here nPsk,ut tut;h0ic;eesh,hh,it,oo;ff,h1l0ow,sst;ease,s,z;ew,ooey;h1i,mg,o0uch,w,y;h,o,ps;! 0h;hTmy go0wT;d,sh;a7evertheless,o0;!pe;eh,mm;ah,eh,m1ol0;!s;ao,fao;aCeBi9o2u0;h,mph,rra0zzC;h,y;l1o0;r6y9;la,y0;! 0;c1moCsmok0;es;ow;!p hip hoor0;ay;ck,e,llo,y;ha1i,lleluj0;ah;!ha;ah,ee4o1r0;eat scott,r;l1od0sh; grief,bye;ly;! whiz;ell;e0h,t cetera,ureka,ww,xcuse me;k,p;'oh,a0rat,uh;m0ng;mit,n0;!it;mon,o0;ngratulations,wabunga;a2oo1r0tw,ye;avo,r;!ya;h,m; 1h0ka,las,men,rgh,ye;!a,em,h,oy;la",Negative:"true\xa6n0;ever,o0;n,t",QuestionWord:"true\xa6how3wh0;at,e1ich,o0y;!m,se;n,re; come,'s",Reflexive:"true\xa6h4it5my5o1the0your2;ir1m1;ne3ur0;sel0;f,ves;er0im0;self",Plural:"true\xa6dick0gre0ones,records;ens","Unit|Noun":"true\xa6cEfDgChBinchAk9lb,m6newt5oz,p4qt,t1y0;ardEd;able1b0ea1sp;!l,sp;spo1;a,t,x;on9;!b,g,i1l,m,p0;h,s;!les;!b,elvin,g,m;!es;g,z;al,b;eet,oot,t;m,up0;!s",Value:"true\xa6a few",Imperative:"true\xa6bewa0come he0;re","Plural|Verb":"true\xa6leaves",Demonym:"true\xa60:15;1:12;a0Vb0Oc0Dd0Ce08f07g04h02iYjVkTlPmLnIomHpEqatari,rCs7t5u4v3welAz2;am0Gimbabwe0;enezuel0ietnam0I;gAkrai1;aiwTex0hai,rinida0Ju2;ni0Prkmen;a5cotti4e3ingapoOlovak,oma0Spaniard,udRw2y0W;ede,iss;negal0Cr09;sh;mo0uT;o5us0Jw2;and0;a2eru0Fhilippi0Nortugu07uerto r0S;kist3lesti1na2raguay0;ma1;ani;ami00i2orweP;caragu0geri2;an,en;a3ex0Lo2;ngo0Drocc0;cedo1la2;gasy,y07;a4eb9i2;b2thua1;e0Cy0;o,t01;azakh,eny0o2uwaiI;re0;a2orda1;ma0Ap2;anO;celandic,nd4r2sraeli,ta01vo05;a2iB;ni0qi;i0oneU;aiAin2ondur0unO;di;amEe2hanai0reek,uatemal0;or2rm0;gi0;ilipino,ren8;cuadoVgyp4mira3ngli2sto1thiopi0urope0;shm0;ti;ti0;aPominUut3;a9h6o4roat3ub0ze2;ch;!i0;lom2ngol5;bi0;a6i2;le0n2;ese;lifor1m2na3;bo2eroo1;di0;angladeshi,el6o4r3ul2;gaE;azi9it;li2s1;vi0;aru2gi0;si0;fAl7merBngol0r5si0us2;sie,tr2;a2i0;li0;genti2me1;ne;ba1ge2;ri0;ni0;gh0r2;ic0;an",Organization:"true\xa60:4Q;a3Tb3Bc2Od2He2Df27g1Zh1Ti1Pj1Nk1Ll1Gm12n0Po0Mp0Cqu0Br02sTtHuCv9w3xiaomi,y1;amaha,m1Bou1w1B;gov,tu3C;a4e2iki1orld trade organizati33;leaRped0O;lls fargo,st1;fie2Hinghou2R;l1rner br3U;gree3Jl street journ2Im1E;an halOeriz2Xisa,o1;dafo2Yl1;kswagMvo;b4kip,n2ps,s1;a tod3Aps;es3Mi1;lev3Fted natio3C;er,s; mobi32aco beRd bOe9gi frida3Lh3im horto3Amz,o1witt3D;shi49y1;ota,s r 05;e 1in lizzy;b3carpen3Jdaily ma3Dguess w2holli0s1w2;mashing pumpki35uprem0;ho;ea1lack eyed pe3Xyr0Q;ch bo3Dtl0;l2n3Qs1xas instrumen1U;co,la m1F;efoni0Kus;a8cientology,e5ieme2Ymirnoff,np,o3pice gir6quare0Ata1ubaru;rbuc1to34;ks;ny,undgard1;en;a2x pisto1;ls;g1Wrs;few2Minsbur31lesfor03msu2E;adiohead,b8e4o1yana3C;man empi1Xyal 1;b1dutch she4;ank;a3d 1max,vl20;bu1c2Ahot chili peppe2Ylobst2N;ll;ders dige1Ll madrid;c,s;ant3Aizn2Q;a8bs,e5fiz2Ihilip4i3r1;emier 1udenti1D;leagTo2K;nk floyd,zza hut; morrBs;psi2tro1uge0E;br33chi0Tn33;!co;lant2Un1yp16; 2ason27da2P;ld navy,pec,range juli2xf1;am;us;aAb9e6fl,h5i4o1sa,vid3wa;k2tre dame,vart1;is;ia;ke,ntendo,ss0QvZ;l,s;c,st1Otflix,w1; 1sweek;kids on the block,york0D;a,c;nd22s2t1;ional aca2Po,we0U;a,c02d0S;aDcdonalCe9i6lb,o3tv,y1;spa1;ce;b1Tnsanto,ody blu0t1;ley cr1or0T;ue;c2t1;as,subisO;helin,rosoft;dica2rcedes benz,talli1;ca;id,re;ds;cs milk,tt19z24;a3e1g,ittle caesa1P; ore09novo,x1;is,mark,us; 1bour party;pres0Dz boy;atv,fc,kk,lm,m1od1O;art;iffy lu0Roy divisi0Jpmorgan1sa;! cha09;bm,hop,k3n1tv;g,te1;l,rpol;ea;a5ewlett pack1Vi3o1sbc,yundai;me dep1n1P;ot;tac1zbollah;hi;lliburt08sbro;eneral 6hq,ithub,l5mb,o2reen d0Ou1;cci,ns n ros0;ldman sachs,o1;dye1g0H;ar;axo smith kli04encoW;electr0Nm1;oto0Z;a5bi,c barcelo4da,edex,i2leetwood m03o1rito l0G;rd,xcY;at,fa,nancial1restoZ; tim0;na;cebook,nnie mae;b0Asa,u3xxon1; m1m1;ob0J;!rosceptics;aiml0De5isney,o4u1;nkin donu2po0Zran dur1;an;ts;j,w jon0;a,f lepp12ll,peche mode,r spieg02stiny's chi1;ld;aJbc,hFiDloudflaCnn,o3r1;aigsli5eedence clearwater reviv1ossra09;al;c7inba6l4m1o0Est09;ca2p1;aq;st;dplSg1;ate;se;a c1o chanQ;ola;re;a,sco1tigroup;! systems;ev2i1;ck fil a,na daily;r1y;on;d2pital o1rls jr;ne;bury,ill1;ac;aEbc,eBf9l5mw,ni,o1p,rexiteeU;ei3mbardiIston 1;glo1pizza;be;ng;o2ue c1;roV;ckbuster video,omingda1;le; g1g1;oodriL;cht2e ge0rkshire hathaw1;ay;el;cardi,idu,nana republ3s1xt5y5;f,kin robbi1;ns;ic;bYcTdidSerosmith,iRlKmEnheuser busDol,ppleAr6s4u3v2y1;er;is,on;di,todesk;hland o1sociated E;il;b3g2m1;co;os;ys; compu1be0;te1;rs;ch;c,d,erican3t1;!r1;ak; ex1;pre1;ss; 5catel2ta1;ir;! lu1;ce1;nt;jazeera,qae1;da;g,rbnb;as;/dc,a3er,tivision1;! blizz1;ard;demy of scienc0;es;ba",Possessive:"true\xa6its,my,our0thy;!s","Noun|Verb":"true\xa60:9W;1:AA;2:96;3:A3;4:9R;5:A2;6:9K;7:8N;8:7L;9:A8;A:93;B:8D;C:8X;a9Ob8Qc7Id6Re6Gf5Sg5Hh55i4Xj4Uk4Rl4Em40n3Vo3Sp2Squ2Rr21s0Jt02u00vVwGyFzD;ip,oD;ne,om;awn,e6Fie68;aOeMhJiHoErD;ap,e9Oink2;nd0rDuC;kDry,sh5Hth;!shop;ck,nDpe,re,sh;!d,g;e86iD;p,sD;k,p0t2;aDed,lco8W;r,th0;it,lk,rEsDt4ve,x;h,te;!ehou1ra9;aGen5FiFoD;iDmAte,w;ce,d;be,ew,sA;cuum,l4B;pDr7;da5gra6Elo6A;aReQhrPiOoMrGuEwiDy5Z;n,st;nDrn;e,n7O;aGeFiEoDu6;t,ub2;bu5ck4Jgg0m,p;at,k,nd;ck,de,in,nsDp,v7J;f0i8R;ll,ne,p,r4Yss,t94uD;ch,r;ck,de,e,le,me,p,re;e5Wow,u6;ar,e,ll,mp0st,xt;g,lDng2rg7Ps5x;k,ly;a0Sc0Ne0Kh0Fi0Dk0Cl0Am08n06o05pXquaBtKuFwD;ea88iD;ng,pe,t4;bGit,m,ppErD;fa3ge,pri1v2U;lDo6S;e6Py;!je8;aMeLiKoHrEuDy2;dy,ff,mb2;a85eEiDo5Pugg2;ke,ng;am,ss,t4;ckEop,p,rD;e,m;ing,pi2;ck,nk,t4;er,m,p;ck,ff,ge,in,ke,lEmp,nd,p2rDte,y;!e,t;k,l;aJeIiHlGoFrDur,y;ay,e56inDu3;g,k2;ns8Bt;a5Qit;ll,n,r87te;ed,ll;m,n,rk;b,uC;aDee1Tow;ke,p;a5Je4FiDo53;le,rk;eep,iDou4;ce,p,t;ateboa7Ii;de,gnDl2Vnk,p,ze;!al;aGeFiEoDuff2;ck,p,re,w;ft,p,v0;d,i3Ylt0;ck,de,pe,re,ve;aEed,nDrv1It;se,t2N;l,r4t;aGhedu2oBrD;aEeDibb2o3Z;en,w;pe,t4;le,n,r2M;cDfegua72il,mp2;k,rifi3;aZeHhy6LiGoEuD;b,in,le,n,s5X;a6ck,ll,oDpe,u5;f,t;de,ng,ot,p,s1W;aTcSdo,el,fQgPje8lOmMnLo17pJque6sFturn,vDwa6V;eDi27;al,r1;er74oFpe8tEuD;lt,me;!a55;l71rt;air,eaDly,o53;l,t;dezvo2Zt;aDedy;ke,rk;ea1i4G;a6Iist0r5N;act6Yer1Vo71uD;nd,se;a38o6F;ch,s6G;c1Dge,iEke,lly,nDp1Wt1W;ge,k,t;n,se;es6Biv0;a04e00hYiXlToNrEsy4uD;mp,n4rcha1sh;aKeIiHoDu4O;be,ceFdu3fi2grDje8mi1p,te6;amDe6W;!me;ed,ss;ce,de,nt;sDy;er6Cs;cti3i1;iHlFoEp,re,sDuCw0;e,i5Yt;l,p;iDl;ce,sh;nt,s5V;aEce,e32uD;g,mp,n7;ce,nDy;!t;ck,le,n17pe,tNvot;a1oD;ne,tograph;ak,eFnErDt;fu55mA;!c32;!l,r;ckJiInHrFsEtDu1y;ch,e9;s,te;k,tD;!y;!ic;nt,r,se;!a7;bje8ff0il,oErDutli3Qver4B;bAd0ie9;ze;a4ReFoDur1;d,tD;e,i3;ed,gle8tD;!work;aMeKiIoEuD;rd0;ck,d3Rld,nEp,uDve;nt,th;it5EkD;ey;lk,n4Brr5CsDx;s,ta2B;asuBn4UrDss;ge,it;il,nFp,rk3WsEtD;ch,t0;h,k,t0;da5n0oeuvB;aLeJiHoEuD;mp,st;aEbby,ck,g,oDve;k,t;d,n;cDe,ft,mAnIst;en1k;aDc0Pe4vK;ch,d,k,p,se;bFcEnd,p,t4uD;gh,n4;e,k;el,o2U;eEiDno4E;ck,d,ll,ss;el,y;aEo1OuD;i3mp;m,zz;mpJnEr46ssD;ue;c1Rdex,fluGha2k,se2HteDvoi3;nt,rD;e6fa3viD;ew;en3;a8le2A;aJeHiGoEuD;g,nt;l3Ano2Dok,pDr1u1;!e;ghli1Fke,nt,re,t;aDd7lp;d,t;ck,mGndFrEsh,tDu9;ch,e;bo3Xm,ne4Eve6;!le;!m0;aMear,ift,lKossJrFuD;arDe4Alp,n;antee,d;aFiEoDumb2;uCwth;ll,nd,p;de,sp;ip;aBoDue;ss,w;g,in,me,ng,s,te,ze;aZeWiRlNoJrFuD;ck,el,nDss,zz;c38d;aEoDy;st,wn;cDgme,me,nchi1;tuB;cFg,il,ld,rD;ce,e29mDwa31;!at;us;aFe0Vip,oDy;at,ck,od,wD;!er;g,ke,me,re,sh,vo1E;eGgFlEnDre,sh,t,x;an3i0Q;e,m,t0;ht,uB;ld;aEeDn3;d,l;r,tuB;ce,il,ll,rm,vo2W;cho,d7ffe8nMsKxFyeD;!baD;ll;cGerci1hFpDtra8;eriDo0W;en3me9;au6ibA;el,han7u1;caDtima5;pe;count0d,vy;a01eSiMoJrEuDye;b,el,mp,pli2X;aGeFiEoD;ne,p;ft,ll,nk,p,ve;am,ss;ft,g,in;cEd7ubt,wnloD;ad;k,u0E;ge6p,sFt4vD;e,iDor3;de;char7gui1h,liEpD;at4lay,u5;ke;al,bKcJfeIlGmaCposAsEtaD;il;e07iD;gn,re;ay,ega5iD;ght;at,ct;li04rea1;a5ut;b,ma7n3rDte;e,t;a0Eent0Dh06irc2l03oKrFuD;be,e,rDt;b,e,l,ve;aGeFoEuDy;sh;p,ss,wd;dAep;ck,ft,sh;at,de,in,lTmMnFordina5py,re,st,uDv0;gh,nDp2rt;s01t;ceHdu8fli8glomeIsFtDveN;a8rD;a6ol;e9tru8;ct;ntDrn;ra5;bHfoGmFpD;leDouCromi1;me9;aCe9it,u5;rt;at,iD;ne;lap1oD;r,ur;aEiDoud,ub;ck,p;im,w;aEeDip;at,ck,er;iGllen7nErD;ge,m,t;ge,nD;el;n,r;er,re;ke,ll,mp,noe,pGrXsFtEuDve;se,ti0I;alog,ch;h,t;!tuB;re;a03eZiXlToPrHuEyD;pa11;bb2ck2dgEff0mp,rDst,zz;den,n;et;anJeHiFoadEuD;i1sh;ca6;be,d7;ge;aDed;ch,k;ch,d;aFg,mb,nEoDrd0tt2x,ycott;k,st,t;d,e;rd,st;aFeCiDoYur;nk,tz;nd;me;as,d,ke,nd,opsy,tD;!ch,e;aFef,lt,nDt;d,efA;it;r,t;ck,il,lan3nIrFsEtt2;le;e,h;!gDk;aDe;in;!d,g,k;bu1c05dZge,iYlVnTppQrLsIttGucEwaD;rd;tiD;on;aDempt;ck;k,sD;i6ocia5;st;chFmD;!oD;ur;!iD;ve;eEroa4;ch;al;chDg0sw0;or;aEt0;er;rm;d,m,r;dreHvD;an3oD;ca5;te;ce;ss;cDe,he,t;eFoD;rd,u9;nt;nt,ss;se",Actor:"true\xa60:7B;1:7G;2:6A;3:7F;4:7O;5:7K;a6Nb62c4Ud4Be41f3Sg3Bh30i2Uj2Qkin2Pl2Km26n1Zo1Sp0Vqu0Tr0JsQtJuHvEw8yo6;gi,ut6;h,ub0;aAe9i8o7r6;estl0it0;m2rk0;fe,nn0t2Bza2H;atherm2ld0;ge earn0it0nder0rri1;eter7i6oyF;ll5Qp,s3Z;an,ina2U;n6s0;c6Uder03;aoisea23e9herapi5iktok0o8r6ut1yco6S;a6endseLo43;d0mp,nscri0Bvel0;ddl0u1G;a0Qchn7en6na4st0;ag0;i3Oo0D;aiXcUeRhPiMki0mu26oJpGquaFtBu7wee6;p0theart;lt2per7r6;f0ge6Iviv1;h6inten0Ist5Ivis1;ero,um2;a8ep7r6;ang0eam0;bro2Nc2Ofa2Nmo2Nsi20;ff0tesm2;tt0;ec7ir2Do6;kesp59u0M;ia5Jt3;l7me6An,rcere6ul;r,ss;di0oi5;n7s6;sy,t0;g0n0;am2ephe1Iow6;girl,m2r2Q;cretInior cit3Fr6;gea4v6;a4it1;hol4Xi7reen6ulpt1;wr2C;e01on;l1nt;aEe9o8u6;l0nn6;er up,ingE;g40le mod3Zof0;a4Zc8fug2Ppo32searQv6;ere4Uolution6;ary;e6luYru22;ptio3T;bbi,dic5Vpp0;arter6e2Z;back;aYeWhSiRlOoKr8sycho7u6;nk,p31;logi5;aGeDiBo6;d9fess1g7ph47s6;pe2Ktitu51;en6ramm0;it1y;igy,uc0;est4Nme mini0Unce6s3E;!ss;a7si6;de4;ch0;ctiti39nk0P;dca0Oet,li6pula50rnst42;c2Itic6;al scie6i2;nti5;a6umb0;nn0y6;er,ma4Lwright;lgrim,one0;a8iloso7otogra7ra6ysi1V;se;ph0;ntom,rmaci5;r6ssi1T;form0s4O;i3El,nel3Yr8st1tr6wn;i6on;arWot;ent4Wi42tn0;ccupa4ffBp8r7ut6;ca5l0B;ac4Iganiz0ig2Fph2;er3t6;i1Jomet6;ri5;ic0spring;aBe9ie4Xo7u6;n,rser3J;b6mad,vi4V;le2Vo4D;i6mesis,phew;ce,ghb1;nny,rr3t1X;aEeDiAo7u6yst1Y;m8si16;der3gul,m7n6th0;arDk;!my;ni7s6;f02s0Jt0;on,st0;chan1Qnt1rcha4;gi9k0n8rtyr,t6y1;e,riar6;ch;ag0iac;ci2stra3I;a7e2Aieutena4o6;rd,s0v0;bor0d7ndlo6ss,urea3Fwy0ym2;rd;!y;!s28;e8o7u6;ggl0;gg0urna2U;st0;c3Hdol,llu3Ummigra4n6; l9c1Qfa4habi42nov3s7ve6;nt1stig3;pe0Nt6;a1Fig3ru0M;aw;airFeBistoAo8u6ygie1K;man6sba2H;!ita8;bo,st6usekN;age,e3P;ri2;ir,r6;m7o6;!ine;it;dress0sty2C;aLeIhostGirl26ladi3oCrand7u6;e5ru;c9daug0Jfa8m7pa6s2Y;!re4;a,o6;th0;hi1B;al7d6lf0;!de3A;ie,k6te26;eep0;!wr6;it0;isha,n6;i6tl04;us;mbl0rden0;aDella,iAo7r6;eela2Nie1P;e,re6ster pare4;be1Hm2r6st0;unn0;an2ZgZlmm17nanci0r6tt0;e6st la2H; marsh2OfigXm2;rm0th0;conoEdDlectriCm8n7x6;amin0cellency,i2A;emy,trepreneur,vironmenta1J;c8p6;er1loye6;e,r;ee;ci2;it1;mi5;aKeBi8ork,ri7u6we02;de,tche2H;ft0v0;ct3eti7plom2Hre6va;ct1;ci2ti2;aDcor3fencCi0InAput9s7tectLvel6;op0;ce1Ge6ign0;rt0;ee,y;iz6;en;em2;c1Ml0;d8nc0redev7ug6;ht0;il;!dy;a06e04fo,hXitizenWlToBr9u6;r3stomer6;! representat6;ive;e3it6;ic;lJmGnAord9rpor1Nu7w6;boy,ork0;n6ri0;ciTte1Q;in3;fidantAgressSs9t6;e0Kr6;ibut1o6;ll0;tab13ul1O;!e;edi2m6pos0rade;a0EeQissi6;on0;leag8on7um6;ni5;el;ue;e6own;an0r6;ic,k;!s;a9e7i6um;ld;erle6f;ad0;ir7nce6plFract0;ll1;m2wI;lebri6o;ty;dBptAr6shi0;e7pe6;nt0;r,t6;ak0;ain;et;aMeLiJlogg0oErBu6;dd0Fild0rgl9siness6;m2p7w6;om2;ers05;ar;i7o6;!k0th0;cklay0de,gadi0;hemi2oge8y6;!frie6;nd;ym2;an;cyc6sR;li5;atbox0ings;by,nk0r6;b0on7te6;nd0;!e07;c04dWge4nQpLrHsFtAu7yatull6;ah;nt7t6;h1oG;!ie;h8t6;e6orney;nda4;ie5le6;te;sis00tron6;aut,om0;chbis8isto7tis6;an,t;crU;hop;ost9p6;ari6rentiS;ti6;on;le;a9cest1im3nou8y6;bo6;dy;nc0;ly5rc6;hi5;mi8v6;entur0is1;er;ni7r6;al;str3;at1;or;counBquaintanArob9t6;ivi5or,re6;ss;st;at;ce;ta4;nt","Adj|Noun":"true\xa60:16;a1Db17c0Ud0Re0Mf0Dg0Ah08i06ju05l02mWnUoSpNrIsBt7u4v1watershed;a1ision0Z;gabo4nilla,ria1;b0Vnt;ndergr1pstairs;adua14ou1;nd;a3e1oken,ri0;en,r1;min0rori13;boo,n;age,e5ilv0Flack,o3quat,ta2u1well;bordina0Xper5;b0Lndard;ciali0Yl1vereign;e,ve16;cret,n1ri0;ior;a4e2ou1ubbiL;nd,tiY;ar,bBl0Wnt0p1side11;resent0Vublican;ci0Qsh;a4eriodic0last0Zotenti0r1;emi2incip0o1;!fession0;er,um;rall4st,tie0U;ff1pposi0Hv0;ens0Oi0C;agg01ov1uts;el;a5e3iniatJo1;bi01der07r1;al,t0;di1tr0N;an,um;le,riG;attOi2u1;sh;ber0ght,qC;stice,veniT;de0mpressioYn1;cumbe0Edividu0no0Dsta0Eterim;alf,o1umdrum;bby,melF;en2old,ra1;ph0Bve;er0ious;a7e5i4l3u1;git03t1;ure;uid;ne;llow,m1;aFiL;ir,t,vo1;riOuriO;l3p00x1;c1ecutUpeV;ess;d1iK;er;ar2e1;mographUrivO;k,l2;hiGlassSo2rude,unn1;ing;m5n1operK;creCstitueOte2vertab1;le;mpor1nt;ary;ic,m2p1;anion,lex;er2u1;ni8;ci0;al;e5lank,o4r1;i2u1;te;ef;ttom,urgeois;st;cadem9d6l2ntarct9r1;ab,ct8;e3tern1;at1;ive;rt;oles1ult;ce1;nt;ic","Adj|Past":"true\xa60:4Q;1:4C;2:4H;3:4E;a44b3Tc36d2Je29f20g1Wh1Si1Jj1Gkno1Fl1Am15n12o0Xp0Mqu0Kr08sLtEuAv9w4yellow0;a7ea6o4rinkl0;r4u3Y;n,ri0;k31th3;rp0sh0tZ;ari0e1O;n5p4s0;d1li1Rset;cov3derstood,i4;fi0t0;a8e3Rhr7i6ouTr4urn0wi4C;a4imm0ou2G;ck0in0pp0;ed,r0;eat2Qi37;m0nn0r4;get0ni2T;aOcKeIhGimFm0Hoak0pDt7u4;bsid3Ogge44s4;pe4ta2Y;ct0nd0;a8e7i2Eok0r5u4;ff0mp0nn0;ength2Hip4;ed,p0;am0reotyp0;in0t0;eci4ik0oH;al3Efi0;pRul1;a4ock0ut;d0r0;a4c1Jle2t31;l0s3Ut0;a6or5r4;at4e25;ch0;r0tt3;t4ut0;is2Mur1;aEe5o4;tt0;cAdJf2Bg9je2l8m0Knew0p7qu6s4;eTpe2t4;or0ri2;e3Dir0;e1lac0;at0e2Q;i0Rul1;eiv0o4ycl0;mme2Lrd0v3;in0lli0ti2A;a4ot0;li28;aCer30iBlAo9r5u4;mp0zzl0;e6i2Oo4;ce2Fd4lo1Anou30pos0te2v0;uc0;fe1CocCp0Iss0;i2Kli1L;ann0e2CuS;ck0erc0ss0;ck0i2Hr4st0;allLk0;bse7c6pp13rgan2Dver4;lo4whelm0;ok0;cupi0;rv0;aJe5o4;t0uri1A;ed0gle2;a6e5ix0o4ut0ys1N;di1Nt15u26;as0Clt0;n4rk0;ag0ufact0A;e6i5o4;ad0ck0st,v0;cens0m04st0;ft,v4;el0;tt0wn;a5o15u4;dg0s1B;gg0;llumSmpAn4sol1;br0cre1Ldebt0f8jZspir0t5v4;it0olv0;e4ox0Y;gr1n4re23;d0si15;e2l1o1Wuri1;li0o01r4;ov0;a6e1o4um03;ok0r4;ri0Z;mm3rm0;i6r5u4;a1Bid0;a0Ui0Rown;ft0;aAe9i8l6oc0Ir4;a4i0oz0Y;ctHg19m0;avo0Ju4;st3;ni08tt0x0;ar0;d0il0sc4;in1;dCl1mBn9quipp0s8x4;agger1c6p4te0T;a0Se4os0;ct0rie1D;it0;cap0tabliZ;cha0XgFha1As4;ur0;a0Zbarra0N;i0Buc1;aMeDi5r4;a01i0;gni08miniSre2s4;a9c6grun0Ft4;o4re0Hu17;rt0;iplWou4;nt0r4;ag0;bl0;cBdRf9l8p7ra6t5v4;elop0ot0;ail0ermQ;ng0;re07;ay0ight0;e4in0o0M;rr0;ay0enTor1;m5t0z4;ed,zl0;ag0p4;en0;aPeLhIlHo9r6u4;lt4r0stom03;iv1;a5owd0u4;sh0;ck0mp0;d0loAm7n4ok0v3;centr1f5s4troC;id3olid1;us0;b5pl4;ic1;in0;r0ur0;assi9os0utt3;ar5i4;ll0;g0m0;lebr1n6r4;ti4;fi0;tralJ;g0lcul1;aDewild3iCl9o7r5urn4;ed,t;ok4uis0;en;il0r0t4und;tl0;e5i4;nd0;ss0;as0;ffl0k0laMs0tt3;bPcNdKfIg0lFmaz0nDppBrm0ss9u5wa4;rd0;g5thor4;iz0;me4;nt0;o6u4;m0r0;li0re4;ci1;im1ticip1;at0;a5leg0t3;er0;rm0;fe2;ct0;ju5o7va4;nc0;st0;ce4knowledg0;pt0;and5so4;rb0;on0;ed",Singular:"true\xa60:5I;1:5G;2:4V;3:4R;4:51;5:56;6:5K;a4Zb4Ic3Ld33e2Vf2Mg2Hh26in22j21k20l1Sm1Jn1Fo19p0Pqu0Or0DsXtKuFvAw7x r55yo yo;a7ha3No3O;f3i4Ot0Ey7;! arou37;arAe8ideo ga2Oo7;cabu4Gl59;gMr7t;di4Wt1W;iety,ni4M;n9p2Yr8s 7;do41s5B;bani1in0;coordinat38der7;estima1to22we3Z; rex,aIeHhFiDoCr9u8v7;! show;m2Mn2rntJto1B;agedy,ib7o4B;e,u7;n0ta43;ni1p2rq3J;c,er,m7;etD;ing7ree24;!y;am,mp3D;ct2le6x return;aLcKeIhor4NiHkFoEpin off,tBu9y7;ll7ner4Jst4Q;ab2V;b7i1n26per bowl,rro1V;st3Jtot0;at8ipe2Eo1Jrate4Fudent7;! lo0G;i37u1;ft ser4Imeo1G;elet5i7;ll,r3S;b36gn2Rte;ab2Hc7min39;t,urity gua2L;e6ho2W;bbatic0la3Gndwi0Opi5;av5eBhetor2i8o7;de6om,w;t8v7;erb2A;e,u0;bBc9f7publ2r0Yspi1;er7orm3;e6r0;i7ord label;p2Ft0;a1u43;estion mark,ot2D;aNeKhoJiGlEoCr8u7yram1D;ddi3EpCrpo1Hs3G;e9o7;bl3Ws7;pe3Gta1;dic1Pmi1Dp1Oroga3Sss relea1D;p7rt0;py;a7ebisci1;q2Bte;cn2e8g7;!gy;!r;ne call,tocoI;anut,d8r7t0yo1;cen3Gsp3H;al,est0;nop4r8t7;e,hog5;adi0Zi2S;atme0bj3Cc9pia1rde0thers,utspok5ve7wn3;n,r7;ti0Nview;cu8e7;an;pi3;ar9it8ot7umb3;a2Chi2O;e,ra1;cot2ra34;aDeAi8o7ur0;nopo4p16rni2Ksq1Pti33uld;c,li0Zn08s7tt5;chief,si31;d8nu,t7;al,i3;al,ic;gna1mm0nd13rsupi0te7yf4;ri0;aBegAi9u7;ddi1n7;ch;me,p07; 9e0K;bor12y7; 7er;up;eyno1itt5;el4ourn0;c9dices,itia2Kni22s8tel0Jvert7;eb1H;e25titu1;en2Hi2Q;aGeCighBo8u7;man right,s1Z;me7rmoDsp1Dtb0I;! r7;un; scho0WriW;a7i1K;d7v5; start,pho7;ne;ndful,sh brown,v5ze;a9elat0Glaci3r7ul4yp1P;an7enadi3id;a19d slam,ny;df4r7;l2ni1F;aEeti1EiDlu1oAr8un7;er0;ee market,i7onti3;ga1;l4ur7;so7;me;eNref4;br2mi4;conoDffi1Mgg,lecto0Pmbas1BnApidem2s1Wth2ven9x8yel7;id;ampXempl0Lte6;i16t;er1Iterp7;ri7;se;my;eJiCo9r7ump tru0R;agonf4i7;er,ve thru;c8g1Bi4or,ssi3wn7;side;to0CumenC;aCgniBnn3s8vide7;nd;conte6incen1Bp7tri0Y;osi7;tion;ta0E;le0U;ath9c8f7ni0terre6;ault 03err0;al,im0;!b7;ed;aUeRhKiJlHoBr7;edit ca9uc7;ib7;le;rd;efficBke,lAmmuniqJns8pi3rr0t0Uus7yo1;in;erv7uG;atoZ;ic,lO;ie6;er0Li7oth;e6n2;ty,vil wK;aBeqAick5oco9r7;istmas car7ysanthemum;ol;la1;ue;ndeli3racteri7;st2;i8llCr7;e0tifica1;liW;hi3nDpCrAt7ucus;erpi7hedr0;ll7;ar;!bohyd7ri3;ra1;it0;a7e,nib0;l,ry;aKeJiop2leHoFrBu7;nny,r7tterf4;g7i0;la7;ry;eak8i7;ck;fa7thro9;st;dy,ro7wl;ugh;mi7;sh;an,l4;nki8rri3;er;ng;cQdKlGnDppeti1rBs9tt2utop7;sy;ic;ce6pe7;ct;r7sen0;ay;ec8oma4ti8;ly;do1;i5l7;er7y;gy;en; hominBj8van7;tage;ec7;ti7;ve;em;cAe8qui7;tt0;ta1;te;i8ru0;al;de6;nt","Person|Noun":"true\xa6a0Eb07c03dWeUfQgOhLjHkiGlFmCnBolive,p7r4s3trini06v1wa0;ng,rd,tts;an,enus,iol0;a,et;ky,onPumm09;ay,e1o0uby;bin,d,se;ed,x;a2e1o0;l,tt04;aLnJ;dYge,tR;at,orm;a0eloW;t0x,ya;!s;a9eo,iH;ng,tP;a2e1o0;lGy;an,w3;de,smi4y;a0erb,iOolBuntR;ll,z0;el;ail,e0iLuy;ne;a1ern,i0lo;elds,nn;ith,n0;ny;a0dEmir,ula,ve;rl;a4e3i1j,ol0;ly;ck,x0;ie;an,ja;i0wn;sy;am,h0liff,rystal;a0in,ristian;mbers,ri0;ty;a4e3i2o,r0ud;an0ook;dy;ll;nedict,rg;k0nks;er;l0rt;fredo,ma","Actor|Verb":"true\xa6aCb8c5doctor,engineAfool,g3host,judge,m2nerd,p1recruit,scout,ushAvolunteAwi0;mp,tneA;arent,ilot;an,ime;eek,oof,r0uide;adu8oom;ha1o0;ach,nscript,ok;mpion,uffeur;o2u0;lly,tch0;er;ss;ddi1ffili0rchite1;ate;ct",MaleName:"true\xa60:H6;1:FZ;2:DS;3:GQ;4:CZ;5:FV;6:GM;7:FP;8:GW;9:ET;A:C2;B:GD;aF8bE1cCQdBMeASfA1g8Yh88i7Uj6Sk6Bl5Mm48n3So3Ip33qu31r26s1Et0Ru0Ov0CwTxSyHzC;aCor0;cChC1karia,nAT;!hDkC;!aF6;!ar7CeF5;aJevgenBSoEuC;en,rFVsCu3FvEF;if,uf;nDs6OusC;ouf,s6N;aCg;s,tC;an,h0;hli,nCrosE1ss09;is,nC;!iBU;avi2ho5;aPeNiDoCyaEL;jcieBJlfgang,odrFutR;lFnC;f8TsC;lCt1;ow;bGey,frEhe4QlC;aE5iCy;am,e,s;ed8iC;d,ed;eAur;i,ndeD2rn2sC;!l9t1;lDyC;l1ne;lDtC;!er;aCHy;aKernDAiFladDoC;jteB0lodymyr;!iC;mFQsDB;cFha0ktBZnceDrgCOvC;a0ek;!nC;t,zo;!e4StBV;lCnC7sily;!entC;in9J;ghE2lCm70nax,ri,sm0;riCyss87;ch,k;aWeRhNiLoGrEuDyC;!l2roEDs1;n6r6E;avD0eCist0oy,um0;ntCRvBKy;bFdAWmCny;!asDmCoharu;aFFie,y;!z;iA6y;mCt4;!my,othy;adEeoDia0SomC;!as;!dor91;!de4;dFrC;enBKrC;anBJeCy;ll,nBI;!dy;dgh,ha,iCnn2req,tsu5V;cDAka;aYcotWeThPiMlobod0oKpenc2tEurDvenAEyCzym1;ed,lvest2;aj,e9V;anFeDuC;!aA;fan17phEQvCwaA;e77ie;!islaCl9;v,w;lom1rBuC;leymaDHta;dDgmu9UlCm1yabonga;as,v8B;!dhart8Yn9;aEeClo75;lCrm0;d1t1;h9Jne,qu1Jun,wn,yne;aDbastiEDk2Yl5Mpp,rgCth,ymoCU;e1Dio;m4n;!tC;!ie,y;eDPlFmEnCq67tosCMul;dCj2UtiA5;e01ro;!iATkeB6mC4u5;!ik,vato9K;aZeUheC8iRoGuDyC;an,ou;b99dDf4peAssC;!elEG;ol00y;an,bLc7MdJel,geIh0lHmGnEry,sDyC;!ce;ar7Ocoe,s;!aCnBU;ld,n;an,eo;a7Ef;l7Jr;e3Eg2n9olfo,riC;go;bBNeDH;cCl9;ar87c86h54kCo;!ey,ie,y;cFeA3gDid,ubByCza;an8Ln06;g85iC;naC6s;ep;ch8Kfa5hHin2je8HlGmFndEoHpha5sDul,wi36yC;an,mo8O;h9Im4;alDSol3O;iD0on;f,ph;ul;e9CinC;cy,t1;aOeLhilJiFrCyoG;aDeC;m,st1;ka85v2O;eDoC;tr;r8GtC;er,ro;!ipCl6H;!p6U;dCLrcy,tC;ar,e9JrC;!o7;b9Udra8So9UscAHtri62ulCv8I;!ie,o7;ctav6Ji2lImHndrBRrGsDtCum6wB;is,to;aDc6k6m0vCwaBE;al79;ma;i,vR;ar,er;aDeksandr,ivC;er,i2;f,v;aNeLguyBiFoCu3O;aDel,j4l0ma0rC;beAm0;h,m;cFels,g5i9EkDlC;es,s;!au,h96l78olaC;!i,y;hCkCol76;ol75;al,d,il,ls1vC;ilAF;hom,tC;e,hC;anCy;!a5i5;aYeViLoGuDyC;l4Nr1;hamDr84staC;fa,p6E;ed,mG;di10e,hamEis4JntDritz,sCussa;es,he;e,y;ad,ed,mC;ad,ed;cGgu5hai,kFlEnDtchC;!e8O;a9Pik;house,o7t1;ae73eC3ha8Iolaj;ah,hDkC;!ey,y;aDeC;al,l;el,l;hDlv3rC;le,ri8Ev4T;di,met;ay0c00gn4hWjd,ks2NlTmadZnSrKsXtDuric7VxC;imilBKwe8B;eHhEi69tCus,y69;!eo,hCia7;ew,i67;eDiC;as,eu,s;us,w;j,o;cHiGkFlEqu8Qsha83tCv3;iCy;!m,n;in,on;el,o7us;a6Yo7us;!elCin,o7us;!l8o;frAEi5Zny,u5;achDcoCik;lm;ai,y;amDdi,e5VmC;oud;adCm6W;ou;aulCi9P;ay;aWeOiMloyd,oJuDyC;le,nd1;cFdEiDkCth2uk;a7e;gi,s,z;ov7Cv6Hw6H;!as,iC;a6Een;g0nn52renDuCvA4we7D;!iS;!zo;am,n4oC;n5r;a9Yevi,la5KnHoFst2thaEvC;eCi;nte;bo;nCpo8V;!a82el,id;!nC;aAy;mEnd1rDsz73urenCwr6K;ce,t;ry,s;ar,beAont;aOeIhalHiFla4onr63rDu5SylC;e,s;istCzysztof;i0oph2;er0ngsl9p,rC;ilA9k,ollos;ed,id;en0iGnDrmCv4Z;it;!dDnCt1;e2Ny;ri4Z;r,th;cp2j4mEna8BrDsp6them,uC;ri;im,l;al,il;a03eXiVoFuC;an,lCst3;en,iC;an,en,o,us;aQeOhKkub4AnIrGsDzC;ef;eDhCi9Wue;!ua;!f,ph;dCge;i,on;!aCny;h,s,th6J;anDnC;!ath6Hie,n72;!nC;!es;!l,sCy;ph;o,qu3;an,mC;!i,m6V;d,ffFns,rCs4;a7JemDmai7QoCry;me,ni1H;i9Dy;!e73rC;ey,y;cKdBkImHrEsDvi2yC;dBs1;on,p2;ed,oDrCv67;e6Qod;d,s61;al,es5Wis1;a,e,oCub;b,v;ob,qu13;aTbNchiMgLke53lija,nuKonut,rIsEtCv0;ai,suC;ki;aDha0i8XmaCsac;el,il;ac,iaC;h,s;a,vinCw3;!g;k,nngu6X;nac1Xor;ka;ai,rahC;im;aReLoIuCyd6;beAgGmFsC;eyDsC;a3e3;in,n;ber5W;h,o;m2raDsse3wC;a5Pie;c49t1K;a0Qct3XiGnDrC;beAman08;dr7VrC;iCy2N;!k,q1R;n0Tt3S;bKlJmza,nIo,rEsDyC;a5KdB;an,s0;lEo67r2IuCv9;hi5Hki,tC;a,o;an,ey;k,s;!im;ib;a08e00iUlenToQrMuCyorgy;iHnFsC;!taC;f,vC;!e,o;n6tC;er,h2;do,lC;herDlC;auCerQ;me;aEegCov2;!g,orC;!io,y;dy,h7C;dfr9nza3XrDttfC;ri6C;an,d47;!n;acoGlEno,oCuseppe;rgiCvan6O;!o,s;be6Ies,lC;es;mo;oFrC;aDha4HrC;it,y;ld,rd8;ffErgC;!e7iCy;!os;!r9;bElBrCv3;eCla1Nr4Hth,y;th;e,rC;e3YielC;!i4;aXeSiQlOorrest,rCyod2E;aHedFiC;edDtC;s,z;ri18;!d42eri11riC;ck,k;nCs2;cEkC;ie,lC;in,yn;esLisC;!co,z3M;etch2oC;ri0yd;d5lConn;ip;deriFliEng,rC;dinaCg4nan0B;nd8;pe,x;co;bCdi,hd;iEriC;ce,zC;io;an,en,o;benez2dZfrYit0lTmMnJo3rFsteb0th0ugenEvCymBzra;an,eCge4D;ns,re3K;!e;gi,iDnCrol,v3w3;est8ie,st;cCk;!h,k;o0DriCzo;co,qC;ue;aHerGiDmC;aGe3A;lCrh0;!iC;a10o,s;s1y;nu5;beAd1iEliDm2t1viCwood;n,s;ot28s;!as,j5Hot,sC;ha;a3en;!dGg6mFoDua2QwC;a2Pin;arC;do;oZuZ;ie;a04eTiOmitrNoFrag0uEwDylC;an,l0;ay3Hig4D;a3Gdl9nc0st3;minFnDri0ugCvydGy2S;!lF;!a36nCov0;e1Eie,y;go,iDykC;as;cCk;!k;i,y;armuFetDll1mitri7neCon,rk;sh;er,m6riC;ch;id;andLepak,j0lbeAmetri4nIon,rGsEvDwCxt2;ay30ey;en,in;hawn,moC;nd;ek,riC;ck;is,nC;is,y;rt;re;an,le,mKnIrEvC;e,iC;!d;en,iEne0PrCyl;eCin,yl;l45n;n,o,us;!iCny;el,lo;iCon;an,en,on;a0Fe0Ch03iar0lRoJrFuDyrC;il,us;rtC;!is;aEistC;iaCob12;no;ig;dy,lInErC;ey,neliCy;s,us;nEor,rDstaC;nt3;ad;or;by,e,in,l3t1;aHeEiCyde;fCnt,ve;fo0Xt1;menDt4;us;s,t;rFuDyC;!t1;dCs;e,io;enC;ce;aHeGrisC;!toC;phCs;!eC;!r;st2t;d,rCs;b5leC;s,y;cDdrCs6;ic;il;lHmFrC;ey,lDroCy;ll;!o7t1;er1iC;lo;!eb,v3;a09eZiVjorn,laUoSrEuCyr1;ddy,rtKst2;er;aKeFiEuDyC;an,ce,on;ce,no;an,ce;nDtC;!t;dDtC;!on;an,on;dFnC;dDisC;lav;en,on;!foOl9y;bby,gd0rCyd;is;i0Lke;bElDshC;al;al,lL;ek;nIrCshoi;at,nEtC;!raC;m,nd;aDhaCie;rd;rd8;!iDjam3nCs1;ie,y;to;kaMlazs,nHrC;n9rDtC;!holomew;eCy;tt;ey;dCeD;ar,iC;le;ar1Nb1Dd16fon15gust3hm12i0Zja0Yl0Bm07nTputsiSrGsaFugustEveDyCziz;a0kh0;ry;o,us;hi;aMchiKiJjun,mHnEon,tCy0;em,hCie,ur8;ur;aDoC;!ld;ud,v;aCin;an,nd8;!el,ki;baCe;ld;ta;aq;aMdHgel8tCw6;hoFoC;iDnC;!i8y;ne;ny;er7rCy;eDzC;ej;!as,i,j,s,w;!s;s,tolC;iCy;!y;ar,iEmaCos;nu5r;el;ne,r,t;aVbSdBeJfHiGl01onFphonsEt1vC;aPin;on;e,o;so,zo;!sR;!onZrC;ed;c,jaHksFssaHxC;!andC;er,rC;e,os,u;andCei;ar,er,r;ndC;ro;en;eDrecC;ht;rt8;dd3in,n,sC;taC;ir;ni;dDm6;ar;an,en;ad,eC;d,t;in;so;aGi,olErDvC;ik;ian8;f8ph;!o;mCn;!a;dGeFraDuC;!bakr,lfazl;hCm;am;!l;allFel,oulaye,ulC;!lDrahm0;an;ah,o;ah;av,on",Uncountable:"true\xa60:2E;1:2L;2:33;a2Ub2Lc29d22e1Rf1Ng1Eh16i11j0Yk0Wl0Rm0Hn0Do0Cp03rZsLt9uran2Jv7w3you gu0E;a5his17i4oo3;d,l;ldlife,ne;rm8t1;apor,ernacul29i3;neg28ol1Otae;eDhBiAo8r4un3yranny;a,gst1B;aff2Oea1Ko4ue nor3;th;o08u3;bleshoot2Ose1Tt;night,othpas1Vwn3;foEsfoE;me off,n;er3und1;e,mod2S;a,nnis;aDcCeBhAi9ki8o7p6t4u3weepstak0;g1Unshi2Hshi;ati08e3;am,el;ace2Keci0;ap,cc1meth2C;n,ttl0;lk;eep,ingl0or1C;lf,na1Gri0;ene1Kisso1C;d0Wfe2l4nd,t3;i0Iurn;m1Ut;abi0e4ic3;e,ke15;c3i01laxa11search;ogni10rea10;a9e8hys7luto,o5re3ut2;amble,mis0s3ten20;en1Zs0L;l3rk;i28l0EyH; 16i28;a24tr0F;nt3ti0M;i0s;bstetri24vercrowd1Qxyg09;a5e4owada3utella;ys;ptu1Ows;il poliZtional securi2;aAe8o5u3;m3s1H;ps;n3o1K;ey,o3;gamy;a3cha0Elancholy,rchandi1Htallurgy;sl0t;chine3g1Aj1Hrs,thema1Q; learn1Cry;aught1e6i5ogi4u3;ck,g12;c,s1M;ce,ghtn18nguis1LteratWv1;ath1isVss;ara0EindergartPn3;icke0Aowled0Y;e3upit1;a3llyfiGwel0G;ns;ce,gnor6mp5n3;forma00ter3;net,sta07;atiSort3rov;an18;a7e6isto09o3ung1;ckey,mework,ne4o3rseradi8spitali2use arrest;ky;s2y;adquarteXre;ir,libut,ppiHs3;hi3te;sh;ene8l6o5r3um,ymnas11;a3eZ;niUss;lf,re;ut3yce0F;en; 3ti0W;edit0Hpo3;ol;aNicFlour,o4urnit3;ure;od,rgive3uri1wl;ness;arCcono0LducaBlectr9n7quip8thi0Pvery6x3;ist4per3;ti0B;en0J;body,o08th07;joy3tertain3;ment;ici2o3;ni0H;tiS;nings,th;emi02i6o4raugh3ynas2;ts;pe,wnstai3;rs;abet0ce,s3;honZrepu3;te;aDelciChAivi07l8o3urrency;al,ld w6mmenta5n3ral,ttIuscoB;fusiHt 3;ed;ry;ar;assi01oth0;es;aos,e3;eMwK;us;d,rO;a8i6lood,owlHread5u3;ntGtt1;er;!th;lliarJs3;on;g3ss;ga3;ge;cKdviJeroGirFmBn6ppeal court,r4spi3thleL;rin;ithmet3sen3;ic;i6y3;o4th3;ing;ne;se;en5n3;es2;ty;ds;craft;bi8d3nau7;yna3;mi6;ce;id,ous3;ti3;cs",Infinitive:"true\xa60:9G;1:9T;2:AD;3:90;4:9Z;5:84;6:AH;7:A9;8:92;9:A0;A:AG;B:AI;C:9V;D:8R;E:8O;F:97;G:6H;H:7D;a94b8Hc7Jd68e4Zf4Mg4Gh4Ai3Qj3Nk3Kl3Bm34nou48o2Vp2Equ2Dr1Es0CtZuTvRwI;aOeNiLors5rI;eJiI;ng,te;ak,st3;d5e8TthI;draw,er;a2d,ep;i2ke,nIrn;d1t;aIie;liADniAry;nJpI;ho8Llift;cov1dJear8Hfound8DlIplug,rav82tie,ve94;eaAo3X;erIo;cut,go,staAFvalA3w2G;aSeQhNoMrIu73;aIe72;ffi3Smp3nsI;aBfo7CpI;i8oD;pp3ugh5;aJiJrIwaD;eat5i2;nk;aImA0;ch,se;ck3ilor,keImp1r8L;! paD;a0Ic0He0Fh0Bi0Al08mugg3n07o05p02qu01tUuLwI;aJeeIim;p,t5;ll7Wy;bNccMffLggeCmmKppJrI;mouFpa6Zvi2;o0re6Y;ari0on;er,i4;e7Numb;li9KmJsiIveD;de,st;er9it;aMe8MiKrI;ang3eIi2;ng27w;fIng;f5le;b,gg1rI;t3ve;a4AiA;a4UeJit,l7DoI;il,of;ak,nd;lIot7Kw;icEve;atGeak,i0O;aIi6;m,y;ft,ng,t;aKi6CoJriIun;nk,v6Q;ot,rt5;ke,rp5tt1;eIll,nd,que8Gv1w;!k,m;aven9ul8W;dd5tis1Iy;a0FeKiJoI;am,t,ut;d,p5;a0Ab08c06d05f01group,hea00iZjoi4lXmWnVpTq3MsOtMup,vI;amp,eJiIo3B;sEve;l,rI;e,t;i8rI;ie2ofE;eLiKpo8PtIurfa4;o24rI;aHiBuctu8;de,gn,st;mb3nt;el,hra0lIreseF;a4e71;d1ew,o07;aHe3Fo2;a7eFiIo6Jy;e2nq41ve;mbur0nf38;r0t;inKleBocus,rJuI;el,rbiA;aBeA;an4e;aBu4;ei2k8Bla43oIyc3;gni39nci3up,v1;oot,uI;ff;ct,d,liIp;se,ze;tt3viA;aAenGit,o7;aWerUinpoiFlumm1LoTrLuI;b47ke,niArIt;poDsuI;aFe;eMoI;cKd,fe4XhibEmo7noJpo0sp1tru6vI;e,i6o5L;un4;la3Nu8;aGclu6dJf1occupy,sup0JvI;a6BeF;etermi4TiB;aGllu7rtr5Ksse4Q;cei2fo4NiAmea7plex,sIva6;eve8iCua6;mp1rItrol,ve;a6It6E;bOccuNmEpMutLverIwe;l07sJtu6Yu0wI;helm;ee,h1F;gr5Cnu2Cpa4;era7i4Ipo0;py,r;ey,seItaH;r2ss;aMe0ViJoIultiply;leCu6Pw;micJnIspla4;ce,g3us;!k;iIke,na9;m,ntaH;aPeLiIo0u3N;ke,ng1quIv5;eIi6S;fy;aKnIss5;d,gI;th5;rn,ve;ng2Gu1N;eep,idnJnI;e4Cow;ap;oHuI;gg3xtaI;po0;gno8mVnIrk;cTdRfQgeChPitia7ju8q1CsNtKun6EvI;a6eIo11;nt,rt,st;erJimi6BoxiPrI;odu4u6;aBn,pr03ru6C;iCpi8tIu8;all,il,ruB;abEibE;eCo3Eu0;iIul9;ca7;i7lu6;b5Xmer0pI;aLer4Uin9ly,oJrI;e3Ais6Bo2;rt,se,veI;riA;le,rt;aLeKiIoiCuD;de,jaInd1;ck;ar,iT;mp1ng,pp5raIve;ng5Mss;ath1et,iMle27oLrI;aJeIow;et;b,pp3ze;!ve5A;gg3ve;aTer45i5RlSorMrJuI;lf4Cndrai0r48;eJiIolic;ght5;e0Qsh5;b3XeLfeEgJsI;a3Dee;eIi2;!t;clo0go,shIwa4Z;ad3F;att1ee,i36;lt1st5;a0OdEl0Mm0FnXquip,rWsVtGvTxI;aRcPeDhOiNpJtIu6;ing0Yol;eKi8lIo0un9;aHoI;it,re;ct,di7l;st,t;a3oDu3B;e30lI;a10u6;lt,mi28;alua7oI;ke,l2;chew,pou0tab19;a0u4U;aYcVdTfSgQhan4joy,lPqOrNsuMtKvI;e0YisI;a9i50;er,i4rI;aHenGuC;e,re;iGol0F;ui8;ar9iC;a9eIra2ulf;nd1;or4;ang1oIu8;r0w;irc3lo0ou0ErJuI;mb1;oaGy4D;b3ct;bKer9pI;hasiIow1;ze;aKody,rI;a4oiI;d1l;lm,rk;ap0eBuI;ci40de;rIt;ma0Rn;a0Re04iKo,rIwind3;aw,ed9oI;wn;agno0e,ff1g,mi2Kne,sLvI;eIul9;rIst;ge,t;aWbVcQlod9mant3pNru3TsMtI;iIoDu37;lJngI;uiA;!l;ol2ua6;eJlIo0ro2;a4ea0;n0r0;a2Xe36lKoIu0S;uIv1;ra9;aIo0;im;a3Kur0;b3rm;af5b01cVduBep5fUliTmQnOpMrLsiCtaGvI;eIol2;lop;ch;a20i2;aDiBloIoD;re,y;oIy;te,un4;eJoI;liA;an;mEv1;a4i0Ao06raud,y;ei2iMla8oKrI;ee,yI;!pt;de,mIup3;missi34po0;de,ma7ph1;aJrief,uI;g,nk;rk;mp5rk5uF;a0Dea0h0Ai09l08oKrIurta1G;a2ea7ipp3uI;mb3;ales4e04habEinci6ll03m00nIrro6;cXdUfQju8no7qu1sLtKvI;eIin4;ne,r9y;aHin2Bribu7;er2iLoli2Epi8tJuI;lt,me;itu7raH;in;d1st;eKiJoIroFu0;rm;de,gu8rm;ss;eJoI;ne;mn,n0;eIlu6ur;al,i2;buCe,men4pI;eIi3ly;l,te;eBi6u6;r4xiC;ean0iT;rcumveFte;eJirp,oI;o0p;riAw;ncIre5t1ulk;el;a02eSi6lQoPrKuI;iXrIy;st,y;aLeaKiJoad5;en;ng;stfeLtX;ke;il,l11mba0WrrMth1;eIow;ed;!coQfrie1LgPhMliLqueaKstJtrIwild1;ay;ow;th;e2tt3;a2eJoI;ld;ad;!in,ui3;me;bysEckfi8ff3tI;he;b15c0Rd0Iff0Ggree,l0Cm09n03ppZrXsQttOuMvJwaE;it;eDoI;id;rt;gIto0X;meF;aIeCraB;ch,in;pi8sJtoI;niA;aKeIi04u8;mb3rt,ss;le;il;re;g0Hi0ou0rI;an9i2;eaKly,oiFrI;ai0o2;nt;r,se;aMi0GnJtI;icipa7;eJoIul;un4y;al;ly0;aJu0;se;lga08ze;iKlI;e9oIu6;t,w;gn;ix,oI;rd;a03jNmiKoJsoI;rb;pt,rn;niIt;st1;er;ouJuC;st;rn;cLhie2knowled9quiItiva7;es4re;ce;ge;eQliOoKrJusI;e,tom;ue;mIst;moJpI;any,liA;da7;ma7;te;pt;andPduBet,i6oKsI;coKol2;ve;liArt,uI;nd;sh;de;ct;on",Person:"true\xa60:1Q;a29b1Zc1Md1Ee18f15g13h0Ri0Qj0Nk0Jl0Gm09n06o05p00rPsItCusain bolt,v9w4xzibit,y1;anni,oko on2uji,v1;an,es;en,o;a3ednesday adams,i2o1;lfram,o0Q;ll ferrell,z khalifa;lt disn1Qr1;hol,r0G;a2i1oltai06;n dies0Zrginia wo17;lentino rossi,n goG;a4h3i2ripp,u1yra banks;lZpac shakur;ger woods,mba07;eresa may,or;kashi,t1ylor;um,ya1B;a5carlett johanss0h4i3lobodan milosevic,no2ocr1Lpider1uperm0Fwami; m0Em0E;op dogg,w whi1H;egfried,nbad;akespeaTerlock holm1Sia labeouf;ddam hussa16nt1;a cla11ig9;aAe6i5o3u1za;mi,n dmc,paul,sh limbau1;gh;bin hood,d stew16nald1thko;in0Mo;han0Yngo starr,valdo;ese witherspo0i1mbrandt;ll2nh1;old;ey,y;chmaninoff,ffi,iJshid,y roma1H;a4e3i2la16o1uff daddy;cahont0Ie;lar,p19;le,rZ;lm17ris hilt0;leg,prah winfr0Sra;a2e1iles cra1Bostradam0J; yo,l5tt06wmQ;pole0s;a5e4i2o1ubar03;by,lie5net,rriss0N;randa ju1tt romn0M;ly;rl0GssiaB;cklemo1rkov,s0ta hari,ya angelou;re;ady gaga,e1ibera0Pu;bron jam0Xch wale1e;sa;anye west,e3i1obe bryant;d cudi,efer suther1;la0P;ats,sha;a2effers0fk,k rowling,rr tolki1;en;ck the ripp0Mwaharlal nehru,y z;liTnez,ron m7;a7e5i3u1;lk hog5mphrey1sa01;! bog05;l1tl0H;de; m1dwig,nry 4;an;ile selassFlle ber4m3rrison1;! 1;ford;id,mo09;ry;ast0iannis,o1;odwPtye;ergus0lorence nightinga08r1;an1ederic chopN;s,z;ff5m2nya,ustaXzeki1;el;eril lagasse,i1;le zatop1nem;ek;ie;a6e4i2octor w1rake;ho;ck w1ego maradoC;olf;g1mi lovaOnzel washingt0;as;l1nHrth vadR;ai lNt0;a8h5lint0o1thulhu;n1olio;an,fuci1;us;on;aucKop2ristian baMy1;na;in;millo,ptain beefhe4r1;dinal wols2son1;! palmF;ey;art;a8e5hatt,i3oHro1;ck,n1;te;ll g1ng crosby;atB;ck,nazir bhut2rtil,yon1;ce;to;nksy,rack ob1;ama;l 6r3shton kutch2vril lavig8yn ra1;nd;er;chimed2istot1;le;es;capo2paci1;no;ne",Adjective:"true\xa60:AI;1:BS;2:BI;3:BA;4:A8;5:84;6:AV;7:AN;8:AF;9:7H;A:BQ;B:AY;C:BC;D:BH;E:9Y;aA2b9Ec8Fd7We79f6Ng6Eh61i4Xj4Wk4Tl4Im41n3Po36p2Oquart7Pr2Ds1Dt14uSvOwFye29;aMeKhIiHoF;man5oFrth7G;dADzy;despreB1n w97s86;acked1UoleF;!sa6;ather1PeFll o70ste1D;!k5;nt1Ist6Ate4;aHeGiFola5T;bBUce versa,gi3Lle;ng67rsa5R;ca1gBSluAV;lt0PnLpHrGsFttermoBL;ef9Ku3;b96ge1; Hb32pGsFtiAH;ca6ide d4R;er,i85;f52to da2;a0Fbeco0Hc0Bd04e02f01gu1XheaBGiXkn4OmUnTopp06pRrNsJtHus0wF;aFiel3K;nt0rra0P;app0eXoF;ld,uS;eHi37o5ApGuF;perv06spec39;e1ok9O;en,ttl0;eFu5;cogn06gul2RlGqu84sF;erv0olv0;at0en33;aFrecede0E;id,rallel0;am0otic0;aFet;rri0tF;ch0;nFq26vers3;sur0terFv7U;eFrupt0;st0;air,inish0orese98;mploy0n7Ov97xpF;ect0lain0;eHisFocume01ue;clFput0;os0;cid0rF;!a8Scov9ha8Jlyi8nea8Gprivileg0sMwF;aFei9I;t9y;hGircumcFonvin2U;is0;aFeck0;lleng0rt0;b20ppea85ssuGttend0uthorF;iz0;mi8;i4Ara;aLeIhoHip 25oGrF;anspare1encha1i2;geth9leADp notch,rpB;rny,ugh6H;ena8DmpGrFs6U;r49tia4;eCo8P;leFst4M;nt0;a0Dc09e07h06i04ki03l01mug,nobbi4XoVpRqueami4XtKuFymb94;bHccinAi generis,pFr5;erFre7N;! dup9b,vi70;du0li7Lp6IsFurb7J;eq9Atanda9X;aKeJi16o2QrGubboFy4Q;rn;aightFin5GungS; fFfF;or7V;adfa9Pri6;lwa6Ftu82;arHeGir6NlendBot Fry;on;c3Qe1S;k5se; call0lImb9phistic16rHuFviV;ndFth1B;proof;dBry;dFub6; o2A;e60ipF;pe4shod;ll0n d7R;g2HnF;ceEg6ist9;am3Se9;co1Zem5lfFn6Are7; suf4Xi43;aGholFient3A;ar5;rlFt4A;et;cr0me,tisfac7F;aOeIheumatoBiGoF;bu8Ztt7Gy3;ghtFv3; 1Sf6X;cJdu8PlInown0pro69sGtF;ard0;is47oF;lu2na1;e1Suc45;alcit8Xe1ondi2;bBci3mpa1;aSePicayu7laOoNrGuF;bl7Tnjabi;eKiIoF;b7VfGmi49pFxi2M;er,ort81;a7uD;maFor,sti7va2;!ry;ciDexis0Ima2CpaB;in55puli8G;cBid;ac2Ynt 3IrFti2;ma40tFv7W;!i3Z;i2YrFss7R;anoBtF; 5XiF;al,s5V;bSffQkPld OnMrLth9utKverF;!aIbMdHhGni75seas,t,wF;ei74rou74;a63e7A;ue;ll;do1Ger,si6A;d3Qg2Aotu5Z; bFbFe on o7g3Uli7;oa80;fashion0school;!ay; gua7XbFha5Uli7;eat;eHligGsF;ce7er0So1C;at0;diFse;a1e1;aOeNiMoGuF;anc0de; moEnHrthFt6V;!eFwe7L;a7Krn;chaGdescri7Iprof30sF;top;la1;ght5;arby,cessa4ighbor5wlyw0xt;k0usiaFv3;ti8;aQeNiLoHuF;dIltiF;facet0p6;deHlGnFot,rbBst;ochro4Xth5;dy;rn,st;ddle ag0nF;dbloZi,or;ag9diocEga,naGrFtropolit4Q;e,ry;ci8;cIgenta,inHj0Fkeshift,mmGnFri4Oscu61ver18;da5Dy;ali4Lo4U;!stream;abEho;aOeLiIoFumberi8;ngFuti1R;stan3RtF;erm,i4H;ghtGteraF;l,ry,te;heart0wei5O;ft JgFss9th3;al,eFi0M;nda4;nguBps0te5;apGind5noF;wi8;ut;ad0itte4uniW;ce co0Hgno6Mll0Cm04nHpso 2UrF;a2releF;va1; ZaYcoWdReQfOgrNhibi4Ri05nMoLsHtFvalu5M;aAeF;nDrdepe2K;a7iGolFuboI;ub6ve1;de,gF;nifica1;rdi5N;a2er;own;eriIiLluenVrF;ar0eq5H;pt,rt;eHiGoFul1O;or;e,reA;fiFpe26termi5E;ni2;mpFnsideCrreA;le2;ccuCdeq5Ene,ppr4J;fFsitu,vitro;ro1;mJpF;arHeGl15oFrop9;li2r11;n2LrfeA;ti3;aGeFi18;d4BnD;tuE;egGiF;c0YteC;al,iF;tiF;ma2;ld;aOelNiLoFuma7;a4meInHrrGsFur5;ti6;if4E;e58o3U; ma3GsF;ick;ghfalut2HspF;an49;li00pf33;i4llow0ndGrdFtM; 05coEworki8;sy,y;aLener44iga3Blob3oKrGuF;il1Nng ho;aFea1Fizzl0;cGtF;ef2Vis;ef2U;ld3Aod;iFuc2D;nf2R;aVeSiQlOoJrF;aGeFil5ug3;q43tf2O;gFnt3S;i6ra1;lk13oHrF; keeps,eFge0Vm9tu41;g0Ei2Ds3R;liF;sh;ag4Mowe4uF;e1or45;e4nF;al,i2;d Gmini7rF;ti6ve1;up;bl0lDmIr Fst pac0ux;oGreacF;hi8;ff;ed,ili0R;aXfVlTmQnOqu3rMthere3veryday,xF;aApIquisi2traHuF;be48lF;ta1;!va2L;edRlF;icF;it;eAstF;whi6; Famor0ough,tiE;rou2sui2;erGiF;ne1;ge1;dFe2Aoq34;er5;ficF;ie1;g9sF;t,ygF;oi8;er;aWeMiHoGrFue;ea4owY;ci6mina1ne,r31ti8ubQ;dact2Jfficult,m,sGverF;ge1se;creGePjoi1paCtF;a1inA;et,te; Nadp0WceMfiLgeneCliJmuEpeIreliAsGvoF;id,ut;pFtitu2ul1L;eCoF;nde1;ca2ghF;tf13;a1ni2;as0;facto;i5ngero0I;ar0Ce09h07i06l05oOrIuF;rmudgeon5stoma4teF;sy;ly;aIeHu1EystalF; cleFli7;ar;epy;fFv17z0;ty;erUgTloSmPnGrpoCunterclVveFy;rt;cLdJgr21jIsHtrF;aFi2;dic0Yry;eq1Yta1;oi1ug3;escenFuN;di8;a1QeFiD;it0;atoDmensuCpF;ass1SulF;so4;ni3ss3;e1niza1;ci1J;ockwiD;rcumspeAvil;eFintzy;e4wy;leGrtaF;in;ba2;diac,ef00;a00ePiLliJoGrFuck nak0;and new,isk,on22;gGldface,naF; fi05fi05;us;nd,tF;he;gGpartisFzarE;an;tiF;me;autifOhiNlLnHsFyoN;iWtselF;li8;eGiFt;gn;aFfi03;th;at0oF;v0w;nd;ul;ckwards,rF;e,rT; priori,b13c0Zd0Tf0Ng0Ihe0Hl09mp6nt06pZrTsQttracti0MuLvIwF;aGkF;wa1B;ke,re;ant garGeraF;ge;de;diIsteEtF;heFoimmu7;nt07;re;to4;hGlFtu2;eep;en;bitIchiv3roHtF;ifiFsy;ci3;ga1;ra4;ry;pFt;aHetizi8rF;oprF;ia2;llFre1;ed,i8;ng;iquFsy;at0e;ed;cohKiJkaHl,oGriFterX;ght;ne,of;li7;ne;ke,ve;olF;ic;ad;ain07gressiIi6rF;eeF;ab6;le;ve;fGraB;id;ectGlF;ue1;ioF;na2; JaIeGvF;erD;pt,qF;ua2;ma1;hoc,infinitum;cuCquiGtu3u2;al;esce1;ra2;erSjeAlPoNrKsGuF;nda1;e1olu2trF;aAuD;se;te;eaGuF;pt;st;aFve;rd;aFe;ze;ct;ra1;nt",Pronoun:"true\xa6elle,h3i2me,she,th0us,we,you;e0ou;e,m,y;!l,t;e,im",Preposition:"true\xa6aPbMcLdKexcept,fIinGmid,notwithstandiWoDpXqua,sCt7u4v2w0;/o,hereSith0;! whHin,oW;ersus,i0;a,s a vis;n1p0;!on;like,til;h1ill,oward0;!s;an,ereby,r0;ough0u;!oM;ans,ince,o that,uch G;f1n0ut;!to;!f;! 0to;effect,part;or,r0;om;espite,own,u3;hez,irca;ar1e0oBy;sides,tween;ri7;bo8cross,ft7lo6m4propos,round,s1t0;!op;! 0;a whole,long 0;as;id0ong0;!st;ng;er;ut",SportsTeam:"true\xa60:18;1:1E;2:1D;3:14;a1Db15c0Sd0Kfc dallas,g0Ihouston 0Hindiana0Gjacksonville jagua0k0El0Am01new UoRpKqueens parkJreal salt lake,sBt6utah jazz,vancouver whitecaps,w4yW;ashington 4h10;natio1Mredski2wizar0W;ampa bay 7e6o4;ronto 4ttenham hotspur;blue ja0Mrapto0;nnessee tita2xasD;buccanee0ra0K;a8eattle 6porting kansas0Wt4; louis 4oke0V;c1Drams;marine0s4;eah13ounH;cramento Rn 4;antonio spu0diego 4francisco gJjose earthquak1;char08paB; ran07;a9h6ittsburgh 5ortland t4;imbe0rail blaze0;pirat1steele0;il4oenix su2;adelphia 4li1;eagl1philNunE;dr1;akland 4klahoma city thunder,rlando magic;athle0Lrai4;de0;england 8orleans 7york 4;g5je3knYme3red bul0Xy4;anke1;ian3;pelica2sain3;patrio3revolut4;ion;anchEeAi4ontreal impact;ami 8lwaukee b7nnesota 4;t5vi4;kings;imberwolv1wi2;rewe0uc0J;dolphi2heat,marli2;mphis grizz4ts;li1;a6eic5os angeles 4;clippe0dodFlaB;esterV; galaxy,ke0;ansas city 4nF;chiefs,roya0D; pace0polis col3;astr05dynamo,rocke3texa2;olden state warrio0reen bay pac4;ke0;allas 8e4i04od6;nver 6troit 4;lio2pisto2ti4;ge0;broncYnugge3;cowbo5maver4;icZ;ys;arEelLhAincinnati 8leveland 6ol4;orado r4umbus crew sc;api7ocki1;brow2cavalie0guar4in4;dia2;bengaVre4;ds;arlotte horAicago 4;b5cubs,fire,wh4;iteB;ea0ulQ;diff4olina panthe0; city;altimore Alackburn rove0oston 6rooklyn 4uffalo bilN;ne3;ts;cel5red4; sox;tics;rs;oriol1rave2;rizona Ast8tlanta 4;brav1falco2h4;awA;ns;es;on villa,r4;os;c6di4;amondbac4;ks;ardi4;na4;ls",Unit:"true\xa6a07b04cXdWexVfTgRhePinYjoule0BkMlJmDnan08oCp9quart0Bsq ft,t7volts,w6y2ze3\xb01\xb50;g,s;c,f,n;dVear1o0;ttR; 0s 0;old;att,b;erNon0;!ne02;ascals,e1i0;cXnt00;rcent,tJ;hms,unceY;/s,e4i0m\xb2,\xb2,\xb3;/h,cro2l0;e0liK;!\xb2;grLsR;gCtJ;it1u0;menQx;erPreP;b5elvins,ilo1m0notO;/h,ph,\xb2;!byGgrEmCs;ct0rtzL;aJogrC;allonJb0ig3rB;ps;a0emtEl oz,t4;hrenheit,radG;aby9;eci3m1;aratDe1m0oulombD;\xb2,\xb3;lsius,nti0;gr2lit1m0;et0;er8;am7;b1y0;te5;l,ps;c2tt0;os0;econd1;re0;!s","Noun|Gerund":"true\xa60:3O;1:3M;2:3N;3:3D;4:32;5:2V;6:3E;7:3K;8:36;9:3J;A:3B;a3Pb37c2Jd27e23f1Vg1Sh1Mi1Ij1Gk1Dl18m13n11o0Wp0Pques0Sr0EsTtNunderMvKwFyDzB;eroi0oB;ni0o3P;aw2eB;ar2l3;aEed4hispe5i5oCrB;ap8est3i1;n0ErB;ki0r31;i1r2s9tc9;isualizi0oB;lunt1Vti0;stan4ta6;aFeDhin6iCraBy8;c6di0i2vel1M;mi0p8;aBs1;c9si0;l6n2s1;aUcReQhOiMkatKl2Wmo6nowJpeItFuCwB;ea5im37;b35f0FrB;fi0vB;e2Mi2J;aAoryt1KrCuB;d2KfS;etc9ugg3;l3n4;bCi0;ebBi0;oar4;gnBnAt1;a3i0;ip8oB;p8rte2u1;a1r27t1;hCo5reBulp1;a2Qe2;edu3oo3;i3yi0;aKeEi4oCuB;li0n2;oBwi0;fi0;aFcEhear7laxi0nDpor1sB;pon4tructB;r2Iu5;de5;or4yc3;di0so2;p8ti0;aFeacek20laEoCrBublis9;a1Teten4in1oces7;iso2siB;tio2;n2yi0;ckaAin1rB;ki0t1O;fEpeDrganiCvB;erco24ula1;si0zi0;ni0ra1;fe5;avi0QeBur7;gotia1twor6;aDeCi2oB;de3nito5;a2dita1e1ssaA;int0XnBrke1;ifUufactu5;aEeaDiBodAyi0;cen7f1mi1stB;e2i0;r2si0;n4ug9;iCnB;ea4it1;c6l3;ogAuB;dAgg3stif12;ci0llust0VmDnBro2;nova1sp0NterBven1;ac1vie02;agi2plo4;aDea1iCoBun1;l4w3;ki0ri0;nd3rB;roWvB;es1;aCene0Lli4rBui4;ee1ie0N;rde2the5;aHeGiDlCorBros1un4;e0Pmat1;ir1oo4;gh1lCnBs9;anZdi0;i0li0;e3nX;r0Zscina1;a1du01nCxB;erci7plo5;chan1di0ginB;ee5;aLeHiGoub1rCum8wB;el3;aDeCiB;bb3n6vi0;a0Qs7;wi0;rTscoDvi0;ba1coZlBvelo8;eCiB;ve5;ga1;nGti0;aVelebUhSlPoDrBur3yc3;aBos7yi0;f1w3;aLdi0lJmFnBo6pi0ve5;dDsCvinB;ci0;trBul1;uc1;muniDpB;lBo7;ai2;ca1;lBo5;ec1;c9ti0;ap8eaCimToBubT;ni0t9;ni0ri0;aBee5;n1t1;ra1;m8rCs1te5;ri0;vi0;aPeNitMlLoGrDuB;dge1il4llBr8;yi0;an4eat9oadB;cas1;di0;a1mEokB;i0kB;ee8;pi0;bi0;es7oa1;c9i0;gin2lonAt1;gi0;bysit1c6ki0tt3;li0;ki0;bando2cGdverti7gi0pproac9rgDssuCtB;trac1;mi0;ui0;hi0;si0;coun1ti0;ti0;ni0;ng",PhrasalVerb:"true\xa60:92;1:96;2:8H;3:8V;4:8A;5:83;6:85;7:98;8:90;9:8G;A:8X;B:8R;C:8U;D:8S;E:70;F:97;G:8Y;H:81;I:7H;J:79;a9Fb7Uc6Rd6Le6Jf5Ig50h4Biron0j47k40l3Em31n2Yo2Wp2Cquiet Hr1Xs0KtZuXvacuu6QwNyammerBzK;ero Dip LonK;e0k0;by,ov9up;aQeMhLiKor0Mrit19;mp0n3Fpe0r5s5;ackAeel Di0S;aLiKn33;gh 3Wrd0;n Dr K;do1in,oJ;it 79k5lk Lrm 69sh Kt83v60;aw3do1o7up;aw3in,oC;rgeBsK;e 2herE;a00eYhViRoQrMuKypP;ckErn K;do1in,oJup;aLiKot0y 30;ckl7Zp F;ck HdK;e 5Y;n7Wp 3Es5K;ck MdLe Kghten 6me0p o0Rre0;aw3ba4do1in,up;e Iy 2;by,oG;ink Lrow K;aw3ba4in,up;ba4ov9up;aKe 77ll62;m 2r 5M;ckBke Llk K;ov9shit,u47;aKba4do1in,leave,o4Dup;ba4ft9pa69w3;a0Vc0Te0Mh0Ii0Fl09m08n07o06p01quar5GtQuOwK;earMiK;ngLtch K;aw3ba4o8K; by;cKi6Bm 2ss0;k 64;aReQiPoNrKud35;aigh2Det75iK;ke 7Sng K;al6Yup;p Krm2F;by,in,oG;c3Ln3Lr 2tc4O;p F;c3Jmp0nd LrKveAy 2O;e Ht 2L;ba4do1up;ar3GeNiMlLrKurB;ead0ingBuc5;a49it 6H;c5ll o3Cn 2;ak Fe1Xll0;a3Bber 2rt0und like;ap 5Vow Duggl5;ash 6Noke0;eep NiKow 6;cLp K;o6Dup;e 68;in,oK;ff,v9;de19gn 4NnKt 6Gz5;gKkE; al6Ale0;aMoKu5W;ot Kut0w 7M;aw3ba4f48oC;c2WdeEk6EveA;e Pll1Nnd Orv5tK; Ktl5J;do1foLin,o7upK;!on;ot,r5Z;aw3ba4do1in,o33up;oCto;al66out0rK;ap65ew 6J;ilAv5;aXeUiSoOuK;b 5Yle0n Kstl5;aLba4do1inKo2Ith4Nu5P;!to;c2Xr8w3;ll Mot LpeAuK;g3Ind17;a2Wf3Po7;ar8in,o7up;ng 68p oKs5;ff,p18;aKelAinEnt0;c6Hd K;o4Dup;c27t0;aZeYiWlToQrOsyc35uK;ll Mn5Kt K;aKba4do1in,oJto47up;pa4Dw3;a3Jdo1in,o21to45up;attleBess KiNop 2;ah2Fon;iLp Kr4Zu1Gwer 6N;do1in,o6Nup;nt0;aLuK;gEmp 6;ce u20y 6D;ck Kg0le 4An 6p5B;oJup;el 5NncilE;c53ir 39n0ss MtLy K;ba4oG; Hc2R;aw3ba4in,oJ;pKw4Y;e4Xt D;aLerd0oK;dAt53;il Hrrow H;aTeQiPoLuK;ddl5ll I;c1FnkeyMp 6uthAve K;aKdo1in,o4Lup;l4Nw3; wi4K;ss0x 2;asur5e3SlLss K;a21up;t 6;ke Ln 6rKs2Ax0;k 6ryA;do,fun,oCsure,up;a02eViQoLuK;ck0st I;aNc4Fg MoKse0;k Kse4D;aft9ba4do1forw37in56o0Zu46;in,oJ;d 6;e NghtMnLsKve 00;ten F;e 2k 2; 2e46;ar8do1in;aMt LvelK; oC;do1go,in,o7up;nEve K;in,oK;pKut;en;c5p 2sh LtchBughAy K;do1o59;in4Po7;eMick Lnock K;do1oCup;oCup;eLy K;in,up;l Ip K;aw3ba4do1f04in,oJto,up;aMoLuK;ic5mpE;ke3St H;c43zz 2;a01eWiToPuK;nLrrKsh 6;y 2;keLt K;ar8do1;r H;lKneErse3K;d Ke 2;ba4dKfast,o0Cup;ear,o1;de Lt K;ba4on,up;aw3o7;aKlp0;d Ml Ir Kt 2;fKof;rom;f11in,o03uW;cPm 2nLsh0ve Kz2P;at,it,to;d Lg KkerP;do1in,o2Tup;do1in,oK;ut,v9;k 2;aZeTive Rloss IoMrLunK; f0S;ab hold,in43ow 2U; Kof 2I;aMb1Mit,oLr8th1IuK;nd9;ff,n,v9;bo7ft9hQw3;aw3bKdo1in,oJrise,up,w3;a4ir2H;ar 6ek0t K;aLb1Fdo1in,oKr8up;ff,n,ut,v9;cLhKl2Fr8t,w3;ead;ross;d aKng 2;bo7;a0Ee07iYlUoQrMuK;ck Ke2N;ar8up;eLighten KownBy 2;aw3oG;eKshe27; 2z5;g 2lMol Krk I;aKwi20;bo7r8;d 6low 2;aLeKip0;sh0;g 6ke0mKrKtten H;e F;gRlPnNrLsKzzle0;h F;e Km 2;aw3ba4up;d0isK;h 2;e Kl 1T;aw3fPin,o7;ht ba4ure0;ePnLsK;s 2;cMd K;fKoG;or;e D;d04l 2;cNll Krm0t1G;aLbKdo1in,o09sho0Eth08victim;a4ehi2O;pa0C;e K;do1oGup;at Kdge0nd 12y5;in,o7up;aOi1HoNrK;aLess 6op KuN;aw3b03in,oC;gBwB; Ile0ubl1B;m 2;a0Ah05l02oOrLut K;aw3ba4do1oCup;ackBeep LoKy0;ss Dwd0;by,do1in,o0Uup;me NoLuntK; o2A;k 6l K;do1oG;aRbQforOin,oNtKu0O;hLoKrue;geth9;rough;ff,ut,v9;th,wK;ard;a4y;paKr8w3;rt;eaLose K;in,oCup;n 6r F;aNeLiK;ll0pE;ck Der Kw F;on,up;t 2;lRncel0rOsMtch LveE; in;o1Nup;h Dt K;doubt,oG;ry LvK;e 08;aw3oJ;l Km H;aLba4do1oJup;ff,n,ut;r8w3;a0Ve0MiteAl0Fo04rQuK;bblNckl05il0Dlk 6ndl05rLsKtMy FzzA;t 00;n 0HsK;t D;e I;ov9;anWeaUiLush K;oGup;ghQng K;aNba4do1forMin,oLuK;nd9p;n,ut;th;bo7lKr8w3;ong;teK;n 2;k K;do1in,o7up;ch0;arTg 6iRn5oPrNssMttlLunce Kx D;aw3ba4;e 6; ar8;e H;do1;k Dt 2;e 2;l 6;do1up;d 2;aPeed0oKurt0;cMw K;aw3ba4do1o7up;ck;k K;in,oC;ck0nk0stA; oQaNef 2lt0nd K;do1ov9up;er;up;r Lt K;do1in,oCup;do1o7;ff,nK;to;ck Pil0nMrgLsK;h D;ainBe D;g DkB; on;in,o7;aw3do1in,oCup;ff,ut;ay;ct FdQir0sk MuctionA; oG;ff;ar8o7;ouK;nd; o7;d K;do1oKup;ff,n;wn;o7up;ut",ProperNoun:"true\xa6abid,barbie,c3e2f1iron maiden,kirby,m0nis,riel;cgill,ercedes,issy;lorence,ranco;lmo,uro;atalina,hristi","Person|Place":"true\xa6a8d6h4jordan,k3orlando,s1vi0;ctor9rgin9;a0ydney;lvador,mara,ntia4;ent,obe;amil0ous0;ton;arw2ie0;go;lexandr1ust0;in;ia",LastName:"true\xa60:BR;1:BF;2:B5;3:BH;4:AX;5:9Y;6:B6;7:BK;8:B0;9:AV;A:AL;B:8Q;C:8G;D:7K;E:BM;F:AH;aBDb9Zc8Wd88e81f7Kg6Wh64i60j5Lk4Vl4Dm39n2Wo2Op25quispe,r1Ls0Pt0Ev03wTxSyKzG;aIhGimmerm6A;aGou,u;ng,o;khar5ytsE;aKeun9BiHoGun;koya32shiBU;!lG;diGmaz;rim,z;maGng;da,g52mo83sGzaC;aChiBV;iao,u;aLeJiHoGright,u;jcA5lff,ng;lGmm0nkl0sniewsC;kiB1liams33s3;bGiss,lt0;b,er,st0;a6Vgn0lHtG;anabe,s3;k0sh,tG;e2Non;aLeKiHoGukD;gt,lk5roby5;dHllalGnogr3Kr1Css0val3S;ba,ob1W;al,ov4;lasHsel8W;lJn dIrgBEsHzG;qu7;ilyEqu7siljE;en b6Aijk,yk;enzueAIverde;aPeix1VhKi2j8ka43oJrIsui,uG;om5UrG;c2n0un1;an,emblA7ynisC;dorAMlst3Km4rrAth;atch0i8UoG;mHrG;are84laci79;ps3sG;en,on;hirDkah9Mnaka,te,varA;a06ch01eYhUiRmOoMtIuHvGzabo;en9Jobod3N;ar7bot4lliv2zuC;aIeHoG;i7Bj4AyanAB;ele,in2FpheBvens25;l8rm0;kol5lovy5re7Tsa,to,uG;ng,sa;iGy72;rn5tG;!h;l71mHnGrbu;at9cla9Egh;moBo7M;aIeGimizu;hu,vchG;en8Luk;la,r1G;gu9infe5YmGoh,pulveA7rra5P;jGyG;on5;evi6iltz,miHneid0roed0uGwarz;be3Elz;dHtG;!t,z;!t;ar4Th8ito,ka4OlJnGr4saCto,unde19v4;ch7dHtGz;a5Le,os;b53e16;as,ihDm4Po0Y;aVeSiPoJuHyG;a6oo,u;bio,iz,sG;so,u;bKc8Fdrigue67ge10j9YmJosevelt,sItHux,wG;e,li6;a9Ch;enb4Usi;a54e4L;erts15i93;bei4JcHes,vGzzo;as,e9;ci,hards12;ag2es,iHut0yG;es,nol5N;s,t0;dImHnGsmu97v6C;tan1;ir7os;ic,u;aUeOhMiJoHrGut8;asad,if6Zochazk27;lishc2GpGrti72u10we76;e3Aov51;cHe45nG;as,to;as70hl0;aGillips;k,m,n6I;a3Hde3Wete0Bna,rJtG;ersHrovGters54;!a,ic;!en,on;eGic,kiBss3;i9ra,tz,z;h86k,padopoulIrk0tHvG;ic,l4N;el,te39;os;bMconn2Ag2TlJnei6PrHsbor6XweBzG;dem7Rturk;ella4DtGwe6N;ega,iz;iGof7Hs8I;vGyn1R;ei9;aSri1;aPeNiJoGune50ym2;rHvGwak;ak4Qik5otn66;odahl,r4S;cholsZeHkolGls4Jx3;ic,ov84;ls1miG;!n1;ils3mG;co4Xec;gy,kaGray2sh,var38;jiGmu9shiG;ma;a07c04eZiWoMuHyeG;rs;lJnIrGssoli6S;atGp03r7C;i,ov4;oz,te58;d0l0;h2lOnNo0RrHsGza1A;er,s;aKeJiIoz5risHtG;e56on;!on;!n7K;au,i9no,t5J;!lA;r1Btgome59;i3El0;cracFhhail5kkeHlG;l0os64;ls1;hmeJiIj30lHn3Krci0ssiGyer2N;!er;n0Po;er,j0;dDti;cartHlG;aughl8e2;hy;dQe7Egnu68i0jer3TkPmNnMrItHyG;er,r;ei,ic,su21thews;iHkDquAroqu8tinG;ez,s;a5Xc,nG;!o;ci5Vn;a5UmG;ad5;ar5e6Kin1;rig77s1;aVeOiLoJuHyG;!nch;k4nGo;d,gu;mbarGpe3Fvr4we;di;!nGu,yana2B;coln,dG;b21holm,strom;bedEfeKhIitn0kaHn8rGw35;oy;!j;m11tG;in1on1;bvGvG;re;iGmmy,ng,rs2Qu,voie,ws3;ne,t1F;aZeYh2iWlUnez50oNrJuHvar2woG;k,n;cerGmar68znets5;a,o34;aHem0isGyeziu;h23t3O;m0sni4Fus3KvG;ch4O;bay57ch,rh0Usk16vaIwalGzl5;czGsC;yk;cIlG;!cGen4K;huk;!ev4ic,s;e8uiveG;rt;eff0kGl4mu9nnun1;ucF;ll0nnedy;hn,llKminsCne,pIrHstra3Qto,ur,yGzl5;a,s0;j0Rls22;l2oG;or;oe;aPenOha6im14oHuG;ng,r4;e32hInHrge32u6vG;anD;es,ss3;anHnsG;en,on,t3;nesGs1R;en,s1;kiBnings,s1;cJkob4EnGrv0E;kDsG;en,sG;en0Ion;ks3obs2A;brahimDglesi5Nke5Fl0Qno07oneIshikHto,vanoG;u,v54;awa;scu;aVeOiNjaltal8oIrist50uG;!aGb0ghAynh;m2ng;a6dz4fIjgaa3Hk,lHpUrGwe,x3X;ak1Gvat;mAt;er,fm3WmG;ann;ggiBtchcock;iJmingw4BnHrGss;nand7re9;deGriks1;rs3;kkiHnG;on1;la,n1;dz4g1lvoQmOns0ZqNrMsJuIwHyG;asFes;kiB;g1ng;anHhiG;mo14;i,ov0J;di6p0r10t;ue;alaG;in1;rs1;aVeorgUheorghe,iSjonRoLrJuGw3;errGnnar3Co,staf3Ctierr7zm2;a,eG;ro;ayli6ee2Lg4iffithGub0;!s;lIme0UnHodGrbachE;e,m2;calvAzale0S;dGubE;bGs0E;erg;aj,i;bs3l,mGordaO;en7;iev3U;gnMlJmaIndFo,rGsFuthi0;cGdn0za;ia;ge;eaHlG;agh0i,o;no;e,on;aVerQiLjeldsted,lKoIrHuG;chs,entAji41ll0;eem2iedm2;ntaGrt8urni0wl0;na;emi6orA;lipIsHtzgeraG;ld;ch0h0;ovG;!ic;hatDnanIrG;arGei9;a,i;deY;ov4;b0rre1D;dKinsJriksIsGvaB;cob3GpGtra3D;inoza,osiQ;en,s3;te8;er,is3warG;ds;aXePiNjurhuMoKrisco15uHvorakG;!oT;arte,boHmitru,nn,rGt3C;and,ic;is;g2he0Omingu7nErd1ItG;to;us;aGcki2Hmitr2Ossanayake,x3;s,z; JbnaIlHmirGrvisFvi,w2;!ov4;gado,ic;th;bo0groot,jo6lHsilGvriA;va;a cruz,e3uG;ca;hl,mcevsCnIt2WviG;dGes,s;ov,s3;ielsGku22;!en;ki;a0Be06hRiobQlarkPoIrGunningh1H;awfo0RivGuz;elli;h1lKntJoIrGs2Nx;byn,reG;a,ia;ke,p0;i,rer2K;em2liB;ns;!e;anu;aOeMiu,oIristGu6we;eGiaG;ns1;i,ng,p9uHwGy;!dH;dGng;huJ;!n,onGu6;!g;kJnIpm2ttHudhGv7;ry;erjee,o14;!d,g;ma,raboG;rty;bJl0Cng4rG;eghetHnG;a,y;ti;an,ota1C;cerAlder3mpbeLrIstGvadi0B;iGro;llo;doHl0Er,t0uGvalho;so;so,zo;ll;a0Fe01hYiXlUoNrKuIyG;rLtyG;qi;chan2rG;ke,ns;ank5iem,oGyant;oks,wG;ne;gdan5nIruya,su,uchaHyKziG;c,n5;rd;darGik;enG;ko;ov;aGond15;nco,zG;ev4;ancFshw16;a08oGuiy2;umGwmG;ik;ckRethov1gu,ktPnNrG;gJisInG;ascoGds1;ni;ha;er,mG;anG;!n;gtGit7nP;ss3;asF;hi;er,hG;am;b4ch,ez,hRiley,kk0ldw8nMrIshHtAu0;es;ir;bInHtlGua;ett;es,i0;ieYosa;dGik;a9yoG;padhyG;ay;ra;k,ng;ic;bb0Acos09d07g04kht05lZnPrLsl2tJyG;aHd8;in;la;chis3kiG;ns3;aImstro6sl2;an;ng;ujo,ya;dJgelHsaG;ri;ovG;!a;ersJov,reG;aGjEws;ss1;en;en,on,s3;on;eksejEiyEmeiIvG;ar7es;ez;da;ev;arwHuilG;ar;al;ams,l0;er;ta;as",Ordinal:"true\xa6eBf7nin5s3t0zeroE;enDhir1we0;lfCn7;d,t3;e0ixt8;cond,vent7;et0th;e6ie7;i2o0;r0urt3;tie4;ft1rst;ight0lev1;e0h,ie1;en0;th",Cardinal:"true\xa6bEeBf5mEnine7one,s4t0zero;en,h2rDw0;e0o;lve,n5;irt6ousands,ree;even2ix2;i3o0;r1ur0;!t2;ty;ft0ve;e2y;ight0lev1;!e0y;en;illions",Multiple:"true\xa6b3hundred,m3qu2se1t0;housand,r2;pt1xt1;adr0int0;illion",City:"true\xa60:74;1:61;2:6G;3:6J;4:5S;a68b53c4Id48e44f3Wg3Hh39i31j2Wk2Fl23m1Mn1Co19p0Wq0Ur0Os05tRuQvLwDxiBy9z5;a7h5i4Muri4O;a5e5ongsh0;ng3H;greb,nzib5G;ang2e5okoha3Sunfu;katerin3Hrev0;a5n0Q;m5Hn;arsBeAi6roclBu5;h0xi,zh5P;c7n5;d5nipeg,terth4;hoek,s1L;hi5Zkl3A;l63xford;aw;a8e6i5ladivost5Molgogr6L;en3lni6S;ni22r5;o3saill4N;lenc4Wncouv3Sr3ughn;lan bat1Crumqi,trecht;aFbilisi,eEheDiBo9r7u5;l21n63r5;in,ku;i5ondh62;es51poli;kyo,m2Zron1Pulo5;n,uS;an5jua3l2Tmisoa6Bra3;j4Tshui; hag62ssaloni2H;gucigal26hr0l av1U;briz,i6llinn,mpe56ng5rtu,shk2R;i3Esh0;an,chu1n0p2Eyu0;aEeDh8kopje,owe1Gt7u5;ra5zh4X;ba0Ht;aten is55ockholm,rasbou67uttga2V;an8e6i5;jiazhua1llo1m5Xy0;f50n5;ya1zh4H;gh3Kt4Q;att45o1Vv44;cramen16int ClBn5o paulo,ppo3Rrajevo; 7aa,t5;a 5o domin3E;a3fe,m1M;antonio,die3Cfrancisco,j5ped3Nsalvad0J;o5u0;se;em,t lake ci5Fz25;lou58peters24;a9e8i6o5;me,t59;ga,o5yadh;! de janei3F;cife,ims,nn3Jykjavik;b4Sip4lei2Inc2Pwalpindi;ingdao,u5;ez2i0Q;aFeEhDiCo9r7u6yong5;ya1;eb59ya1;a5etor3M;g52to;rt5zn0; 5la4Co;au prin0Melizabe24sa03;ls3Prae5Atts26;iladelph3Gnom pe1Aoenix;ki1r21tah tik3E;dua,lerYnaji,r4Ot5;na,r32;ak44des0Km1Mr6s5ttawa;a3Vlo;an,d06;a7ew5ing2Fovosibir1Jyc; 5cast36;del24orlea44taip14;g8iro4Wn5pl2Wshv33v0;ch6ji1t5;es,o1;a1o1;a6o5p4;ya;no,sa0W;aEeCi9o6u5;mb2Ani26sc3Y;gadishu,nt6s5;c13ul;evideo,pelli1Rre2Z;ami,l6n14s5;kolc,sissauga;an,waukee;cca,d5lbour2Mmph41ndo1Cssi3;an,ell2Xi3;cau,drAkass2Sl9n8r5shh4A;aca6ib5rakesh,se2L;or;i1Sy;a4EchFdal0Zi47;mo;id;aDeAi8o6u5vSy2;anMckn0Odhia3;n5s angel26;d2g bea1N;brev2Be3Lma5nz,sb2verpo28;!ss27; ma39i5;c5pzig;est16; p6g5ho2Wn0Cusan24;os;az,la33;aHharFiClaipeBo9rak0Du7y5;iv,o5;to;ala lump4n5;mi1sh0;hi0Hlka2Xpavog4si5wlo2;ce;da;ev,n5rkuk;gst2sha5;sa;k5toum;iv;bHdu3llakuric0Qmpa3Fn6ohsiu1ra5un1Iwaguc0Q;c0Pj;d5o,p4;ah1Ty;a7e6i5ohannesV;l1Vn0;dd36rusalem;ip4k5;ar2H;bad0mph1OnArkutUs7taXz5;mir,tapala5;pa;fah0l6tanb5;ul;am2Zi2H;che2d5;ianap2Mo20;aAe7o5yder2W; chi mi5ms,nolulu;nh;f6lsin5rakli2;ki;ei;ifa,lifax,mCn5rb1Dva3;g8nov01oi;aFdanEenDhCiPlasgBo9raz,u5;a5jr23;dal6ng5yaquil;zh1J;aja2Oupe;ld coa1Bthen5;bu2S;ow;ent;e0Uoa;sk;lw7n5za;dhi5gt1E;nag0U;ay;aisal29es,o8r6ukuya5;ma;ankfu5esno;rt;rt5sh0; wor6ale5;za;th;d5indhov0Pl paso;in5mont2;bur5;gh;aBe8ha0Xisp4o7resd0Lu5;b5esseldorf,nkirk,rb0shanbe;ai,l0I;ha,nggu0rtmu13;hradSl6nv5troit;er;hi;donghIe6k09l5masc1Zr es sala1KugavpiY;i0lU;gu,je2;aJebu,hAleve0Vo5raio02uriti1Q;lo7n6penhag0Ar5;do1Ok;akKst0V;gUm5;bo;aBen8i6ongqi1ristchur5;ch;ang m7ca5ttago1;go;g6n5;ai;du,zho1;ng5ttogr14;ch8sha,zh07;gliari,i9lga8mayenJn6pe town,r5tanO;acCdiff;ber1Ac5;un;ry;ro;aWeNhKirmingh0WoJr9u5;chareTdapeTenos air7r5s0tu0;g5sa;as;es;a9is6usse5;ls;ba6t5;ol;ne;sil8tisla7zzav5;il5;le;va;ia;goZst2;op6ubaneshw5;ar;al;iCl9ng8r5;g6l5n;in;en;aluru,hazi;fa6grade,o horizon5;te;st;ji1rut;ghd0BkFn9ot8r7s6yan n4;ur;el,r07;celo3i,ranquil09;ou;du1g6ja lu5;ka;alo6k5;ok;re;ng;ers5u;field;a05b02cc01ddis aba00gartaZhmedXizawl,lSmPnHqa00rEsBt7uck5;la5;nd;he7l5;an5;ta;ns;h5unci2;dod,gab5;at;li5;ngt2;on;a8c5kaOtwerp;hora6o3;na;ge;h7p5;ol5;is;eim;aravati,m0s5;terd5;am; 7buquerq6eppo,giers,ma5;ty;ue;basrah al qadim5mawsil al jadid5;ah;ab5;ad;la;ba;ra;idj0u dha5;bi;an;lbo6rh5;us;rg",Region:"true\xa60:2K;1:2Q;2:2H;3:2B;a2Ob2Bc1Xd1Ses1Rf1Pg1Kh1Gi1Bj17k12l0Zm0On06o04pYqVrSsJtEuBverAw6y4zacatec2S;akut0o0Cu4;cat2k06;a5est 4isconsin,yomi1K;bengal,virgin0;rwick3shington4;! dc;acruz,mont;dmurt0t4;ah,tar4; 2La0Y;a6e5laxca1Rripu1Xu4;scaEva;langa1nnessee,x2F;bas0Wm4smOtar25;aulip2Dil nadu;a9i7o5taf12u4ylh1F;ffZrr05s1A;me1Cno1Quth 4;cWdV;ber0c4kkim,naloa;hu2ily;n5skatchew2xo4;ny; luis potosi,ta catari1;a4hodeA;j4ngp08;asth2shahi;ingh25u4;e4intana roo;bec,en6retaro;ara8e6rince edward4unjab; i4;sl0C;i,nnsylv4rnambu0C;an0;!na;axa0Ydisha,h4klaho20ntar4reg7ss0Cx0H;io;aKeEo6u4;evo le4nav0W;on;r4tt17va scot0;f9mandy,th4; 4ampton3;c6d5yo4;rk3;ako1N;aroli1;olk;bras1Mva0Cw4; 5foundland4;! and labrador;brunswick,hamp3jers5mexiTyork4;! state;ey;galPyarit;aAeghala0Mi6o4;nta1r4;dov0elos;ch6dlanDn5ss4zor11;issippi,ouri;as geraPneso18;ig2oac2;dhy12harasht0Gine,ni5r4ssachusetts;anhao,i el,ylG;p4toba;ur;anca3e4incoln3ouisI;e4iR;ds;a6e5h4omi;aka06ul1;ntucky,ra01;bardino,lmyk0ns0Qr4;achay,el0nata0X;alis6har4iangxi;kh4;and;co;daho,llino7n4owa;d5gush4;et0;ia1;is;a6ert5i4un2;dalFm0D;ford3;mp3rya1waii;ansu,eorg0lou7oa,u4;an4izhou,jarat;ajuato,gdo4;ng;cester3;lori4uji2;da;sex;ageUe7o5uran4;go;rs4;et;lawaMrby3;aFeaEh9o4rim08umbr0;ahui7l6nnectic5rsi4ventry;ca;ut;i03orado;la;e5hattisgarh,i4uvash0;apRhuahua;chn5rke4;ss0;ya;ra;lGm4;bridge3peche;a9ihar,r8u4;ck4ryat0;ingham3;shi4;re;emen,itish columb0;h0ja cal8lk7s4v7;hkorto4que;st2;an;ar0;iforn0;ia;dygHguascalientes,lBndhr9r5ss4;am;izo1kans5un4;achal 7;as;na;a 4;pradesh;a6ber5t4;ai;ta;ba5s4;ka;ma;ea",Country:"true\xa60:38;1:2L;2:3B;a2Xb2Ec22d1Ye1Sf1Mg1Ch1Ai14j12k0Zl0Um0Gn05om2pZqat1KrXsKtCu7v5wal4yemTz3;a25imbabwe;es,lis and futu2Y;a3enezue32ietnam;nuatu,tican city;gTk6nited 4ruXs3zbeE; 2Ca,sr;arab emirat0Kkingdom,states3;! of am2Y;!raiV;a8haCimor les0Co7rinidad 5u3;nis0rk3valu;ey,me2Zs and caic1V;and t3t3;oba1L;go,kel10nga;iw2ji3nz2T;ki2V;aDcotl1eCi9lov8o6pa2Dri lanka,u5w3yr0;az3edAitzerl1;il1;d2riname;lomon1Xmal0uth 3;afr2KkMsud2;ak0en0;erra leoFn3;gapo1Yt maart3;en;negLrb0ychellZ;int 3moa,n marino,udi arab0;hele26luc0mart21;epublic of ir0Eom2Euss0w3;an27;a4eIhilippinUitcairn1Mo3uerto riN;l1rtugF;ki2Dl4nama,pua new0Vra3;gu7;au,esti3;ne;aBe9i7or3;folk1Ith4w3;ay; k3ern mariana1D;or0O;caragua,ger3ue;!ia;p3ther1Aw zeal1;al;mib0u3;ru;a7exi6icro0Bo3yanm06;ldova,n3roc5zambA;a4gol0t3;enegro,serrat;co;cAdagasc01l7r5urit4yot3;te;an0i16;shall0Xtin3;ique;a4div3i,ta;es;wi,ys0;ao,ed02;a6e5i3uxembourg;b3echtenste12thu1G;er0ya;ban0Isotho;os,tv0;azakh1Fe4iriba04o3uwait,yrgyz1F;rXsovo;eling0Knya;a3erG;ma16p2;c7nd6r4s3taly,vory coast;le of m2rael;a3el1;n,q;ia,oJ;el1;aiTon3ungary;dur0Ng kong;aBermany,ha0QibraltAre8u3;a6ern5inea3ya0P;! biss3;au;sey;deloupe,m,tema0Q;e3na0N;ce,nl1;ar;bUmb0;a7i6r3;ance,ench 3;guia0Epoly3;nes0;ji,nl1;lklandUroeU;ast tim7cu6gypt,l salv6ngl1quatorial4ritr5st3thiop0;on0; guin3;ea;ad3;or;enmark,jibou5ominica4r con3;go;!n C;ti;aBentral african Ah8o5roat0u4yprRzech3; 9ia;ba,racao;c4lo3morQngo brazzaville,okGsta r04te de ivoiL;mb0;osE;i3ristmasG;le,na;republic;m3naUpe verde,ymanA;bod0ero3;on;aGeDhut2o9r5u3;lgar0r3;kina faso,ma,undi;azil,itish 3unei;virgin3; is3;lands;liv0nai5snia and herzegoviHtswaHuvet3; isl1;and;re;l3n8rmuG;ar3gium,ize;us;h4ngladesh,rbad3;os;am4ra3;in;as;fghaGlDmBn6r4ustr3zerbaij2;al0ia;genti3men0uba;na;dorra,g5t3;arct7igua and barbu3;da;o3uil3;la;er3;ica;b3ger0;an0;ia;ni3;st2;an",Place:"true\xa6a0Gb0Bc03d02e01f00gWhUiSkQlNmLnIorHpDrCsAt5u4v3w2y0;a0yz;kutPngtze;ake isHupatki;irgin islands,ostok;laanbaatar,p02;a3eotihuac0Hh1onto,sarskoe selo,u0;lXzigoot;am09e 0;bronx,hamptons;hiti,j mahE;a0cotts bluff,eine,fo,oho,under9;int lawrence river,khalY;ed s3io grande;a1ek,h0itcairn,ompeii;l,x;cif05pahanaumokuak0rthenX;ea;ange county,d,inoco;e0ile;uschwansteQw eng0;land;a0co,ekong,idLuc;chu picchu,gad00libu,nhatt00;a1gw,hr,incoln memori0;al;s,x;azan kremlJosrae,rasnoyar0ul;sk;ax,cn,nd0st;ianSochina;arlem,kg,nd,ov0;d,enweep;a2odavari,re0;at 0enwich;britaBlakI;ngHy village;co,ra;urope,vergladF;anube,en,fw,own4xb;arrizo pla6dg,edar 5gk,h1lt,olosse0;um;a2i0uuk;chen itza,mney rock,na0ricahua;town;morro,tham;breaks,fa5;in;cn,e2kk,ro0;oklyn,wns cany0;on;l air,verly hi0;lls;driadic,frica,lhambra,m7n3rc2sia,tl1zor0;es;!ant2; de triomphe,t1;adyr,tarct0;ic0; oce0;an;ericas,s",FirstName:"true\xa6aTblair,cQdOfrancoZgabMhinaLilya,jHkClBm6ni4quinn,re3s0;h0umit,yd;ay,e0iloh;a,lby;g9ne;co,ko0;!s;a1el0ina,org6;!okuhF;ds,naia,r1tt0xiB;i,y;ion,lo;ashawn,eif,uca;a3e1ir0rM;an;lsFn0rry;dall,yat5;i,sD;a0essIie,ude;i1m0;ie,mG;me;ta;rie0y;le;arcy,ev0;an,on;as1h0;arl8eyenne;ey,sidy;drien,kira,l4nd1ubr0vi;ey;i,r0;a,e0;a,y;ex2f1o0;is;ie;ei,is",WeekDay:"true\xa6fri2mon2s1t0wednesd3;hurs1ues1;aturd1und1;!d0;ay0;!s",Month:"true\xa6dec0february,july,nov0octo1sept0;em0;ber",Date:"true\xa6ago,on4som4t1week0yesterd5; end,ends;mr1o0;d2morrow;!w;ed0;ay",Duration:"true\xa6centurAd8h7m5q4se3w1y0;ear8r8;eek0k7;!end,s;ason,c5;tr,uarter;i0onth3;llisecond2nute2;our1r1;ay0ecade0;!s;ies,y",FemaleName:"true\xa60:J7;1:JB;2:IJ;3:IK;4:J1;5:IO;6:JS;7:JO;8:HB;9:JK;A:H4;B:I2;C:IT;D:JH;E:IX;F:BA;G:I4;aGTbFLcDRdD0eBMfB4gADh9Ti9Gj8Dk7Cl5Wm48n3Lo3Hp33qu32r29s15t0Eu0Cv02wVxiTyOzH;aLeIineb,oHsof3;e3Sf3la,ra;h2iKlIna,ynH;ab,ep;da,ma;da,h2iHra;nab;aKeJi0FolB7uIvH;et8onDP;i0na;le0sen3;el,gm3Hn,rGLs8W;aoHme0nyi;m5XyAD;aMendDZhiDGiH;dele9lJnH;if48niHo0;e,f47;a,helmi0lHma;a,ow;ka0nB;aNeKiHusa5;ck84kIl8oleAviH;anFenJ4;ky,toriBK;da,lA8rHs0;a,nHoniH9;a,iFR;leHnesH9;nILrH;i1y;g9rHs6xHA;su5te;aYeUhRiNoLrIuHy2;i,la;acJ3iHu0J;c3na,sH;hFta;nHr0F;iFya;aJffaEOnHs6;a,gtiH;ng;!nFSra;aIeHomasi0;a,l9Oo8Ares1;l3ndolwethu;g9Fo88rIssH;!a,ie;eHi,ri7;sa,za;bOlMmKnIrHs6tia0wa0;a60yn;iHya;a,ka,s6;arFe2iHm77ra;!ka;a,iH;a,t6;at6it6;a0Ecarlett,e0AhWiSkye,neza0oQri,tNuIyH;bIGlvi1;ha,mayIJniAsIzH;an3Net8ie,y;anHi7;!a,e,nH;aCe;aIeH;fan4l5Dphan6E;cI5r5;b3fiAAm0LnHphi1;d2ia,ja,ya;er2lJmon1nIobh8QtH;a,i;dy;lETv3;aMeIirHo0risFDy5;a,lDM;ba,e0i5lJrH;iHr6Jyl;!d8Ifa;ia,lDZ;hd,iMki2nJrIu0w0yH;la,ma,na;i,le9on,ron,yn;aIda,ia,nHon;a,on;!ya;k6mH;!aa;lJrItaye82vH;da,inj;e0ife;en1i0ma;anA9bLd5Oh1SiBkKlJmInd2rHs6vannaC;aCi0;ant6i2;lDOma,ome;ee0in8Tu2;in1ri0;a05eZhXiUoHuthDM;bScRghQl8LnPsJwIxH;anB3ie,y;an,e0;aIeHie,lD;ann7ll1marDGtA;!lHnn1;iHyn;e,nH;a,dF;da,i,na;ayy8G;hel67io;bDRerAyn;a,cIkHmas,nFta,ya;ki,o;h8Xki;ea,iannGMoH;da,n1P;an0bJemFgi0iInHta,y0;a8Bee;han86na;a,eH;cHkaC;a,ca;bi0chIe,i0mo0nHquETy0;di,ia;aERelHiB;!e,le;een4ia0;aPeOhMiLoJrHute6A;iHudenCV;scil3LyamvaB;lHrt3;i0ly;a,paluk;ilome0oebe,ylH;is,lis;ggy,nelope,r5t2;ige,m0VnKo5rvaDMtIulH;a,et8in1;ricHt4T;a,e,ia;do2i07;ctav3dIfD3is6ksa0lHphD3umC5yunbileg;a,ga,iv3;eHvAF;l3t8;aWeUiMoIurHy5;!ay,ul;a,eJor,rIuH;f,r;aCeEma;ll1mi;aNcLhariBQkKlaJna,sHta,vi;anHha;ur;!y;a,iDZki;hoGk9YolH;a,e4P;!mh;hir,lHna,risDEsreE;!a,lBV;asuMdLh3i6Dl5nKomi7rgEVtH;aHhal4;lHs6;i1ya;cy,et8;e9iF0ya;nngu2X;a0Ackenz4e02iMoJrignayani,uriDJyH;a,rH;a,iOlNna,tG;bi0i2llBJnH;a,iH;ca,ka,qD9;a,cUdo4ZkaTlOmi,nMrItzi,yH;ar;aJiIlH;anET;am;!l,nB;dy,eHh,n4;nhGrva;aKdJe0iCUlH;iHy;cent,e;red;!gros;!e5;ae5hH;ae5el3Z;ag5DgNi,lKrH;edi7AiIjem,on,yH;em,l;em,sCG;an4iHliCF;nHsCJ;a,da;!an,han;b09cASd07e,g05ha,i04ja,l02n00rLsoum5YtKuIv84xBKyHz4;bell,ra,soBB;d7rH;a,eE;h8Gild1t4;a,cUgQiKjor4l7Un4s6tJwa,yH;!aHbe6Xja9lAE;m,nBL;a,ha,in1;!aJbCGeIja,lDna,sHt63;!a,ol,sa;!l1D;!h,mInH;!a,e,n1;!awit,i;arJeIie,oHr48ueri8;!t;!ry;et46i3B;el4Xi7Cy;dHon,ue5;akranAy;ak,en,iHlo3S;a,ka,nB;a,re,s4te;daHg4;!l3E;alDd4elHge,isDJon0;ei9in1yn;el,le;a0Ne0CiXoQuLyH;d3la,nH;!a,dIe2OnHsCT;!a,e2N;a,sCR;aD4cJel0Pis1lIna,pHz;e,iA;a,u,wa;iHy;a0Se,ja,l2NnB;is,l1UrItt1LuHvel4;el5is1;aKeIi7na,rH;aADi7;lHn1tA;ei;!in1;aTbb9HdSepa,lNnKsJvIzH;!a,be5Ret8z4;!ia;a,et8;!a,dH;a,sHy;ay,ey,i,y;a,iJja,lH;iHy;aA8e;!aH;!nF;ia,ya;!nH;!a,ne;aPda,e0iNjYla,nMoKsJtHx93y5;iHt4;c3t3;e2PlCO;la,nHra;a,ie,o2;a,or1;a,gh,laH;!ni;!h,nH;a,d2e,n5V;cOdon9DiNkes6mi9Gna,rMtJurIvHxmi,y5;ern1in3;a,e5Aie,yn;as6iIoH;nya,ya;fa,s6;a,isA9;a,la;ey,ie,y;a04eZhXiOlASoNrJyH;lHra;a,ee,ie;istHy6I;a,en,iIyH;!na;!e,n5F;nul,ri,urtnB8;aOerNlB7mJrHzzy;a,stH;en,in;!berlImernH;aq;eHi,y;e,y;a,stE;!na,ra;aHei2ongordzol;dij1w5;el7UiKjsi,lJnIrH;a,i,ri;d2na,za;ey,i,lBLs4y;ra,s6;biAcARdiat7MeBAiSlQmPnyakuma1DrNss6NtKviAyH;!e,lH;a,eH;e,i8T;!a6HeIhHi4TlDri0y;ar8Her8Hie,leErBAy;!lyn8Ori0;a,en,iHl5Xoli0yn;!ma,nFs95;a5il1;ei8Mi,lH;e,ie;a,tl6O;a0AeZiWoOuH;anMdLlHst88;es,iH;a8NeHs8X;!n9tH;!a,te;e5Mi3My;a,iA;!anNcelDdMelGhan7VleLni,sIva0yH;a,ce;eHie;fHlDph7Y;a,in1;en,n1;i7y;!a,e,n45;lHng;!i1DlH;!i1C;anNle0nKrJsH;i8JsH;!e,i8I;i,ri;!a,elGif2CnH;a,et8iHy;!e,f2A;a,eJiInH;a,eIiH;e,n1;!t8;cMda,mi,nIque4YsminFvie2y9zH;min7;a7eIiH;ce,e,n1s;!lHs82t0F;e,le;inIk6HlDquelH;in1yn;da,ta;da,lRmPnOo0rNsIvaHwo0zaro;!a0lu,na;aJiIlaHob89;!n9R;do2;belHdo2;!a,e,l3B;a7Ben1i0ma;di2es,gr72ji;a9elBogH;en1;a,e9iHo0se;a0na;aSeOiJoHus7Kyacin2C;da,ll4rten24snH;a,i9U;lImaH;ri;aIdHlaI;a,egard;ry;ath1BiJlInrietArmi9sH;sa,t1A;en2Uga,mi;di;bi2Fil8MlNnMrJsItHwa,yl8M;i5Tt4;n60ti;iHmo51ri53;etH;!te;aCnaC;a,ey,l4;a02eWiRlPoNrKunJwH;enHyne1R;!dolD;ay,el;acieIetHiselB;a,chE;!la;ld1CogooH;sh;adys,enHor3yn2K;a,da,na;aKgi,lIna,ov8EselHta;a,e,le;da,liH;an;!n0;mLnJorgIrH;ald5Si,m3Etrud7;et8i4X;a,eHna;s29vieve;ma;bIle,mHrnet,yG;al5Si5;iIrielH;a,l1;!ja;aTeQiPlorOoz3rH;anJeIiH;da,eB;da,ja;!cH;esIiHoi0P;n1s66;!ca;a,enc3;en,o0;lIn0rnH;anB;ec3ic3;jr,nArKtHy7;emIiHma,oumaA;ha,ma,n;eh;ah,iBrah,za0;cr4Rd0Re0Qi0Pk0Ol07mXn54rUsOtNuMvHwa;aKelIiH;!e,ta;inFyn;!a;!ngel4V;geni1ni47;h5Yien9ta;mLperanKtH;eIhHrel5;er;l31r7;za;a,eralB;iHma,ne4Lyn;cHka,n;a,ka;aPeNiKmH;aHe21ie,y;!li9nuH;elG;lHn1;e7iHy;a,e,ja;lHrald;da,y;!nue5;aWeUiNlMma,no2oKsJvH;a,iH;na,ra;a,ie;iHuiH;se;a,en,ie,y;a0c3da,e,f,nMsJzaH;!betHveA;e,h;aHe,ka;!beH;th;!a,or;anor,nH;!a,i;!in1na;ate1Rta;leEs6;vi;eIiHna,wi0;e,th;l,n;aYeMh3iLjeneKoH;lor5Vminiq4Ln3FrHtt4;a,eEis,la,othHthy;ea,y;ba;an09naCon9ya;anQbPde,eOiMlJmetr3nHsir5M;a,iH;ce,se;a,iIla,orHphi9;es,is;a,l6F;dHrdH;re;!d5Ena;!b2ForaCraC;a,d2nH;!a,e;hl3i0l0GmNnLphn1rIvi1WyH;le,na;a,by,cIia,lH;a,en1;ey,ie;a,et8iH;!ca,el1Aka,z;arHia;is;a0Re0Nh04i02lUoJristIynH;di,th3;al,i0;lPnMrIurH;tn1D;aJd2OiHn2Ori9;!nH;a,e,n1;!l4;cepci5Cn4sH;tanHuelo;ce,za;eHleE;en,t8;aJeoIotH;il54;!pat2;ir7rJudH;et8iH;a,ne;a,e,iH;ce,sZ;a2er2ndH;i,y;aReNloe,rH;isJyH;stH;al;sy,tH;a1Sen,iHy;an1e,n1;deJlseIrH;!i7yl;a,y;li9;nMrH;isKlImH;ai9;a,eHot8;n1t8;!sa;d2elGtH;al,elG;cIlH;es8i47;el3ilH;e,ia,y;itlYlXmilWndVrMsKtHy5;aIeIhHri0;er1IleErDy;ri0;a38sH;a37ie;a,iOlLmeJolIrH;ie,ol;!e,in1yn;lHn;!a,la;a,eIie,otHy;a,ta;ne,y;na,s1X;a0Ii0I;a,e,l1;isAl4;in,yn;a0Ke02iZlXoUrH;andi7eRiJoIyH;an0nn;nwDoke;an3HdgMgiLtH;n31tH;!aInH;ey,i,y;ny;d,t8;etH;!t7;an0e,nH;da,na;bbi7glarIlo07nH;iAn4;ka;ancHythe;a,he;an1Clja0nHsm3M;iAtH;ou;aWcVlinUniArPssOtJulaCvH;!erlH;ey,y;hJsy,tH;e,iHy7;e,na;!anH;ie,y;!ie;nItHyl;ha,ie;adIiH;ce;et8i9;ay,da;ca,ky;!triH;ce,z;rbJyaH;rmH;aa;a2o2ra;a2Ub2Od25g21i1Sj5l18m0Zn0Boi,r06sWtVuPvOwa,yIzH;ra,u0;aKes6gJlIn,seH;!l;in;un;!nH;a,na;a,i2K;drLguJrIsteH;ja;el3;stH;in1;a,ey,i,y;aahua,he0;hIi2Gja,miAs2DtrH;id;aMlIraqHt21;at;eIi7yH;!n;e,iHy;gh;!nH;ti;iJleIo6piA;ta;en,n1t8;aHelG;!n1J;a01dje5eZgViTjRnKohito,toHya;inet8nH;el5ia;te;!aKeIiHmJ;e,ka;!mHtt7;ar4;!belIliHmU;sa;!l1;a,eliH;ca;ka,sHta;a,sa;elHie;a,iH;a,ca,n1qH;ue;!tH;a,te;!bImHstasiMya;ar3;el;aLberKeliJiHy;e,l3naH;!ta;a,ja;!ly;hGiIl3nB;da;a,ra;le;aWba,ePiMlKthJyH;a,c3sH;a,on,sa;ea;iHys0N;e,s0M;a,cIn1sHza;a,e,ha,on,sa;e,ia,ja;c3is6jaKksaKna,sJxH;aHia;!nd2;ia,saH;nd2;ra;ia;i0nIyH;ah,na;a,is,naCoud;la;c6da,leEmNnLsH;haClH;inHyY;g,n;!h;a,o,slH;ey;ee;en;at6g4nIusH;ti0;es;ie;aWdiTelMrH;eJiH;anMenH;a,e,ne;an0;na;!aLeKiIyH;nn;a,n1;a,e;!ne;!iH;de;e,lDsH;on;yn;!lH;i9yn;ne;aKbIiHrL;!e,gaK;ey,i7y;!e;gaH;il;dKliyJradhIs6;ha;ya;ah;a,ya",Honorific:"true\xa6director1field marsh2lieutenant1rear0sergeant major,vice0; admir1; gener0;al","Adj|Gerund":"true\xa60:3F;1:3H;2:31;3:2X;4:35;5:33;6:3C;7:2Z;8:36;9:29;a33b2Tc2Bd1Te1If19g12h0Zi0Rl0Nm0Gnu0Fo0Ap04rYsKtEuBvAw1Ayiel3;ar6e08;nBpA;l1Rs0B;fol3n1Zsett2;aEeDhrBi4ouc7rAwis0;e0Bif2oub2us0yi1;ea1SiA;l2vi1;l2mp0rr1J;nt1Vxi1;aMcreec7enten2NhLkyrocke0lo0Vmi2oJpHtDuBweA;e0Ul2;pp2ArA;gi1pri5roun3;aBea8iAri2Hun9;mula0r4;gge4rA;t2vi1;ark2eAraw2;e3llb2F;aAot7;ki1ri1;i9oc29;dYtisf6;aEeBive0oAus7;a4l2;assu4defi9fres7ig9juve07mai9s0vAwar3;ea2italiAol1G;si1zi1;gi1ll6mb2vi1;a6eDier23lun1VrAun2C;eBoA;mi5vo1Z;ce3s5vai2;n3rpleA;xi1;ffCpWutBverAwi1;arc7lap04p0Pri3whel8;goi1l6st1J;en3sA;et0;m2Jrtu4;aEeDiCoBuAyst0L;mb2;t1Jvi1;s5tiga0;an1Rl0n3smeri26;dAtu4;de9;aCeaBiAo0U;fesa0Tvi1;di1ni1;c1Fg19s0;llumiGmFnArri0R;cDfurHsCtBviA;go23ti1;e1Oimi21oxica0rig0V;pi4ul0;orpo20r0K;po5;na0;eaBorr02umilA;ia0;li1rtwar8;lFrA;atiDipCoBuelA;i1li1;undbrea10wi1;pi1;f6ng;a4ea8;a3etc7it0lEoCrBulfA;il2;ee1FighXust1L;rAun3;ebo3thco8;aCoA;a0wA;e4i1;mi1tte4;lectrJmHnExA;aCci0hBis0pA;an3lo3;aOila1B;c0spe1A;ab2coura0CdBergi13ga0Clive9ric7s02tA;hral2i0J;ea4u4;barras5er09pA;owe4;if6;aQeIiBrA;if0;sAzz6;aEgDhearCsen0tA;rAur11;ac0es5;te9;us0;ppoin0r8;biliGcDfi9gra3ligh0mBpres5sAvasG;erE;an3ea9orA;ali0L;a6eiBli9rA;ea5;vi1;ta0;maPri1s7un0zz2;aPhMlo5oAripp2ut0;mGnArrespon3;cer9fDspi4tA;inBrA;as0ibu0ol2;ui1;lic0u5;ni1;fDmCpA;eAromi5;l2ti1;an3;or0;aAil2;llenAnAr8;gi1;l8ptAri1;iva0;aff2eGin3lFoDrBuA;d3st2;eathtaAui5;ki1;gg2i2o8ri1unA;ci1;in3;co8wiA;lAtc7;de4;bsorVcOgonMlJmHnno6ppea2rFsA;pi4su4toA;nBun3;di1;is7;hi1;res0;li1;aFu5;si1;ar8lu4;ri1;mi1;iAzi1;zi1;cAhi1;eleDomA;moBpan6;yi1;da0;ra0;ti1;bi1;ng",Comparable:"true\xa60:3C;1:3Q;2:3F;a3Tb3Cc33d2Te2Mf2Ag1Wh1Li1Fj1Ek1Bl13m0Xn0So0Rp0Iqu0Gr07sHtCug0vAw4y3za0Q;el10ouN;ary,e6hi5i3ry;ck0Cde,l3n1ry,se;d,y;ny,te;a3i3R;k,ry;a3erda2ulgar;gue,in,st;a6en2Xhi5i4ouZr3;anqu2Cen1ue;dy,g36me0ny;ck,rs28;ll,me,rt,wd3I;aRcaPeOhMiLkin0BlImGoEpDt6u4w3;eet,ift;b3dd0Wperfi21rre28;sta26t21;a8e7iff,r4u3;pUr1;a4ict,o3;ng;ig2Vn0N;a1ep,rn;le,rk,te0;e1Si2Vright0;ci1Yft,l3on,re;emn,id;a3el0;ll,rt;e4i3y;g2Mm0Z;ek,nd2T;ck24l0mp1L;a3iRrill,y;dy,l01rp;ve0Jxy;n1Jr3;ce,y;d,fe,int0l1Hv0V;a8e6i5o3ude;mantic,o19sy,u3;gh;pe,t1P;a3d,mo0A;dy,l;gg4iFndom,p3re,w;id;ed;ai2i3;ck,et;hoAi1Fl9o8r5u3;ny,r3;e,p11;egna2ic4o3;fouSud;ey,k0;liXor;ain,easa2;ny;dd,i0ld,ranL;aive,e5i4o3u14;b0Sisy,rm0Ysy;bb0ce,mb0R;a3r1w;r,t;ad,e5ild,o4u3;nda12te;ist,o1;a4ek,l3;low;s0ty;a8e7i6o3ucky;f0Jn4o15u3ve0w10y0N;d,sy;e0g;ke0l,mp,tt0Eve0;e1Qwd;me,r3te;ge;e4i3;nd;en;ol0ui19;cy,ll,n3;secu6t3;e3ima4;llege2rmedia3;te;re;aAe7i6o5u3;ge,m3ng1C;bYid;me0t;gh,l0;a3fXsita2;dy,rWv3;en0y;nd13ppy,r3;d3sh;!y;aFenEhCiBlAoofy,r3;a8e6i5o3ue0Z;o3ss;vy;m,s0;at,e3y;dy,n;nd,y;ad,ib,ooD;a2d1;a3o3;st0;tDuiS;u1y;aCeebBi9l8o6r5u3;ll,n3r0N;!ny;aCesh,iend0;a3nd,rmD;my;at,ir7;erce,nan3;ci9;le;r,ul3;ty;a6erie,sse4v3xtre0B;il;nti3;al;r4s3;tern,y;ly,th0;appZe9i5ru4u3;mb;nk;r5vi4z3;zy;ne;e,ty;a3ep,n9;d3f,r;!ly;agey,h8l7o5r4u3;dd0r0te;isp,uel;ar3ld,mmon,st0ward0zy;se;evKou1;e3il0;ap,e3;sy;aHiFlCoAr5u3;ff,r0sy;ly;a6i3oad;g4llia2;nt;ht;sh,ve;ld,un3;cy;a4o3ue;nd,o1;ck,nd;g,tt3;er;d,ld,w1;dy;bsu6ng5we3;so3;me;ry;rd",Adverb:"true\xa6a08b05d00eYfSheQinPjustOkinda,likewiZmMnJoEpCquite,r9s5t2u0very,well;ltima01p0; to,wards5;h1iny bit,o0wiO;o,t6;en,us;eldom,o0uch;!me1rt0; of;how,times,w0C;a1e0;alS;ndomRth05;ar excellenEer0oint blank; Lhaps;f3n0utright;ce0ly;! 0;ag05moX; courGten;ewJo0; longWt 0;onHwithstand9;aybe,eanwhiNore0;!ovT;! aboX;deed,steY;lla,n0;ce;or3u0;ck1l9rther0;!moK;ing; 0evK;exampCgood,suH;n mas0vI;se;e0irect2; 2fini0;te0;ly;juAtrop;ackward,y 0;far,no0; means,w; GbroFd nauseam,gEl7ny5part,s4t 2w0;ay,hi0;le;be7l0mo7wor7;arge,ea6; soon,i4;mo0way;re;l 3mo2ongsi1ready,so,togeth0ways;er;de;st;b1t0;hat;ut;ain;ad;lot,posteriori",Conjunction:"true\xa6aXbTcReNhowMiEjust00noBo9p8supposing,t5wh0yet;e1il0o3;e,st;n1re0thN; if,by,vM;evL;h0il,o;erefOo0;!uU;lus,rovided th9;r0therwiM;! not; mattEr,w0;! 0;since,th4w7;f4n0; 0asmuch;as mIcaForder t0;h0o;at;! 0;only,t0w0;hen;!ev3;ith2ven0;! 0;if,tB;er;o0uz;s,z;e0ut,y the time;cau1f0;ore;se;lt3nd,s 0;far1if,m0soon1t2;uch0; as;hou0;gh",Currency:"true\xa6$,aud,bQcOdJeurIfHgbp,hkd,iGjpy,kElDp8r7s3usd,x2y1z0\xa2,\xa3,\xa5,\u0434\u0435\u043d,\u043b\u0432,\u0440\u0443\u0431,\u0e3f,\u20a1,\u20a8,\u20ac,\u20ad,\ufdfc;lotyQ\u0142;en,uanP;af,of;h0t5;e0il5;k0q0;elK;oubleJp,upeeJ;e2ound st0;er0;lingG;n0soF;ceEnies;empi7i7;n,r0wanzaCyatC;!onaBw;ls,nr;ori7ranc9;!os;en3i2kk,o0;b0ll2;ra5;me4n0rham4;ar3;e0ny;nt1;aht,itcoin0;!s",Determiner:"true\xa6aBboth,d9e6few,le5mu8neiDplenty,s4th2various,wh0;at0ich0;evC;a0e4is,ose;!t;everal,ome;!ast,s;a1l0very;!se;ch;e0u;!s;!n0;!o0y;th0;er","Adj|Present":"true\xa6a07b04cVdQeNfJhollIidRlEmCnarrIoBp9qua8r7s3t2uttFw0;aKet,ro0;ng,u08;endChin;e2hort,l1mooth,our,pa9tray,u0;re,speU;i2ow;cu6da02leSpaN;eplica01i02;ck;aHerfePr0;eseUime,omV;bscu1pen,wn;atu0e3odeH;re;a2e1ive,ow0;er;an;st,y;ow;a2i1oul,r0;ee,inge;rm;iIke,ncy,st;l1mpty,x0;emHpress;abo4ic7;amp,e2i1oub0ry,ull;le;ffu9re6;fu8libe0;raE;alm,l5o0;mpleCn3ol,rr1unterfe0;it;e0u7;ct;juga8sum7;ea1o0;se;n,r;ankru1lu0;nt;pt;li2pproxi0rticula1;ma0;te;ght","Person|Adj":"true\xa6b3du2earnest,frank,mi2r0san1woo1;an0ich,u1;dy;sty;ella,rown",Modal:"true\xa6c5lets,m4ought3sh1w0;ill,o5;a0o4;ll,nt;! to,a;ight,ust;an,o0;uld",Verb:"true\xa6born,cannot,gonna,has,keep tabs,msg","Person|Verb":"true\xa6b8ch7dr6foster,gra5ja9lan4ma2ni9ollie,p1rob,s0wade;kip,pike,t5ue;at,eg,ier2;ck,r0;k,shal;ce;ce,nt;ew;ase,u1;iff,l1ob,u0;ck;aze,ossom","Person|Date":"true\xa6a2j0sep;an0une;!uary;p0ugust,v0;ril"},RJ="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").reduce(function(t,e,n){return t[e]=n,t},{}),kF_fromAlphaCode=function(t){if(void 0!==RJ[t])return RJ[t];let e=0,n=1,r=36,i=1;for(;n<t.length;e+=r,n++,r*=36);for(let s=t.length-1;s>=0;s--,i*=36){let o=t.charCodeAt(s)-48;o>10&&(o-=7),e+=o*i}return e},s3e=function(t,e,n){const r=kF_fromAlphaCode(e);return r<t.symCount?t.syms[r]:n+r+1-t.symCount},yu=["Possessive","Pronoun"],cS={a:[[/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"],[/ia$/i,"ia"]],e:[[/(kn|l|w)ife$/i,"$1ives"],[/(hive)$/i,"$1s"],[/([m|l])ouse$/i,"$1ice"],[/([m|l])ice$/i,"$1ice"]],f:[[/^(dwar|handkerchie|hoo|scar|whar)f$/i,"$1ves"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)f$/i,"$1ves"]],i:[[/(octop|vir)i$/i,"$1i"]],m:[[/([ti])um$/i,"$1a"]],n:[[/^(oxen)$/i,"$1"]],o:[[/(al|ad|at|er|et|ed)o$/i,"$1oes"]],s:[[/(ax|test)is$/i,"$1es"],[/(alias|status)$/i,"$1es"],[/sis$/i,"ses"],[/(bu)s$/i,"$1ses"],[/(sis)$/i,"ses"],[/^(?!talis|.*hu)(.*)man$/i,"$1men"],[/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]],x:[[/(matr|vert|ind|cort)(ix|ex)$/i,"$1ices"],[/^(ox)$/i,"$1en"]],y:[[/([^aeiouy]|qu)y$/i,"$1ies"]],z:[[/(quiz)$/i,"$1zes"]]},d3e=/([xsz]|ch|sh)$/,dS=function(t="",e){let{irregularPlurals:n,uncountable:r}=e.two;if(r.hasOwnProperty(t))return t;if(n.hasOwnProperty(t))return n[t];let i=function(t){let e=t[t.length-1];if(!0===cS.hasOwnProperty(e))for(let n=0;n<cS[e].length;n+=1){let r=cS[e][n][0];if(!0===r.test(t))return t.replace(r,cS[e][n][1])}return null}(t);return null!==i?i:d3e.test(t)?t+"es":t+"s"},f3e=/\|/;let Iy={"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization",g8:"Organization",vh1:"Organization","76ers":"SportsTeam","49ers":"SportsTeam",q1:"Date",q2:"Date",q3:"Date",q4:"Date",km2:"Unit",m2:"Unit",dm2:"Unit",cm2:"Unit",mm2:"Unit",mile2:"Unit",in2:"Unit",yd2:"Unit",ft2:"Unit",m3:"Unit",dm3:"Unit",cm3:"Unit",in3:"Unit",ft3:"Unit",yd3:"Unit","at&t":"Organization","black & decker":"Organization","h & m":"Organization","johnson & johnson":"Organization","procter & gamble":"Organization","ben & jerry's":"Organization","&":"Conjunction",i:["Pronoun","Singular"],he:["Pronoun","Singular"],she:["Pronoun","Singular"],it:["Pronoun","Singular"],they:["Pronoun","Plural"],we:["Pronoun","Plural"],was:["Copula","PastTense"],is:["Copula","PresentTense"],are:["Copula","PresentTense"],am:["Copula","PresentTense"],were:["Copula","PastTense"],her:yu,his:yu,hers:yu,their:yu,theirs:yu,themselves:yu,your:yu,our:yu,ours:yu,my:yu,its:yu,vs:["Conjunction","Abbreviation"],if:["Condition","Preposition"],closer:"Comparative",closest:"Superlative",much:"Adverb",may:"Modal",babysat:"PastTense",blew:"PastTense",drank:"PastTense",drove:"PastTense",forgave:"PastTense",skiied:"PastTense",spilt:"PastTense",stung:"PastTense",swam:"PastTense",swung:"PastTense",guaranteed:"PastTense",shrunk:"PastTense",nears:"PresentTense",nearing:"Gerund",neared:"PastTense",no:["Negative","Expression"]},xF={};const p3e={two:{irregularPlurals:kJ,uncountable:{}}};Object.keys(xJ).forEach(t=>{let e=function(t){if(!t)return{};const e=t.split("|").reduce((r,i)=>{const s=i.split("\xa6");return r[s[0]]=s[1],r},{}),n={};return Object.keys(e).forEach(function(r){const i=function(t){const e={nodes:t.split(";"),syms:[],symCount:0};return t.match(":")&&function(t){const e=new RegExp("([0-9A-Z]+):([0-9A-Z]+)");for(let n=0;n<t.nodes.length;n++){const r=e.exec(t.nodes[n]);if(!r){t.symCount=n;break}t.syms[kF_fromAlphaCode(r[1])]=kF_fromAlphaCode(r[2])}t.nodes=t.nodes.slice(t.symCount,t.nodes.length)}(e),function(t){const e=[],n=(r,i)=>{let s=t.nodes[r];"!"===s[0]&&(e.push(i),s=s.slice(1));const o=s.split(/([A-Z0-9,]+)/g);for(let a=0;a<o.length;a+=2){const u=o[a],l=o[a+1];if(!u)continue;const c=i+u;if(","===l||void 0===l){e.push(c);continue}const h=s3e(t,l,r);n(h,c)}};return n(0,""),e}(e)}(e[r]);"true"===r&&(r=!0);for(let s=0;s<i.length;s++){const o=i[s];!0===n.hasOwnProperty(o)?!1===Array.isArray(n[o])?n[o]=[n[o],r]:n[o].push(r):n[o]=r}}),n}(xJ[t]);f3e.test(t)?Object.keys(e).forEach(n=>{if(xF[n]=t,"Noun|Verb"===t){let r=dS(n,p3e);xF[r]="Plural|Verb"}}):Object.keys(e).forEach(n=>{Iy[n]=t})}),[":(",":)",":P",":p",":O",";(",";)",";P",";p",";O",":3",":|",":/",":\\",":$",":*",":@",":-(",":-)",":-P",":-p",":-O",":-3",":-|",":-/",":-\\",":-$",":-*",":-@",":^(",":^)",":^P",":^p",":^O",":^3",":^|",":^/",":^\\",":^$",":^*",":^@","):","(:","$:","*:",")-:","(-:","$-:","*-:",")^:","(^:","$^:","*^:","<3","</3","<\\3","=("].forEach(t=>Iy[t]="Emoticon"),delete Iy[""],delete Iy.null,delete Iy[" "];const xe="Singular",Mr={beforeTags:{Determiner:xe,Possessive:xe,Acronym:xe,Noun:xe,Adjective:xe,PresentTense:xe,Gerund:xe,PastTense:xe,Infinitive:xe,Date:xe,Ordinal:xe,Demonym:xe},afterTags:{Value:xe,Modal:xe,Copula:xe,PresentTense:xe,PastTense:xe,Demonym:xe,Actor:xe},beforeWords:{the:xe,with:xe,without:xe,of:xe,for:xe,any:xe,all:xe,on:xe,cut:xe,cuts:xe,increase:xe,decrease:xe,raise:xe,drop:xe,save:xe,saved:xe,saves:xe,make:xe,makes:xe,made:xe,minus:xe,plus:xe,than:xe,another:xe,versus:xe,neither:xe,about:xe,favorite:xe,best:xe,daily:xe,weekly:xe,linear:xe,binary:xe,mobile:xe,lexical:xe,technical:xe,computer:xe,scientific:xe,security:xe,government:xe,popular:xe,formal:xe,no:xe,more:xe,one:xe,let:xe,her:xe,his:xe,their:xe,our:xe,us:xe,sheer:xe,monthly:xe,yearly:xe,current:xe,previous:xe,upcoming:xe,last:xe,next:xe,main:xe,initial:xe,final:xe,beginning:xe,end:xe,top:xe,bottom:xe,future:xe,past:xe,major:xe,minor:xe,side:xe,central:xe,peripheral:xe,public:xe,private:xe},afterWords:{of:xe,system:xe,aid:xe,method:xe,utility:xe,tool:xe,reform:xe,therapy:xe,philosophy:xe,room:xe,authority:xe,says:xe,said:xe,wants:xe,wanted:xe,is:xe,did:xe,do:xe,can:xe,wise:xe}},He="Infinitive",As={beforeTags:{Modal:He,Adverb:He,Negative:He,Plural:He},afterTags:{Determiner:He,Adverb:He,Possessive:He,Reflexive:He,Preposition:He,Cardinal:He,Comparative:He,Superlative:He},beforeWords:{i:He,we:He,you:He,they:He,to:He,please:He,will:He,have:He,had:He,would:He,could:He,should:He,do:He,did:He,does:He,can:He,must:He,us:He,me:He,let:He,even:He,when:He,help:He,he:He,she:He,it:He,being:He,bi:He,co:He,contra:He,de:He,inter:He,intra:He,mis:He,pre:He,out:He,counter:He,nobody:He,somebody:He,anybody:He,everybody:He},afterWords:{the:He,me:He,you:He,him:He,us:He,her:He,his:He,them:He,they:He,it:He,himself:He,herself:He,itself:He,myself:He,ourselves:He,themselves:He,something:He,anything:He,a:He,an:He,up:He,down:He,by:He,out:He,off:He,under:He,what:He,all:He,to:He,because:He,although:He,how:He,otherwise:He,together:He,though:He,into:He,yet:He,more:He,here:He,there:He,away:He}},g3e={beforeTags:Object.assign({},As.beforeTags,Mr.beforeTags,{}),afterTags:Object.assign({},As.afterTags,Mr.afterTags,{}),beforeWords:Object.assign({},As.beforeWords,Mr.beforeWords,{}),afterWords:Object.assign({},As.afterWords,Mr.afterWords,{})},Xe="Adjective",vi={beforeTags:{Determiner:Xe,Possessive:Xe,Hyphenated:Xe},afterTags:{Adjective:Xe},beforeWords:{seem:Xe,seemed:Xe,seems:Xe,feel:Xe,feels:Xe,felt:Xe,stay:Xe,appear:Xe,appears:Xe,appeared:Xe,also:Xe,over:Xe,under:Xe,too:Xe,it:Xe,but:Xe,still:Xe,really:Xe,quite:Xe,well:Xe,very:Xe,truly:Xe,how:Xe,deeply:Xe,hella:Xe,profoundly:Xe,extremely:Xe,so:Xe,badly:Xe,mostly:Xe,totally:Xe,awfully:Xe,rather:Xe,nothing:Xe,something:Xe,anything:Xe,not:Xe,me:Xe,is:Xe,face:Xe,faces:Xe,faced:Xe,look:Xe,looks:Xe,looked:Xe,reveal:Xe,reveals:Xe,revealed:Xe,sound:Xe,sounded:Xe,sounds:Xe,remains:Xe,remained:Xe,prove:Xe,proves:Xe,proved:Xe,becomes:Xe,stays:Xe,tastes:Xe,taste:Xe,smells:Xe,smell:Xe,gets:Xe,grows:Xe,as:Xe,rings:Xe,radiates:Xe,conveys:Xe,convey:Xe,conveyed:Xe,of:Xe},afterWords:{too:Xe,also:Xe,or:Xe,enough:Xe,as:Xe}},Ft="Gerund",rh={beforeTags:{Adverb:Ft,Preposition:Ft,Conjunction:Ft},afterTags:{Adverb:Ft,Possessive:Ft,Person:Ft,Pronoun:Ft,Determiner:Ft,Copula:Ft,Preposition:Ft,Conjunction:Ft,Comparative:Ft},beforeWords:{been:Ft,keep:Ft,continue:Ft,stop:Ft,am:Ft,be:Ft,me:Ft,began:Ft,start:Ft,starts:Ft,started:Ft,stops:Ft,stopped:Ft,help:Ft,helps:Ft,avoid:Ft,avoids:Ft,love:Ft,loves:Ft,loved:Ft,hate:Ft,hates:Ft,hated:Ft},afterWords:{you:Ft,me:Ft,her:Ft,him:Ft,his:Ft,them:Ft,their:Ft,it:Ft,this:Ft,there:Ft,on:Ft,about:Ft,for:Ft,up:Ft,down:Ft}},kn="Gerund",ih="Adjective",y3e={beforeTags:Object.assign({},vi.beforeTags,rh.beforeTags,{Imperative:kn,Infinitive:ih,Plural:kn}),afterTags:Object.assign({},vi.afterTags,rh.afterTags,{Noun:ih}),beforeWords:Object.assign({},vi.beforeWords,rh.beforeWords,{is:ih,are:kn,was:ih,of:ih,suggest:kn,suggests:kn,suggested:kn,recommend:kn,recommends:kn,recommended:kn,imagine:kn,imagines:kn,imagined:kn,consider:kn,considered:kn,considering:kn,resist:kn,resists:kn,resisted:kn,avoid:kn,avoided:kn,avoiding:kn,except:ih,accept:ih,assess:kn,explore:kn,fear:kn,fears:kn,appreciate:kn,question:kn,help:kn,embrace:kn,with:ih}),afterWords:Object.assign({},vi.afterWords,rh.afterWords,{to:kn,not:kn,the:kn})},_3e={beforeTags:Object.assign({},vi.beforeTags,Mr.beforeTags,{Determiner:void 0,Cardinal:"Noun",PhrasalVerb:"Adjective"}),afterTags:Object.assign({},vi.afterTags,Mr.afterTags,{}),beforeWords:Object.assign({},vi.beforeWords,Mr.beforeWords,{are:"Adjective",is:"Adjective",was:"Adjective",be:"Adjective",off:"Adjective",out:"Adjective"}),afterWords:Object.assign({},vi.afterWords,Mr.afterWords)};let Wt="PastTense",Wb="Adjective";const hS={beforeTags:{Adverb:Wt,Pronoun:Wt,ProperNoun:Wt,Auxiliary:Wt,Noun:Wt},afterTags:{Possessive:Wt,Pronoun:Wt,Determiner:Wt,Adverb:Wt,Comparative:Wt,Date:Wt,Gerund:Wt},beforeWords:{be:Wt,who:Wt,get:Wb,had:Wt,has:Wt,have:Wt,been:Wt,it:Wt,as:Wt,for:Wb,more:Wb,always:Wb},afterWords:{by:Wt,back:Wt,out:Wt,in:Wt,up:Wt,down:Wt,before:Wt,after:Wt,for:Wt,the:Wt,with:Wt,as:Wt,on:Wt,at:Wt,between:Wt,to:Wt,into:Wt,us:Wt,them:Wt,his:Wt,her:Wt,their:Wt,our:Wt,me:Wt,about:Wb}},v3e={beforeTags:Object.assign({},vi.beforeTags,hS.beforeTags),afterTags:Object.assign({},vi.afterTags,hS.afterTags),beforeWords:Object.assign({},vi.beforeWords,hS.beforeWords),afterWords:Object.assign({},vi.afterWords,hS.afterWords)},w3e={beforeTags:Object.assign({},vi.beforeTags,As.beforeTags,{Adverb:void 0,Negative:void 0}),afterTags:Object.assign({},vi.afterTags,As.afterTags,{Noun:"Adjective",Conjunction:void 0}),beforeWords:Object.assign({},vi.beforeWords,As.beforeWords,{have:void 0,had:void 0,not:void 0,went:"Adjective",goes:"Adjective",got:"Adjective",be:"Adjective"}),afterWords:Object.assign({},vi.afterWords,As.afterWords,{to:void 0,as:"Adjective"})},E3e={beforeTags:Object.assign({},rh.beforeTags,Mr.beforeTags,{Copula:"Gerund",PastTense:"Gerund",PresentTense:"Gerund",Infinitive:"Gerund"}),afterTags:Object.assign({},rh.afterTags,Mr.afterTags,{Value:"Gerund"}),beforeWords:Object.assign({},rh.beforeWords,Mr.beforeWords,{are:"Gerund",were:"Gerund",be:"Gerund",no:"Gerund",without:"Gerund",you:"Gerund",we:"Gerund",they:"Gerund",he:"Gerund",she:"Gerund",us:"Gerund",them:"Gerund"}),afterWords:Object.assign({},rh.afterWords,Mr.afterWords,{the:"Gerund",this:"Gerund",that:"Gerund",me:"Gerund",us:"Gerund",them:"Gerund"})},Ay="Singular",op="Infinitive",T3e={beforeTags:Object.assign({},As.beforeTags,Mr.beforeTags,{Adjective:Ay,Particle:Ay}),afterTags:Object.assign({},As.afterTags,Mr.afterTags,{ProperNoun:op,Gerund:op,Adjective:op,Copula:Ay}),beforeWords:Object.assign({},As.beforeWords,Mr.beforeWords,{is:Ay,was:Ay,of:Ay,have:null}),afterWords:Object.assign({},As.afterWords,Mr.afterWords,{instead:op,about:op,his:op,her:op,to:null,by:null,in:null})},Hn="Person",bi={beforeTags:{Honorific:Hn,Person:Hn},afterTags:{Person:Hn,ProperNoun:Hn,Verb:Hn},ownTags:{ProperNoun:Hn},beforeWords:{hi:Hn,hey:Hn,yo:Hn,dear:Hn,hello:Hn},afterWords:{said:Hn,says:Hn,told:Hn,tells:Hn,feels:Hn,felt:Hn,seems:Hn,thinks:Hn,thought:Hn,spends:Hn,spendt:Hn,plays:Hn,played:Hn,sing:Hn,sang:Hn,learn:Hn,learned:Hn,wants:Hn,wanted:Hn}},Tr="Month",pS={beforeTags:{Date:Tr,Value:Tr},afterTags:{Date:Tr,Value:Tr},beforeWords:{by:Tr,in:Tr,on:Tr,during:Tr,after:Tr,before:Tr,between:Tr,until:Tr,til:Tr,sometime:Tr,of:Tr,this:Tr,next:Tr,last:Tr,previous:Tr,following:Tr,with:"Person"},afterWords:{sometime:Tr,in:Tr,of:Tr,until:Tr,the:Tr}},I3e={beforeTags:Object.assign({},bi.beforeTags,pS.beforeTags),afterTags:Object.assign({},bi.afterTags,pS.afterTags),beforeWords:Object.assign({},bi.beforeWords,pS.beforeWords),afterWords:Object.assign({},bi.afterWords,pS.afterWords)},as="Place",mS={beforeTags:{Place:as},afterTags:{Place:as,Abbreviation:as},beforeWords:{in:as,by:as,near:as,from:as,to:as},afterWords:{in:as,by:as,near:as,from:as,to:as,government:as,council:as,region:as,city:as}};let Na="Unit";const Cy={"Actor|Verb":g3e,"Adj|Gerund":y3e,"Adj|Noun":_3e,"Adj|Past":v3e,"Adj|Present":w3e,"Noun|Verb":T3e,"Noun|Gerund":E3e,"Person|Noun":{beforeTags:Object.assign({},Mr.beforeTags,bi.beforeTags),afterTags:Object.assign({},Mr.afterTags,bi.afterTags),beforeWords:Object.assign({},Mr.beforeWords,bi.beforeWords,{i:"Infinitive",we:"Infinitive"}),afterWords:Object.assign({},Mr.afterWords,bi.afterWords)},"Person|Date":I3e,"Person|Verb":{beforeTags:Object.assign({},Mr.beforeTags,bi.beforeTags,As.beforeTags),afterTags:Object.assign({},Mr.afterTags,bi.afterTags,As.afterTags),beforeWords:Object.assign({},Mr.beforeWords,bi.beforeWords,As.beforeWords),afterWords:Object.assign({},Mr.afterWords,bi.afterWords,As.afterWords)},"Person|Place":{beforeTags:Object.assign({},mS.beforeTags,bi.beforeTags),afterTags:Object.assign({},mS.afterTags,bi.afterTags),beforeWords:Object.assign({},mS.beforeWords,bi.beforeWords),afterWords:Object.assign({},mS.afterWords,bi.afterWords)},"Person|Adj":{beforeTags:Object.assign({},bi.beforeTags,vi.beforeTags),afterTags:Object.assign({},bi.afterTags,vi.afterTags),beforeWords:Object.assign({},bi.beforeWords,vi.beforeWords),afterWords:Object.assign({},bi.afterWords,vi.afterWords)},"Unit|Noun":{beforeTags:{Value:Na},afterTags:{},beforeWords:{per:Na,every:Na,each:Na,square:Na,cubic:Na,sq:Na,metric:Na},afterWords:{per:Na,squared:Na,cubed:Na,long:Na}}},gS=(t,e)=>{let n=Object.keys(t).reduce((r,i)=>(r[i]="Infinitive"===t[i]?"PresentTense":"Plural",r),{});return Object.assign(n,e)};Cy["Plural|Verb"]={beforeWords:gS(Cy["Noun|Verb"].beforeWords,{had:"Plural",have:"Plural"}),afterWords:gS(Cy["Noun|Verb"].afterWords,{his:"PresentTense",her:"PresentTense",its:"PresentTense",in:null,to:null,is:"PresentTense",by:"PresentTense"}),beforeTags:gS(Cy["Noun|Verb"].beforeTags,{Conjunction:"PresentTense",Noun:void 0,ProperNoun:"PresentTense"}),afterTags:gS(Cy["Noun|Verb"].afterTags,{Gerund:"Plural",Noun:"PresentTense",Value:"PresentTense"})};const N3e=Cy,zn="Adjective",zi="Infinitive",ap="PresentTense",on="Singular",Gi="PastTense",Sy="Adverb",Wo="Plural",Hr="Actor",yS="Verb",Cs="Noun",_u="LastName",vu="Place",RF="Participle",P3e=[null,null,{ea:on,ia:Cs,ic:zn,ly:Sy,"'n":yS,"'t":yS},{oed:Gi,ued:Gi,xed:Gi," so":Sy,"'ll":"Modal","'re":"Copula",azy:zn,eer:Cs,end:yS,ped:Gi,ffy:zn,ify:zi,ing:"Gerund",ize:zi,ibe:zi,lar:zn,mum:zn,nes:ap,nny:zn,ous:zn,que:zn,ger:Cs,ber:Cs,rol:on,sis:on,ogy:on,oid:on,ian:on,zes:ap,eld:Gi,ken:RF,ven:RF,ten:RF,ect:zi,ict:zi,ign:zi,oze:zi,ful:zn,bal:zn,ton:Cs},{amed:Gi,aped:Gi,ched:Gi,lked:Gi,rked:Gi,reed:Gi,nded:Gi,mned:zn,cted:Gi,dged:Gi,ield:on,akis:_u,cede:zi,chuk:_u,czyk:_u,ects:ap,iend:on,ends:yS,enko:_u,ette:on,iary:on,wner:on,fies:ap,fore:Sy,gate:zi,gone:zn,ices:Wo,ints:Wo,ruct:zi,ines:Wo,ions:Wo,ners:Wo,pers:Wo,lers:Wo,less:zn,llen:zn,made:zn,nsen:_u,oses:ap,ould:"Modal",some:zn,sson:_u,ians:Wo,tion:on,tage:Cs,ique:on,tive:zn,tors:Cs,vice:on,lier:on,fier:on,wned:Gi,gent:on,tist:Hr,pist:Hr,rist:Hr,mist:Hr,yist:Hr,vist:Hr,ists:Hr,lite:on,site:on,rite:on,mite:on,bite:on,mate:on,date:on,ndal:on,vent:on,uist:Hr,gist:Hr,note:on,cide:on,ence:on,wide:zn,vide:zi,ract:zi,duce:zi,pose:zi,eive:zi,lyze:zi,lyse:zi,iant:zn,nary:zn,ghty:zn,uent:zn,erer:Hr,bury:vu,dorf:Cs,esty:Cs,wych:vu,dale:vu,folk:vu},{elist:Hr,holic:on,phite:on,tized:Gi,urned:Gi,eased:Gi,ances:Wo,bound:zn,ettes:Wo,fully:Sy,ishes:ap,ities:Wo,marek:_u,nssen:_u,ology:Cs,osome:on,tment:on,ports:Wo,rough:zn,tches:ap,tieth:"Ordinal",tures:Wo,wards:Sy,where:Sy,archy:Cs,pathy:Cs,opoly:Cs,embly:Cs,phate:Cs,ndent:on,scent:on,onist:Hr,anist:Hr,alist:Hr,olist:Hr,icist:Hr,ounce:zi,iable:zn,borne:zn,gnant:zn,inant:zn,igent:zn,atory:zn,rient:on,dient:on,maker:Hr,burgh:vu,mouth:vu,ceter:vu,ville:vu,worth:Cs},{auskas:_u,parent:on,cedent:on,ionary:on,cklist:on,keeper:Hr,logist:Hr,teenth:"Value",worker:Hr,master:Hr,writer:Hr,brough:vu,cester:vu},{logists:Hr,opoulos:_u,borough:vu,sdottir:_u}],Ko="Adjective",er="Noun",Kb="Verb",k3e=[null,null,{},{neo:er,bio:er,"de-":Kb,"re-":Kb,"un-":Kb,"ex-":er},{anti:er,auto:er,faux:Ko,hexa:er,kilo:er,mono:er,nano:er,octa:er,poly:er,semi:Ko,tele:er,"pro-":Ko,"mis-":Kb,"dis-":Kb,"pre-":Ko},{anglo:er,centi:er,ethno:er,ferro:er,grand:er,hepta:er,hydro:er,intro:er,macro:er,micro:er,milli:er,nitro:er,penta:er,quasi:Ko,radio:er,tetra:er,"omni-":Ko,"post-":Ko},{pseudo:Ko,"extra-":Ko,"hyper-":Ko,"inter-":Ko,"intra-":Ko,"deca-":Ko},{electro:er}],Fr="Adjective",_S="Infinitive",vS="PresentTense",Ec="Singular",Qs="PastTense",Tc="Expression",bS="LastName",x3e={a:[[/.[aeiou]na$/,"Noun","tuna"],[/.[oau][wvl]ska$/,bS],[/.[^aeiou]ica$/,Ec,"harmonica"],[/^([hyj]a+)+$/,Tc,"haha"]],c:[[/.[^aeiou]ic$/,Fr]],d:[[/[aeiou](pp|ll|ss|ff|gg|tt|rr|bb|nn|mm)ed$/,Qs,"popped"],[/.[aeo]{2}[bdgmnprvz]ed$/,Qs,"rammed"],[/.[aeiou][sg]hed$/,Qs,"gushed"],[/.[aeiou]red$/,Qs,"hired"],[/.[aeiou]r?ried$/,Qs,"hurried"],[/[^aeiou]ard$/,Ec,"steward"],[/[aeiou][^aeiou]id$/,Fr,""],[/.[vrl]id$/,Fr,"livid"],[/..led$/,Qs,"hurled"],[/.[iao]sed$/,Qs,""],[/[aeiou]n?[cs]ed$/,Qs,""],[/[aeiou][rl]?[mnf]ed$/,Qs,""],[/[aeiou][ns]?c?ked$/,Qs,"bunked"],[/[aeiou]gned$/,Qs],[/[aeiou][nl]?ged$/,Qs],[/.[tdbwxyz]ed$/,Qs],[/[^aeiou][aeiou][tvx]ed$/,Qs],[/.[cdflmnprstv]ied$/,Qs,"emptied"]],e:[[/.[lnr]ize$/,_S,"antagonize"],[/.[^aeiou]ise$/,_S,"antagonise"],[/.[aeiou]te$/,_S,"bite"],[/.[^aeiou][ai]ble$/,Fr,"fixable"],[/.[^aeiou]eable$/,Fr,"maleable"],[/.[ts]ive$/,Fr,"festive"],[/[a-z]-like$/,Fr,"woman-like"]],h:[[/.[^aeiouf]ish$/,Fr,"cornish"],[/.v[iy]ch$/,bS,"..ovich"],[/^ug?h+$/,Tc,"ughh"],[/^uh[ -]?oh$/,Tc,"uhoh"],[/[a-z]-ish$/,Fr,"cartoon-ish"]],i:[[/.[oau][wvl]ski$/,bS,"polish-male"]],k:[[/^(k){2}$/,Tc,"kkkk"]],l:[[/.[gl]ial$/,Fr,"familial"],[/.[^aeiou]ful$/,Fr,"fitful"],[/.[nrtumcd]al$/,Fr,"natal"],[/.[^aeiou][ei]al$/,Fr,"familial"]],m:[[/.[^aeiou]ium$/,Ec,"magnesium"],[/[^aeiou]ism$/,Ec,"schism"],[/^[hu]m+$/,Tc,"hmm"],[/^\d+ ?[ap]m$/,"Date","3am"]],n:[[/.[lsrnpb]ian$/,Fr,"republican"],[/[^aeiou]ician$/,"Actor","musician"],[/[aeiou][ktrp]in'$/,"Gerund","cookin'"]],o:[[/^no+$/,Tc,"noooo"],[/^(yo)+$/,Tc,"yoo"],[/^wo{2,}[pt]?$/,Tc,"woop"]],r:[[/.[bdfklmst]ler$/,"Noun"],[/[aeiou][pns]er$/,Ec],[/[^i]fer$/,_S],[/.[^aeiou][ao]pher$/,"Actor"],[/.[lk]er$/,"Noun"],[/.ier$/,"Comparative"]],t:[[/.[di]est$/,"Superlative"],[/.[icldtgrv]ent$/,Fr],[/[aeiou].*ist$/,Fr],[/^[a-z]et$/,"Verb"]],s:[[/.[^aeiou]ises$/,vS],[/.[rln]ates$/,vS],[/.[^z]ens$/,"Verb"],[/.[lstrn]us$/,Ec],[/.[aeiou]sks$/,vS],[/.[aeiou]kes$/,vS],[/[aeiou][^aeiou]is$/,Ec],[/[a-z]'s$/,"Noun"],[/^yes+$/,Tc]],v:[[/.[^aeiou][ai][kln]ov$/,bS]],y:[[/.[cts]hy$/,Fr],[/.[st]ty$/,Fr],[/.[tnl]ary$/,Fr],[/.[oe]ry$/,Ec],[/[rdntkbhs]ly$/,"Adverb"],[/.(gg|bb|zz)ly$/,Fr],[/...lly$/,"Adverb"],[/.[gk]y$/,Fr],[/[bszmp]{2}y$/,Fr],[/.[ai]my$/,Fr],[/[ea]{2}zy$/,Fr],[/.[^aeiou]ity$/,Ec]]},Ss="Verb",gr="Noun",R3e={leftTags:[["Adjective",gr],["Possessive",gr],["Determiner",gr],["Adverb",Ss],["Pronoun",Ss],["Value",gr],["Ordinal",gr],["Modal",Ss],["Superlative",gr],["Demonym",gr],["Honorific","Person"]],leftWords:[["i",Ss],["first",gr],["it",Ss],["there",Ss],["not",Ss],["because",gr],["if",gr],["but",gr],["who",Ss],["this",gr],["his",gr],["when",gr],["you",Ss],["very","Adjective"],["old",gr],["never",Ss],["before",gr],["a",gr],["the",gr],["been",Ss]],rightTags:[["Copula",gr],["PastTense",gr],["Conjunction",gr],["Modal",gr]],rightWords:[["there",Ss],["me",Ss],["man","Adjective"],["him",Ss],["it",Ss],["were",gr],["took",gr],["himself",Ss],["went",gr],["who",gr],["jr","Person"]]},jJ=/^([0-9]+)/,wS=function(t){let e=function(t){let e={};return t.split("\xa6").forEach(n=>{let[r,i]=n.split(":");i=(i||"").split(","),i.forEach(s=>{e[s]=r})}),e}(t);return Object.keys(e).reduce((n,r)=>(n[r]=function(t="",e=""){let n=(e=String(e)).match(jJ);if(null===n)return e;let r=Number(n[1])||0;return t.substring(0,r)+e.replace(jJ,"")}(r,e[r]),n),{})},lp=function(t={}){return"string"==typeof t&&(t=JSON.parse(t)),t.fwd=wS(t.fwd||""),t.both=wS(t.both||""),t.rev=wS(t.rev||""),t.ex=wS(t.ex||""),t},BJ=function(t){return Object.entries(t).reduce((e,n)=>(e[n[1]]=n[0],e),{})},Dy=function(t={}){return{reversed:!0,both:BJ(t.both),ex:BJ(t.ex),fwd:t.rev||{}}},UJ=lp({fwd:"1:tted,wed,gged,nned,een,rred,pped,yed,bbed,oed,dded,rd,wn,mmed\xa62:eed,nded,et,hted,st,oled,ut,emed,eled,lded,ken,rt,nked,apt,ant,eped,eked\xa63:eared,eat,eaded,nelled,ealt,eeded,ooted,eaked,eaned,eeted,mited,bid,uit,ead,uited,ealed,geted,velled,ialed,belled\xa64:ebuted,hined,comed\xa6y:ied\xa6ome:ame\xa6ear:ore\xa6ind:ound\xa6ing:ung,ang\xa6ep:pt\xa6ink:ank,unk\xa6ig:ug\xa6all:ell\xa6ee:aw\xa6ive:ave\xa6eeze:oze\xa6old:eld\xa6ave:ft\xa6ake:ook\xa6ell:old\xa6ite:ote\xa6ide:ode\xa6ine:one\xa6in:un,on\xa6eal:ole\xa6im:am\xa6ie:ay\xa6and:ood\xa61ise:rose\xa61eak:roke\xa61ing:rought\xa61ive:rove\xa61el:elt\xa61id:bade\xa61et:got\xa61y:aid\xa61it:sat\xa63e:lid\xa63d:pent",both:"1:aed,fed,xed,hed\xa62:sged,xted,wled,rped,lked,kied,lmed,lped,uped,bted,rbed,rked,wned,rled,mped,fted,mned,mbed,zzed,omed,ened,cked,gned,lted,sked,ued,zed,nted,ered,rted,rmed,ced,sted,rned,ssed,rded,pted,ved,cted\xa63:cled,eined,siped,ooned,uked,ymed,jored,ouded,ioted,oaned,lged,asped,iged,mured,oided,eiled,yped,taled,moned,yled,lit,kled,oaked,gled,naled,fled,uined,oared,valled,koned,soned,aided,obed,ibed,meted,nicked,rored,micked,keted,vred,ooped,oaded,rited,aired,auled,filled,ouled,ooded,ceted,tolled,oited,bited,aped,tled,vored,dled,eamed,nsed,rsed,sited,owded,pled,sored,rged,osed,pelled,oured,psed,oated,loned,aimed,illed,eured,tred,ioned,celled,bled,wsed,ooked,oiled,itzed,iked,iased,onged,ased,ailed,uned,umed,ained,auded,nulled,ysed,eged,ised,aged,oined,ated,used,dged,doned\xa64:ntied,efited,uaked,caded,fired,roped,halled,roked,himed,culed,tared,lared,tuted,uared,routed,pited,naked,miled,houted,helled,hared,cored,caled,tired,peated,futed,ciled,called,tined,moted,filed,sided,poned,iloted,honed,lleted,huted,ruled,cured,named,preted,vaded,sured,talled,haled,peded,gined,nited,uided,ramed,feited,laked,gured,ctored,unged,pired,cuted,voked,eloped,ralled,rined,coded,icited,vided,uaded,voted,mined,sired,noted,lined,nselled,luted,jured,fided,puted,piled,pared,olored,cided,hoked,enged,tured,geoned,cotted,lamed,uiled,waited,udited,anged,luded,mired,uired,raded\xa65:modelled,izzled,eleted,umpeted,ailored,rseded,treated,eduled,ecited,rammed,eceded,atrolled,nitored,basted,twined,itialled,ncited,gnored,ploded,xcited,nrolled,namelled,plored,efeated,redited,ntrolled,nfined,pleted,llided,lcined,eathed,ibuted,lloted,dhered,cceded\xa63ad:sled\xa62aw:drew\xa62ot:hot\xa62ke:made\xa62ow:hrew,grew\xa62ose:hose\xa62d:ilt\xa62in:egan\xa61un:ran\xa61ink:hought\xa61ick:tuck\xa61ike:ruck\xa61eak:poke,nuck\xa61it:pat\xa61o:did\xa61ow:new\xa61ake:woke\xa6go:went",rev:"3:rst,hed,hut,cut,set\xa64:tbid\xa65:dcast,eread,pread,erbid\xa6ought:uy,eek\xa61ied:ny,ly,dy,ry,fy,py,vy,by,ty,cy\xa61ung:ling,ting,wing\xa61pt:eep\xa61ank:rink\xa61ore:bear,wear\xa61ave:give\xa61oze:reeze\xa61ound:rind,wind\xa61ook:take,hake\xa61aw:see\xa61old:sell\xa61ote:rite\xa61ole:teal\xa61unk:tink\xa61am:wim\xa61ay:lie\xa61ood:tand\xa61eld:hold\xa62d:he,ge,re,le,leed,ne,reed,be,ye,lee,pe,we\xa62ed:dd,oy,or,ey,gg,rr,us,ew,to\xa62ame:ecome,rcome\xa62ped:ap\xa62ged:ag,og,ug,eg\xa62bed:ub,ab,ib,ob\xa62lt:neel\xa62id:pay\xa62ang:pring\xa62ove:trive\xa62med:um\xa62ode:rride\xa62at:ysit\xa63ted:mit,hat,mat,lat,pot,rot,bat\xa63ed:low,end,tow,und,ond,eem,lay,cho,dow,xit,eld,ald,uld,law,lel,eat,oll,ray,ank,fin,oam,out,how,iek,tay,haw,ait,vet,say,cay,bow\xa63d:ste,ede,ode,ete,ree,ude,ame,oke,ote,ime,ute,ade\xa63red:lur,cur,pur,car\xa63ped:hop,rop,uip,rip,lip,tep,top\xa63ded:bed,rod,kid\xa63ade:orbid\xa63led:uel\xa63ned:lan,can,kin,pan,tun\xa63med:rim,lim\xa64ted:quit,llot\xa64ed:pear,rrow,rand,lean,mand,anel,pand,reet,link,abel,evel,imit,ceed,ruit,mind,peal,veal,hool,head,pell,well,mell,uell,band,hear,weak\xa64led:nnel,qual,ebel,ivel\xa64red:nfer,efer,sfer\xa64n:sake,trew\xa64d:ntee\xa64ded:hred\xa64ned:rpin\xa65ed:light,nceal,right,ndear,arget,hread,eight,rtial,eboot\xa65d:edite,nvite\xa65ted:egret\xa65led:ravel",ex:"2:been,upped\xa63:added,aged,aided,aimed,aired,bid,died,dyed,egged,erred,eyed,fit,gassed,hit,lied,owed,pent,pied,tied,used,vied,oiled,outed,banned,barred,bet,canned,cut,dipped,donned,ended,feed,inked,jarred,let,manned,mowed,netted,padded,panned,pitted,popped,potted,put,set,sewn,sowed,tanned,tipped,topped,vowed,weed,bowed,jammed,binned,dimmed,hopped,mopped,nodded,pinned,rigged,sinned,towed,vetted\xa64:ached,baked,baled,boned,bored,called,caned,cared,ceded,cited,coded,cored,cubed,cured,dared,dined,edited,exited,faked,fared,filed,fined,fired,fuelled,gamed,gelled,hired,hoped,joked,lined,mined,named,noted,piled,poked,polled,pored,pulled,reaped,roamed,rolled,ruled,seated,shed,sided,timed,tolled,toned,voted,waited,walled,waned,winged,wiped,wired,zoned,yelled,tamed,lubed,roped,faded,mired,caked,honed,banged,culled,heated,raked,welled,banded,beat,cast,cooled,cost,dealt,feared,folded,footed,handed,headed,heard,hurt,knitted,landed,leaked,leapt,linked,meant,minded,molded,neared,needed,peaked,plodded,plotted,pooled,quit,read,rooted,sealed,seeded,seeped,shipped,shunned,skimmed,slammed,sparred,stemmed,stirred,suited,thinned,twinned,swayed,winked,dialed,abutted,blotted,fretted,healed,heeded,peeled,reeled\xa65:basted,cheated,equalled,eroded,exiled,focused,opined,pleated,primed,quoted,scouted,shored,sloped,smoked,sniped,spelled,spouted,routed,staked,stored,swelled,tasted,treated,wasted,smelled,dwelled,honored,prided,quelled,eloped,scared,coveted,sweated,breaded,cleared,debuted,deterred,freaked,modeled,pleaded,rebutted,speeded\xa66:anchored,defined,endured,impaled,invited,refined,revered,strolled,cringed,recast,thrust,unfolded\xa67:authored,combined,competed,conceded,convened,excreted,extruded,redefined,restored,secreted,rescinded,welcomed\xa68:expedited,infringed\xa69:interfered,intervened,persevered\xa610:contravened\xa6eat:ate\xa6is:was\xa6go:went\xa6are:were\xa63d:bent,lent,rent,sent\xa63e:bit,fled,hid,lost\xa63ed:bled,bred\xa62ow:blew,grew\xa61uy:bought\xa62tch:caught\xa61o:did\xa61ive:dove,gave\xa62aw:drew\xa62ed:fed\xa62y:flew,laid,paid,said\xa61ight:fought\xa61et:got\xa62ve:had\xa61ang:hung\xa62ad:led\xa62ght:lit\xa62ke:made\xa62et:met\xa61un:ran\xa61ise:rose\xa61it:sat\xa61eek:sought\xa61each:taught\xa61ake:woke,took\xa61eave:wove\xa62ise:arose\xa61ear:bore,tore,wore\xa61ind:bound,found,wound\xa62eak:broke\xa62ing:brought,wrung\xa61ome:came\xa62ive:drove\xa61ig:dug\xa61all:fell\xa62el:felt\xa64et:forgot\xa61old:held\xa62ave:left\xa61ing:rang,sang\xa61ide:rode\xa61ink:sank\xa61ee:saw\xa62ine:shone\xa64e:slid\xa61ell:sold,told\xa64d:spent\xa62in:spun\xa61in:won"}),HJ=lp({fwd:"1:oes\xa61ve:as",both:"1:xes\xa62:zzes,ches,shes,sses\xa63:iases\xa62y:llies,plies\xa61y:cies,bies,ties,vies,nies,pies,dies,ries,fies\xa6:s",rev:"1ies:ly\xa62es:us,go,do\xa63es:cho,eto",ex:"2:does,goes\xa63:gasses\xa65:focuses\xa6is:are\xa63y:relies\xa62y:flies\xa62ve:has"}),zJ=lp({fwd:"1:nning,tting,rring,pping,eing,mming,gging,dding,bbing,kking\xa62:eking,oling,eling,eming\xa63:velling,siting,uiting,fiting,loting,geting,ialing,celling\xa64:graming",both:"1:aing,iing,fing,xing,ying,oing,hing,wing\xa62:tzing,rping,izzing,bting,mning,sping,wling,rling,wding,rbing,uping,lming,wning,mping,oning,lting,mbing,lking,fting,hting,sking,gning,pting,cking,ening,nking,iling,eping,ering,rting,rming,cting,lping,ssing,nting,nding,lding,sting,rning,rding,rking\xa63:belling,siping,toming,yaking,uaking,oaning,auling,ooping,aiding,naping,euring,tolling,uzzing,ganing,haning,ualing,halling,iasing,auding,ieting,ceting,ouling,voring,ralling,garing,joring,oaming,oaking,roring,nelling,ooring,uelling,eaming,ooding,eaping,eeting,ooting,ooming,xiting,keting,ooking,ulling,airing,oaring,biting,outing,oiting,earing,naling,oading,eeding,ouring,eaking,aiming,illing,oining,eaning,onging,ealing,aining,eading\xa64:thoming,melling,aboring,ivoting,weating,dfilling,onoring,eriting,imiting,tialling,rgining,otoring,linging,winging,lleting,louding,spelling,mpelling,heating,feating,opelling,choring,welling,ymaking,ctoring,calling,peating,iloring,laiting,utoring,uditing,mmaking,loating,iciting,waiting,mbating,voiding,otalling,nsoring,nselling,ocusing,itoring,eloping\xa65:rselling,umpeting,atrolling,treating,tselling,rpreting,pringing,ummeting,ossoming,elmaking,eselling,rediting,totyping,onmaking,rfeiting,ntrolling\xa65e:chmaking,dkeeping,severing,erouting,ecreting,ephoning,uthoring,ravening,reathing,pediting,erfering,eotyping,fringing,entoring,ombining,ompeting\xa64e:emaking,eething,twining,rruling,chuting,xciting,rseding,scoping,edoring,pinging,lunging,agining,craping,pleting,eleting,nciting,nfining,ncoding,tponing,ecoding,writing,esaling,nvening,gnoring,evoting,mpeding,rvening,dhering,mpiling,storing,nviting,ploring\xa63e:tining,nuring,saking,miring,haling,ceding,xuding,rining,nuting,laring,caring,miling,riding,hoking,piring,lading,curing,uading,noting,taping,futing,paring,hading,loding,siring,guring,vading,voking,during,niting,laning,caping,luting,muting,ruding,ciding,juring,laming,caling,hining,uoting,liding,ciling,duling,tuting,puting,cuting,coring,uiding,tiring,turing,siding,rading,enging,haping,buting,lining,taking,anging,haring,uiring,coming,mining,moting,suring,viding,luding\xa62e:tring,zling,uging,oging,gling,iging,vring,fling,lging,obing,psing,pling,ubing,cling,dling,wsing,iking,rsing,dging,kling,ysing,tling,rging,eging,nsing,uning,osing,uming,using,ibing,bling,aging,ising,asing,ating\xa62ie:rlying\xa61e:zing,uing,cing,ving",rev:"ying:ie\xa61ing:se,ke,te,we,ne,re,de,pe,me,le,c,he\xa62ing:ll,ng,dd,ee,ye,oe,rg,us\xa62ning:un\xa62ging:og,ag,ug,ig,eg\xa62ming:um\xa62bing:ub,ab,eb,ob\xa63ning:lan,can,hin,pin,win\xa63ring:cur,lur,tir,tar,pur,car\xa63ing:ait,del,eel,fin,eat,oat,eem,lel,ool,ein,uin\xa63ping:rop,rap,top,uip,wap,hip,hop,lap,rip,cap\xa63ming:tem,wim,rim,kim,lim\xa63ting:mat,cut,pot,lit,lot,hat,set,pit,put\xa63ding:hed,bed,bid\xa63king:rek\xa63ling:cil,pel\xa63bing:rib\xa64ning:egin\xa64ing:isit,ruit,ilot,nsit,dget,rkel,ival,rcel\xa64ring:efer,nfer\xa64ting:rmit,mmit,ysit,dmit,emit,bmit,tfit,gret\xa64ling:evel,xcel,ivel\xa64ding:hred\xa65ing:arget,posit,rofit\xa65ring:nsfer\xa65ting:nsmit,orget,cquit\xa65ling:ancel,istil",ex:"3:adding,eating,aiming,aiding,airing,outing,gassing,setting,getting,putting,cutting,winning,sitting,betting,mapping,tapping,letting,bidding,hitting,tanning,netting,popping,fitting,capping,lapping,barring,banning,vetting,topping,rotting,tipping,potting,wetting,pitting,dipping,budding,hemming,pinning,jetting,kidding,padding,podding,sipping,wedding,bedding,donning,warring,penning,gutting,cueing,wadding,petting,ripping,napping,matting,tinning,binning,dimming,hopping,mopping,nodding,panning,rapping,ridding,sinning\xa64:selling,falling,calling,waiting,editing,telling,rolling,heating,boating,hanging,beating,coating,singing,tolling,felling,polling,discing,seating,voiding,gelling,yelling,baiting,reining,ruining,seeking,spanning,stepping,knitting,emitting,slipping,quitting,dialing,omitting,clipping,shutting,skinning,abutting,flipping,trotting,cramming,fretting,suiting\xa65:bringing,treating,spelling,stalling,trolling,expelling,rivaling,wringing,deterring,singeing,befitting,refitting\xa66:enrolling,distilling,scrolling,strolling,caucusing,travelling\xa67:installing,redefining,stencilling,recharging,overeating,benefiting,unraveling,programing\xa69:reprogramming\xa6is:being\xa62e:using,aging,owing\xa63e:making,taking,coming,noting,hiring,filing,coding,citing,doping,baking,coping,hoping,lading,caring,naming,voting,riding,mining,curing,lining,ruling,typing,boring,dining,firing,hiding,piling,taping,waning,baling,boning,faring,honing,wiping,luring,timing,wading,piping,fading,biting,zoning,daring,waking,gaming,raking,ceding,tiring,coking,wining,joking,paring,gaping,poking,pining,coring,liming,toting,roping,wiring,aching\xa64e:writing,storing,eroding,framing,smoking,tasting,wasting,phoning,shaking,abiding,braking,flaking,pasting,priming,shoring,sloping,withing,hinging\xa65e:defining,refining,renaming,swathing,fringing,reciting\xa61ie:dying,tying,lying,vying\xa67e:sunbathing"}),GJ=lp({fwd:"1:mt\xa62:llen\xa63:iven,aken\xa6:ne\xa6y:in",both:"1:wn\xa62:me,aten\xa63:seen,bidden,isen\xa64:roven,asten\xa63l:pilt\xa63d:uilt\xa62e:itten\xa61im:wum\xa61eak:poken\xa61ine:hone\xa61ose:osen\xa61in:gun\xa61ake:woken\xa6ear:orn\xa6eal:olen\xa6eeze:ozen\xa6et:otten\xa6ink:unk\xa6ing:ung",rev:"2:un\xa6oken:eak\xa6ought:eek\xa6oven:eave\xa61ne:o\xa61own:ly\xa61den:de\xa61in:ay\xa62t:am\xa62n:ee\xa63en:all\xa64n:rive,sake,take\xa65n:rgive",ex:"2:been\xa63:seen,run\xa64:given,taken\xa65:shaken\xa62eak:broken\xa61ive:dove\xa62y:flown\xa63e:hidden,ridden\xa61eek:sought\xa61ake:woken\xa61eave:woven"}),F3e=Dy(UJ),V3e=Dy(HJ),L3e=Dy(zJ),$3e=Dy(GJ),qJ=lp({fwd:"3:ser,ier\xa61er:h,t,f,l,n\xa61r:e\xa62er:ss,or,om",both:"3er:ver,ear,alm\xa63ner:hin\xa63ter:lat\xa62mer:im\xa62er:ng,rm,mb\xa62ber:ib\xa62ger:ig\xa61er:w,p,k,d\xa6ier:y",rev:"1:tter,yer\xa62:uer,ver,ffer,oner,eler,ller,iler,ster,cer,uler,sher,ener,gher,aner,adder,nter,eter,rter,hter,rner,fter\xa63:oser,ooler,eafer,user,airer,bler,maler,tler,eater,uger,rger,ainer,urer,ealer,icher,pler,emner,icter,nser,iser\xa64:arser,viner,ucher,rosser,somer,ndomer,moter,oother,uarer,hiter\xa65:nuiner,esser,emier\xa6ar:urther",ex:"worse:bad\xa6better:good\xa64er:fair,gray,poor\xa61urther:far\xa63ter:fat,hot,wet\xa63der:mad,sad\xa63er:shy,fun\xa64der:glad\xa6:\xa64r:cute,dire,fake,fine,free,lame,late,pale,rare,ripe,rude,safe,sore,tame,wide\xa65r:eerie,stale"}),WJ=lp({fwd:"1st:e\xa61est:l,m,f,s\xa61iest:cey\xa62est:or,ir\xa63est:ver",both:"4:east\xa65:hwest\xa65lest:erful\xa64est:weet,lgar,tter,oung\xa64most:uter\xa63est:ger,der,rey,iet,ong,ear\xa63test:lat\xa63most:ner\xa62est:pt,ft,nt,ct,rt,ht\xa62test:it\xa62gest:ig\xa61est:b,k,n,p,h,d,w\xa6iest:y",rev:"1:ttest,nnest,yest\xa62:sest,stest,rmest,cest,vest,lmest,olest,ilest,ulest,ssest,imest,uest\xa63:rgest,eatest,oorest,plest,allest,urest,iefest,uelest,blest,ugest,amest,yalest,ealest,illest,tlest,itest\xa64:cerest,eriest,somest,rmalest,ndomest,motest,uarest,tiffest\xa65:leverest,rangest\xa6ar:urthest\xa63ey:riciest",ex:"best:good\xa6worst:bad\xa65est:great\xa64est:fast,full,fair,dull\xa63test:hot,wet,fat\xa64nest:thin\xa61urthest:far\xa63est:gay,shy,ill\xa64test:neat\xa64st:late,wide,fine,safe,cute,fake,pale,rare,rude,sore,ripe,dire\xa66st:severe"}),KJ={fromPast:UJ,fromPresent:HJ,fromGerund:zJ,fromParticiple:GJ,toPast:F3e,toPresent:V3e,toGerund:L3e,toParticiple:$3e,toComparative:qJ,toSuperlative:WJ,fromComparative:Dy(qJ),fromSuperlative:Dy(WJ),adjToNoun:lp({fwd:"1:tistic,eable,lful,sful,ting,tty\xa62:onate,rtable,geous,ced,seful,ctful\xa63:ortive,ented\xa6arity:ear\xa6y:etic\xa6fulness:begone\xa61ity:re\xa61y:tiful,gic\xa62ity:ile,imous,ilous,ime\xa62ion:ated\xa62eness:iving\xa62y:trious\xa62ation:iring\xa62tion:vant\xa63ion:ect\xa63ce:mant,mantic\xa63tion:irable\xa63y:est,estic\xa63m:mistic,listic\xa63ess:ning\xa64n:utious\xa64on:rative,native,vative,ective\xa64ce:erant",both:"1:king,wing\xa62:alous,ltuous,oyful,rdous\xa63:gorous,ectable,werful,amatic\xa64:oised,usical,agical,raceful,ocused,lined,ightful\xa65ness:stful,lding,itous,nuous,ulous,otous,nable,gious,ayful,rvous,ntous,lsive,peful,entle,ciful,osive,leful,isive,ncise,reful,mious\xa65ty:ivacious\xa65ties:ubtle\xa65ce:ilient,adiant,atient\xa65cy:icient\xa65sm:gmatic\xa65on:sessive,dictive\xa65ity:pular,sonal,eative,entic\xa65sity:uminous\xa65ism:conic\xa65nce:mperate\xa65ility:mitable\xa65ment:xcited\xa65n:bitious\xa64cy:brant,etent,curate\xa64ility:erable,acable,icable,ptable\xa64ty:nacious,aive,oyal,dacious\xa64n:icious\xa64ce:vient,erent,stent,ndent,dient,quent,ident\xa64ness:adic,ound,hing,pant,sant,oing,oist,tute\xa64icity:imple\xa64ment:fined,mused\xa64ism:otic\xa64ry:dantic\xa64ity:tund,eral\xa64edness:hand\xa64on:uitive\xa64lity:pitable\xa64sm:eroic,namic\xa64sity:nerous\xa63th:arm\xa63ility:pable,bable,dable,iable\xa63cy:hant,nant,icate\xa63ness:red,hin,nse,ict,iet,ite,oud,ind,ied,rce\xa63ion:lute\xa63ity:ual,gal,volous,ial\xa63ce:sent,fensive,lant,gant,gent,lent,dant\xa63on:asive\xa63m:fist,sistic,iastic\xa63y:terious,xurious,ronic,tastic\xa63ur:amorous\xa63e:tunate\xa63ation:mined\xa63sy:rteous\xa63ty:ain\xa63ry:ave\xa63ment:azed\xa62ness:de,on,ue,rn,ur,ft,rp,pe,om,ge,rd,od,ay,ss,er,ll,oy,ap,ht,ld,ad,rt\xa62inousness:umous\xa62ity:neous,ene,id,ane\xa62cy:bate,late\xa62ation:ized\xa62ility:oble,ible\xa62y:odic\xa62e:oving,aring\xa62s:ost\xa62itude:pt\xa62dom:ee\xa62ance:uring\xa62tion:reet\xa62ion:oted\xa62sion:ending\xa62liness:an\xa62or:rdent\xa61th:ung\xa61e:uable\xa61ness:w,h,k,f\xa61ility:mble\xa61or:vent\xa61ement:ging\xa61tiquity:ncient\xa61ment:hed\xa6verty:or\xa6ength:ong\xa6eat:ot\xa6pth:ep\xa6iness:y",rev:"",ex:"5:forceful,humorous\xa68:charismatic\xa613:understanding\xa65ity:active\xa611ness:adventurous,inquisitive,resourceful\xa68on:aggressive,automatic,perceptive\xa67ness:amorous,fatuous,furtive,ominous,serious\xa65ness:ample,sweet\xa612ness:apprehensive,cantankerous,contemptuous,ostentatious\xa613ness:argumentative,conscientious\xa69ness:assertive,facetious,imperious,inventive,oblivious,rapacious,receptive,seditious,whimsical\xa610ness:attractive,expressive,impressive,loquacious,salubrious,thoughtful\xa63edom:boring\xa64ness:calm,fast,keen,tame\xa68ness:cheerful,gracious,specious,spurious,timorous,unctuous\xa65sity:curious\xa69ion:deliberate\xa68ion:desperate\xa66e:expensive\xa67ce:fragrant\xa63y:furious\xa69ility:ineluctable\xa66ism:mystical\xa68ity:physical,proactive,sensitive,vertical\xa65cy:pliant\xa67ity:positive\xa69ity:practical\xa612ism:professional\xa66ce:prudent\xa63ness:red\xa66cy:vagrant\xa63dom:wise"})},z3e=[[new RegExp("^#[\\p{Number}_]*\\p{Letter}","u"),"HashTag"],[/^@\w{2,}$/,"AtMention"],[/^([A-Z]\.){2}[A-Z]?/i,["Acronym","Noun"],"F.B.I"],[/.{3}[lkmnp]in['\u2018\u2019\u201b\u2035\u2032`\xb4]$/,"Gerund","chillin'"],[/.{4}s['\u2018\u2019\u201b\u2035\u2032`\xb4]$/,"Possessive","flanders'"],[/^[\p{Emoji_Presentation}\p{Extended_Pictographic}]/u,"Emoji","emoji-class"]],G3e=[[/^@1?[0-9](am|pm)$/i,"Time","3pm"],[/^@1?[0-9]:[0-9]{2}(am|pm)?$/i,"Time","3:30pm"],[/^'[0-9]{2}$/,"Year"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])$/,"Time","3:12:31"],[/^[012]?[0-9](:[0-5][0-9])?(:[0-5][0-9])? ?(am|pm)$/i,"Time","1:12pm"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])? ?(am|pm)?$/i,"Time","1:12:31pm"],[/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}/i,"Date","iso-date"],[/^[0-9]{1,4}-[0-9]{1,2}-[0-9]{1,4}$/,"Date","iso-dash"],[/^[0-9]{1,4}\/[0-9]{1,2}\/([0-9]{4}|[0-9]{2})$/,"Date","iso-slash"],[/^[0-9]{1,4}\.[0-9]{1,2}\.[0-9]{1,4}$/,"Date","iso-dot"],[/^[0-9]{1,4}-[a-z]{2,9}-[0-9]{1,4}$/i,"Date","12-dec-2019"],[/^utc ?[+-]?[0-9]+$/,"Timezone","utc-9"],[/^(gmt|utc)[+-][0-9]{1,2}$/i,"Timezone","gmt-3"],[/^[0-9]{3}-[0-9]{4}$/,"PhoneNumber","421-0029"],[/^(\+?[0-9][ -])?[0-9]{3}[ -]?[0-9]{3}-[0-9]{4}$/,"PhoneNumber","1-800-"],[new RegExp("^[-+]?\\p{Currency_Symbol}[-+]?[0-9]+(,[0-9]{3})*(\\.[0-9]+)?([kmb]|bn)?\\+?$","u"),["Money","Value"],"$5.30"],[new RegExp("^[-+]?[0-9]+(,[0-9]{3})*(\\.[0-9]+)?\\p{Currency_Symbol}\\+?$","u"),["Money","Value"],"5.30\xa3"],[/^[-+]?[$\xa3]?[0-9]([0-9,.])+(usd|eur|jpy|gbp|cad|aud|chf|cny|hkd|nzd|kr|rub)$/i,["Money","Value"],"$400usd"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\+?$/,["Cardinal","NumericValue"],"5,999"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?(st|nd|rd|r?th)$/,["Ordinal","NumericValue"],"53rd"],[/^\.[0-9]+\+?$/,["Cardinal","NumericValue"],".73th"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?%\+?$/,["Percent","Cardinal","NumericValue"],"-4%"],[/^\.[0-9]+%$/,["Percent","Cardinal","NumericValue"],".3%"],[/^[0-9]{1,4}\/[0-9]{1,4}(st|nd|rd|th)?s?$/,["Fraction","NumericValue"],"2/3rds"],[/^[0-9.]{1,3}[a-z]{0,2}[-\u2013\u2014][0-9]{1,3}[a-z]{0,2}$/,["Value","NumberRange"],"3-4"],[/^[0-9]{1,2}(:[0-9][0-9])?(am|pm)? ?[-\u2013\u2014] ?[0-9]{1,2}(:[0-9][0-9])?(am|pm)$/,["Time","NumberRange"],"3-4pm"],[/^[0-9.]+([a-z\xb0]{1,4})$/,"NumericValue","9km"]],q3e=["academy","administration","agence","agences","agencies","agency","airlines","airways","army","assoc","associates","association","assurance","authority","autorite","aviation","bank","banque","board","boys","brands","brewery","brotherhood","brothers","bureau","cafe","co","caisse","capital","care","cathedral","center","centre","chemicals","choir","chronicle","church","circus","clinic","clinique","club","co","coalition","coffee","collective","college","commission","committee","communications","community","company","comprehensive","computers","confederation","conference","conseil","consulting","containers","corporation","corps","corp","council","crew","data","departement","department","departments","design","development","directorate","division","drilling","education","eglise","electric","electricity","energy","ensemble","enterprise","enterprises","entertainment","estate","etat","faculty","faction","federation","financial","fm","foundation","fund","gas","gazette","girls","government","group","guild","herald","holdings","hospital","hotel","hotels","inc","industries","institut","institute","institutes","insurance","international","interstate","investment","investments","investors","journal","laboratory","labs","llc","ltd","limited","machines","magazine","management","marine","marketing","markets","media","memorial","ministere","ministry","military","mobile","motor","motors","musee","museum","news","observatory","office","oil","optical","orchestra","organization","partners","partnership","petrol","petroleum","pharmacare","pharmaceutical","pharmaceuticals","pizza","plc","police","politburo","polytechnic","post","power","press","productions","quartet","radio","reserve","resources","restaurant","restaurants","savings","school","securities","service","services","societe","subsidiary","society","sons","subcommittee","syndicat","systems","telecommunications","telegraph","television","times","tribunal","tv","union","university","utilities","workers"].reduce((t,e)=>(t[e]=!0,t),{}),W3e=["atoll","basin","bay","beach","bluff","bog","camp","canyon","canyons","cape","cave","caves","cliffs","coast","cove","coves","crater","creek","desert","dune","dunes","escarpment","estuary","falls","fjord","fjords","forest","forests","glacier","gorge","gorges","gulf","gully","highland","hill","hills","inlet","island","islands","isthmus","knoll","lagoon","lake","marsh","marshes","mount","mountain","mountains","narrows","peninsula","plains","plateau","pond","rapids","ravine","reef","reefs","ridge","river","rivers","sandhill","shoal","shore","shoreline","shores","strait","straits","stream","swamp","tombolo","trail","trails","trench","valley","vallies","volcano","waterfall","watershed","wetland","woods","burough","county","district","municipality","prefecture","province","region","reservation","state","territory","borough","metropolis","downtown","uptown","midtown","city","town","township","hamlet","country","kingdom","enclave","neighbourhood","neighborhood","kingdom","ward","zone","airport","amphitheater","arch","arena","auditorium","bar","barn","basilica","battlefield","bridge","building","castle","centre","coliseum","cineplex","complex","dam","farm","field","fort","garden","gardens","gymnasium","hall","house","levee","library","memorial","monument","museum","gallery","palace","pillar","pits","plantation","playhouse","quarry","sportsfield","sportsplex","stadium","terrace","terraces","theater","tower","park","parks","site","raceway","sportsplex","st","street","rd","road","crescent","cr","way","tr","terrace","avenue","ave"].reduce((t,e)=>(t[e]=!0,t),{}),ES=[[/([^v])ies$/i,"$1y"],[/(ise)s$/i,"$1"],[/(kn|[^o]l|w)ives$/i,"$1ife"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)ves$/i,"$1f"],[/^(dwar|handkerchie|hoo|scar|whar)ves$/i,"$1f"],[/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"],[/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"],[/(buffal|tomat|tornad)(oes)$/i,"$1o"],[/(ause)s$/i,"$1"],[/(ease)s$/i,"$1"],[/(ious)es$/i,"$1"],[/(ouse)s$/i,"$1"],[/(ose)s$/i,"$1"],[/(..ase)s$/i,"$1"],[/(..[aeiu]s)es$/i,"$1"],[/(vert|ind|cort)(ices)$/i,"$1ex"],[/(matr|append)(ices)$/i,"$1ix"],[/([xo]|ch|ss|sh)es$/i,"$1"],[/men$/i,"man"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(cris|ax|test)es$/i,"$1is"],[/(alias|status)es$/i,"$1"],[/(ss)$/i,"$1"],[/(ic)s$/i,"$1"],[/s$/i,""]],QJ=function(t,e){const{irregularPlurals:n}=e.two;let r=function(t){return Object.keys(t).reduce((e,n)=>(e[t[n]]=n,e),{})}(n);if(r.hasOwnProperty(t))return r[t];for(let i=0;i<ES.length;i++)if(!0===ES[i][0].test(t))return t.replace(ES[i][0],ES[i][1]);return t},Q3e={toPlural:dS,toSingular:QJ,all:function(t,e){let n=[t],r=dS(t,e);r!==t&&n.push(r);let i=QJ(t,e);return i!==t&&n.push(i),n}},Qo=function(t="",e={}){let n=function(t,e={}){return e.hasOwnProperty(t)?e[t]:null}(t,e.ex);return n=n||function(t,e=[]){for(let n=0;n<e.length;n+=1)if(t.endsWith(e[n]))return t;return null}(t,e.same),n=n||function(t,e,n={}){e=e||{};for(let i=t.length-1;i>=1;i-=1){let s=t.length-i,o=t.substring(s,t.length);if(!0===e.hasOwnProperty(o))return t.slice(0,s)+e[o];if(!0===n.hasOwnProperty(o))return t.slice(0,s)+n[o]}return e.hasOwnProperty("")?t+=e[""]:n.hasOwnProperty("")?t+=n[""]:null}(t,e.fwd,e.both),n=n||t,n};let TS={Gerund:["ing"],Actor:["erer"],Infinitive:["ate","ize","tion","rify","then","ress","ify","age","nce","ect","ise","ine","ish","ace","ash","ure","tch","end","ack","and","ute","ade","ock","ite","ase","ose","use","ive","int","nge","lay","est","ain","ant","ent","eed","er","le","unk","ung","upt","en"],PastTense:["ept","ed","lt","nt","ew","ld"],PresentTense:["rks","cks","nks","ngs","mps","tes","zes","ers","les","acks","ends","ands","ocks","lays","eads","lls","els","ils","ows","nds","ays","ams","ars","ops","ffs","als","urs","lds","ews","ips","es","ts","ns"],Participle:["ken","wn"]};TS=Object.keys(TS).reduce((t,e)=>(TS[e].forEach(n=>t[n]=e),t),{});const IS=TS,JJ=function(t){let e=t.substring(t.length-3);if(!0===IS.hasOwnProperty(e))return IS[e];let n=t.substring(t.length-2);return!0===IS.hasOwnProperty(n)?IS[n]:"s"===t.substring(t.length-1)?"PresentTense":null},YJ={are:"be",were:"be",been:"be",is:"be",am:"be",was:"be",be:"be",being:"be"},OF=function(t,e,n){const{fromPast:r,fromPresent:i,fromGerund:s,fromParticiple:o}=e.two.models;let{prefix:a,verb:u,particle:l}=function(t,e){let n="",r={};e.one&&e.one.prefixes&&(r=e.one.prefixes);let[i,s]=t.split(/ /);return s&&!0===r[i]&&(n=i,i=s,s=""),{prefix:n,verb:i,particle:s}}(t,e),c="";if(n||(n=JJ(t)),YJ.hasOwnProperty(t))c=YJ[t];else if("Participle"===n)c=Qo(u,o);else if("PastTense"===n)c=Qo(u,r);else if("PresentTense"===n)c=Qo(u,i);else{if("Gerund"!==n)return t;c=Qo(u,s)}return l&&(c+=" "+l),a&&(c=a+" "+c),c},MF=function(t,e){const{toPast:n,toPresent:r,toGerund:i,toParticiple:s}=e.two.models;if("be"===t)return{Infinitive:t,Gerund:"being",PastTense:"was",PresentTense:"is"};let[o,a]=(t=>/ /.test(t)?t.split(/ /):[t,""])(t),u={Infinitive:o,PastTense:Qo(o,n),PresentTense:Qo(o,r),Gerund:Qo(o,i),FutureTense:"will "+o},l=Qo(o,s);if(l!==t&&l!==u.PastTense){let c=e.one.lexicon||{};("Participle"===c[l]||"Adjective"===c[l])&&("play"===t&&(l="played"),u.Participle=l)}return a&&Object.keys(u).forEach(c=>{u[c]+=" "+a}),u},t$e={toInfinitive:OF,conjugate:MF,all:function(t,e){let n=MF(t,e);return delete n.FutureTense,Object.values(n).filter(r=>r)}},FF=function(t,e){return Qo(t,e.two.models.toSuperlative)},VF=function(t,e){return Qo(t,e.two.models.toComparative)},XJ=function(t="",e=[]){const n=t.length;for(let i=n<=6?n-1:6;i>=1;i-=1){let s=t.substring(n-i,t.length);if(!0===e[s.length].hasOwnProperty(s))return t.slice(0,n-i)+e[s.length][s]}return null},Sn="ically",s$e=new Set(["analyt"+Sn,"chem"+Sn,"class"+Sn,"clin"+Sn,"crit"+Sn,"ecolog"+Sn,"electr"+Sn,"empir"+Sn,"frant"+Sn,"grammat"+Sn,"ident"+Sn,"ideolog"+Sn,"log"+Sn,"mag"+Sn,"mathemat"+Sn,"mechan"+Sn,"med"+Sn,"method"+Sn,"method"+Sn,"mus"+Sn,"phys"+Sn,"phys"+Sn,"polit"+Sn,"pract"+Sn,"rad"+Sn,"satir"+Sn,"statist"+Sn,"techn"+Sn,"technolog"+Sn,"theoret"+Sn,"typ"+Sn,"vert"+Sn,"whims"+Sn]),o$e=[null,{},{ly:""},{ily:"y",bly:"ble",ply:"ple"},{ally:"al",rply:"rp"},{ually:"ual",ially:"ial",cally:"cal",eally:"eal",rally:"ral",nally:"nal",mally:"mal",eeply:"eep",eaply:"eap"},{ically:"ic"}],a$e=new Set(["early","only","hourly","daily","weekly","monthly","yearly","mostly","duly","unduly","especially","undoubtedly","conversely","namely","exceedingly","presumably","accordingly","overly","best","latter","little","long","low"]),ZJ={wholly:"whole",fully:"full",truly:"true",gently:"gentle",singly:"single",customarily:"customary",idly:"idle",publically:"public",quickly:"quick",superbly:"superb",cynically:"cynical",well:"good"},l$e=[null,{y:"ily"},{ly:"ly",ic:"ically"},{ial:"ially",ual:"ually",tle:"tly",ble:"bly",ple:"ply",ary:"arily"},{},{},{}],eY={cool:"cooly",whole:"wholly",full:"fully",good:"well",idle:"idly",public:"publicly",single:"singly",special:"especially"},tY=function(t){if(eY.hasOwnProperty(t))return eY[t];let e=XJ(t,l$e);return e||(e=t+"ly"),e},c$e={noun:Q3e,verb:t$e,adjective:{toSuperlative:FF,toComparative:VF,toAdverb:tY,toNoun:function(t,e){return Qo(t,e.two.models.adjToNoun)},fromAdverb:function(t){return t.endsWith("ly")?s$e.has(t)?t.replace(/ically/,"ical"):a$e.has(t)?null:ZJ.hasOwnProperty(t)?ZJ[t]:XJ(t,o$e)||t:null},fromSuperlative:function(t,e){return Qo(t,e.two.models.fromSuperlative)},fromComparative:function(t,e){return Qo(t,e.two.models.fromComparative)},all:function(t,e){let n=[t];return n.push(FF(t,e)),n.push(VF(t,e)),n.push(tY(t)),n=n.filter(r=>r),n=new Set(n),Array.from(n)}}},nY={Singular:(t,e,n,r)=>{let i=r.one.lexicon,s=n.two.transform.noun.toPlural(t,r);i[s]||(e[s]=e[s]||"Plural")},Actor:(t,e,n,r)=>{let i=r.one.lexicon,s=n.two.transform.noun.toPlural(t,r);i[s]||(e[s]=e[s]||["Plural","Actor"])},Comparable:(t,e,n,r)=>{let i=r.one.lexicon,{toSuperlative:s,toComparative:o}=n.two.transform.adjective,a=s(t,r);i[a]||(e[a]=e[a]||"Superlative");let u=o(t,r);i[u]||(e[u]=e[u]||"Comparative"),e[t]="Adjective"},Demonym:(t,e,n,r)=>{let i=n.two.transform.noun.toPlural(t,r);e[i]=e[i]||["Demonym","Plural"]},Infinitive:(t,e,n,r)=>{let i=r.one.lexicon,s=n.two.transform.verb.conjugate(t,r);Object.entries(s).forEach(o=>{!i[o[1]]&&!e[o[1]]&&"FutureTense"!==o[0]&&(e[o[1]]=o[0])})},PhrasalVerb:(t,e,n,r)=>{let i=r.one.lexicon;e[t]=["PhrasalVerb","Infinitive"];let s=r.one._multiCache,[o,a]=t.split(" ");i[o]||(e[o]=e[o]||"Infinitive");let u=n.two.transform.verb.conjugate(o,r);delete u.FutureTense,Object.entries(u).forEach(l=>{if("Actor"===l[0]||""===l[1])return;!e[l[1]]&&!i[l[1]]&&(e[l[1]]=l[0]),s[l[1]]=2;let c=l[1]+" "+a;e[c]=e[c]||[l[0],"PhrasalVerb"]})},Multiple:(t,e)=>{e[t]=["Multiple","Cardinal"],e[t+"th"]=["Multiple","Ordinal"],e[t+"ths"]=["Multiple","Fraction"]},Cardinal:(t,e)=>{e[t]=["TextValue","Cardinal"]},Ordinal:(t,e)=>{e[t]=["TextValue","Ordinal"],e[t+"s"]=["TextValue","Fraction"]},Place:(t,e)=>{e[t]=["Place","ProperNoun"]},Region:(t,e)=>{e[t]=["Region","ProperNoun"]}},rY={e:["mice","louse","antennae","formulae","nebulae","vertebrae","vitae"],i:["tia","octopi","viri","radii","nuclei","fungi","cacti","stimuli"],n:["men"],t:["feet"]},p$e=new Set(["israelis","menus","logos"]),m$e=["bus","mas","was","ias","xas","vas","cis","lis","nis","ois","ris","sis","tis","xis","aus","cus","eus","fus","gus","ius","lus","nus","das","ous","pus","rus","sus","tus","xus","aos","igos","ados","ogos","'s","ss"],iY=function(t){if(!t||t.length<=3)return!1;if(p$e.has(t))return!0;let e=t[t.length-1];return rY.hasOwnProperty(e)?rY[e].find(n=>t.endsWith(n)):!("s"!==e||m$e.find(n=>t.endsWith(n)))},LF={two:{quickSplit:function(t){const e=/[,:;]/;let n=[];return t.forEach(r=>{let i=0;r.forEach((s,o)=>{e.test(s.post)&&function(t,e){let r=t[e];if(!r)return!1;const i=new Set(["may","april","august","jan"]);if("like"===r.normal||i.has(r.normal)||r.tags.has("Place")||r.tags.has("Date"))return!1;if(t[e-1]){let o=t[e-1];if(o.tags.has("Date")||i.has(o.normal)||o.tags.has("Adjective")||r.tags.has("Adjective"))return!1}let s=r.normal;return!((1===s.length||2===s.length||4===s.length)&&/^[0-9]+$/.test(s))}(r,o+1)&&(n.push(r.slice(i,o+1)),i=o+1)}),i<r.length&&n.push(r.slice(i,r.length))}),n},expandLexicon:function(t,e){const{methods:n,model:r}=e;let i={},s={};return Object.keys(t).forEach(o=>{let a=t[o],u=(o=(o=o.toLowerCase().trim()).replace(/'s\b/,"")).split(/ /);u.length>1&&(void 0===s[u[0]]||u.length>s[u[0]])&&(s[u[0]]=u.length),!0===nY.hasOwnProperty(a)&&nY[a](o,i,n,r),i[o]=i[o]||a}),delete i[""],delete i.null,delete i[" "],{lex:i,_multi:s}},transform:c$e,looksPlural:iY}};let $F={one:{lexicon:{}},two:{models:KJ}};const y$e={"Actor|Verb":"Actor","Adj|Gerund":"Adjective","Adj|Noun":"Adjective","Adj|Past":"Adjective","Adj|Present":"Adjective","Noun|Verb":"Singular","Noun|Gerund":"Gerund","Person|Noun":"Noun","Person|Date":"Month","Person|Verb":"FirstName","Person|Place":"Person","Person|Adj":"Comparative","Plural|Verb":"Plural","Unit|Noun":"Noun"},sY=function(t,e){const n={model:e,methods:LF};let{lex:r,_multi:i}=LF.two.expandLexicon(t,n);return Object.assign(e.one.lexicon,r),Object.assign(e.one._multiCache,i),e},oY=function(t,e,n){let r=MF(t,$F);e[r.PastTense]=e[r.PastTense]||"PastTense",e[r.Gerund]=e[r.Gerund]||"Gerund",!0===n&&(e[r.PresentTense]=e[r.PresentTense]||"PresentTense")},aY=function(t,e,n){let r=FF(t,n);e[r]=e[r]||"Superlative";let i=VF(t,n);e[i]=e[i]||"Comparative"};let jF={one:{_multiCache:{},lexicon:Iy,frozenLex:{"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization","excuse me":"Expression","financial times":"Organization","guns n roses":"Organization","la z boy":"Organization","labour party":"Organization","new kids on the block":"Organization","new york times":"Organization","the guess who":"Organization","thin lizzy":"Organization","prime minister":"Actor","free market":"Singular","lay up":"Singular","living room":"Singular","living rooms":"Plural","spin off":"Singular","appeal court":"Uncountable","cold war":"Uncountable","gene pool":"Uncountable","machine learning":"Uncountable","nail polish":"Uncountable","time off":"Uncountable","take part":"Infinitive","bill gates":"Person","doctor who":"Person","dr who":"Person","he man":"Person","iron man":"Person","kid cudi":"Person","run dmc":"Person","rush limbaugh":"Person","snow white":"Person","tiger woods":"Person","brand new":"Adjective","en route":"Adjective","left wing":"Adjective","off guard":"Adjective","on board":"Adjective","part time":"Adjective","right wing":"Adjective","so called":"Adjective","spot on":"Adjective","straight forward":"Adjective","super duper":"Adjective","tip top":"Adjective","top notch":"Adjective","up to date":"Adjective","win win":"Adjective","brooklyn nets":"SportsTeam","chicago bears":"SportsTeam","houston astros":"SportsTeam","houston dynamo":"SportsTeam","houston rockets":"SportsTeam","houston texans":"SportsTeam","minnesota twins":"SportsTeam","orlando magic":"SportsTeam","san antonio spurs":"SportsTeam","san diego chargers":"SportsTeam","san diego padres":"SportsTeam","iron maiden":"ProperNoun","isle of man":"Country","united states":"Country","united states of america":"Country","prince edward island":"Region","cedar breaks":"Place","cedar falls":"Place","point blank":"Adverb","tiny bit":"Adverb","by the time":"Conjunction","no matter":"Conjunction","civil wars":"Plural","credit cards":"Plural","default rates":"Plural","free markets":"Plural","head starts":"Plural","home runs":"Plural","lay ups":"Plural","phone calls":"Plural","press releases":"Plural","record labels":"Plural","soft serves":"Plural","student loans":"Plural","tax returns":"Plural","tv shows":"Plural","video games":"Plural","took part":"PastTense","takes part":"PresentTense","taking part":"Gerund","taken part":"Participle","light bulb":"Noun","rush hour":"Noun","fluid ounce":"Unit","the rolling stones":"Organization"}},two:{irregularPlurals:kJ,models:KJ,suffixPatterns:P3e,prefixPatterns:k3e,endsWith:x3e,neighbours:R3e,regexNormal:[[/^[\w.]+@[\w.]+\.[a-z]{2,3}$/,"Email"],[/^(https?:\/\/|www\.)+\w+\.[a-z]{2,3}/,"Url","http.."],[/^[a-z0-9./].+\.(com|net|gov|org|ly|edu|info|biz|dev|ru|jp|de|in|uk|br|io|ai)/,"Url",".com"],[/^[PMCE]ST$/,"Timezone","EST"],[/^ma?c'[a-z]{3}/,"LastName","mc'neil"],[/^o'[a-z]{3}/,"LastName","o'connor"],[/^ma?cd[aeiou][a-z]{3}/,"LastName","mcdonald"],[/^(lol)+[sz]$/,"Expression","lol"],[/^wo{2,}a*h?$/,"Expression","wooah"],[/^(hee?){2,}h?$/,"Expression","hehe"],[/^(un|de|re)\\-[a-z\u00C0-\u00FF]{2}/,"Verb","un-vite"],[/^(m|k|cm|km)\/(s|h|hr)$/,"Unit","5 k/m"],[/^(ug|ng|mg)\/(l|m3|ft3)$/,"Unit","ug/L"]],regexText:z3e,regexNumbers:G3e,switches:xF,clues:N3e,uncountable:{},orgWords:q3e,placeWords:W3e}};var t;jF=t=function(t){const{irregularPlurals:e}=t.two,{lexicon:n}=t.one;return Object.entries(e).forEach(r=>{n[r[0]]=n[r[0]]||"Singular",n[r[1]]=n[r[1]]||"Plural"}),t}(t=function(t,e){let n={};const r=e.one.lexicon;return Object.keys(t).forEach(i=>{const s=t[i];if(n[i]=y$e[s],("Noun|Verb"===s||"Person|Verb"===s||"Actor|Verb"===s)&&oY(i,r,!1),"Adj|Present"===s&&(oY(i,r,!0),aY(i,r,e)),"Person|Adj"===s&&aY(i,r,e),"Adj|Gerund"===s||"Noun|Gerund"===s){let o=OF(i,$F,"Gerund");r[o]||(n[o]="Infinitive")}if(("Noun|Gerund"===s||"Adj|Noun"===s||"Person|Noun"===s)&&function(t,e,n){let r=dS(t,n);e[r]=e[r]||"Plural"}(i,r,e),"Adj|Past"===s){let o=OF(i,$F,"PastTense");r[o]||(n[o]="Infinitive")}}),e=sY(n,e)}((t=function(t,e){return Object.keys(t).forEach(n=>{"Uncountable"===t[n]&&(e.two.uncountable[n]=!0,t[n]="Uncountable")}),e}((t=sY((t=jF).one.lexicon,t)).one.lexicon,t)).two.switches,t));const E$e=jF,I$e=function(t,e,n,r){"-"===t[e].post&&t[e+1]&&(0,r.methods.one.setTag)([t[e],t[e+1]],"Hyphenated",r,null,"1-punct-hyphen''")},uY=/^(under|over|mis|re|un|dis|semi)-?/,A$e=function(t,e,n){const r=n.two.switches;let i=t[e];if(r.hasOwnProperty(i.normal))i.switch=r[i.normal];else if(uY.test(i.normal)){let s=i.normal.replace(uY,"");s.length>3&&r.hasOwnProperty(s)&&(i.switch=r[s])}},hi=function(t,e,n){if(!e||0===e.length||!0===t.frozen)return;const r=typeof process>"u"||!process.env?self.env||{}:process.env;r&&r.DEBUG_TAGS&&((t,e,n="")=>{let s=t.text||"["+t.implicit+"]";var o;"string"!=typeof e&&e.length>2&&(e=e.slice(0,2).join(", #")+" +"),e="string"!=typeof e?e.join(", #"):e,console.log(` ${(o=s,"\x1b[33m\x1b[3m"+o+"\x1b[0m").padEnd(24)} \x1b[32m\u2192\x1b[0m #${e.padEnd(22)}  ${(o=>"\x1b[3m"+o+"\x1b[0m")(n)}`)})(t,e,n),t.tags=t.tags||new Set,"string"==typeof e?t.tags.add(e):e.forEach(i=>t.tags.add(i))},S$e=["Acronym","Abbreviation","ProperNoun","Uncountable","Possessive","Pronoun","Activity","Honorific","Month"],Qb=function(t,e,n){let r=t[e],i=Array.from(r.tags);for(let s=0;s<i.length;s+=1)n.one.tagSet[i[s]]&&hi(r,n.one.tagSet[i[s]].parents,` -inferred by #${i[s]}`);(function(t){!t.tags.has("Noun")||t.tags.has("Plural")||t.tags.has("Singular")||S$e.find(e=>t.tags.has(e))||(iY(t.normal)?hi(t,"Plural","3-plural-guess"):hi(t,"Singular","3-singular-guess"))})(r),function(t){let e=t.tags;if(e.has("Verb")&&1===e.size){let n=JJ(t.normal);n&&hi(t,n,"3-verb-tense-guess")}}(r)},P$e=new RegExp("^\\p{Lu}[\\p{Ll}'\u2019]","u"),k$e=/[0-9]/,x$e=["Date","Month","WeekDay","Unit","Expression"],R$e=/[IVX]/,O$e=/^[IVXLCDM]{2,}$/,M$e=/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/,F$e={li:!0,dc:!0,md:!0,dm:!0,ml:!0},V$e=function(t,e,n){let r=t[e];r.index=r.index||[0,0];let s=r.text||"";return 0!==r.index[1]&&!0===P$e.test(s)&&!1===k$e.test(s)?x$e.find(o=>r.tags.has(o))||r.pre.match(/["']$/)||"the"===r.normal?null:(Qb(t,e,n),!r.tags.has("Noun")&&!r.frozen&&r.tags.clear(),hi(r,"ProperNoun","2-titlecase"),!0):s.length>=2&&O$e.test(s)&&R$e.test(s)&&M$e.test(s)&&!F$e[r.normal]?(hi(r,"RomanNumeral","2-xvii"),!0):null},lY=function(t="",e=[]){const n=t.length;let r=7;n<=r&&(r=n-1);for(let i=r;i>1;i-=1){let s=t.substring(n-i,n);if(!0===e[s.length].hasOwnProperty(s))return e[s.length][s]}return null},L$e=function(t,e,n){let r=t[e];if(0===r.tags.size){let i=lY(r.normal,n.two.suffixPatterns);if(null!==i)return hi(r,i,"2-suffix"),r.confidence=.7,!0;if(r.implicit&&(i=lY(r.implicit,n.two.suffixPatterns),null!==i))return hi(r,i,"2-implicit-suffix"),r.confidence=.7,!0}return null},cY=/['\u2018\u2019\u201b\u2035\u2032`\xb4]/,BF=function(t,e){for(let n=0;n<e.length;n+=1)if(!0===e[n][0].test(t))return e[n];return null},j$e=function(t,e,n,r){const i=r.methods.one.setTag;let{regexText:s,regexNormal:o,regexNumbers:a,endsWith:u}=n.two,l=t[e],c=l.machine||l.normal,h=l.text;cY.test(l.post)&&!cY.test(l.pre)&&(h+=l.post.trim());let g=BF(h,s)||BF(c,o);return!g&&/[0-9]/.test(c)&&(g=BF(c,a)),!g&&0===l.tags.size&&(g=function(t="",e){let n=t[t.length-1];if(!0===e.hasOwnProperty(n)){let r=e[n]||[];for(let i=0;i<r.length;i+=1)if(!0===r[i][0].test(t))return r[i]}return null}(c,u)),g?(i([l],g[1],r,null,`2-regex-'${g[2]||g[0]}'`),l.confidence=.6,!0):null},U$e=function(t,e,n){let r=t[e];if(0===r.tags.size){let i=function(t="",e=[]){const n=t.length;let r=7;r>n-3&&(r=n-3);for(let i=r;i>2;i-=1){let s=t.substring(0,i);if(!0===e[s.length].hasOwnProperty(s))return e[s.length][s]}return null}(r.normal,n.two.prefixPatterns);if(null!==i)return hi(r,i,"2-prefix"),r.confidence=.5,!0}return null},G$e=new Set(["in","on","by","until","for","to","during","throughout","through","within","before","after","of","this","next","last","circa","around","post","pre","budget","classic","plan","may"]),dY=function(t){return!!t&&!!(G$e.has(t.normal||t.implicit)||t.tags.has("Date")||t.tags.has("Month")||t.tags.has("WeekDay")||t.tags.has("Year")||t.tags.has("ProperNoun"))},hY=function(t){return!!t&&!!(t.tags.has("Ordinal")||t.tags.has("Cardinal")&&t.normal.length<3||"is"===t.normal||"was"===t.normal)},fY=function(t){return t&&(t.tags.has("Date")||t.tags.has("Month")||t.tags.has("WeekDay")||t.tags.has("Year"))},q$e=function(t,e){const n=t[e];if(n.tags.has("NumericValue")&&n.tags.has("Cardinal")&&4===n.normal.length){let r=Number(n.normal);if(r&&!isNaN(r)&&r>1400&&r<2100){let i=t[e-1],s=t[e+1];if(dY(i)||dY(s))return hi(n,"Year","2-tagYear");if(r>=1920&&r<2025){if(hY(i)||hY(s))return hi(n,"Year","2-tagYear-close");if(fY(t[e-2])||fY(t[e+2]))return hi(n,"Year","2-tagYear-far");if(i&&(i.tags.has("Determiner")||i.tags.has("Possessive"))&&s&&s.tags.has("Noun")&&!s.tags.has("Plural"))return hi(n,"Year","2-tagYear-noun")}}}return null},W$e=function(t,e,n,r){const i=r.methods.one.setTag,s=t[e];s.tags.has("Verb")&&(["PastTense","PresentTense","Auxiliary","Modal","Particle"].find(u=>s.tags.has(u))||i([s],"Infinitive",r,null,"2-verb-type''"))},pY=/^[A-Z]('s|,)?$/,mY=/^[A-Z-]+$/,gY=/^[A-Z]+s$/,K$e=/([A-Z]\.)+[A-Z]?,?$/,Q$e=/[A-Z]{2,}('s|,)?$/,J$e=/([a-z]\.)+[a-z]\.?$/,yY={I:!0,A:!0},Y$e={la:!0,ny:!0,us:!0,dc:!0,gb:!0},Z$e=function(t,e,n){let r=t[e];return r.tags.has("RomanNumeral")||r.tags.has("Acronym")||r.frozen?null:function(t,e){let n=t.text;if(!1===mY.test(n)){if(!(n.length>3&&!0===gY.test(n)))return!1;n=n.replace(/s$/,"")}return!(n.length>5||yY.hasOwnProperty(n)||e.one.lexicon.hasOwnProperty(t.normal)||!0!==K$e.test(n)&&!0!==J$e.test(n)&&!0!==pY.test(n)&&!0!==Q$e.test(n))}(r,n)?(r.tags.clear(),hi(r,["Acronym","Noun"],"3-no-period-acronym"),!0===Y$e[r.normal]&&hi(r,"Place","3-place-acronym"),!0===gY.test(r.text)&&hi(r,"Plural","3-plural-acronym"),!0):!yY.hasOwnProperty(r.text)&&pY.test(r.text)?(r.tags.clear(),hi(r,["Acronym","Noun"],"3-one-letter-acronym"),!0):r.tags.has("Organization")&&r.text.length<=3?(hi(r,"Acronym","3-org-acronym"),!0):r.tags.has("Organization")&&mY.test(r.text)&&r.text.length<=6?(hi(r,"Acronym","3-titlecase-acronym"),!0):null},_Y=function(t,e){if(!t)return null;let n=e.find(r=>t.normal===r[0]);return n?n[1]:null},vY=function(t,e){if(!t)return null;let n=e.find(r=>t.tags.has(r[0]));return n?n[1]:null},eje=function(t,e,n){const{leftTags:r,leftWords:i,rightWords:s,rightTags:o}=n.two.neighbours;let a=t[e];if(0===a.tags.size){let u=null;if(u=u||_Y(t[e-1],i),u=u||_Y(t[e+1],s),u=u||vY(t[e-1],r),u=u||vY(t[e+1],o),u)return hi(a,u,"3-[neighbour]"),Qb(t,e,n),t[e].confidence=.2,!0}return null},bY=function(t,e,n){return!(!t||t.tags.has("FirstName")||t.tags.has("Place"))&&(!!(t.tags.has("ProperNoun")||t.tags.has("Organization")||t.tags.has("Acronym"))||!(n||!(t=>new RegExp("^\\p{Lu}[\\p{Ll}'\u2019]","u").test(t))(t.text))&&(0!==e||t.tags.has("Singular")))},nje=function(t,e,n,r){const s=n.methods.one.setTag;let o=t[e];if(!0===n.model.two.orgWords[o.machine||o.normal]&&bY(t[e-1],e-1,r)){s([t[e]],"Organization",n,null,"3-[org-word]");for(let u=e;u>=0&&bY(t[u],u,r);u-=1)s([t[u]],"Organization",n,null,"3-[org-word]")}return null},ije=/'s$/,wY=new Set(["athletic","city","community","eastern","federal","financial","great","historic","historical","local","memorial","municipal","national","northern","provincial","southern","state","western"]),sje=new Set(["center","centre","way","range","bar","bridge","field","pit"]),EY=function(t,e,n){if(!t)return!1;let r=t.tags;return!(r.has("Organization")||r.has("Possessive")||ije.test(t.normal))&&(!(!r.has("ProperNoun")&&!r.has("Place"))||!(n||!(t=>new RegExp("^\\p{Lu}[\\p{Ll}'\u2019]","u").test(t))(t.text))&&(0!==e||r.has("Singular")))},oje=function(t,e,n,r){const s=n.methods.one.setTag;let o=t[e],a=o.machine||o.normal;if(!0===n.model.two.placeWords[a]){for(let u=e-1;u>=0;u-=1)if(!wY.has(t[u].normal)){if(EY(t[u],u,r)){s(t.slice(u,e+1),"Place",n,null,"3-[place-of-foo]");continue}break}if(sje.has(a))return!1;for(let u=e+1;u<t.length;u+=1){if(EY(t[u],u,r))return s(t.slice(e,u+1),"Place",n,null,"3-[foo-place]"),!0;if("of"!==t[u].normal&&!wY.has(t[u].normal))break}}return null},aje=function(t,e,n){let r=!1,i=t[e].tags;(0===i.size||1===i.size&&(i.has("Hyphenated")||i.has("HashTag")||i.has("Prefix")))&&(r=!0),r&&(hi(t[e],"Noun","3-[fallback]"),Qb(t,e,n),t[e].confidence=.1)},uje=/^[A-Z][a-z]/,bu=(t,e)=>t[e].tags.has("ProperNoun")&&uje.test(t[e].text)?"Noun":null,TY=(t,e,n)=>0!==e||t[1]?null:n,IY={"Adj|Gerund":(t,e)=>bu(t,e),"Adj|Noun":(t,e)=>bu(t,e)||function(t,e){return!t[e+1]&&t[e-1]&&t[e-1].tags.has("Determiner")?"Noun":null}(t,e),"Actor|Verb":(t,e)=>bu(t,e),"Adj|Past":(t,e)=>bu(t,e),"Adj|Present":(t,e)=>bu(t,e),"Noun|Gerund":(t,e)=>bu(t,e),"Noun|Verb":(t,e)=>e>0&&bu(t,e)||TY(t,e,"Infinitive"),"Plural|Verb":(t,e)=>bu(t,e)||TY(t,e,"PresentTense")||function(t,e,n){return 0===e&&t.length>3?"Plural":null}(t,e),"Person|Noun":(t,e)=>bu(t,e),"Person|Verb":(t,e)=>0!==e?bu(t,e):null,"Person|Adj":(t,e)=>0===e&&t.length>1||bu(t,e)?"Person":null},UF=typeof process>"u"||!process.env?self.env||{}:process.env,AY=/^(under|over|mis|re|un|dis|semi)-?/,CY=(t,e)=>{if(!t||!e)return null;let n=t.normal||t.implicit,r=null;return e.hasOwnProperty(n)&&(r=e[n]),r&&UF.DEBUG_TAGS&&console.log(`\n  \x1b[2m\x1b[3m     \u2193 - '${n}' \x1b[0m`),r},SY=(t,e={},n)=>{if(!t||!e)return null;let i=Array.from(t.tags).sort((s,o)=>(n[s]?n[s].parents.length:0)>(n[o]?n[o].parents.length:0)?-1:1).find(s=>e[s]);return i&&UF.DEBUG_TAGS&&console.log(`  \x1b[2m\x1b[3m      \u2193 - '${t.normal||t.implicit}' (#${i})  \x1b[0m`),i=e[i],i},hje=function(t,e,n){const r=n.model,i=n.methods.one.setTag,{switches:s,clues:o}=r.two,a=t[e];let u=a.normal||a.implicit||"";if(AY.test(u)&&!s[u]&&(u=u.replace(AY,"")),a.switch){let l=a.switch;if(a.tags.has("Acronym")||a.tags.has("PhrasalVerb"))return;let c=function(t,e,n,r){if(!n)return null;const i="also"!==t[e-1]?.text?e-1:Math.max(0,e-2),s=r.one.tagSet;let o=CY(t[e+1],n.afterWords);return o=o||CY(t[i],n.beforeWords),o=o||SY(t[i],n.beforeTags,s),o=o||SY(t[e+1],n.afterTags,s),o}(t,e,o[l],r);IY[l]&&(c=IY[l](t,e)||c),c?(i([a],c,n,null,`3-[switch] (${l})`),Qb(t,e,r)):UF.DEBUG_TAGS&&console.log(`\n -> X  - '${u}'  : (${l})  `)}},fje={there:!0,this:!0,it:!0,him:!0,her:!0,us:!0},mje=function(t){if(t.filter(n=>!n.tags.has("ProperNoun")).length<=3)return!1;const e=/^[a-z]/;return t.every(n=>!e.test(n.text))},yje=function(t,e,n,r){for(let i=0;i<t.length;i+=1)!0!==t[i].frozen&&(A$e(t,i,e),!1===r&&V$e(t,i,e),L$e(t,i,e),j$e(t,i,e,n),U$e(t,i,e),q$e(t,i))},_je=function(t,e,n,r){for(let i=0;i<t.length;i+=1){let s=Z$e(t,i,e);Qb(t,i,e),s=s||eje(t,i,e),s=s||aje(t,i,e)}for(let i=0;i<t.length;i+=1)!0!==t[i].frozen&&(nje(t,i,n,r),oje(t,i,n,r),hje(t,i,n),W$e(t,i,0,n),I$e(t,i,0,n));!function(t,e){const n=e.methods.one.setTag,r=e.model.one._multiCache||{};let i=t[0];if(("Noun|Verb"===i.switch||i.tags.has("Infinitive"))&&t.length>=2){if(t.length<4&&!fje[t[1].normal]||!i.tags.has("PhrasalVerb")&&r.hasOwnProperty(i.normal))return;(t[1].tags.has("Noun")||t[1].tags.has("Determiner"))&&(!t.slice(1,3).some(u=>u.tags.has("Verb"))||i.tags.has("#PhrasalVerb"))&&n([i],"Imperative",e,null,"3-[imperative]")}}(t,n)},DY={Possessive:t=>{let e=t.machine||t.normal||t.text;return e=e.replace(/'s$/,""),e},Plural:(t,e)=>e.methods.two.transform.noun.toSingular(t.machine||t.normal||t.text,e.model),Copula:()=>"is",PastTense:(t,e)=>e.methods.two.transform.verb.toInfinitive(t.machine||t.normal||t.text,e.model,"PastTense"),Gerund:(t,e)=>e.methods.two.transform.verb.toInfinitive(t.machine||t.normal||t.text,e.model,"Gerund"),PresentTense:(t,e)=>{let n=t.machine||t.normal||t.text;return t.tags.has("Infinitive")?n:e.methods.two.transform.verb.toInfinitive(n,e.model,"PresentTense")},Comparative:(t,e)=>e.methods.two.transform.adjective.fromComparative(t.machine||t.normal||t.text,e.model),Superlative:(t,e)=>e.methods.two.transform.adjective.fromSuperlative(t.machine||t.normal||t.text,e.model),Adverb:(t,e)=>{const{fromAdverb:n}=e.methods.two.transform.adjective;return n(t.machine||t.normal||t.text)}},NY={Adverb:"RB",Comparative:"JJR",Superlative:"JJS",Adjective:"JJ",TO:"Conjunction",Modal:"MD",Auxiliary:"MD",Gerund:"VBG",PastTense:"VBD",Participle:"VBN",PresentTense:"VBZ",Infinitive:"VB",Particle:"RP",Verb:"VB",Pronoun:"PRP",Cardinal:"CD",Conjunction:"CC",Determiner:"DT",Preposition:"IN",QuestionWord:"WP",Expression:"UH",Possessive:"POS",ProperNoun:"NNP",Person:"NNP",Place:"NNP",Organization:"NNP",Singular:"NN",Plural:"NNS",Noun:"NN",There:"EX"},Eje={preTagger:function(t){const{methods:e,model:n,world:r}=t;let i=t.docs;!function(t,e,n){t.forEach(r=>{!function(t,e,n,r){const i=r.methods.one.setTag;if(t.length>=3&&t[0].post.match(/:/)){let a=t[1];if(a.tags.has("Value")||a.tags.has("Email")||a.tags.has("PhoneNumber"))return;i([t[0]],"Expression",r,null,"2-punct-colon''")}}(r,0,0,n)})}(i,0,r);let s=e.two.quickSplit(i);for(let o=0;o<s.length;o+=1){let a=s[o];const u=mje(a);yje(a,n,r,u),_je(a,n,r,u)}return s},root:function(t){const e=t.world,n=Object.keys(DY);t.docs.forEach(r=>{for(let i=0;i<r.length;i+=1){const s=r[i];for(let o=0;o<n.length;o+=1)if(s.tags.has(n[o])){let u=(0,DY[n[o]])(s,e);s.normal!==u&&(s.root=u);break}}})},penn:function(t){t.compute("tagRank"),t.docs.forEach(e=>{e.forEach(n=>{n.penn=function(t){if(t.tags.has("ProperNoun")&&t.tags.has("Plural"))return"NNPS";if(t.tags.has("Possessive")&&t.tags.has("Pronoun"))return"PRP$";if("there"===t.normal)return"EX";if("to"===t.normal)return"TO";let e=t.tagRank||[];for(let n=0;n<e.length;n+=1)if(NY.hasOwnProperty(e[n]))return NY[e[n]];return null}(n)})})}},HF=["Person","Place","Organization"],Tje=Object.assign({},{Noun:{not:["Verb","Adjective","Adverb","Value","Determiner"]},Singular:{is:"Noun",not:["Plural","Uncountable"]},ProperNoun:{is:"Noun"},Person:{is:"Singular",also:["ProperNoun"],not:["Place","Organization","Date"]},FirstName:{is:"Person"},MaleName:{is:"FirstName",not:["FemaleName","LastName"]},FemaleName:{is:"FirstName",not:["MaleName","LastName"]},LastName:{is:"Person",not:["FirstName"]},Honorific:{is:"Person",not:["FirstName","LastName","Value"]},Place:{is:"Singular",not:["Person","Organization"]},Country:{is:"Place",also:["ProperNoun"],not:["City"]},City:{is:"Place",also:["ProperNoun"],not:["Country"]},Region:{is:"Place",also:["ProperNoun"]},Address:{},Organization:{is:"ProperNoun",not:["Person","Place"]},SportsTeam:{is:"Organization"},School:{is:"Organization"},Company:{is:"Organization"},Plural:{is:"Noun",not:["Singular","Uncountable"]},Uncountable:{is:"Noun"},Pronoun:{is:"Noun",not:HF},Actor:{is:"Noun",not:["Place","Organization"]},Activity:{is:"Noun",not:["Person","Place"]},Unit:{is:"Noun",not:HF},Demonym:{is:"Noun",also:["ProperNoun"],not:HF},Possessive:{is:"Noun"},Reflexive:{is:"Pronoun"}},{Verb:{not:["Noun","Adjective","Adverb","Value","Expression"]},PresentTense:{is:"Verb",not:["PastTense","FutureTense"]},Infinitive:{is:"PresentTense",not:["Gerund"]},Imperative:{is:"Verb",not:["PastTense","Gerund","Copula"]},Gerund:{is:"PresentTense",not:["Copula"]},PastTense:{is:"Verb",not:["PresentTense","Gerund","FutureTense"]},FutureTense:{is:"Verb",not:["PresentTense","PastTense"]},Copula:{is:"Verb"},Modal:{is:"Verb",not:["Infinitive"]},Participle:{is:"PastTense"},Auxiliary:{is:"Verb",not:["PastTense","PresentTense","Gerund","Conjunction"]},PhrasalVerb:{is:"Verb"},Particle:{is:"PhrasalVerb",not:["PastTense","PresentTense","Copula","Gerund"]},Passive:{is:"Verb"}},{Value:{not:["Verb","Adjective","Adverb"]},Ordinal:{is:"Value",not:["Cardinal"]},Cardinal:{is:"Value",not:["Ordinal"]},Fraction:{is:"Value",not:["Noun"]},Multiple:{is:"TextValue"},RomanNumeral:{is:"Cardinal",not:["TextValue"]},TextValue:{is:"Value",not:["NumericValue"]},NumericValue:{is:"Value",not:["TextValue"]},Money:{is:"Cardinal"},Percent:{is:"Value"}},{Date:{not:["Verb","Adverb","Adjective"]},Month:{is:"Date",also:["Noun"],not:["Year","WeekDay","Time"]},WeekDay:{is:"Date",also:["Noun"]},Year:{is:"Date",not:["RomanNumeral"]},FinancialQuarter:{is:"Date",not:"Fraction"},Holiday:{is:"Date",also:["Noun"]},Season:{is:"Date"},Timezone:{is:"Date",also:["Noun"],not:["ProperNoun"]},Time:{is:"Date",not:["AtMention"]},Duration:{is:"Date",also:["Noun"]}},{Adjective:{not:["Noun","Verb","Adverb","Value"]},Comparable:{is:"Adjective"},Comparative:{is:"Adjective"},Superlative:{is:"Adjective",not:["Comparative"]},NumberRange:{},Adverb:{not:["Noun","Verb","Adjective","Value"]},Determiner:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Conjunction"]},Conjunction:{not:["Noun","Verb","Adjective","Adverb","Value","QuestionWord"]},Preposition:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Determiner"]},QuestionWord:{not:["Determiner"]},Currency:{is:"Noun"},Expression:{not:["Noun","Adjective","Verb","Adverb"]},Abbreviation:{},Url:{not:["HashTag","PhoneNumber","Verb","Adjective","Value","AtMention","Email"]},PhoneNumber:{not:["HashTag","Verb","Adjective","Value","AtMention","Email"]},HashTag:{},AtMention:{is:"Noun",not:["HashTag","Email"]},Emoji:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Emoticon:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Email:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Acronym:{not:["Plural","RomanNumeral","Pronoun","Date"]},Negative:{not:["Noun","Adjective","Value","Expression"]},Condition:{not:["Verb","Adjective","Noun","Value"]},There:{not:["Verb","Adjective","Noun","Value","Conjunction","Preposition"]},Prefix:{not:["Abbreviation","Acronym","ProperNoun"]},Hyphenated:{}}),Ije={compute:Eje,methods:LF,model:E$e,tags:Tje,hooks:["preTagger"]},Aje=/[,)"';:\-\u2013\u2014.\u2026]/,Ic=function(t,e){if(!t.found)return;let n=t.termList();for(let r=0;r<n.length-1;r++)if(Aje.test(n[r].post))return;n[0].implicit=n[0].normal,n[0].text+=e,n[0].normal+=e,n.slice(1).forEach(r=>{r.implicit=r.normal,r.text="",r.normal=""});for(let r=0;r<n.length-1;r++)n[r].post=n[r].post.replace(/ /,"")},Cje=function(){let t=this.not("@hasContraction"),e=t.match("(we|they|you) are");return Ic(e,"'re"),e=t.match("(he|she|they|it|we|you) will"),Ic(e,"'ll"),e=t.match("(he|she|they|it|we) is"),Ic(e,"'s"),e=t.match("#Person is"),Ic(e,"'s"),e=t.match("#Person would"),Ic(e,"'d"),e=t.match("(is|was|had|would|should|could|do|does|have|has|can) not"),Ic(e,"n't"),e=t.match("(i|we|they) have"),Ic(e,"'ve"),e=t.match("(would|should|could) have"),Ic(e,"'ve"),e=t.match("i am"),Ic(e,"'m"),e=t.match("going to"),this},Sje=new RegExp("^\\p{Lu}[\\p{Ll}'\u2019]","u"),Pje=function(t,e,n){let[r,i]=e;!n||0===n.length||((n=n.map((s,o)=>(s.implicit=s.text,s.machine=s.text,s.pre="",s.post="",s.text="",s.normal="",s.index=[r,i+o],s)))[0]&&(n[0].pre=t[r][i].pre,n[n.length-1].post=t[r][i].post,n[0].text=t[r][i].text,n[0].normal=t[r][i].normal),t[r].splice(i,1,...n))},kje=/'/,xje=new Set(["been","become"]),Rje=new Set(["what","how","when","if","too"]);let Oje=new Set(["too","also","enough"]);const Vje=/'/,Lje=new Set(["better","done","before","it","had"]),$je=new Set(["have","be"]),zje={that:!0,there:!0,let:!0,here:!0,everywhere:!0},Gje={in:!0,by:!0,for:!0};let qje=new Set(["too","also","enough","about"]),Wje=new Set(["is","are","did","were","could","should","must","had","have"]);const PY=/'/,Jje=function(t,e,n,r){let i=e.update();i.document=[t];let s=n+r;n>0&&(n-=1),t[s]&&(s+=1),i.ptrs=[[0,n,s]],i.compute(["freeze","lexicon","preTagger","unfreeze"]),function(t){t.forEach((e,n)=>{e.index&&(e.index[1]=n)})}(t)},kY={d:(t,e)=>function(t,e){let n=t[e].normal.split(Vje)[0];return"how"===n||"what"===n?[n,"did"]:"had"===((t,e)=>{for(let n=e+1;n<t.length;n+=1){let r=t[n];if(Lje.has(r.normal))return"had";if($je.has(r.normal))return"would";if(r.tags.has("PastTense")||"Adj|Past"===r.switch)return"had";if(r.tags.has("PresentTense")||r.tags.has("Infinitive"))return"would";if(r.tags.has("#Determiner"))return"had";if(r.tags.has("Adjective"))return"would"}return!1})(t,e)?[n,"had"]:[n,"would"]}(t,e),t:(t,e)=>function(t,e){if("ain't"===t[e].normal||"aint"===t[e].normal){if(t[e+1]&&"never"===t[e+1].normal)return["have"];let r=function(t,e){for(let n=e-1;n>=0;n-=1)if(t[n].tags.has("Noun")||t[n].tags.has("Pronoun")||t[n].tags.has("Plural")||t[n].tags.has("Singular"))return t[n];return null}(t,e);if(r){if("we"===r.normal||"they"===r.normal)return["are","not"];if("i"===r.normal)return["am","not"];if(r.tags&&r.tags.has("Plural"))return["are","not"]}return["is","not"]}return[t[e].normal.replace(/n't/,""),"not"]}(t,e),s:(t,e,n)=>((t,e)=>{let n=t[e];if(zje.hasOwnProperty(n.machine||n.normal))return!1;if(n.tags.has("Possessive"))return!0;if(n.tags.has("QuestionWord")||"he's"===n.normal||"she's"===n.normal)return!1;let r=t[e+1];if(!r)return!0;if("it's"===n.normal)return!!r.tags.has("#Noun");if("Noun|Gerund"==r.switch){let i=t[e+2];return i?!!i.tags.has("Copula"):!(!n.tags.has("Actor")&&!n.tags.has("ProperNoun"))}if(r.tags.has("Verb"))return!!r.tags.has("Infinitive")||!r.tags.has("Gerund")&&!!r.tags.has("PresentTense");if("Adj|Noun"===r.switch){let i=t[e+2];if(!i)return!1;if(Wje.has(i.normal))return!0;if(qje.has(i.normal))return!1}if(r.tags.has("Noun")){let i=r.machine||r.normal;return!("here"===i||"there"===i||"everywhere"===i||r.tags.has("Possessive")||r.tags.has("ProperNoun")&&!n.tags.has("ProperNoun"))}if(t[e-1]&&!0===Gje[t[e-1].normal])return!0;if(r.tags.has("Adjective")){let i=t[e+2];if(!i)return!1;if(i.tags.has("Noun")&&!i.tags.has("Pronoun")){let s=r.normal;return!("above"===s||"below"===s||"behind"===s)}return"Noun|Verb"===i.switch}return!!r.tags.has("Value")})(t,e)?n.methods.one.setTag([t[e]],"Possessive",n,null,"2-contraction"):function(t,e){let n=t[e].normal.split(kje)[0];if("let"===n)return[n,"us"];if("there"===n){let r=t[e+1];if(r&&r.tags.has("Plural"))return[n,"are"]}return"has"===((t,e)=>{for(let n=e+1;n<t.length;n+=1){let r=t[n];if(xje.has(r.normal))return"has";if(Rje.has(r.normal)||r.tags.has("Gerund")||r.tags.has("Determiner")||r.tags.has("Adjective")||"Adj|Past"===r.switch&&t[n+1]&&(Oje.has(t[n+1].normal)||t[n+1].tags.has("Preposition")))return"is";if(r.tags.has("PastTense"))return t[n+1]&&"for"===t[n+1].normal?"is":"has"}return"is"})(t,e)?[n,"has"]:[n,"is"]}(t,e)},Yje=function(t,e){let n=e.fromText(t.join(" "));return n.compute("id"),n.docs[0]},Xje={compute:{contractionTwo:t=>{let{world:e,document:n}=t;n.forEach((r,i)=>{for(let s=r.length-1;s>=0;s-=1){if(r[s].implicit)return;let o=null;!0===PY.test(r[s].normal)&&(o=r[s].normal.split(PY)[1]);let a=null;kY.hasOwnProperty(o)&&(a=kY[o](r,s,e)),a&&(a=Yje(a,t),Pje(n,[i,s],a),Jje(n[i],t,s,a.length))}})}},api:function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Contraction"}expand(){return this.docs.forEach(r=>{let i=Sje.test(r[0].text);r.forEach((s,o)=>{s.text=s.implicit||"",delete s.implicit,o<r.length-1&&""===s.post&&(s.post+=" "),s.dirty=!0}),i&&(r[0].text=function(t=""){return t.replace(/^ *[a-z\u00C0-\u00FF]/,e=>e.toUpperCase())}(r[0].text))}),this.compute("normal"),this}}t.prototype.contractions=function(){let n=this.match("@hasContraction+");return new e(this.document,n.pointer)},t.prototype.contract=Cje},hooks:["contractionTwo"]},xY="(hard|fast|late|early|high|right|deep|close|direct)",zF="(i|we|they)",SBe={two:{matches:[].concat([{match:"(got|were|was|is|are|am) (#PastTense|#Participle)",tag:"Passive",reason:"got-walked"},{match:"(was|were|is|are|am) being (#PastTense|#Participle)",tag:"Passive",reason:"was-being"},{match:"(had|have|has) been (#PastTense|#Participle)",tag:"Passive",reason:"had-been"},{match:"will be being? (#PastTense|#Participle)",tag:"Passive",reason:"will-be-cleaned"},{match:"#Noun [(#PastTense|#Participle)] by (the|a) #Noun",group:0,tag:"Passive",reason:"suffered-by"}],[{match:"[(all|both)] #Determiner #Noun",group:0,tag:"Noun",reason:"all-noun"},{match:"#Copula [(just|alone)]$",group:0,tag:"Adjective",reason:"not-adverb"},{match:"#Singular is #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"is-filled"},{match:"[#PastTense] #Singular is",group:0,tag:"Adjective",reason:"smoked-poutine"},{match:"[#PastTense] #Plural are",group:0,tag:"Adjective",reason:"baked-onions"},{match:"well [#PastTense]",group:0,tag:"Adjective",reason:"well-made"},{match:"#Copula [fucked up?]",group:0,tag:"Adjective",reason:"swears-adjective"},{match:"#Singular (seems|appears) #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"seems-filled"},{match:"#Copula #Adjective? [(out|in|through)]$",group:0,tag:"Adjective",reason:"still-out"},{match:"^[#Adjective] (the|your) #Noun",group:0,notIf:"(all|even)",tag:"Infinitive",reason:"shut-the"},{match:"the [said] #Noun",group:0,tag:"Adjective",reason:"the-said-card"},{match:"[#Hyphenated (#Hyphenated && #PastTense)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"faith-based"},{match:"[#Hyphenated (#Hyphenated && #Gerund)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"self-driving"},{match:"[#PastTense (#Hyphenated && #PhrasalVerb)] (#Noun|#Conjunction)",group:0,tag:"Adjective",reason:"dammed-up"},{match:"(#Hyphenated && #Value) fold",tag:"Adjective",reason:"two-fold"},{match:"must (#Hyphenated && #Infinitive)",tag:"Adjective",reason:"must-win"},{match:"(#Hyphenated && #Infinitive) #Hyphenated",tag:"Adjective",notIf:"#PhrasalVerb",reason:"vacuum-sealed"},{match:"too much",tag:"Adverb Adjective",reason:"bit-4"},{match:"a bit much",tag:"Determiner Adverb Adjective",reason:"bit-3"},{match:"[(un|contra|extra|inter|intra|macro|micro|mid|mis|mono|multi|pre|sub|tri|ex)] #Adjective",group:0,tag:["Adjective","Prefix"],reason:"un-skilled"}],[{match:"#Adverb [#Adverb] (and|or|then)",group:0,tag:"Adjective",reason:"kinda-sparkly-and"},{match:"[(dark|bright|flat|light|soft|pale|dead|dim|faux|little|wee|sheer|most|near|good|extra|all)] #Adjective",group:0,tag:"Adverb",reason:"dark-green"},{match:"#Copula [far too] #Adjective",group:0,tag:"Adverb",reason:"far-too"},{match:"#Copula [still] (in|#Gerund|#Adjective)",group:0,tag:"Adverb",reason:"was-still-walking"},{match:`#Plural ${xY}`,tag:"#PresentTense #Adverb",reason:"studies-hard"},{match:`#Verb [${xY}] !#Noun?`,group:0,notIf:"(#Copula|get|got|getting|become|became|becoming|feel|feels|feeling|#Determiner|#Preposition)",tag:"Adverb",reason:"shops-direct"},{match:"[#Plural] a lot",tag:"PresentTense",reason:"studies-a-lot"}],[{match:"as [#Gerund] as",group:0,tag:"Adjective",reason:"as-gerund-as"},{match:"more [#Gerund] than",group:0,tag:"Adjective",reason:"more-gerund-than"},{match:"(so|very|extremely) [#Gerund]",group:0,tag:"Adjective",reason:"so-gerund"},{match:"(found|found) it #Adverb? [#Gerund]",group:0,tag:"Adjective",reason:"found-it-gerund"},{match:"a (little|bit|wee) bit? [#Gerund]",group:0,tag:"Adjective",reason:"a-bit-gerund"},{match:"#Gerund [#Gerund]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looking-annoying"},{match:"(looked|look|looks) #Adverb? [%Adj|Gerund%]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looked-amazing"},{match:"[%Adj|Gerund%] #Determiner",group:0,tag:"Gerund",reason:"developing-a"},{match:"#Possessive [%Adj|Gerund%] #Noun",group:0,tag:"Adjective",reason:"leading-manufacturer"},{match:"%Noun|Gerund% %Adj|Gerund%",tag:"Gerund #Adjective",reason:"meaning-alluring"},{match:"(face|embrace|reveal|stop|start|resume) %Adj|Gerund%",tag:"#PresentTense #Adjective",reason:"face-shocking"},{match:"(are|were) [%Adj|Gerund%] #Plural",group:0,tag:"Adjective",reason:"are-enduring-symbols"}],[{match:"#Determiner [#Adjective] #Copula",group:0,tag:"Noun",reason:"the-adj-is"},{match:"#Adjective [#Adjective] #Copula",group:0,tag:"Noun",reason:"adj-adj-is"},{match:"(his|its) [%Adj|Noun%]",group:0,tag:"Noun",notIf:"#Hyphenated",reason:"his-fine"},{match:"#Copula #Adverb? [all]",group:0,tag:"Noun",reason:"is-all"},{match:"(have|had) [#Adjective] #Preposition .",group:0,tag:"Noun",reason:"have-fun"},{match:"#Gerund (giant|capital|center|zone|application)",tag:"Noun",reason:"brewing-giant"},{match:"#Preposition (a|an) [#Adjective]$",group:0,tag:"Noun",reason:"an-instant"},{match:"no [#Adjective] #Modal",group:0,tag:"Noun",reason:"no-golden"},{match:"[brand #Gerund?] new",group:0,tag:"Adverb",reason:"brand-new"},{match:"(#Determiner|#Comparative|new|different) [kind]",group:0,tag:"Noun",reason:"some-kind"},{match:"#Possessive [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"her-favourite"},{match:"must && #Hyphenated .",tag:"Adjective",reason:"must-win"},{match:"#Determiner [#Adjective]$",tag:"Noun",notIf:"(this|that|#Comparative|#Superlative)",reason:"the-south"},{match:"(#Noun && #Hyphenated) (#Adjective && #Hyphenated)",tag:"Adjective",notIf:"(this|that|#Comparative|#Superlative)",reason:"company-wide"},{match:"#Determiner [#Adjective] (#Copula|#Determiner)",notIf:"(#Comparative|#Superlative)",group:0,tag:"Noun",reason:"the-poor"},{match:"[%Adj|Noun%] #Noun",notIf:"(#Pronoun|#ProperNoun)",group:0,tag:"Adjective",reason:"stable-foundations"}],[{match:"[still] #Adjective",group:0,tag:"Adverb",reason:"still-advb"},{match:"[still] #Verb",group:0,tag:"Adverb",reason:"still-verb"},{match:"[so] #Adjective",group:0,tag:"Adverb",reason:"so-adv"},{match:"[way] #Comparative",group:0,tag:"Adverb",reason:"way-adj"},{match:"[way] #Adverb #Adjective",group:0,tag:"Adverb",reason:"way-too-adj"},{match:"[all] #Verb",group:0,tag:"Adverb",reason:"all-verb"},{match:"#Verb  [like]",group:0,notIf:"(#Modal|#PhrasalVerb)",tag:"Adverb",reason:"verb-like"},{match:"(barely|hardly) even",tag:"Adverb",reason:"barely-even"},{match:"[even] #Verb",group:0,tag:"Adverb",reason:"even-walk"},{match:"[even] #Comparative",group:0,tag:"Adverb",reason:"even-worse"},{match:"[even] (#Determiner|#Possessive)",group:0,tag:"#Adverb",reason:"even-the"},{match:"even left",tag:"#Adverb #Verb",reason:"even-left"},{match:"[way] #Adjective",group:0,tag:"#Adverb",reason:"way-over"},{match:"#PresentTense [(hard|quick|bright|slow|fast|backwards|forwards)]",notIf:"#Copula",group:0,tag:"Adverb",reason:"lazy-ly"},{match:"[much] #Adjective",group:0,tag:"Adverb",reason:"bit-1"},{match:"#Copula [#Adverb]$",group:0,tag:"Adjective",reason:"is-well"},{match:"a [(little|bit|wee) bit?] #Adjective",group:0,tag:"Adverb",reason:"a-bit-cold"},{match:"[(super|pretty)] #Adjective",group:0,tag:"Adverb",reason:"super-strong"},{match:"(become|fall|grow) #Adverb? [#PastTense]",group:0,tag:"Adjective",reason:"overly-weakened"},{match:"(a|an) #Adverb [#Participle] #Noun",group:0,tag:"Adjective",reason:"completely-beaten"},{match:"#Determiner #Adverb? [close]",group:0,tag:"Adjective",reason:"a-close"},{match:"#Gerund #Adverb? [close]",group:0,tag:"Adverb",notIf:"(getting|becoming|feeling)",reason:"being-close"},{match:"(the|those|these|a|an) [#Participle] #Noun",group:0,tag:"Adjective",reason:"blown-motor"},{match:"(#PresentTense|#PastTense) [back]",group:0,tag:"Adverb",notIf:"(#PhrasalVerb|#Copula)",reason:"charge-back"},{match:"#Verb [around]",group:0,tag:"Adverb",notIf:"#PhrasalVerb",reason:"send-around"},{match:"[later] #PresentTense",group:0,tag:"Adverb",reason:"later-say"},{match:"#Determiner [well] !#PastTense?",group:0,tag:"Noun",reason:"the-well"},{match:"#Adjective [enough]",group:0,tag:"Adverb",reason:"high-enough"}],[{match:"[sun] the #Ordinal",tag:"WeekDay",reason:"sun-the-5th"},{match:"[sun] #Date",group:0,tag:"WeekDay",reason:"sun-feb"},{match:"#Date (on|this|next|last|during)? [sun]",group:0,tag:"WeekDay",reason:"1pm-sun"},{match:"(in|by|before|during|on|until|after|of|within|all) [sat]",group:0,tag:"WeekDay",reason:"sat"},{match:"(in|by|before|during|on|until|after|of|within|all) [wed]",group:0,tag:"WeekDay",reason:"wed"},{match:"(in|by|before|during|on|until|after|of|within|all) [march]",group:0,tag:"Month",reason:"march"},{match:"[sat] #Date",group:0,tag:"WeekDay",reason:"sat-feb"},{match:"#Preposition [(march|may)]",group:0,tag:"Month",reason:"in-month"},{match:"(this|next|last) (march|may) !#Infinitive?",tag:"#Date #Month",reason:"this-month"},{match:"(march|may) the? #Value",tag:"#Month #Date #Date",reason:"march-5th"},{match:"#Value of? (march|may)",tag:"#Date #Date #Month",reason:"5th-of-march"},{match:"[(march|may)] .? #Date",group:0,tag:"Month",reason:"march-and-feb"},{match:"#Date .? [(march|may)]",group:0,tag:"Month",reason:"feb-and-march"},{match:"#Adverb [(march|may)]",group:0,tag:"Verb",reason:"quickly-march"},{match:"[(march|may)] #Adverb",group:0,tag:"Verb",reason:"march-quickly"},{match:"#Value (am|pm)",tag:"Time",reason:"2-am"}],[{match:"#Holiday (day|eve)",tag:"Holiday",reason:"holiday-day"},{match:"#Value of #Month",tag:"Date",reason:"value-of-month"},{match:"#Cardinal #Month",tag:"Date",reason:"cardinal-month"},{match:"#Month #Value to #Value",tag:"Date",reason:"value-to-value"},{match:"#Month the #Value",tag:"Date",reason:"month-the-value"},{match:"(#WeekDay|#Month) #Value",tag:"Date",reason:"date-value"},{match:"#Value (#WeekDay|#Month)",tag:"Date",reason:"value-date"},{match:"(#TextValue && #Date) #TextValue",tag:"Date",reason:"textvalue-date"},{match:"#Month #NumberRange",tag:"Date",reason:"aug 20-21"},{match:"#WeekDay #Month #Ordinal",tag:"Date",reason:"week mm-dd"},{match:"#Month #Ordinal #Cardinal",tag:"Date",reason:"mm-dd-yyy"},{match:"(#Place|#Demonmym|#Time) (standard|daylight|central|mountain)? time",tag:"Timezone",reason:"std-time"},{match:"(eastern|mountain|pacific|central|atlantic) (standard|daylight|summer)? time",tag:"Timezone",reason:"eastern-time"},{match:"#Time [(eastern|mountain|pacific|central|est|pst|gmt)]",group:0,tag:"Timezone",reason:"5pm-central"},{match:"(central|western|eastern) european time",tag:"Timezone",reason:"cet"}],[{match:"(the|any) [more]",group:0,tag:"Singular",reason:"more-noun"},{match:"[more] #Noun",group:0,tag:"Adjective",reason:"more-noun"},{match:"(right|rights) of .",tag:"Noun",reason:"right-of"},{match:"a [bit]",group:0,tag:"Singular",reason:"bit-2"},{match:"a [must]",group:0,tag:"Singular",reason:"must-2"},{match:"(we|us) [all]",group:0,tag:"Noun",reason:"we all"},{match:"due to [#Verb]",group:0,tag:"Noun",reason:"due-to"},{match:"some [#Verb] #Plural",group:0,tag:"Noun",reason:"determiner6"},{match:"#Possessive #Ordinal [#PastTense]",group:0,tag:"Noun",reason:"first-thought"},{match:"(the|this|those|these) #Adjective [%Verb|Noun%]",group:0,tag:"Noun",notIf:"#Copula",reason:"the-adj-verb"},{match:"(the|this|those|these) #Adverb #Adjective [#Verb]",group:0,tag:"Noun",reason:"determiner4"},{match:"the [#Verb] #Preposition .",group:0,tag:"Noun",reason:"determiner1"},{match:"(a|an|the) [#Verb] of",group:0,tag:"Noun",reason:"the-verb-of"},{match:"#Determiner #Noun of [#Verb]",group:0,tag:"Noun",notIf:"#Gerund",reason:"noun-of-noun"},{match:"#PastTense #Preposition [#PresentTense]",group:0,notIf:"#Gerund",tag:"Noun",reason:"ended-in-ruins"},{match:"#Conjunction [u]",group:0,tag:"Pronoun",reason:"u-pronoun-2"},{match:"[u] #Verb",group:0,tag:"Pronoun",reason:"u-pronoun-1"},{match:"#Determiner [(western|eastern|northern|southern|central)] #Noun",group:0,tag:"Noun",reason:"western-line"},{match:"(#Singular && @hasHyphen) #PresentTense",tag:"Noun",reason:"hyphen-verb"},{match:"is no [#Verb]",group:0,tag:"Noun",reason:"is-no-verb"},{match:"do [so]",group:0,tag:"Noun",reason:"so-noun"},{match:"#Determiner [(shit|damn|hell)]",group:0,tag:"Noun",reason:"swears-noun"},{match:"to [(shit|hell)]",group:0,tag:"Noun",reason:"to-swears"},{match:"(the|these) [#Singular] (were|are)",group:0,tag:"Plural",reason:"singular-were"},{match:"a #Noun+ or #Adverb+? [#Verb]",group:0,tag:"Noun",reason:"noun-or-noun"},{match:"(the|those|these|a|an) #Adjective? [#PresentTense #Particle?]",group:0,tag:"Noun",notIf:"(seem|appear|include|#Gerund|#Copula)",reason:"det-inf"},{match:"#Noun #Actor",tag:"Actor",notIf:"(#Person|#Pronoun)",reason:"thing-doer"},{match:"#Gerund #Actor",tag:"Actor",reason:"gerund-doer"},{match:"co #Singular",tag:"Actor",reason:"co-noun"},{match:"[#Noun+] #Actor",group:0,tag:"Actor",notIf:"(#Honorific|#Pronoun|#Possessive)",reason:"air-traffic-controller"},{match:"(urban|cardiac|cardiovascular|respiratory|medical|clinical|visual|graphic|creative|dental|exotic|fine|certified|registered|technical|virtual|professional|amateur|junior|senior|special|pharmaceutical|theoretical)+ #Noun? #Actor",tag:"Actor",reason:"fine-artist"},{match:"#Noun+ (coach|chef|king|engineer|fellow|personality|boy|girl|man|woman|master)",tag:"Actor",reason:"dance-coach"},{match:"chief . officer",tag:"Actor",reason:"chief-x-officer"},{match:"chief of #Noun+",tag:"Actor",reason:"chief-of-police"},{match:"senior? vice? president of #Noun+",tag:"Actor",reason:"president-of"},{match:"#Determiner [sun]",group:0,tag:"Singular",reason:"the-sun"},{match:"#Verb (a|an) [#Value]$",group:0,tag:"Singular",reason:"did-a-value"},{match:"the [(can|will|may)]",group:0,tag:"Singular",reason:"the can"},{match:"#FirstName #Acronym? (#Possessive && #LastName)",tag:"Possessive",reason:"name-poss"},{match:"#Organization+ #Possessive",tag:"Possessive",reason:"org-possessive"},{match:"#Place+ #Possessive",tag:"Possessive",reason:"place-possessive"},{match:"#Possessive #PresentTense #Particle?",notIf:"(#Gerund|her)",tag:"Noun",reason:"possessive-verb"},{match:"(my|our|their|her|his|its) [(#Plural && #Actor)] #Noun",tag:"Possessive",reason:"my-dads"},{match:"#Value of a [second]",group:0,unTag:"Value",tag:"Singular",reason:"10th-of-a-second"},{match:"#Value [seconds]",group:0,unTag:"Value",tag:"Plural",reason:"10-seconds"},{match:"in [#Infinitive]",group:0,tag:"Singular",reason:"in-age"},{match:"a [#Adjective] #Preposition",group:0,tag:"Noun",reason:"a-minor-in"},{match:"#Determiner [#Singular] said",group:0,tag:"Actor",reason:"the-actor-said"},{match:"#Determiner #Noun [(feel|sense|process|rush|side|bomb|bully|challenge|cover|crush|dump|exchange|flow|function|issue|lecture|limit|march|process)] !(#Preposition|to|#Adverb)?",group:0,tag:"Noun",reason:"the-noun-sense"},{match:"[#PresentTense] (of|by|for) (a|an|the) #Noun #Copula",group:0,tag:"Plural",reason:"photographs-of"},{match:"#Infinitive and [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"fight and win"},{match:"#Noun and [#Verb] and #Noun",group:0,tag:"Noun",reason:"peace-and-flowers"},{match:"the #Cardinal [%Adj|Noun%]",group:0,tag:"Noun",reason:"the-1992-classic"},{match:"#Copula the [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"the-premier-university"},{match:"i #Verb [me] #Noun",group:0,tag:"Possessive",reason:"scottish-me"},{match:"[#PresentTense] (music|class|lesson|night|party|festival|league|ceremony)",group:0,tag:"Noun",reason:"dance-music"},{match:"[wit] (me|it)",group:0,tag:"Presposition",reason:"wit-me"},{match:"#PastTense #Possessive [#Verb]",group:0,tag:"Noun",notIf:"(saw|made)",reason:"left-her-boots"},{match:"#Value [%Plural|Verb%]",group:0,tag:"Plural",notIf:"(one|1|a|an)",reason:"35-signs"},{match:"had [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|come|become)",reason:"had-time"},{match:"%Adj|Noun% %Noun|Verb%",tag:"#Adjective #Noun",notIf:"#ProperNoun #Noun",reason:"instant-access"},{match:"#Determiner [%Adj|Noun%] #Conjunction",group:0,tag:"Noun",reason:"a-rep-to"},{match:"#Adjective #Noun [%Plural|Verb%]$",group:0,tag:"Plural",notIf:"#Pronoun",reason:"near-death-experiences"},{match:"#Possessive #Noun [%Plural|Verb%]$",group:0,tag:"Plural",reason:"your-guild-colors"}],[{match:"(this|that|the|a|an) [#Gerund #Infinitive]",group:0,tag:"Singular",reason:"the-planning-process"},{match:"(that|the) [#Gerund #PresentTense]",group:0,ifNo:"#Copula",tag:"Plural",reason:"the-paving-stones"},{match:"#Determiner [#Gerund] #Noun",group:0,tag:"Adjective",reason:"the-gerund-noun"},{match:"#Pronoun #Infinitive [#Gerund] #PresentTense",group:0,tag:"Noun",reason:"tipping-sucks"},{match:"#Adjective [#Gerund]",group:0,tag:"Noun",notIf:"(still|even|just)",reason:"early-warning"},{match:"[#Gerund] #Adverb? not? #Copula",group:0,tag:"Activity",reason:"gerund-copula"},{match:"#Copula [(#Gerund|#Activity)] #Copula",group:0,tag:"Gerund",reason:"are-doing-is"},{match:"[#Gerund] #Modal",group:0,tag:"Activity",reason:"gerund-modal"},{match:"#Singular for [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"noun-for-gerund"},{match:"#Comparative (for|at) [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"better-for-gerund"},{match:"#PresentTense the [#Gerund]",group:0,tag:"Noun",reason:"keep-the-touching"}],[{match:"#Infinitive (this|that|the) [#Infinitive]",group:0,tag:"Noun",reason:"do-this-dance"},{match:"#Gerund #Determiner [#Infinitive]",group:0,tag:"Noun",reason:"running-a-show"},{match:"#Determiner (only|further|just|more|backward) [#Infinitive]",group:0,tag:"Noun",reason:"the-only-reason"},{match:"(the|this|a|an) [#Infinitive] #Adverb? #Verb",group:0,tag:"Noun",reason:"determiner5"},{match:"#Determiner #Adjective #Adjective? [#Infinitive]",group:0,tag:"Noun",reason:"a-nice-inf"},{match:"#Determiner #Demonym [#PresentTense]",group:0,tag:"Noun",reason:"mexican-train"},{match:"#Adjective #Noun+ [#Infinitive] #Copula",group:0,tag:"Noun",reason:"career-move"},{match:"at some [#Infinitive]",group:0,tag:"Noun",reason:"at-some-inf"},{match:"(go|goes|went) to [#Infinitive]",group:0,tag:"Noun",reason:"goes-to-verb"},{match:"(a|an) #Adjective? #Noun [#Infinitive] (#Preposition|#Noun)",group:0,notIf:"from",tag:"Noun",reason:"a-noun-inf"},{match:"(a|an) #Noun [#Infinitive]$",group:0,tag:"Noun",reason:"a-noun-inf2"},{match:"#Gerund #Adjective? for [#Infinitive]",group:0,tag:"Noun",reason:"running-for"},{match:"about [#Infinitive]",group:0,tag:"Singular",reason:"about-love"},{match:"#Plural on [#Infinitive]",group:0,tag:"Noun",reason:"on-stage"},{match:"any [#Infinitive]",group:0,tag:"Noun",reason:"any-charge"},{match:"no [#Infinitive]",group:0,tag:"Noun",reason:"no-doubt"},{match:"number of [#PresentTense]",group:0,tag:"Noun",reason:"number-of-x"},{match:"(taught|teaches|learns|learned) [#PresentTense]",group:0,tag:"Noun",reason:"teaches-x"},{match:"(try|use|attempt|build|make) [#Verb #Particle?]",notIf:"(#Copula|#Noun|sure|fun|up)",group:0,tag:"Noun",reason:"do-verb"},{match:"^[#Infinitive] (is|was)",group:0,tag:"Noun",reason:"checkmate-is"},{match:"#Infinitive much [#Infinitive]",group:0,tag:"Noun",reason:"get-much"},{match:"[cause] #Pronoun #Verb",group:0,tag:"Conjunction",reason:"cause-cuz"},{match:"the #Singular [#Infinitive] #Noun",group:0,tag:"Noun",notIf:"#Pronoun",reason:"cardio-dance"},{match:"#Determiner #Modal [#Noun]",group:0,tag:"PresentTense",reason:"should-smoke"},{match:"this [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Date)",reason:"this-verbs"},{match:"#Noun that [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Pronoun|way)",reason:"voice-that-rocks"},{match:"that [#Plural] to",group:0,tag:"PresentTense",notIf:"#Preposition",reason:"that-leads-to"},{match:"(let|make|made) (him|her|it|#Person|#Place|#Organization)+ [#Singular] (a|an|the|it)",group:0,tag:"Infinitive",reason:"let-him-glue"},{match:"#Verb (all|every|each|most|some|no) [#PresentTense]",notIf:"#Modal",group:0,tag:"Noun",reason:"all-presentTense"},{match:"(had|have|#PastTense) #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"better",reason:"adj-presentTense"},{match:"#Value #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"one-big-reason"},{match:"#PastTense #Adjective+ [#PresentTense]",group:0,tag:"Noun",notIf:"(#Copula|better)",reason:"won-wide-support"},{match:"(many|few|several|couple) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"many-poses"},{match:"#Determiner #Adverb #Adjective [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Copula",reason:"very-big-dream"},{match:"from #Noun to [%Noun|Verb%]",group:0,tag:"Noun",reason:"start-to-finish"},{match:"(for|with|of) #Noun (and|or|not) [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Pronoun",reason:"for-food-and-gas"},{match:"#Adjective #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"adorable-little-store"},{match:"#Gerund #Adverb? #Comparative [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"higher-costs"},{match:"(#Noun && @hasComma) #Noun (and|or) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"noun-list"},{match:"(many|any|some|several) [#PresentTense] for",group:0,tag:"Noun",reason:"any-verbs-for"},{match:"to #PresentTense #Noun [#PresentTense] #Preposition",group:0,tag:"Noun",reason:"gas-exchange"},{match:"#PastTense (until|as|through|without) [#PresentTense]",group:0,tag:"Noun",reason:"waited-until-release"},{match:"#Gerund like #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"like-hot-cakes"},{match:"some #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"some-reason"},{match:"for some [#PresentTense]",group:0,tag:"Noun",reason:"for-some-reason"},{match:"(same|some|the|that|a) kind of [#PresentTense]",group:0,tag:"Noun",reason:"some-kind-of"},{match:"(same|some|the|that|a) type of [#PresentTense]",group:0,tag:"Noun",reason:"some-type-of"},{match:"#Gerund #Adjective #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"doing-better-for-x"},{match:"(get|got|have) #Comparative [#PresentTense]",group:0,tag:"Noun",reason:"got-better-aim"},{match:"whose [#PresentTense] #Copula",group:0,tag:"Noun",reason:"whos-name-was"},{match:"#PhrasalVerb #Particle #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"given-up-on-x"},{match:"there (are|were) #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"there-are"},{match:"#Value [#PresentTense] of",group:0,notIf:"(one|1|#Copula|#Infinitive)",tag:"Plural",reason:"2-trains"},{match:"[#PresentTense] (are|were) #Adjective",group:0,tag:"Plural",reason:"compromises-are-possible"},{match:"^[(hope|guess|thought|think)] #Pronoun #Verb",group:0,tag:"Infinitive",reason:"suppose-i"},{match:"#Possessive #Adjective [#Verb]",group:0,tag:"Noun",notIf:"#Copula",reason:"our-full-support"},{match:"[(tastes|smells)] #Adverb? #Adjective",group:0,tag:"PresentTense",reason:"tastes-good"},{match:"#Copula #Gerund [#PresentTense] !by?",group:0,tag:"Noun",notIf:"going",reason:"ignoring-commute"},{match:"#Determiner #Adjective? [(shed|thought|rose|bid|saw|spelt)]",group:0,tag:"Noun",reason:"noun-past"},{match:"how to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"how-to-noun"},{match:"which [%Noun|Verb%] #Noun",group:0,tag:"Infinitive",reason:"which-boost-it"},{match:"#Gerund [%Plural|Verb%]",group:0,tag:"Plural",reason:"asking-questions"},{match:"(ready|available|difficult|hard|easy|made|attempt|try) to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"ready-to-noun"},{match:"(bring|went|go|drive|run|bike) to [%Noun|Verb%]",group:0,tag:"Noun",reason:"bring-to-noun"},{match:"#Modal #Noun [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"would-you-look"},{match:"#Copula just [#Infinitive]",group:0,tag:"Noun",reason:"is-just-spam"},{match:"^%Noun|Verb% %Plural|Verb%",tag:"Imperative #Plural",reason:"request-copies"},{match:"#Adjective #Plural and [%Plural|Verb%]",group:0,tag:"#Plural",reason:"pickles-and-drinks"},{match:"#Determiner #Year [#Verb]",group:0,tag:"Noun",reason:"the-1968-film"},{match:"#Determiner [#PhrasalVerb #Particle]",group:0,tag:"Noun",reason:"the-break-up"},{match:"#Determiner [%Adj|Noun%] #Noun",group:0,tag:"Adjective",notIf:"(#Pronoun|#Possessive|#ProperNoun)",reason:"the-individual-goals"},{match:"[%Noun|Verb%] or #Infinitive",group:0,tag:"Infinitive",reason:"work-or-prepare"},{match:"to #Infinitive [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|#Copula|help)",reason:"to-give-thanks"},{match:"[#Noun] me",group:0,tag:"Verb",reason:"kills-me"},{match:"%Plural|Verb% %Plural|Verb%",tag:"#PresentTense #Plural",reason:"removes-wrinkles"}],[{match:"#Money and #Money #Currency?",tag:"Money",reason:"money-and-money"},{match:"#Value #Currency [and] #Value (cents|ore|centavos|sens)",group:0,tag:"money",reason:"and-5-cents"},{match:"#Value (mark|rand|won|rub|ore)",tag:"#Money #Currency",reason:"4-mark"},{match:"a pound",tag:"#Money #Unit",reason:"a-pound"},{match:"#Value (pound|pounds)",tag:"#Money #Unit",reason:"4-pounds"}],[{match:"[(half|quarter)] of? (a|an)",group:0,tag:"Fraction",reason:"millionth"},{match:"#Adverb [half]",group:0,tag:"Fraction",reason:"nearly-half"},{match:"[half] the",group:0,tag:"Fraction",reason:"half-the"},{match:"#Cardinal and a half",tag:"Fraction",reason:"and-a-half"},{match:"#Value (halves|halfs|quarters)",tag:"Fraction",reason:"two-halves"},{match:"a #Ordinal",tag:"Fraction",reason:"a-quarter"},{match:"[#Cardinal+] (#Fraction && /s$/)",tag:"Fraction",reason:"seven-fifths"},{match:"[#Cardinal+ #Ordinal] of .",group:0,tag:"Fraction",reason:"ordinal-of"},{match:"[(#NumericValue && #Ordinal)] of .",group:0,tag:"Fraction",reason:"num-ordinal-of"},{match:"(a|one) #Cardinal?+ #Ordinal",tag:"Fraction",reason:"a-ordinal"},{match:"#Cardinal+ out? of every? #Cardinal",tag:"Fraction",reason:"out-of"}],[{match:"#Cardinal [second]",tag:"Unit",reason:"one-second"},{match:"!once? [(a|an)] (#Duration|hundred|thousand|million|billion|trillion)",group:0,tag:"Value",reason:"a-is-one"},{match:"1 #Value #PhoneNumber",tag:"PhoneNumber",reason:"1-800-Value"},{match:"#NumericValue #PhoneNumber",tag:"PhoneNumber",reason:"(800) PhoneNumber"},{match:"#Demonym #Currency",tag:"Currency",reason:"demonym-currency"},{match:"#Value [(buck|bucks|grand)]",group:0,tag:"Currency",reason:"value-bucks"},{match:"[#Value+] #Currency",group:0,tag:"Money",reason:"15 usd"},{match:"[second] #Noun",group:0,tag:"Ordinal",reason:"second-noun"},{match:"#Value+ [#Currency]",group:0,tag:"Unit",reason:"5-yan"},{match:"#Value [(foot|feet)]",group:0,tag:"Unit",reason:"foot-unit"},{match:"#Value [#Abbreviation]",group:0,tag:"Unit",reason:"value-abbr"},{match:"#Value [k]",group:0,tag:"Unit",reason:"value-k"},{match:"#Unit an hour",tag:"Unit",reason:"unit-an-hour"},{match:"(minus|negative) #Value",tag:"Value",reason:"minus-value"},{match:"#Value (point|decimal) #Value",tag:"Value",reason:"value-point-value"},{match:"#Determiner [(half|quarter)] #Ordinal",group:0,tag:"Value",reason:"half-ordinal"},{match:"#Multiple+ and #Value",tag:"Value",reason:"magnitude-and-value"},{match:"#Value #Unit [(per|an) (hr|hour|sec|second|min|minute)]",group:0,tag:"Unit",reason:"12-miles-per-second"},{match:"#Value [(square|cubic)] #Unit",group:0,tag:"Unit",reason:"square-miles"},{match:"^[#Value] (#Determiner|#Gerund)",group:0,tag:"Expression",unTag:"Value",reason:"numbered-list"}],[{match:"#Copula [(#Noun|#PresentTense)] #LastName",group:0,tag:"FirstName",reason:"copula-noun-lastname"},{match:"(sister|pope|brother|father|aunt|uncle|grandpa|grandfather|grandma) #ProperNoun",tag:"Person",reason:"lady-titlecase",safe:!0},{match:"#FirstName [#Determiner #Noun] #LastName",group:0,tag:"Person",reason:"first-noun-last"},{match:"#ProperNoun (b|c|d|e|f|g|h|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z) #ProperNoun",tag:"Person",reason:"titlecase-acronym-titlecase",safe:!0},{match:"#Acronym #LastName",tag:"Person",reason:"acronym-lastname",safe:!0},{match:"#Person (jr|sr|md)",tag:"Person",reason:"person-honorific"},{match:"#Honorific #Acronym",tag:"Person",reason:"Honorific-TitleCase"},{match:"#Person #Person the? #RomanNumeral",tag:"Person",reason:"roman-numeral"},{match:"#FirstName [/^[^aiurck]$/]",group:0,tag:["Acronym","Person"],reason:"john-e"},{match:"#Noun van der? #Noun",tag:"Person",reason:"van der noun",safe:!0},{match:"(king|queen|prince|saint|lady) of #Noun",tag:"Person",reason:"king-of-noun",safe:!0},{match:"(prince|lady) #Place",tag:"Person",reason:"lady-place"},{match:"(king|queen|prince|saint) #ProperNoun",tag:"Person",notIf:"#Place",reason:"saint-foo"},{match:"al (#Person|#ProperNoun)",tag:"Person",reason:"al-borlen",safe:!0},{match:"#FirstName de #Noun",tag:"Person",reason:"bill-de-noun"},{match:"#FirstName (bin|al) #Noun",tag:"Person",reason:"bill-al-noun"},{match:"#FirstName #Acronym #ProperNoun",tag:"Person",reason:"bill-acronym-title"},{match:"#FirstName #FirstName #ProperNoun",tag:"Person",reason:"bill-firstname-title"},{match:"#Honorific #FirstName? #ProperNoun",tag:"Person",reason:"dr-john-Title"},{match:"#FirstName the #Adjective",tag:"Person",reason:"name-the-great"},{match:"#ProperNoun (van|al|bin) #ProperNoun",tag:"Person",reason:"title-van-title",safe:!0},{match:"#ProperNoun (de|du) la? #ProperNoun",tag:"Person",notIf:"#Place",reason:"title-de-title"},{match:"#Singular #Acronym #LastName",tag:"#FirstName #Person .",reason:"title-acro-noun",safe:!0},{match:"[#ProperNoun] #Person",group:0,tag:"Person",reason:"proper-person",safe:!0},{match:"#Person [#ProperNoun #ProperNoun]",group:0,tag:"Person",notIf:"#Possessive",reason:"three-name-person",safe:!0},{match:"#FirstName #Acronym? [#ProperNoun]",group:0,tag:"LastName",notIf:"#Possessive",reason:"firstname-titlecase"},{match:"#FirstName [#FirstName]",group:0,tag:"LastName",reason:"firstname-firstname"},{match:"#FirstName #Acronym #Noun",tag:"Person",reason:"n-acro-noun",safe:!0},{match:"#FirstName [(de|di|du|van|von)] #Person",group:0,tag:"LastName",reason:"de-firstname"},{match:"[(lieutenant|corporal|sergeant|captain|qeen|king|admiral|major|colonel|marshal|president|queen|king)+] #ProperNoun",group:0,tag:"Honorific",reason:"seargeant-john"},{match:"[(private|general|major|rear|prime|field|count|miss)] #Honorific? #Person",group:0,tag:["Honorific","Person"],reason:"ambg-honorifics"},{match:"#Honorific #FirstName [#Singular]",group:0,tag:"LastName",notIf:"#Possessive",reason:"dr-john-foo",safe:!0},{match:"[(his|her) (majesty|honour|worship|excellency|honorable)] #Person",group:0,tag:"Honorific",reason:"his-excellency"},{match:"#Honorific #Actor",tag:"Honorific",reason:"Lieutenant colonel"},{match:"(first|second|third|1st|2nd|3rd) #Actor",tag:"Honorific",reason:"first lady"},{match:"#Person #RomanNumeral",tag:"Person",reason:"louis-IV"}],[{match:"#FirstName #Noun$",tag:". #LastName",notIf:"(#Possessive|#Organization|#Place|#Pronoun|@hasTitleCase)",reason:"firstname-noun"},{match:"%Person|Date% #Acronym? #ProperNoun",tag:"Person",reason:"jan-thierson"},{match:"%Person|Noun% #Acronym? #ProperNoun",tag:"Person",reason:"switch-person",safe:!0},{match:"%Person|Noun% #Organization",tag:"Organization",reason:"olive-garden"},{match:"%Person|Verb% #Acronym? #ProperNoun",tag:"Person",reason:"verb-propernoun",ifNo:"#Actor"},{match:"[%Person|Verb%] (will|had|has|said|says|told|did|learned|wants|wanted)",group:0,tag:"Person",reason:"person-said"},{match:"[%Person|Place%] (harbor|harbour|pier|town|city|place|dump|landfill)",group:0,tag:"Place",reason:"sydney-harbour"},{match:"(west|east|north|south) [%Person|Place%]",group:0,tag:"Place",reason:"east-sydney"},{match:"#Modal [%Person|Verb%]",group:0,tag:"Verb",reason:"would-mark"},{match:"#Adverb [%Person|Verb%]",group:0,tag:"Verb",reason:"really-mark"},{match:"[%Person|Verb%] (#Adverb|#Comparative)",group:0,tag:"Verb",reason:"drew-closer"},{match:"%Person|Verb% #Person",tag:"Person",reason:"rob-smith"},{match:"%Person|Verb% #Acronym #ProperNoun",tag:"Person",reason:"rob-a-smith"},{match:"[will] #Verb",group:0,tag:"Modal",reason:"will-verb"},{match:"(will && @isTitleCase) #ProperNoun",tag:"Person",reason:"will-name"},{match:"(#FirstName && !#Possessive) [#Singular] #Verb",group:0,safe:!0,tag:"LastName",reason:"jack-layton"},{match:"^[#Singular] #Person #Verb",group:0,safe:!0,tag:"Person",reason:"sherwood-anderson"},{match:"(a|an) [#Person]$",group:0,unTag:"Person",reason:"a-warhol"}],[{match:"#Copula (pretty|dead|full|well|sure) (#Adjective|#Noun)",tag:"#Copula #Adverb #Adjective",reason:"sometimes-adverb"},{match:"(#Pronoun|#Person) (had|#Adverb)? [better] #PresentTense",group:0,tag:"Modal",reason:"i-better"},{match:"(#Modal|i|they|we|do) not? [like]",group:0,tag:"PresentTense",reason:"modal-like"},{match:"#Noun #Adverb? [left]",group:0,tag:"PastTense",reason:"left-verb"},{match:"will #Adverb? not? #Adverb? [be] #Gerund",group:0,tag:"Copula",reason:"will-be-copula"},{match:"will #Adverb? not? #Adverb? [be] #Adjective",group:0,tag:"Copula",reason:"be-copula"},{match:"[march] (up|down|back|toward)",notIf:"#Date",group:0,tag:"Infinitive",reason:"march-to"},{match:"#Modal [march]",group:0,tag:"Infinitive",reason:"must-march"},{match:"[may] be",group:0,tag:"Verb",reason:"may-be"},{match:"[(subject|subjects|subjected)] to",group:0,tag:"Verb",reason:"subject to"},{match:"[home] to",group:0,tag:"PresentTense",reason:"home to"},{match:"[open] #Determiner",group:0,tag:"Infinitive",reason:"open-the"},{match:"(were|was) being [#PresentTense]",group:0,tag:"PastTense",reason:"was-being"},{match:"(had|has|have) [been /en$/]",group:0,tag:"Auxiliary Participle",reason:"had-been-broken"},{match:"(had|has|have) [been /ed$/]",group:0,tag:"Auxiliary PastTense",reason:"had-been-smoked"},{match:"(had|has) #Adverb? [been] #Adverb? #PastTense",group:0,tag:"Auxiliary",reason:"had-been-adj"},{match:"(had|has) to [#Noun] (#Determiner|#Possessive)",group:0,tag:"Infinitive",reason:"had-to-noun"},{match:"have [#PresentTense]",group:0,tag:"PastTense",notIf:"(come|gotten)",reason:"have-read"},{match:"(does|will|#Modal) that [work]",group:0,tag:"PastTense",reason:"does-that-work"},{match:"[(sound|sounds)] #Adjective",group:0,tag:"PresentTense",reason:"sounds-fun"},{match:"[(look|looks)] #Adjective",group:0,tag:"PresentTense",reason:"looks-good"},{match:"[(start|starts|stop|stops|begin|begins)] #Gerund",group:0,tag:"Verb",reason:"starts-thinking"},{match:"(have|had) read",tag:"Modal #PastTense",reason:"read-read"},{match:"(is|was|were) [(under|over) #PastTense]",group:0,tag:"Adverb Adjective",reason:"was-under-cooked"},{match:"[shit] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear1-verb"},{match:"[damn] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear2-verb"},{match:"[fuck] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear3-verb"},{match:"#Plural that %Noun|Verb%",tag:". #Preposition #Infinitive",reason:"jobs-that-work"},{match:"[works] for me",group:0,tag:"PresentTense",reason:"works-for-me"},{match:"as #Pronoun [please]",group:0,tag:"Infinitive",reason:"as-we-please"},{match:"[(co|mis|de|inter|intra|pre|re|un|out|under|over|counter)] #Verb",group:0,tag:["Verb","Prefix"],notIf:"(#Copula|#PhrasalVerb)",reason:"co-write"},{match:"#PastTense and [%Adj|Past%]",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"[%Adj|Past%] and #PastTense",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"#Copula #Pronoun [%Adj|Past%]",group:0,tag:"Adjective",reason:"is-he-stoked"},{match:"to [%Noun|Verb%] #Preposition",group:0,tag:"Infinitive",reason:"to-dream-of"}],[{match:"(slowly|quickly) [#Adjective]",group:0,tag:"Verb",reason:"slowly-adj"},{match:"does (#Adverb|not)? [#Adjective]",group:0,tag:"PresentTense",reason:"does-mean"},{match:"[(fine|okay|cool|ok)] by me",group:0,tag:"Adjective",reason:"okay-by-me"},{match:"i (#Adverb|do)? not? [mean]",group:0,tag:"PresentTense",reason:"i-mean"},{match:"will #Adjective",tag:"Auxiliary Infinitive",reason:"will-adj"},{match:"#Pronoun [#Adjective] #Determiner #Adjective? #Noun",group:0,tag:"Verb",reason:"he-adj-the"},{match:"#Copula [%Adj|Present%] to #Verb",group:0,tag:"Verb",reason:"adj-to"},{match:"#Copula [#Adjective] (well|badly|quickly|slowly)",group:0,tag:"Verb",reason:"done-well"},{match:"#Adjective and [#Gerund] !#Preposition?",group:0,tag:"Adjective",reason:"rude-and-x"},{match:"#Copula #Adverb? (over|under) [#PastTense]",group:0,tag:"Adjective",reason:"over-cooked"},{match:"#Copula #Adjective+ (and|or) [#PastTense]$",group:0,tag:"Adjective",reason:"bland-and-overcooked"},{match:"got #Adverb? [#PastTense] of",group:0,tag:"Adjective",reason:"got-tired-of"},{match:"(seem|seems|seemed|appear|appeared|appears|feel|feels|felt|sound|sounds|sounded) (#Adverb|#Adjective)? [#PastTense]",group:0,tag:"Adjective",reason:"felt-loved"},{match:"(seem|feel|seemed|felt) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"seem-confused"},{match:"a (bit|little|tad) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"a-bit-confused"},{match:"not be [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"do-not-be-confused"},{match:"#Copula just [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"is-just-right"},{match:"as [#Infinitive] as",group:0,tag:"Adjective",reason:"as-pale-as"},{match:"[%Adj|Past%] and #Adjective",group:0,tag:"Adjective",reason:"faled-and-oppressive"},{match:"or [#PastTense] #Noun",group:0,tag:"Adjective",notIf:"(#Copula|#Pronoun)",reason:"or-heightened-emotion"},{match:"(become|became|becoming|becomes) [#Verb]",group:0,tag:"Adjective",reason:"become-verb"},{match:"#Possessive [#PastTense] #Noun",group:0,tag:"Adjective",reason:"declared-intentions"},{match:"#Copula #Pronoun [%Adj|Present%]",group:0,tag:"Adjective",reason:"is-he-cool"},{match:"#Copula [%Adj|Past%] with",group:0,tag:"Adjective",notIf:"(associated|worn|baked|aged|armed|bound|fried|loaded|mixed|packed|pumped|filled|sealed)",reason:"is-crowded-with"},{match:"#Copula #Adverb? [%Adj|Present%]$",group:0,tag:"Adjective",reason:"was-empty$"}],[{match:"will (#Adverb|not)+? [have] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"will-have-vb"},{match:"[#Copula] (#Adverb|not)+? (#Gerund|#PastTense)",group:0,tag:"Auxiliary",reason:"copula-walking"},{match:"[(#Modal|did)+] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"modal-verb"},{match:"#Modal (#Adverb|not)+? [have] (#Adverb|not)+? [had] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-have"},{match:"[(has|had)] (#Adverb|not)+? #PastTense",group:0,tag:"Auxiliary",reason:"had-walked"},{match:"[(do|does|did|will|have|had|has|got)] (not|#Adverb)+? #Verb",group:0,tag:"Auxiliary",reason:"have-had"},{match:"[about to] #Adverb? #Verb",group:0,tag:["Auxiliary","Verb"],reason:"about-to"},{match:"#Modal (#Adverb|not)+? [be] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-be"},{match:"[(#Modal|had|has)] (#Adverb|not)+? [been] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"had-been"},{match:"[(be|being|been)] #Participle",group:0,tag:"Auxiliary",reason:"being-driven"},{match:"[may] #Adverb? #Infinitive",group:0,tag:"Auxiliary",reason:"may-want"},{match:"#Copula (#Adverb|not)+? [(be|being|been)] #Adverb+? #PastTense",group:0,tag:"Auxiliary",reason:"being-walked"},{match:"will [be] #PastTense",group:0,tag:"Auxiliary",reason:"will-be-x"},{match:"[(be|been)] (#Adverb|not)+? #Gerund",group:0,tag:"Auxiliary",reason:"been-walking"},{match:"[used to] #PresentTense",group:0,tag:"Auxiliary",reason:"used-to-walk"},{match:"#Copula (#Adverb|not)+? [going to] #Adverb+? #PresentTense",group:0,tag:"Auxiliary",reason:"going-to-walk"},{match:"#Imperative [(me|him|her)]",group:0,tag:"Reflexive",reason:"tell-him"},{match:"(is|was) #Adverb? [no]",group:0,tag:"Negative",reason:"is-no"},{match:"[(been|had|became|came)] #PastTense",group:0,notIf:"#PhrasalVerb",tag:"Auxiliary",reason:"been-told"},{match:"[(being|having|getting)] #Verb",group:0,tag:"Auxiliary",reason:"being-born"},{match:"[be] #Gerund",group:0,tag:"Auxiliary",reason:"be-walking"},{match:"[better] #PresentTense",group:0,tag:"Modal",notIf:"(#Copula|#Gerund)",reason:"better-go"},{match:"even better",tag:"Adverb #Comparative",reason:"even-better"}],[{match:"(#Verb && @hasHyphen) up",tag:"PhrasalVerb",reason:"foo-up"},{match:"(#Verb && @hasHyphen) off",tag:"PhrasalVerb",reason:"foo-off"},{match:"(#Verb && @hasHyphen) over",tag:"PhrasalVerb",reason:"foo-over"},{match:"(#Verb && @hasHyphen) out",tag:"PhrasalVerb",reason:"foo-out"},{match:"[#Verb (in|out|up|down|off|back)] (on|in)",notIf:"#Copula",tag:"PhrasalVerb Particle",reason:"walk-in-on"},{match:"(lived|went|crept|go) [on] for",group:0,tag:"PhrasalVerb",reason:"went-on"},{match:"#Verb (up|down|in|on|for)$",tag:"PhrasalVerb #Particle",notIf:"#PhrasalVerb",reason:"come-down$"},{match:"help [(stop|end|make|start)]",group:0,tag:"Infinitive",reason:"help-stop"},{match:"#PhrasalVerb (in && #Particle) #Determiner",tag:"#Verb #Preposition #Determiner",unTag:"PhrasalVerb",reason:"work-in-the"},{match:"[(stop|start|finish|help)] #Gerund",group:0,tag:"Infinitive",reason:"start-listening"},{match:"#Verb (him|her|it|us|himself|herself|itself|everything|something) [(up|down)]",group:0,tag:"Adverb",reason:"phrasal-pronoun-advb"}],[{match:"^do not? [#Infinitive #Particle?]",notIf:zF,group:0,tag:"Imperative",reason:"do-eat"},{match:"^please do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"please-go"},{match:"^just do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"just-go"},{match:"^[#Infinitive] it #Comparative",notIf:zF,group:0,tag:"Imperative",reason:"do-it-better"},{match:"^[#Infinitive] it (please|now|again|plz)",notIf:zF,group:0,tag:"Imperative",reason:"do-it-please"},{match:"^[#Infinitive] (#Adjective|#Adverb)$",group:0,tag:"Imperative",notIf:"(so|such|rather|enough)",reason:"go-quickly"},{match:"^[#Infinitive] (up|down|over) #Determiner",group:0,tag:"Imperative",reason:"turn-down"},{match:"^[#Infinitive] (your|my|the|a|an|any|each|every|some|more|with|on)",group:0,notIf:"like",tag:"Imperative",reason:"eat-my-shorts"},{match:"^[#Infinitive] (him|her|it|us|me|there)",group:0,tag:"Imperative",reason:"tell-him"},{match:"^[#Infinitive] #Adjective #Noun$",group:0,tag:"Imperative",reason:"avoid-loud-noises"},{match:"^[#Infinitive] (#Adjective|#Adverb)? and #Infinitive",group:0,tag:"Imperative",reason:"call-and-reserve"},{match:"^(go|stop|wait|hurry) please?$",tag:"Imperative",reason:"go"},{match:"^(somebody|everybody) [#Infinitive]",group:0,tag:"Imperative",reason:"somebody-call"},{match:"^let (us|me) [#Infinitive]",group:0,tag:"Imperative",reason:"lets-leave"},{match:"^[(shut|close|open|start|stop|end|keep)] #Determiner #Noun",group:0,tag:"Imperative",reason:"shut-the-door"},{match:"^[#PhrasalVerb #Particle] #Determiner #Noun",group:0,tag:"Imperative",reason:"turn-off-the-light"},{match:"^[go] to .",group:0,tag:"Imperative",reason:"go-to-toronto"},{match:"^#Modal you [#Infinitive]",group:0,tag:"Imperative",reason:"would-you-"},{match:"^never [#Infinitive]",group:0,tag:"Imperative",reason:"never-stop"},{match:"^come #Infinitive",tag:"Imperative",notIf:"on",reason:"come-have"},{match:"^come and? #Infinitive",tag:"Imperative . Imperative",notIf:"#PhrasalVerb",reason:"come-and-have"},{match:"^stay (out|away|back)",tag:"Imperative",reason:"stay-away"},{match:"^[(stay|be|keep)] #Adjective",group:0,tag:"Imperative",reason:"stay-cool"},{match:"^[keep it] #Adjective",group:0,tag:"Imperative",reason:"keep-it-cool"},{match:"^do not [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-be"},{match:"[#Infinitive] (yourself|yourselves)",group:0,tag:"Imperative",reason:"allow-yourself"},{match:"[#Infinitive] what .",group:0,tag:"Imperative",reason:"look-what"},{match:"^[#Infinitive] #Gerund",group:0,tag:"Imperative",reason:"keep-playing"},{match:"^[#Infinitive] (to|for|into|toward|here|there)",group:0,tag:"Imperative",reason:"go-to"},{match:"^[#Infinitive] (and|or) #Infinitive",group:0,tag:"Imperative",reason:"inf-and-inf"},{match:"^[%Noun|Verb%] to",group:0,tag:"Imperative",reason:"commit-to"},{match:"^[#Infinitive] #Adjective? #Singular #Singular",group:0,tag:"Imperative",reason:"maintain-eye-contact"},{match:"do not (forget|omit|neglect) to [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-forget"},{match:"^[(ask|wear|pay|look|help|show|watch|act|fix|kill|stop|start|turn|try|win)] #Noun",group:0,tag:"Imperative",reason:"pay-attention"}],[{match:"(that|which) were [%Adj|Gerund%]",group:0,tag:"Gerund",reason:"that-were-growing"},{match:"#Gerund [#Gerund] #Plural",group:0,tag:"Adjective",reason:"hard-working-fam"}],[{match:"u r",tag:"#Pronoun #Copula",reason:"u r"},{match:"#Noun [(who|whom)]",group:0,tag:"Determiner",reason:"captain-who"},{match:"[had] #Noun+ #PastTense",group:0,tag:"Condition",reason:"had-he"},{match:"[were] #Noun+ to #Infinitive",group:0,tag:"Condition",reason:"were-he"},{match:"some sort of",tag:"Adjective Noun Conjunction",reason:"some-sort-of"},{match:"of some sort",tag:"Conjunction Adjective Noun",reason:"of-some-sort"},{match:"[such] (a|an|is)? #Noun",group:0,tag:"Determiner",reason:"such-skill"},{match:"[right] (before|after|in|into|to|toward)",group:0,tag:"#Adverb",reason:"right-into"},{match:"#Preposition [about]",group:0,tag:"Adjective",reason:"at-about"},{match:"(are|#Modal|see|do|for) [ya]",group:0,tag:"Pronoun",reason:"are-ya"},{match:"[long live] .",group:0,tag:"#Adjective #Infinitive",reason:"long-live"},{match:"[plenty] of",group:0,tag:"#Uncountable",reason:"plenty-of"},{match:"(always|nearly|barely|practically) [there]",group:0,tag:"Adjective",reason:"always-there"},{match:"[there] (#Adverb|#Pronoun)? #Copula",group:0,tag:"There",reason:"there-is"},{match:"#Copula [there] .",group:0,tag:"There",reason:"is-there"},{match:"#Modal #Adverb? [there]",group:0,tag:"There",reason:"should-there"},{match:"^[do] (you|we|they)",group:0,tag:"QuestionWord",reason:"do-you"},{match:"^[does] (he|she|it|#ProperNoun)",group:0,tag:"QuestionWord",reason:"does-he"},{match:"#Determiner #Noun+ [who] #Verb",group:0,tag:"Preposition",reason:"the-x-who"},{match:"#Determiner #Noun+ [which] #Verb",group:0,tag:"Preposition",reason:"the-x-which"},{match:"a [while]",group:0,tag:"Noun",reason:"a-while"},{match:"guess who",tag:"#Infinitive #QuestionWord",reason:"guess-who"},{match:"[fucking] !#Verb",group:0,tag:"#Gerund",reason:"f-as-gerund"}],[{match:"university of #Place",tag:"Organization",reason:"university-of-Foo"},{match:"#Noun (&|n) #Noun",tag:"Organization",reason:"Noun-&-Noun"},{match:"#Organization of the? #ProperNoun",tag:"Organization",reason:"org-of-place",safe:!0},{match:"#Organization #Country",tag:"Organization",reason:"org-country"},{match:"#ProperNoun #Organization",tag:"Organization",notIf:"#FirstName",reason:"titlecase-org"},{match:"#ProperNoun (ltd|co|inc|dept|assn|bros)",tag:"Organization",reason:"org-abbrv"},{match:"the [#Acronym]",group:0,tag:"Organization",reason:"the-acronym",safe:!0},{match:"government of the? [#Place+]",tag:"Organization",reason:"government-of-x"},{match:"(health|school|commerce) board",tag:"Organization",reason:"school-board"},{match:"(nominating|special|conference|executive|steering|central|congressional) committee",tag:"Organization",reason:"special-comittee"},{match:"(world|global|international|national|#Demonym) #Organization",tag:"Organization",reason:"global-org"},{match:"#Noun+ (public|private) school",tag:"School",reason:"noun-public-school"},{match:"#Place+ #SportsTeam",tag:"SportsTeam",reason:"place-sportsteam"},{match:"(dc|atlanta|minnesota|manchester|newcastle|sheffield) united",tag:"SportsTeam",reason:"united-sportsteam"},{match:"#Place+ fc",tag:"SportsTeam",reason:"fc-sportsteam"}],[{match:"(west|north|south|east|western|northern|southern|eastern)+ #Place",tag:"Region",reason:"west-norfolk"},{match:"#City [(al|ak|az|ar|ca|ct|dc|fl|ga|id|il|nv|nh|nj|ny|oh|pa|sc|tn|tx|ut|vt|pr)]",group:0,tag:"Region",reason:"us-state"},{match:"portland [or]",group:0,tag:"Region",reason:"portland-or"},{match:"#ProperNoun+ (cliff|place|range|pit|place|point|room|grounds|ruins)",tag:"Place",reason:"foo-point"},{match:"in [#ProperNoun] #Place",group:0,tag:"Place",reason:"propernoun-place"},{match:"#Value #Noun (st|street|rd|road|crescent|cr|way|tr|terrace|avenue|ave)",tag:"Address",reason:"address-st"}],[{match:"[so] #Noun",group:0,tag:"Conjunction",reason:"so-conj"},{match:"[(who|what|where|why|how|when)] #Noun #Copula #Adverb? (#Verb|#Adjective)",group:0,tag:"Conjunction",reason:"how-he-is-x"},{match:"#Copula [(who|what|where|why|how|when)] #Noun",group:0,tag:"Conjunction",reason:"when-he"},{match:"#Verb [that] #Pronoun",group:0,tag:"Conjunction",reason:"said-that-he"},{match:"#Noun [that] #Copula",group:0,tag:"Conjunction",reason:"that-are"},{match:"#Noun [that] #Verb #Adjective",group:0,tag:"Conjunction",reason:"that-seem"},{match:"#Noun #Copula not? [that] #Adjective",group:0,tag:"Adverb",reason:"that-adj"},{match:"#Verb #Adverb? #Noun [(that|which)]",group:0,tag:"Preposition",reason:"that-prep"},{match:"@hasComma [which] (#Pronoun|#Verb)",group:0,tag:"Preposition",reason:"which-copula"},{match:"#Noun [like] #Noun",group:0,tag:"Preposition",reason:"noun-like"},{match:"^[like] #Determiner",group:0,tag:"Preposition",reason:"like-the"},{match:"a #Noun [like] (#Noun|#Determiner)",group:0,tag:"Preposition",reason:"a-noun-like"},{match:"#Adverb [like]",group:0,tag:"Verb",reason:"really-like"},{match:"(not|nothing|never) [like]",group:0,tag:"Preposition",reason:"nothing-like"},{match:"#Infinitive #Pronoun [like]",group:0,tag:"Preposition",reason:"treat-them-like"},{match:"[#QuestionWord] (#Pronoun|#Determiner)",group:0,tag:"Preposition",reason:"how-he"},{match:"[#QuestionWord] #Participle",group:0,tag:"Preposition",reason:"when-stolen"},{match:"[how] (#Determiner|#Copula|#Modal|#PastTense)",group:0,tag:"QuestionWord",reason:"how-is"},{match:"#Plural [(who|which|when)] .",group:0,tag:"Preposition",reason:"people-who"}],[{match:"holy (shit|fuck|hell)",tag:"Expression",reason:"swears-expression"},{match:"^[(well|so|okay|now)] !#Adjective?",group:0,tag:"Expression",reason:"well-"},{match:"^come on",tag:"Expression",reason:"come-on"},{match:"(say|says|said) [sorry]",group:0,tag:"Expression",reason:"say-sorry"},{match:"^(ok|alright|shoot|hell|anyways)",tag:"Expression",reason:"ok-"},{match:"^(say && @hasComma)",tag:"Expression",reason:"say-"},{match:"^(like && @hasComma)",tag:"Expression",reason:"like-"},{match:"^[(dude|man|girl)] #Pronoun",group:0,tag:"Expression",reason:"dude-i"}])}};let GF=null;const DBe={postTagger:function(t){const{world:e}=t,{model:n,methods:r}=e;GF=GF||r.one.buildNet(n.two.matches,e);let s=r.two.quickSplit(t.document).map(a=>{let u=a[0];return[u.index[0],u.index[1],u.index[1]+a.length]}),o=t.update(s);return o.cache(),o.sweep(GF),t.uncache(),t.unfreeze(),t},tagger:t=>t.compute(["freeze","lexicon","preTagger","postTagger","unfreeze"])},kBe={api:function PBe(t){t.prototype.confidence=function(){let e=0,n=0;return this.docs.forEach(r=>{r.forEach(i=>{n+=1,e+=i.confidence||1})}),0===n?1:(t=>Math.round(100*t)/100)(e/n)},t.prototype.tagger=function(){return this.compute(["tagger"])}},compute:DBe,model:SBe,hooks:["postTagger"]},OBe={lib:{lazy:function(t,e){let n=e;"string"==typeof e&&(n=this.buildNet([{match:e}]));let r=this.tokenize(t),i=function(t,e){let n=function(t){return Object.keys(t.hooks).filter(e=>!e.startsWith("#")&&!e.startsWith("%"))}(e);if(0===n.length)return t;t._cache||t.cache();let r=t._cache;return t.filter((i,s)=>n.some(o=>r[s].has(o)))}(r,n);return i.found?(i.compute(["index","tagger"]),i.match(e)):r.none()}}},jBe=function(t,e,n){let r=t.split(/ /g).map(s=>s.toLowerCase().trim());r=r.filter(s=>s),r=r.map(s=>`{${s}}`).join(" ");let i=this.match(r);return n&&(i=i.if(n)),i.has("#Verb")?function(t,e){let n=e;return t.forEach(r=>{r.has("#Infinitive")||(n=function(t,e){let r=(0,t.methods.two.transform.verb.conjugate)(e,t.model);return t.has("#Gerund")?r.Gerund:t.has("#PastTense")?r.PastTense:t.has("#PresentTense")?r.PresentTense:t.has("#Gerund")?r.Gerund:e}(r,e)),r.replaceWith(n)}),t}(i,e):i.has("#Noun")?function(t,e){let n=e;t.has("#Plural")&&(n=(0,t.methods.two.transform.noun.toPlural)(e,t.model)),t.replaceWith(n,{possessives:!0})}(i,e):i.has("#Adverb")?function(t,e){const{toAdverb:n}=t.methods.two.transform.adjective;let i=n(e);i&&t.replaceWith(i)}(i,e):i.has("#Adjective")?function(t,e){const{toComparative:n,toSuperlative:r}=t.methods.two.transform.adjective;let i=e;t.has("#Comparative")?i=n(i,t.model):t.has("#Superlative")&&(i=r(i,t.model)),i&&t.replaceWith(i)}(i,e):this},BBe={api:function(t){t.prototype.swap=jBe}};Ty.plugin(Ije),Ty.plugin(Xje),Ty.plugin(kBe),Ty.plugin(OBe),Ty.plugin(BBe);const Jo=Ty,Ny=function(t){const{fromComparative:e,fromSuperlative:n}=t.methods.two.transform.adjective;let r=t.text("normal");return t.has("#Comparative")?e(r,t.model):t.has("#Superlative")?n(r,t.model):r},UBe={api:function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Adjectives"}json(r={}){const{toAdverb:i,toNoun:s,toSuperlative:o,toComparative:a}=this.methods.two.transform.adjective;return r.normal=!0,this.map(u=>{let l=u.toView().json(r)[0]||{},c=Ny(u);return l.adjective={adverb:i(c,this.model),noun:s(c,this.model),superlative:o(c,this.model),comparative:a(c,this.model)},l},[])}adverbs(){return this.before("#Adverb+$").concat(this.after("^#Adverb+"))}conjugate(r){const{toComparative:i,toSuperlative:s,toNoun:o,toAdverb:a}=this.methods.two.transform.adjective;return this.getNth(r).map(u=>{let l=Ny(u);return{Adjective:l,Comparative:i(l,this.model),Superlative:s(l,this.model),Noun:o(l,this.model),Adverb:a(l,this.model)}},[])}toComparative(r){const{toComparative:i}=this.methods.two.transform.adjective;return this.getNth(r).map(s=>{let o=Ny(s),a=i(o,this.model);return s.replaceWith(a)})}toSuperlative(r){const{toSuperlative:i}=this.methods.two.transform.adjective;return this.getNth(r).map(s=>{let o=Ny(s),a=i(o,this.model);return s.replaceWith(a)})}toAdverb(r){const{toAdverb:i}=this.methods.two.transform.adjective;return this.getNth(r).map(s=>{let o=Ny(s),a=i(o,this.model);return s.replaceWith(a)})}toNoun(r){const{toNoun:i}=this.methods.two.transform.adjective;return this.getNth(r).map(s=>{let o=Ny(s),a=i(o,this.model);return s.replaceWith(a)})}}t.prototype.adjectives=function(n){let r=this.match("#Adjective");return r=r.getNth(n),new e(r.document,r.pointer)},t.prototype.superlatives=function(n){let r=this.match("#Superlative");return r=r.getNth(n),new e(r.document,r.pointer)},t.prototype.comparatives=function(n){let r=this.match("#Comparative");return r=r.getNth(n),new e(r.document,r.pointer)}}},KBe=function(t){let e=this;e=function(t){let e=t.parentheses();return e=e.filter(n=>n.wordCount()>=3&&n.has("#Verb")&&n.has("#Noun")),t.splitOn(e)}(e),e=function(t){let e=t.quotations();return e=e.filter(n=>n.wordCount()>=3&&n.has("#Verb")&&n.has("#Noun")),t.splitOn(e)}(e),e=function(t){let e=t.match("@hasComma");return e=e.filter(n=>{if(1===n.growLeft(".").wordCount()||1===n.growRight(". .").wordCount())return!1;let r=n.grow(".");return r=r.ifNo("@hasComma @hasComma"),r=r.ifNo("@hasComma (and|or) ."),r=r.ifNo("(#City && @hasComma) #Country"),r=r.ifNo("(#WeekDay && @hasComma) #Date"),r=r.ifNo("(#Date+ && @hasComma) #Value"),r=r.ifNo("(#Adjective && @hasComma) #Adjective"),r.found}),t.splitAfter(e)}(e),e=e.splitAfter("(@hasEllipses|@hasSemicolon|@hasDash|@hasColon)"),e=e.splitAfter("^#Pronoun (said|says)"),e=e.splitBefore("(said|says) #ProperNoun$"),e=e.splitBefore(". . if .{4}"),e=e.splitBefore("and while"),e=e.splitBefore("now that"),e=e.splitBefore("ever since"),e=e.splitBefore("(supposing|although)"),e=e.splitBefore("even (while|if|though)"),e=e.splitBefore("(whereas|whose)"),e=e.splitBefore("as (though|if)"),e=e.splitBefore("(til|until)");let n=e.match("#Verb .* [but] .* #Verb",0);n.found&&(e=e.splitBefore(n));let r=e.if("if .{2,9} then .").match("then");return e=e.splitBefore(r),"number"==typeof t&&(e=e.get(t)),e},RY={this:"Noun",then:"Pivot"},ZBe=[{match:"[that] #Determiner #Noun",group:0,chunk:"Pivot"},{match:"#PastTense [that]",group:0,chunk:"Pivot"},{match:"[so] #Determiner",group:0,chunk:"Pivot"},{match:"#Copula #Adverb+? [#Adjective]",group:0,chunk:"Adjective"},{match:"#Adjective and #Adjective",chunk:"Adjective"},{match:"#Adverb+ and #Adverb #Verb",chunk:"Verb"},{match:"#Gerund #Adjective$",chunk:"Verb"},{match:"#Gerund to #Verb",chunk:"Verb"},{match:"#PresentTense and #PresentTense",chunk:"Verb"},{match:"#Adverb #Negative",chunk:"Verb"},{match:"(want|wants|wanted) to #Infinitive",chunk:"Verb"},{match:"#Verb #Reflexive",chunk:"Verb"},{match:"#Verb [to] #Adverb? #Infinitive",group:0,chunk:"Verb"},{match:"[#Preposition] #Gerund",group:0,chunk:"Verb"},{match:"#Infinitive [that] <Noun>",group:0,chunk:"Verb"},{match:"#Noun of #Determiner? #Noun",chunk:"Noun"},{match:"#Value+ #Adverb? #Adjective",chunk:"Noun"},{match:"the [#Adjective] #Noun",chunk:"Noun"},{match:"#Singular in #Determiner? #Singular",chunk:"Noun"},{match:"#Plural [in] #Determiner? #Noun",group:0,chunk:"Pivot"},{match:"#Noun and #Determiner? #Noun",notIf:"(#Possessive|#Pronoun)",chunk:"Noun"}];let qF=null;const WF=function(t,e){if((typeof process>"u"||!process.env?self.env||{}:process.env).DEBUG_CHUNKS){let r=(t.normal+"'").padEnd(8);console.log(`  | '${r}  \u2192  \x1b[34m${e.padEnd(12)}\x1b[0m \x1b[2m -fallback- \x1b[0m`)}t.chunk=e},rUe={compute:{chunks:function(t){const{document:e,world:n}=t;(function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];!0!==RY.hasOwnProperty(r.normal)?r.tags.has("Verb")?r.chunk="Verb":r.tags.has("Noun")||r.tags.has("Determiner")||r.tags.has("Value")?r.chunk="Noun":r.tags.has("QuestionWord")&&(r.chunk="Pivot"):r.chunk=RY[r.normal]}})(e),function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];if(r.chunk)continue;let i=t[e][n+1],s=t[e][n-1];if(r.tags.has("Adjective")){if(s&&s.tags.has("Copula")){r.chunk="Adjective";continue}if(s&&s.tags.has("Determiner")){r.chunk="Noun";continue}if(i&&i.tags.has("Noun")){r.chunk="Noun";continue}}else if(r.tags.has("Adverb")||r.tags.has("Negative")){if(s&&s.tags.has("Adjective")){r.chunk="Adjective";continue}if(s&&s.tags.has("Verb")){r.chunk="Verb";continue}if(i&&i.tags.has("Adjective")){r.chunk="Adjective";continue}if(i&&i.tags.has("Verb")){r.chunk="Verb";continue}}}}(e),function(t,e,n){const{methods:r}=n;qF=qF||r.one.buildNet(ZBe,n),t.sweep(qF)}(t,0,n),function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];void 0===r.chunk&&(r.tags.has("Conjunction")||r.tags.has("Preposition")?WF(r,"Pivot"):r.tags.has("Adverb")?WF(r,"Verb"):r.chunk="Noun")}}(e),function(t){let e=[],n=null;t.forEach(r=>{for(let i=0;i<r.length;i+=1){let s=r[i];n&&s.chunk===n?e[e.length-1].terms.push(s):(e.push({chunk:s.chunk,terms:[s]}),n=s.chunk)}}),e.forEach(r=>{"Verb"===r.chunk&&(r.terms.find(s=>s.tags.has("Verb"))||r.terms.forEach(s=>s.chunk=null))})}(e)}},api:function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Chunks"}isVerb(){return this.filter(r=>r.has("<Verb>"))}isNoun(){return this.filter(r=>r.has("<Noun>"))}isAdjective(){return this.filter(r=>r.has("<Adjective>"))}isPivot(){return this.filter(r=>r.has("<Pivot>"))}debug(){return this.toView().debug("chunks"),this}update(r){let i=new e(this.document,r);return i._cache=this._cache,i}}t.prototype.chunks=function(n){let r=function(t){let e=[],n=null;return t.clauses().docs.forEach(s=>{s.forEach(o=>{o.chunk&&o.chunk===n?e[e.length-1][2]=o.index[1]+1:(n=o.chunk,e.push([o.index[0],o.index[1],o.index[1]+1]))}),n=null}),t.update(e)}(this);return r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.clauses=KBe},hooks:["chunks"]},AS=/\./g,OY=/\(/,MY=/\)/,sUe=function(t,e){for(;e<t.length;e+=1)if(t[e].post&&MY.test(t[e].post)){let[,n]=t[e].index;return n=n||0,n}return null},FY=/'s$/,CS={'"':'"',"\uff02":"\uff02","'":"'","\u201c":"\u201d","\u2018":"\u2019","\u201f":"\u201d","\u201b":"\u2019","\u201e":"\u201d","\u2e42":"\u201d","\u201a":"\u2019","\xab":"\xbb","\u2039":"\u203a","\u2035":"\u2032","\u2036":"\u2033","\u2037":"\u2034","\u301d":"\u301e","`":"\xb4","\u301f":"\u301e"},KF=RegExp("["+Object.keys(CS).join("")+"]"),dUe=RegExp("["+Object.values(CS).join("")+"]"),hUe=function(t,e){const n=t[e].pre.match(KF)[0]||"";if(!n||!CS[n])return null;const r=CS[n];for(;e<t.length;e+=1)if(t[e].post&&t[e].post.match(r))return e;return null},gUe=function(t){let e=this.splitAfter("@hasComma");return e=e.match("#PhoneNumber+"),e=e.getNth(t),e},yUe=[["hyphenated","@hasHyphen ."],["hashTags","#HashTag"],["emails","#Email"],["emoji","#Emoji"],["emoticons","#Emoticon"],["atMentions","#AtMention"],["urls","#Url"],["conjunctions","#Conjunction"],["prepositions","#Preposition"],["abbreviations","#Abbreviation"],["honorifics","#Honorific"]];let _Ue=[["emojis","emoji"],["atmentions","atMentions"]];const bUe={api:function(t){(function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Acronyms"}strip(){return this.docs.forEach(r=>{r.forEach(i=>{i.text=i.text.replace(AS,""),i.normal=i.normal.replace(AS,"")})}),this}addPeriods(){return this.docs.forEach(r=>{r.forEach(i=>{i.text=i.text.replace(AS,""),i.normal=i.normal.replace(AS,""),i.text=i.text.split("").join(".")+".",i.normal=i.normal.split("").join(".")+"."})}),this}}t.prototype.acronyms=function(n){let r=this.match("#Acronym");return r=r.getNth(n),new e(r.document,r.pointer)}})(t),function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Possessives"}strip(){return function(t){return t.docs.forEach(e=>{e[0].pre=e[0].pre.replace(OY,"");let n=e[e.length-1];n.post=n.post.replace(MY,"")}),t}(this)}}t.prototype.parentheses=function(n){let r=function(t){let e=[];return t.docs.forEach(n=>{for(let i=0;i<n.length;i+=1){let s=n[i];if(s.pre&&OY.test(s.pre)){let o=sUe(n,i);if(null!==o){let[a,u]=n[i].index;e.push([a,u,o+1,n[i].id]),i=o}}}}),t.update(e)}(this);return r=r.getNth(n),new e(r.document,r.pointer)}}(t),function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Possessives"}strip(){return this.docs.forEach(r=>{r.forEach(i=>{i.text=i.text.replace(FY,""),i.normal=i.normal.replace(FY,"")})}),this}}t.prototype.possessives=function(n){let r=function(t){let e=t.match("#Possessive+");return e.has("#Person")&&(e=e.growLeft("#Person+")),e.has("#Place")&&(e=e.growLeft("#Place+")),e.has("#Organization")&&(e=e.growLeft("#Organization+")),e}(this);return r=r.getNth(n),new e(r.document,r.pointer)}}(t),function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Possessives"}strip(){return function(t){t.docs.forEach(e=>{e[0].pre=e[0].pre.replace(KF,"");let n=e[e.length-1];n.post=n.post.replace(dUe,"")})}(this)}}t.prototype.quotations=function(n){let r=function(t){let e=[];return t.docs.forEach(n=>{for(let i=0;i<n.length;i+=1){let s=n[i];if(s.pre&&KF.test(s.pre)){let o=hUe(n,i);if(null!==o){let[a,u]=n[i].index;e.push([a,u,o+1,n[i].id]),i=o}}}}),t.update(e)}(this);return r=r.getNth(n),new e(r.document,r.pointer)}}(t),function(t){yUe.forEach(e=>{t.prototype[e[0]]=function(n){let r=this.match(e[1]);return"number"==typeof n?r.get(n):r}}),t.prototype.phoneNumbers=gUe,_Ue.forEach(e=>{t.prototype[e[0]]=t.prototype[e[1]]})}(t)}},SS=function(t,e){t.docs.forEach(n=>{n.forEach(e)})},VY={case:t=>{SS(t,e=>{e.text=e.text.toLowerCase()})},unicode:t=>{const e=t.world,n=e.methods.one.killUnicode;SS(t,r=>r.text=n(r.text,e))},whitespace:t=>{SS(t,e=>{e.post=e.post.replace(/\s+/g," "),e.post=e.post.replace(/\s([.,?!:;])/g,"$1"),e.pre=e.pre.replace(/\s+/g,"")})},punctuation:t=>{SS(t,r=>{r.post=r.post.replace(/[\u2013\u2014-]/g," "),r.post=r.post.replace(/[,:;]/g,""),r.post=r.post.replace(/\.{2,}/g,""),r.post=r.post.replace(/\?{2,}/g,"?"),r.post=r.post.replace(/!{2,}/g,"!"),r.post=r.post.replace(/\?!+/g,"?")});let e=t.docs,n=e[e.length-1];if(n&&n.length>0){let r=n[n.length-1];r.post=r.post.replace(/ /g,"")}},contractions:t=>{t.contractions().expand()},acronyms:t=>{t.acronyms().strip()},parentheses:t=>{t.parentheses().strip()},possessives:t=>{t.possessives().strip()},quotations:t=>{t.quotations().strip()},emoji:t=>{t.emojis().remove()},honorifics:t=>{t.match("#Honorific+ #Person").honorifics().remove()},adverbs:t=>{t.adverbs().remove()},nouns:t=>{t.nouns().toSingular()},verbs:t=>{t.verbs().toInfinitive()},numbers:t=>{t.numbers().toNumber()},debullet:t=>{const e=/^\s*([-\u2013\u2014*\u2022])\s*$/;return t.docs.forEach(n=>{e.test(n[0].pre)&&(n[0].pre=n[0].pre.replace(e,""))}),t}},QF=t=>t.split("|").reduce((e,n)=>(e[n]=!0,e),{}),JF="unicode|punctuation|whitespace|acronyms",LY="|case|contractions|parentheses|quotations|emoji|honorifics|debullet",wUe={light:QF(JF),medium:QF(JF+LY),heavy:QF(JF+LY+"|possessives|adverbs|nouns|verbs")},TUe={api:function EUe(t){t.prototype.normalize=function(e="light"){return"string"==typeof e&&(e=wUe[e]),Object.keys(e).forEach(n=>{VY.hasOwnProperty(n)&&VY[n](this,e[n])}),this}}},$Y=["after","although","as if","as long as","as","because","before","even if","even though","ever since","if","in order that","provided that","since","so that","than","that","though","unless","until","what","whatever","when","whenever","where","whereas","wherever","whether","which","whichever","who","whoever","whom","whomever","whose"],AUe=function(t){if(t.before("#Preposition$").found)return!0;if(!t.before().found)return!1;for(let n=0;n<$Y.length;n+=1)if(t.has($Y[n]))return!0;return!1},SUe=function(t,e){if(t.has("#Plural")||t.has("#Noun and #Noun")||t.has("(we|they)"))return!0;if(!0===e.has("(#Pronoun|#Place|#Value|#Person|#Uncountable|#Month|#WeekDay|#Holiday|#Possessive)")||t.has("#Singular"))return!1;let n=e.text("normal");return n.length>3&&n.endsWith("s")&&!n.endsWith("ss")},sh=function(t){let e=function(t){let e=t.clone();return e=e.match("#Noun+"),e=e.remove("(#Adjective|#Preposition|#Determiner|#Value)"),e=e.not("#Possessive"),e=e.first(),e.found?e:t}(t);return{determiner:t.match("#Determiner").eq(0),adjectives:t.match("#Adjective"),number:t.values(),isPlural:SUe(t,e),isSubordinate:AUe(t),root:e}},jY=t=>t.text(),NUe=t=>t.json({terms:!1,normal:!0}).map(e=>e.normal),PUe=function(t){if(!t.found)return null;let n=t.values(0);return n.found?(n.parse()[0]||{}).num:null},BY=function(t){return!t.has("^(#Uncountable|#ProperNoun|#Place|#Pronoun|#Acronym)+$")},xUe={tags:!0},OUe={tags:!0},FUe={api:function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Nouns"}parse(r){return this.getNth(r).map(sh)}json(r){let i="object"==typeof r?r:{};return this.getNth(r).map(s=>{let o=s.toView().json(i)[0]||{};return i&&!1!==i.noun&&(o.noun=function(t){let e=sh(t);return{root:jY(e.root),number:PUe(e.number),determiner:jY(e.determiner),adjectives:NUe(e.adjectives),isPlural:e.isPlural,isSubordinate:e.isSubordinate}}(s)),o},[])}conjugate(r){const i=this.world.methods.two.transform.noun;return this.getNth(r).map(s=>{let o=sh(s),a=o.root.compute("root").text("root"),u={Singular:a};return BY(o.root)&&(u.Plural=i.toPlural(a,this.model)),u.Singular===u.Plural&&delete u.Plural,u},[])}isPlural(r){return this.filter(s=>sh(s).isPlural).getNth(r)}isSingular(r){return this.filter(s=>!sh(s).isPlural).getNth(r)}adjectives(r){let i=this.update([]);return this.forEach(s=>{let o=sh(s).adjectives;o.found&&(i=i.concat(o))}),i.getNth(r)}toPlural(r){return this.getNth(r).map(i=>function(t,e){if(!0===e.isPlural||(e.root.has("#Possessive")&&(e.root=e.root.possessives().strip()),!BY(e.root)))return t;const{methods:n,model:r}=t.world,{toPlural:i}=n.two.transform.noun;let o=i(e.root.text({keepPunct:!1}),r);t.match(e.root).replaceWith(o,xUe).tag("Plural","toPlural"),e.determiner.has("(a|an)")&&t.remove(e.determiner);let a=e.root.after("not? #Adverb+? [#Copula]",0);return a.found&&(a.has("is")?t.replace(a,"are"):a.has("was")&&t.replace(a,"were")),t}(i,sh(i)))}toSingular(r){return this.getNth(r).map(i=>function(t,e){if(!1===e.isPlural)return t;const{methods:n,model:r}=t.world,{toSingular:i}=n.two.transform.noun;let o=i(e.root.text("normal"),r);return t.replace(e.root,o,OUe).tag("Singular","toPlural"),t}(i,sh(i)))}update(r){let i=new e(this.document,r);return i._cache=this._cache,i}}t.prototype.nouns=function(n){let r=function(t){let e=t.clauses().match("<Noun>"),n=e.match("@hasComma");return n=n.not("#Place"),n.found&&(e=e.splitAfter(n)),e=e.splitOn("#Expression"),e=e.splitOn("(he|she|we|you|they|i)"),e=e.splitOn("(#Noun|#Adjective) [(he|him|she|it)]",0),e=e.splitOn("[(he|him|she|it)] (#Determiner|#Value)",0),e=e.splitBefore("#Noun [(the|a|an)] #Adjective? #Noun",0),e=e.splitOn("[(here|there)] #Noun",0),e=e.splitOn("[#Noun] (here|there)",0),e=e.splitBefore("(our|my|their|your)"),e=e.splitOn("#Noun [#Determiner]",0),e=e.if("#Noun"),e}(this);return r=r.getNth(n),new e(this.document,r.pointer)}}},wi={ones:{zeroth:0,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},teens:{tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19},tens:{twentieth:20,thirtieth:30,fortieth:40,fourtieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},multiples:{hundredth:100,thousandth:1e3,millionth:1e6,billionth:1e9,trillionth:1e12,quadrillionth:1e15,quintillionth:1e18,sextillionth:1e21,septillionth:1e24,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18,sextillion:1e21,septillion:1e24,grand:1e3}},$Ue=(t,e)=>{if(wi.ones.hasOwnProperty(t)){if(e.ones||e.teens)return!1}else if(wi.teens.hasOwnProperty(t)){if(e.ones||e.teens||e.tens)return!1}else if(wi.tens.hasOwnProperty(t)&&(e.ones||e.teens||e.tens))return!1;return!0},jUe=function(t){let e="0.";for(let n=0;n<t.length;n++){let r=t[n];if(!0===wi.ones.hasOwnProperty(r))e+=wi.ones[r];else if(!0===wi.teens.hasOwnProperty(r))e+=wi.teens[r];else if(!0===wi.tens.hasOwnProperty(r))e+=wi.tens[r];else{if(!0!==/^[0-9]$/.test(r))return 0;e+=r}}return parseFloat(e)},BUe=t=>(t=(t=(t=(t=(t=(t=(t=t.replace(/1st$/,"1")).replace(/2nd$/,"2")).replace(/3rd$/,"3")).replace(/([4567890])r?th$/,"$1")).replace(/^[$\u20ac\xa5\xa3\xa2]/,"")).replace(/[%$\u20ac\xa5\xa3\xa2]$/,"")).replace(/,/g,"")).replace(/([0-9])([a-z\u00C0-\u00FF]{1,2})$/,"$1"),UUe=/^([0-9,. ]+)\/([0-9,. ]+)$/,UY={"a few":3,"a couple":2,"a dozen":12,"two dozen":24,zero:0},DS=t=>Object.keys(t).reduce((e,n)=>e+t[n],0),YF=function(t){if(!0===UY.hasOwnProperty(t))return UY[t];if("a"===t||"an"===t)return 1;const e=(t=>{const e=[{reg:/^(minus|negative)[\s-]/i,mult:-1},{reg:/^(a\s)?half[\s-](of\s)?/i,mult:.5}];for(let n=0;n<e.length;n++)if(!0===e[n].reg.test(t))return{amount:e[n].mult,str:t.replace(e[n].reg,"")};return{amount:1,str:t}})(t);let n=null,r={},i=0,s=!1;const o=(t=e.str).split(/[ -]/);for(let a=0;a<o.length;a++){let u=o[a];if(u=BUe(u),!u||"and"===u)continue;if("-"===u||"negative"===u){s=!0;continue}if("-"===u.charAt(0)&&(s=!0,u=u.substring(1)),"point"===u)return i+=DS(r),i+=jUe(o.slice(a+1,o.length)),i*=e.amount,i;const l=u.match(UUe);if(l){const c=parseFloat(l[1].replace(/[, ]/g,"")),h=parseFloat(l[2].replace(/[, ]/g,""));h&&(i+=c/h||0)}else{if(wi.tens.hasOwnProperty(u)&&r.ones&&1===Object.keys(r).length&&(i=100*r.ones,r={}),!1===$Ue(u,r))return null;if(/^[0-9.]+$/.test(u))r.ones=parseFloat(u);else if(!0===wi.ones.hasOwnProperty(u))r.ones=wi.ones[u];else if(!0===wi.teens.hasOwnProperty(u))r.teens=wi.teens[u];else if(!0===wi.tens.hasOwnProperty(u))r.tens=wi.tens[u];else if(!0===wi.multiples.hasOwnProperty(u)){let c=wi.multiples[u];if(c===n)return null;if(100===c&&void 0!==o[a+1]){const h=o[a+1];wi.multiples[h]&&(c*=wi.multiples[h],a+=1)}null===n||c<n?(i+=(DS(r)||1)*c,n=c,r={}):(i+=DS(r),n=c,i=(i||1)*c,r={})}}}return i+=DS(r),i*=e.amount,i*=s?-1:1,0===i&&0===Object.keys(r).length?null:i},HY=/s$/,Jb=function(t){let e=t.text("reduced");return YF(e)};let NS={half:2,halve:2,quarter:4};const Ac=function(t){let e=function(t){let e=t.text("reduced");return NS.hasOwnProperty(e)?{numerator:1,denominator:NS[e]}:null}(t=t.clone())||function(t){let n=t.text("reduced").match(/^([-+]?[0-9]+)\/([-+]?[0-9]+)(st|nd|rd|th)?s?$/);return n&&n[1]&&n[0]?{numerator:Number(n[1]),denominator:Number(n[2])}:null}(t)||function(t){let e=t.match("[<num>#Value+] out of every? [<den>#Value+]");if(!0!==e.found)return null;let{num:n,den:r}=e.groups();return n&&r&&(n=Jb(n),r=Jb(r),n&&r)&&"number"==typeof n&&"number"==typeof r?{numerator:n,denominator:r}:null}(t)||function(t){let e=t.match("[<num>(#Cardinal|a)+] [<den>#Fraction+]");if(!0!==e.found)return null;let{num:n,den:r}=e.groups();n=n.has("a")?1:Jb(n);let i=r.text("reduced");return HY.test(i)&&(i=i.replace(HY,""),r=r.replaceWith(i)),r=NS.hasOwnProperty(i)?NS[i]:Jb(r),"number"==typeof n&&"number"==typeof r?{numerator:n,denominator:r}:null}(t)||function(t){let e=t.match("^#Ordinal$");return!0!==e.found?null:t.lookAhead("^of .")?{numerator:1,denominator:Jb(e)}:null}(t)||null;return null!==e&&e.numerator&&e.denominator&&(e.decimal=e.numerator/e.denominator,e.decimal=(t=>{let e=Math.round(1e3*t)/1e3;return 0===e&&0!==t?t:e})(e.decimal)),e},XF=function(t){if(t<1e6)return String(t);let e;return e="number"==typeof t?t.toFixed(0):t,-1===e.indexOf("e+")?e:e.replace(".","").split("e+").reduce(function(n,r){return n+Array(r-n.length+2).join(0)})},PS=[["ninety",90],["eighty",80],["seventy",70],["sixty",60],["fifty",50],["forty",40],["thirty",30],["twenty",20]],zY=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],QUe=[[1e24,"septillion"],[1e20,"hundred sextillion"],[1e21,"sextillion"],[1e20,"hundred quintillion"],[1e18,"quintillion"],[1e17,"hundred quadrillion"],[1e15,"quadrillion"],[1e14,"hundred trillion"],[1e12,"trillion"],[1e11,"hundred billion"],[1e9,"billion"],[1e8,"hundred million"],[1e6,"million"],[1e5,"hundred thousand"],[1e3,"thousand"],[100,"hundred"],[1,"one"]],YUe=function(t){let e=[];if(t>100)return e;for(let n=0;n<PS.length;n++)t>=PS[n][1]&&(t-=PS[n][1],e.push(PS[n][0]));return zY[t]&&e.push(zY[t]),e},Yb=function(t){let e=t.num;if(0===e||"0"===e)return"zero";e>1e21&&(e=XF(e));let n=[];e<0&&(n.push("minus"),e=Math.abs(e));let r=function(t){let e=t,n=[];return QUe.forEach(r=>{if(t>=r[0]){let i=Math.floor(e/r[0]);e-=i*r[0],i&&n.push({unit:r[1],count:i})}}),n}(e);for(let i=0;i<r.length;i++){let s=r[i].unit;"one"===s&&(s="",n.length>1&&n.push("and")),n=n.concat(YUe(r[i].count)),n.push(s)}return n=n.concat((t=>{const e=["zero","one","two","three","four","five","six","seven","eight","nine"];let n=[],i=XF(t).match(/\.([0-9]+)/);if(!i||!i[0])return n;n.push("point");let s=i[0].split("");for(let o=0;o<s.length;o++)n.push(e[s[o]]);return n})(e)),n=n.filter(i=>i),0===n.length&&(n[0]=""),n.join(" ")},GY={one:"first",two:"second",three:"third",five:"fifth",eight:"eighth",nine:"ninth",twelve:"twelfth",twenty:"twentieth",thirty:"thirtieth",forty:"fortieth",fourty:"fourtieth",fifty:"fiftieth",sixty:"sixtieth",seventy:"seventieth",eighty:"eightieth",ninety:"ninetieth"},qY=t=>{let e=Yb(t).split(" "),n=e[e.length-1];return e[e.length-1]=GY.hasOwnProperty(n)?GY[n]:n.replace(/y$/,"i")+"th",e.join(" ")},oh="twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty",ZF=function(t){let e=t.match("#Value+");if(e.has("#NumericValue #NumericValue")&&(e.has("#Value @hasComma #Value")?e.splitAfter("@hasComma"):e.has("#NumericValue #Fraction")?e.splitAfter("#NumericValue #Fraction"):e=e.splitAfter("#NumericValue")),e.has("#Value #Value #Value")&&!e.has("#Multiple")&&e.has("("+oh+") #Cardinal #Cardinal")&&(e=e.splitAfter("("+oh+") #Cardinal")),e.has("#Value #Value")){e.has("#NumericValue #NumericValue")&&(e=e.splitOn("#Year")),e.has("("+oh+") (eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen)")&&(e=e.splitAfter("("+oh+")"));let n=e.match("#Cardinal #Cardinal");if(n.found&&!e.has("(point|decimal|#Fraction)")&&!n.has("#Cardinal (#Multiple|point|decimal)")){let r=e.has(`(one|two|three|four|five|six|seven|eight|nine) (${oh})`),i=n.has("("+oh+") #Cardinal"),s=n.has("#Multiple #Value");!r&&!i&&!s&&n.terms().forEach(o=>{e=e.splitOn(o)})}e.match("#Ordinal #Ordinal").match("#TextValue").found&&!e.has("#Multiple")&&(e.has("("+oh+") #Ordinal")||(e=e.splitAfter("#Ordinal"))),e=e.splitBefore("#Ordinal [#Cardinal]",0),e.has("#TextValue #NumericValue")&&!e.has("("+oh+"|#Multiple)")&&(e=e.splitBefore("#TextValue #NumericValue"))}return e=e.splitAfter("#NumberRange"),e=e.splitBefore("#Year"),e},us=function(t){if("string"==typeof t)return{num:YF(t)};let e=t.text("reduced"),n=t.growRight("#Unit").match("#Unit$").text("machine"),r=/[0-9],[0-9]/.test(t.text("text"));if(1===t.terms().length&&!t.has("#Multiple")){let a=function(t,e){let n=(t=t.replace(/,/g,"")).split(/([0-9.,]*)/),[r,i]=n,s=n.slice(2).join("");return""!==i&&e.length<2?(i=Number(i||t),"number"!=typeof i&&(i=null),s=s||"",("st"===s||"nd"===s||"rd"===s||"th"===s)&&(s=""),{prefix:r||"",num:i,suffix:s}):null}(e,t);if(null!==a)return a.hasComma=r,a.unit=n,a}let i=t.match("#Fraction{2,}$");i=!1===i.found?t.match("^#Fraction$"):i;let s=null;i.found&&(i.has("#Value and #Value #Fraction")&&(i=i.match("and #Value #Fraction")),s=Ac(i),e=(t=(t=t.not(i)).not("and$")).text("reduced"));let o=0;return e&&(o=YF(e)||0),s&&s.decimal&&(o+=s.decimal),{hasComma:r,prefix:"",num:o,suffix:"",isOrdinal:t.has("#Ordinal"),isText:t.has("#TextValue"),isFraction:t.has("#Fraction"),isMoney:t.has("#Money"),unit:n}},WY={"\xa2":"cents",$:"dollars","\xa3":"pounds","\xa5":"yen","\u20ac":"euros","\u20a1":"col\xf3n","\u0e3f":"baht","\u20ad":"kip","\u20a9":"won","\u20b9":"rupees","\u20bd":"ruble","\u20ba":"liras"},KY={"%":"percent","\xb0":"degrees"},QY=function(t){let e={suffix:"",prefix:t.prefix};return WY.hasOwnProperty(t.prefix)&&(e.suffix+=" "+WY[t.prefix],e.prefix=""),KY.hasOwnProperty(t.suffix)&&(e.suffix+=" "+KY[t.suffix]),e.suffix&&1===t.num&&(e.suffix=e.suffix.replace(/s$/,"")),!e.suffix&&t.suffix&&(e.suffix+=" "+t.suffix),e},cp=function(t,e){if("TextOrdinal"===e){let{prefix:r,suffix:i}=QY(t);return r+qY(t)+i}if("Ordinal"===e)return t.prefix+function(t){let e=t.num;if(!e&&0!==e)return null;let n=e%100;if(n>10&&n<20)return String(e)+"th";const r={0:"th",1:"st",2:"nd",3:"rd"};let i=XF(e),s=i.slice(i.length-1,i.length);return i+=r[s]?r[s]:"th",i}(t)+t.suffix;if("TextCardinal"===e){let{prefix:r,suffix:i}=QY(t);return r+Yb(t)+i}let n=t.num;return t.hasComma&&(n=n.toLocaleString()),t.prefix+String(n)+t.suffix},l4e=function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Numbers"}parse(r){return this.getNth(r).map(us)}get(r){return this.getNth(r).map(us).map(i=>i.num)}json(r){let i="object"==typeof r?r:{};return this.getNth(r).map(s=>{let o=s.toView().json(i)[0],a=us(s);return o.number={prefix:a.prefix,num:a.num,suffix:a.suffix,hasComma:a.hasComma,unit:a.unit},o},[])}units(){return this.growRight("#Unit").match("#Unit$")}isUnit(r){return function(t,e={}){return e=function(t){if("string"==typeof t||"number"==typeof t){let e={};return e[t]=!0,e}return(t=>"[object Array]"===Object.prototype.toString.call(t))(t)?t.reduce((e,n)=>(e[n]=!0,e),{}):t||{}}(e),t.filter(n=>{let{unit:r}=us(n);return!(!r||!0!==e[r])})}(this,r)}isOrdinal(){return this.if("#Ordinal")}isCardinal(){return this.if("#Cardinal")}toNumber(){return this.if("#TextValue").forEach(i=>{let s=us(i);if(null===s.num)return;let o=i.has("#Ordinal")?"Ordinal":"Cardinal",a=cp(s,o);i.replaceWith(a,{tags:!0}),i.tag("NumericValue")}),this}toLocaleString(){return this.forEach(i=>{let s=us(i);if(null===s.num)return;let o=s.num.toLocaleString();if(i.has("#Ordinal")){let u=cp(s,"Ordinal").match(/[a-z]+$/);u&&(o+=u[0]||"")}i.replaceWith(o,{tags:!0})}),this}toText(){let i=this.map(s=>{if(s.has("#TextValue"))return s;let o=us(s);if(null===o.num)return s;let a=s.has("#Ordinal")?"TextOrdinal":"TextCardinal",u=cp(o,a);return s.replaceWith(u,{tags:!0}),s.tag("TextValue"),s});return new e(i.document,i.pointer)}toCardinal(){let i=this.map(s=>{if(!s.has("#Ordinal"))return s;let o=us(s);if(null===o.num)return s;let a=s.has("#TextValue")?"TextCardinal":"Cardinal",u=cp(o,a);return s.replaceWith(u,{tags:!0}),s.tag("Cardinal"),s});return new e(i.document,i.pointer)}toOrdinal(){let i=this.map(s=>{if(s.has("#Ordinal"))return s;let o=us(s);if(null===o.num)return s;let a=s.has("#TextValue")?"TextOrdinal":"Ordinal",u=cp(o,a);return s.replaceWith(u,{tags:!0}),s.tag("Ordinal"),s});return new e(i.document,i.pointer)}isEqual(r){return this.filter(i=>us(i).num===r)}greaterThan(r){return this.filter(i=>us(i).num>r)}lessThan(r){return this.filter(i=>us(i).num<r)}between(r,i){return this.filter(s=>{let o=us(s).num;return o>r&&o<i})}set(r){if(void 0===r)return this;"string"==typeof r&&(r=us(r).num);let s=this.map(o=>{let a=us(o);if(a.num=r,null===a.num)return o;let u=o.has("#Ordinal")?"Ordinal":"Cardinal";o.has("#TextValue")&&(u=o.has("#Ordinal")?"TextOrdinal":"TextCardinal");let l=cp(a,u);return a.hasComma&&"Cardinal"===u&&(l=Number(l).toLocaleString()),(o=o.not("#Currency")).replaceWith(l,{tags:!0}),o});return new e(s.document,s.pointer)}add(r){if(!r)return this;"string"==typeof r&&(r=us(r).num);let s=this.map(o=>{let a=us(o);if(null===a.num)return o;a.num+=r;let u=o.has("#Ordinal")?"Ordinal":"Cardinal";a.isText&&(u=o.has("#Ordinal")?"TextOrdinal":"TextCardinal");let l=cp(a,u);return o.replaceWith(l,{tags:!0}),o});return new e(s.document,s.pointer)}subtract(r,i){return this.add(-1*r,i)}increment(r){return this.add(1,r)}decrement(r){return this.add(-1,r)}update(r){let i=new e(this.document,r);return i._cache=this._cache,i}}e.prototype.toNice=e.prototype.toLocaleString,e.prototype.isBetween=e.prototype.between,e.prototype.minus=e.prototype.subtract,e.prototype.plus=e.prototype.add,e.prototype.equals=e.prototype.isEqual,t.prototype.numbers=function(n){let r=ZF(this);return r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.percentages=function(n){let r=ZF(this);return r=r.filter(i=>i.has("#Percent")||i.after("^percent")),r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.money=function(n){let r=ZF(this);return r=r.filter(i=>i.has("#Money")||i.after("^#Currency")),r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.values=t.prototype.numbers},c4e={api:function(t){(function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Fractions"}parse(r){return this.getNth(r).map(Ac)}get(r){return this.getNth(r).map(Ac)}json(r){return this.getNth(r).map(i=>{let s=i.toView().json(r)[0],o=Ac(i);return s.fraction=o,s},[])}toDecimal(r){return this.getNth(r).forEach(i=>{let{decimal:s}=Ac(i);(i=i.replaceWith(String(s),!0)).tag("NumericValue"),i.unTag("Fraction")}),this}toFraction(r){return this.getNth(r).forEach(i=>{let s=Ac(i);s&&"number"==typeof s.numerator&&"number"==typeof s.denominator&&this.replace(i,`${s.numerator}/${s.denominator}`)}),this}toOrdinal(r){return this.getNth(r).forEach(i=>{let o=function(t){if(!t.numerator||!t.denominator)return"";let e=Yb({num:t.numerator}),n=qY({num:t.denominator});return 2===t.denominator&&(n="half"),e&&n?(1!==t.numerator&&(n+="s"),`${e} ${n}`):""}(Ac(i));i.after("^#Noun").found&&(o+=" of"),i.replaceWith(o)}),this}toCardinal(r){return this.getNth(r).forEach(i=>{let o=function(t){return t.numerator&&t.denominator?`${Yb({num:t.numerator})} out of ${Yb({num:t.denominator})}`:""}(Ac(i));i.replaceWith(o)}),this}toPercentage(r){return this.getNth(r).forEach(i=>{let{decimal:s}=Ac(i),o=100*s;o=Math.round(100*o)/100,i.replaceWith(`${o}%`)}),this}}t.prototype.fractions=function(n){let r=function(t,e){let n=t.match("#Fraction+");return n=n.filter(r=>!r.lookBehind("#Value and$").found),n=n.notIf("#Value seconds"),n}(this);return r=r.getNth(n),new e(this.document,r.pointer)}})(t),l4e(t)}},d4e={people:!0,emails:!0,phoneNumbers:!0,places:!0},h4e=function(t={}){return!1!==(t=Object.assign({},d4e,t)).people&&this.people().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),!1!==t.emails&&this.emails().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),!1!==t.places&&this.places().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),!1!==t.phoneNumbers&&this.phoneNumbers().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),this},f4e={api:function(t){t.prototype.redact=h4e}},v4e=function(t){let e=null;return t.has("#PastTense")?e="PastTense":t.has("#FutureTense")?e="FutureTense":t.has("#PresentTense")&&(e="PresentTense"),{tense:e}},dp=function(t){let r=function(t){let e=t;return 1===e.length||(e=e.if("#Verb"),1===e.length)||(e=e.ifNo("(after|although|as|because|before|if|since|than|that|though|when|whenever|where|whereas|wherever|whether|while|why|unless|until|once)"),e=e.ifNo("^even (if|though)"),e=e.ifNo("^so that"),e=e.ifNo("^rather than"),e=e.ifNo("^provided that"),1===e.length)||(e=e.ifNo("(that|which|whichever|who|whoever|whom|whose|whomever)"),1===e.length)||(e=e.ifNo("(^despite|^during|^before|^through|^throughout)"),1===e.length)||(e=e.ifNo("^#Gerund"),1===e.length)?e:(0===e.length&&(e=t),e.eq(0))}(t.clauses()).chunks(),i=t.none(),s=t.none(),o=t.none();return r.forEach((a,u)=>{0!==u||a.has("<Verb>")?s.found||!a.has("<Verb>")?s.found&&(o=o.concat(a)):s=a:i=a}),s.found&&!i.found&&(i=s.before("<Noun>+").first()),{subj:i,verb:s,pred:o,grammar:v4e(s)}},C4e={api:function(t){class e extends t{constructor(i,s,o){super(i,s,o),this.viewType="Sentences"}json(i={}){return this.map(s=>{let o=s.toView().json(i)[0]||{},{subj:a,verb:u,pred:l,grammar:c}=dp(s);return o.sentence={subject:a.text("normal"),verb:u.text("normal"),predicate:l.text("normal"),grammar:c},o},[])}toPastTense(i){return this.getNth(i).map(s=>(dp(s),function(t){let e=t.verbs(),n=e.eq(0);if(n.has("#PastTense"))return t;if(n.toPastTense(),e.length>1){e=e.slice(1),e=e.filter(i=>!i.lookBehind("to$").found),e=e.if("#PresentTense"),e=e.notIf("#Gerund");let r=t.match("to #Verb+ #Conjunction #Verb").terms();e=e.not(r),e.found&&e.verbs().toPastTense()}return t}(s)))}toPresentTense(i){return this.getNth(i).map(s=>(dp(s),function(t){let e=t.verbs();return e.eq(0).toPresentTense(),e.length>1&&(e=e.slice(1),e=e.filter(r=>!r.lookBehind("to$").found),e=e.notIf("#Gerund"),e.found&&e.verbs().toPresentTense()),t}(s)))}toFutureTense(i){return this.getNth(i).map(s=>(dp(s),s=function(t){let e=t.verbs();if(e.eq(0).toFutureTense(),e=(t=t.fullSentence()).verbs(),e.length>1){e=e.slice(1);let r=e.filter(i=>!(i.lookBehind("to$").found||!i.has("#Copula #Gerund")&&(i.has("#Gerund")||!i.has("#Copula")&&i.has("#PresentTense")&&!i.has("#Infinitive")&&i.lookBefore("(he|she|it|that|which)$").found)));r.found&&r.forEach(i=>{if(i.has("#Copula"))return i.match("was").replaceWith("is"),void i.match("is").replaceWith("will be");i.toInfinitive()})}return t}(s),s))}toInfinitive(i){return this.getNth(i).map(s=>(dp(s),function(t){return t.verbs().toInfinitive(),t}(s)))}toNegative(i){return this.getNth(i).map(s=>(dp(s),function(t){return t.verbs().first().toNegative().compute("chunks"),t}(s)))}toPositive(i){return this.getNth(i).map(s=>(dp(s),function(t){return t.verbs().first().toPositive().compute("chunks"),t}(s)))}isQuestion(i){return this.questions(i)}isExclamation(i){return this.filter(o=>o.lastTerm().has("@hasExclamation")).getNth(i)}isStatement(i){return this.filter(o=>!o.isExclamation().found&&!o.isQuestion().found).getNth(i)}update(i){let s=new e(this.document,i);return s._cache=this._cache,s}}e.prototype.toPresent=e.prototype.toPresentTense,e.prototype.toPast=e.prototype.toPastTense,e.prototype.toFuture=e.prototype.toFutureTense;const n={sentences:function(r){let i=this.map(s=>s.fullSentence());return i=i.getNth(r),new e(this.document,i.pointer)},questions:function(r){return function(t){const e=/\?/,{document:n}=t;return t.filter(r=>{let i=r.docs[0]||[],s=i[i.length-1];return!(!s||n[s.index[0]].length!==i.length)&&(!!e.test(s.post)||function(t){let e=t.clauses();return!(/\.\.$/.test(t.out("text"))||t.has("^#QuestionWord")&&t.has("@hasComma")||!(t.has("or not$")||t.has("^#QuestionWord")||t.has("^(do|does|did|is|was|can|could|will|would|may) #Noun")||t.has("^(have|must) you")||e.has("(do|does|is|was) #Noun+ #Adverb? (#Adjective|#Infinitive)$")))}(r))})}(this).getNth(r)}};Object.assign(t.prototype,n)}},JY=function(t){let e={};e.firstName=t.match("#FirstName+"),e.lastName=t.match("#LastName+"),e.honorific=t.match("#Honorific+");let n=e.lastName,r=e.firstName;return(!r.found||!n.found)&&!r.found&&!n.found&&t.has("^#Honorific .$")&&(e.lastName=t.match(".$")),e},Pa="male",Js="female",YY={mr:Pa,mrs:Js,miss:Js,madam:Js,king:Pa,queen:Js,duke:Pa,duchess:Js,baron:Pa,baroness:Js,count:Pa,countess:Js,prince:Pa,princess:Js,sire:Pa,dame:Js,lady:Js,ayatullah:Pa,congressman:Pa,congresswoman:Js,"first lady":Js,mx:null},D4e=function(t,e){let{firstName:n,honorific:r}=t;if(n.has("#FemaleName"))return Js;if(n.has("#MaleName"))return Pa;if(r.found){let s=r.text("normal");if(s=s.replace(/\./g,""),YY.hasOwnProperty(s))return YY[s];if(/^her /.test(s))return Js;if(/^his /.test(s))return Pa}let i=e.after();if(!i.has("#Person")&&i.has("#Pronoun")){let s=i.match("#Pronoun");if(s.has("(they|their)"))return null;let o=s.has("(he|his)"),a=s.has("(she|her|hers)");if(o&&!a)return Pa;if(a&&!o)return Js}return null},R4e=function(t){let e=this.clauses(),n=e.people();return n=n.concat(e.places()),n=n.concat(e.organizations()),n=n.not("(someone|man|woman|mother|brother|sister|father)"),n=n.sort("seq"),n=n.getNth(t),n},M4e={api:function(t){(function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="People"}parse(r){return this.getNth(r).map(JY)}json(r){let i="object"==typeof r?r:{};return this.getNth(r).map(s=>{let o=s.toView().json(i)[0],a=JY(s);return o.person={firstName:a.firstName.text("normal"),lastName:a.lastName.text("normal"),honorific:a.honorific.text("normal"),presumed_gender:D4e(a,s)},o},[])}presumedMale(){return this.filter(r=>r.has("(#MaleName|mr|mister|sr|jr|king|pope|prince|sir)"))}presumedFemale(){return this.filter(r=>r.has("(#FemaleName|mrs|miss|queen|princess|madam)"))}update(r){let i=new e(this.document,r);return i._cache=this._cache,i}}t.prototype.people=function(n){let r=function(t){let e=t.match("#Honorific+? #Person+"),n=e.match("#Possessive").notIf("(his|her)");return e=e.splitAfter(n),e}(this);return r=r.getNth(n),new e(this.document,r.pointer)}})(t),function(t){t.prototype.places=function(e){let n=function(t){let e=t.match("(#Place|#Address)+"),n=e.match("@hasComma");return n=n.filter(r=>!!r.has("(asia|africa|europe|america)$")||!(r.has("(#City|#Region|#ProperNoun)$")&&r.after("^(#Country|#Region)").found)),e=e.splitAfter(n),e}(this);return n=n.getNth(e),new t(this.document,n.pointer)}}(t),function(t){t.prototype.organizations=function(e){return this.match("#Organization+").getNth(e)}}(t),function(t){t.prototype.topics=R4e}(t)}},L4e=function(t,e){let n={pre:t.none(),post:t.none()};if(!t.has("#Adverb"))return n;let r=t.splitOn(e);return 3===r.length?{pre:r.eq(0).adverbs(),post:r.eq(2).adverbs()}:r.eq(0).isDoc(e)?(n.post=r.eq(1).adverbs(),n):(n.pre=r.eq(0).adverbs(),n)},$4e=function(t,e){let n=t.splitBefore(e);if(n.length<=1)return t.none();let r=n.eq(0);return r=r.not("(#Adverb|#Negative|#Prefix)"),r},j4e=function(t){return t.match("#Negative")},B4e=function(t){if(!t.has("(#Particle|#PhrasalVerb)"))return{verb:t.none(),particle:t.none()};let e=t.match("#Particle$");return{verb:t.not(e),particle:e}},wu=function(t){let e=t.clone();e.contractions().expand();const n=function(t){let e=t;return t.wordCount()>1&&(e=t.not("(#Negative|#Auxiliary|#Modal|#Adverb|#Prefix)")),e.length>1&&!e.has("#Phrasal #Particle")&&(e=e.last()),e=e.not("(want|wants|wanted) to"),e.found||(e=t.not("#Negative")),e}(e);return{root:n,prefix:e.match("#Prefix"),adverbs:L4e(e,n),auxiliary:$4e(e,n),negative:j4e(e),phrasal:B4e(n)}},Eu={tense:"PresentTense"},kS={conditional:!0},Cc={tense:"FutureTense"},Py={progressive:!0},qi={tense:"PastTense"},ky={complete:!0,progressive:!1},ah={passive:!0},z4e=function(t){let e={};return t.forEach(n=>{Object.assign(e,n)}),e},XY={imperative:[["#Imperative",[]]],"want-infinitive":[["^(want|wants|wanted) to #Infinitive$",[Eu]],["^wanted to #Infinitive$",[qi]],["^will want to #Infinitive$",[Cc]]],"gerund-phrase":[["^#PastTense #Gerund$",[qi]],["^#PresentTense #Gerund$",[Eu]],["^#Infinitive #Gerund$",[Eu]],["^will #Infinitive #Gerund$",[Cc]],["^have #PastTense #Gerund$",[qi]],["^will have #PastTense #Gerund$",[qi]]],"simple-present":[["^#PresentTense$",[Eu]],["^#Infinitive$",[Eu]]],"simple-past":[["^#PastTense$",[qi]]],"simple-future":[["^will #Adverb? #Infinitive",[Cc]]],"present-progressive":[["^(is|are|am) #Gerund$",[Eu,Py]]],"past-progressive":[["^(was|were) #Gerund$",[qi,Py]]],"future-progressive":[["^will be #Gerund$",[Cc,Py]]],"present-perfect":[["^(has|have) #PastTense$",[qi,ky]]],"past-perfect":[["^had #PastTense$",[qi,ky]],["^had #PastTense to #Infinitive",[qi,ky]]],"future-perfect":[["^will have #PastTense$",[Cc,ky]]],"present-perfect-progressive":[["^(has|have) been #Gerund$",[qi,Py]]],"past-perfect-progressive":[["^had been #Gerund$",[qi,Py]]],"future-perfect-progressive":[["^will have been #Gerund$",[Cc,Py]]],"passive-past":[["(got|were|was) #Passive",[qi,ah]],["^(was|were) being #Passive",[qi,ah]],["^(had|have) been #Passive",[qi,ah]]],"passive-present":[["^(is|are|am) #Passive",[Eu,ah]],["^(is|are|am) being #Passive",[Eu,ah]],["^has been #Passive",[Eu,ah]]],"passive-future":[["will have been #Passive",[Cc,ah,kS]],["will be being? #Passive",[Cc,ah,kS]]],"present-conditional":[["would be #PastTense",[Eu,kS]]],"past-conditional":[["would have been #PastTense",[qi,kS]]],"auxiliary-future":[["(is|are|am|was) going to (#Infinitive|#PresentTense)",[Cc]]],"auxiliary-past":[["^did #Infinitive$",[qi,{plural:!1}]],["^used to #Infinitive$",[qi,ky]]],"auxiliary-present":[["^(does|do) #Infinitive$",[Eu,ky,{plural:!0}]]],"modal-past":[["^(could|must|should|shall) have #PastTense$",[qi]]],"modal-infinitive":[["^#Modal #Infinitive$",[]]],infinitive:[["^#Infinitive$",[]]]};let ZY=[];Object.keys(XY).map(t=>{XY[t].forEach(e=>{ZY.push({name:t,match:e[0],data:z4e(e[1])})})});const eX=ZY,Sc=function(t,e){let n={};t=function(t,e){return t=t.clone(),e.adverbs.post&&e.adverbs.post.found&&t.remove(e.adverbs.post),e.adverbs.pre&&e.adverbs.pre.found&&t.remove(e.adverbs.pre),t.has("#Negative")&&(t=t.remove("#Negative")),t.has("#Prefix")&&(t=t.remove("#Prefix")),e.root.has("#PhrasalVerb #Particle")&&t.remove("#Particle$"),t.not("#Adverb")}(t,e);for(let r=0;r<eX.length;r+=1){let i=eX[r];if(!0===t.has(i.match)){n.form=i.name,Object.assign(n,i.data);break}}return n.form||t.has("^#Verb$")&&(n.form="infinitive"),n.tense||(n.tense=e.root.has("#PastTense")?"PastTense":"PresentTense"),n.copula=e.root.has("#Copula"),n.isInfinitive=function(t){return!(!t.has("#Infinitive")||!t.growLeft("to").has("^to #Infinitive"))}(t),n},tX=function(t){return!(t.length<=1)&&(t.parse()[0]||{}).isSubordinate},Q4e=function(t,e){return!(!e.has("(are|were|does)")&&!t.has("(those|they|we)"))||!(!t.found||!t.isPlural)&&t.isPlural().found},dl=function(t){let e=function(t){let e=t.before();e=function(t){let e=t.clauses();return e=e.filter((n,r)=>!(n.has("^(if|unless|while|but|for|per|at|by|that|which|who|from)")||r>0&&n.has("^#Verb . #Noun+$")||r>0&&n.has("^#Adverb"))),0===e.length?t:e}(e);let n=e.nouns(),r=n.last(),i=r.match("(i|he|she|we|you|they)");if(i.found)return i.nouns();let s=n.if("^(that|this|those)");return s.found||!1===n.found&&(s=e.match("^(that|this|those)"),s.found)?s:(r=n.last(),tX(r)&&(n.remove(r),r=n.last()),tX(r)&&(n.remove(r),r=n.last()),r)}(t);return{subject:e,plural:Q4e(e,t)}},yr=t=>t,Xb=(t,e)=>{let n=dl(t),r=n.subject;return!(!r.has("i")&&!r.has("we"))||n.plural},Zb=function(t,e){if(t.has("were"))return"are";let{subject:n,plural:r}=dl(t);return n.has("i")?"am":n.has("we")||r?"are":"is"},eV=function(t,e){let n=dl(t),r=n.subject;return r.has("i")||r.has("we")||n.plural?"do":"does"},Yo=function(t){return t.has("#Infinitive")?"Infinitive":t.has("#Participle")?"Participle":t.has("#PastTense")?"PastTense":t.has("#Gerund")?"Gerund":t.has("#PresentTense")?"PresentTense":void 0},tV=function(t,e){const{toInfinitive:n}=t.methods.two.transform.verb;let r=e.root.text({keepPunct:!1});return r=n(r,t.model,Yo(t)),r&&t.replace(e.root,r),t},nX=t=>t.has("will not")?t.replace("will not","have not"):t.remove("will"),rX=function(t){return t&&t.isView?t.json({normal:!0,terms:!1,text:!1}).map(n=>n.normal):[]},iX=function(t){return t&&t.isView?t.text("normal"):""},Y4e=function(t){const{toInfinitive:e}=t.methods.two.transform.verb;return e(t.text("normal"),t.model,Yo(t))},Z4e={tags:!0},ka={tags:!0},Dc={noAux:(t,e)=>(e.auxiliary.found&&(t=t.remove(e.auxiliary)),t),simple:(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,i=e.root;if(i.has("#Modal"))return t;let s=i.text({keepPunct:!1});return s=r(s,t.model,Yo(i)),s=n(s,t.model).PastTense,s="been"===s?"was":s,"was"===s&&(s=((t,e)=>{let{subject:n,plural:r}=dl(t);return r||n.has("we")?"were":"was"})(t)),s&&t.replace(i,s,ka),t},both:function(t,e){return e.negative.found?(t.replace("will","did"),t):(t=Dc.simple(t,e),t=Dc.noAux(t,e))},hasHad:t=>(t.replace("has","had",ka),t),hasParticiple:(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,i=e.root;let s=i.text("normal");return s=r(s,t.model,Yo(i)),n(s,t.model).Participle}},sX={infinitive:Dc.simple,"simple-present":Dc.simple,"simple-past":yr,"simple-future":Dc.both,"present-progressive":t=>(t.replace("are","were",ka),t.replace("(is|are|am)","was",ka),t),"past-progressive":yr,"future-progressive":(t,e)=>(t.match(e.root).insertBefore("was"),t.remove("(will|be)"),t),"present-perfect":Dc.hasHad,"past-perfect":yr,"future-perfect":(t,e)=>(t.match(e.root).insertBefore("had"),t.has("will")&&(t=nX(t)),t.remove("have"),t),"present-perfect-progressive":Dc.hasHad,"past-perfect-progressive":yr,"future-perfect-progressive":t=>(t.remove("will"),t.replace("have","had",ka),t),"passive-past":t=>(t.replace("have","had",ka),t),"passive-present":t=>(t.replace("(is|are)","was",ka),t),"passive-future":(t,e)=>(e.auxiliary.has("will be")&&(t.match(e.root).insertBefore("had been"),t.remove("(will|be)")),e.auxiliary.has("will have been")&&(t.replace("have","had",ka),t.remove("will")),t),"present-conditional":t=>(t.replace("be","have been"),t),"past-conditional":yr,"auxiliary-future":t=>(t.replace("(is|are|am)","was",ka),t),"auxiliary-past":yr,"auxiliary-present":t=>(t.replace("(do|does)","did",ka),t),"modal-infinitive":(t,e)=>(t.has("can")?t.replace("can","could",ka):(Dc.simple(t,e),t.match("#Modal").insertAfter("have").tag("Auxiliary")),t),"modal-past":yr,"want-infinitive":t=>(t.replace("(want|wants)","wanted",ka),t.remove("will"),t),"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),Dc.simple(t,e),nX(t),t)},nV=function(t,e){let n=dl(t),r=n.subject;return r.has("(i|we|you)")?"have":!1===n.plural||r.has("he")||r.has("she")||r.has("#Person")?"has":"have"},rV=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,{root:i,auxiliary:s}=e;if(i.has("#Modal"))return t;let o=i.text({keepPunct:!1});o=r(o,t.model,Yo(i));let a=n(o,t.model);if(o=a.Participle||a.PastTense,o){t=t.replace(i,o);let u=nV(t);t.prepend(u).match(u).tag("Auxiliary"),t.remove(s)}return t},oX={infinitive:rV,"simple-present":rV,"simple-future":(t,e)=>t.replace("will",nV(t)),"present-perfect":yr,"past-perfect":yr,"future-perfect":(t,e)=>t.replace("will have",nV(t)),"present-perfect-progressive":yr,"past-perfect-progressive":yr,"future-perfect-progressive":yr},Nc={tags:!0},xy=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,i=e.root;let s=i.text("normal");return s=r(s,t.model,Yo(i)),!1===Xb(t)&&(s=n(s,t.model).PresentTense),i.has("#Copula")&&(s=Zb(t)),s&&(t=t.replace(i,s,Nc)).not("#Particle").tag("PresentTense"),t},aX=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,i=e.root;let s=i.text("normal");return s=r(s,t.model,Yo(i)),!1===Xb(t)&&(s=n(s,t.model).Gerund),s&&(t=t.replace(i,s,Nc)).not("#Particle").tag("Gerund"),t},uX={infinitive:xy,"simple-present":(t,e)=>{const{conjugate:n}=t.methods.two.transform.verb;let{root:r}=e;if(!r.has("#Infinitive"))return xy(t,e);{let s=dl(t).subject;if(Xb(t)||s.has("i"))return t;let o=r.text("normal"),a=n(o,t.model).PresentTense;o!==a&&t.replace(r,a,Nc)}return t},"simple-past":xy,"simple-future":(t,e)=>{const{root:n,auxiliary:r}=e;if(r.has("will")&&n.has("be")){let i=Zb(t);t.replace(n,i),(t=t.remove("will")).replace("not "+i,i+" not")}else xy(t,e),t=t.remove("will");return t},"present-progressive":yr,"past-progressive":(t,e)=>{let n=Zb(t);return t.replace("(were|was)",n,Nc)},"future-progressive":t=>(t.match("will").insertBefore("is"),t.remove("be"),t.remove("will")),"present-perfect":(t,e)=>(xy(t,e),t.remove("(have|had|has)")),"past-perfect":(t,e)=>{let r=dl(t).subject;return Xb(t)||r.has("i")?((t=tV(t,e)).remove("had"),t):(t.replace("had","has",Nc),t)},"future-perfect":t=>(t.match("will").insertBefore("has"),t.remove("have").remove("will")),"present-perfect-progressive":yr,"past-perfect-progressive":t=>t.replace("had","has",Nc),"future-perfect-progressive":t=>(t.match("will").insertBefore("has"),t.remove("have").remove("will")),"passive-past":(t,e)=>{let n=Zb(t);return t.has("(had|have|has)")&&t.has("been")?(t.replace("(had|have|has)",n,Nc),t.replace("been","being"),t):t.replace("(got|was|were)",n)},"passive-present":yr,"passive-future":t=>(t.replace("will","is"),t.replace("be","being")),"present-conditional":yr,"past-conditional":t=>(t.replace("been","be"),t.remove("have")),"auxiliary-future":(t,e)=>(aX(t,e),t.remove("(going|to)"),t),"auxiliary-past":(t,e)=>{if(e.auxiliary.has("did")){let n=eV(t);return t.replace(e.auxiliary,n),t}return aX(t,e),t.replace(e.auxiliary,"is"),t},"auxiliary-present":yr,"modal-infinitive":yr,"modal-past":(t,e)=>(((t,e)=>{const{toInfinitive:n}=t.methods.two.transform.verb,r=e.root;let i=e.root.text("normal");i=n(i,t.model,Yo(r)),i&&(t=t.replace(e.root,i,Nc))})(t,e),t.remove("have")),"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),xy(t,e),t.remove("(will|have)")),"want-infinitive":(t,e)=>{let n="wants";return Xb(t)&&(n="want"),t.replace("(want|wanted|wants)",n,Nc),t.remove("will"),t}},lX={tags:!0},xS=(t,e)=>{const{toInfinitive:n}=t.methods.two.transform.verb,{root:r,auxiliary:i}=e;if(r.has("#Modal"))return t;let s=r.text("normal");return s=n(s,t.model,Yo(r)),s&&(t=t.replace(r,s,lX)).not("#Particle").tag("Verb"),t.prepend("will").match("will").tag("Auxiliary"),t.remove(i),t},cX=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,{root:i,auxiliary:s}=e;let o=i.text("normal");return o=r(o,t.model,Yo(i)),o&&(o=n(o,t.model).Gerund,t.replace(i,o,lX),t.not("#Particle").tag("PresentTense")),t.remove(s),t.prepend("will be").match("will be").tag("Auxiliary"),t},dX={infinitive:xS,"simple-present":xS,"simple-past":xS,"simple-future":yr,"present-progressive":cX,"past-progressive":cX,"future-progressive":yr,"present-perfect":t=>(t.match("(have|has)").replaceWith("will have"),t),"past-perfect":t=>t.replace("(had|has)","will have"),"future-perfect":yr,"present-perfect-progressive":t=>t.replace("has","will have"),"past-perfect-progressive":t=>t.replace("had","will have"),"future-perfect-progressive":yr,"passive-past":t=>t.has("got")?t.replace("got","will get"):t.has("(was|were)")?(t.replace("(was|were)","will be"),t.remove("being")):t.has("(have|has|had) been")?t.replace("(have|has|had) been","will be"):t,"passive-present":t=>(t.replace("being","will be"),t.remove("(is|are|am)"),t),"passive-future":yr,"present-conditional":t=>t.replace("would","will"),"past-conditional":t=>t.replace("would","will"),"auxiliary-future":yr,"auxiliary-past":t=>t.has("used")&&t.has("to")?(t.replace("used","will"),t.remove("to")):(t.replace("did","will"),t),"auxiliary-present":t=>t.replace("(do|does)","will"),"modal-infinitive":yr,"modal-past":yr,"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),xS(t,e),t.remove("(had|have)")),"want-infinitive":t=>(t.replace("(want|wants|wanted)","will want"),t)},oHe={tags:!0},hX={tags:!0},iV=function(t,e){let n=eV(t);return t.prepend(n+" not"),t},RS=function(t){let e=t.match("be");return e.found?(e.prepend("not"),t):(e=t.match("(is|was|am|are|will|were)"),e.found&&e.append("not"),t)},OS=t=>t.has("(is|was|am|are|will|were|be)"),fX={"simple-present":(t,e)=>!0===OS(t)?RS(t):(t=tV(t,e),t=iV(t)),"simple-past":(t,e)=>!0===OS(t)?RS(t):((t=tV(t,e)).prepend("did not"),t),imperative:t=>(t.prepend("do not"),t),infinitive:(t,e)=>!0===OS(t)?RS(t):iV(t),"passive-past":t=>{if(t.has("got"))return t.replace("got","get",hX),t.prepend("did not"),t;let e=t.match("(was|were|had|have)");return e.found&&e.append("not"),t},"auxiliary-past":t=>{if(t.has("used"))return t.prepend("did not"),t;let e=t.match("(did|does|do)");return e.found&&e.append("not"),t},"want-infinitive":(t,e)=>(t=iV(t)).replace("wants","want",hX)},lHe={api:function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Verbs"}parse(r){return this.getNth(r).map(wu)}json(r,i){return this.getNth(i).map(a=>{let u=a.toView().json(r)[0]||{};return u.verb=function(t){let e=wu(t);t=t.clone().toView();const n=Sc(t,e);return{root:e.root.text(),preAdverbs:rX(e.adverbs.pre),postAdverbs:rX(e.adverbs.post),auxiliary:iX(e.auxiliary),negative:e.negative.found,prefix:iX(e.prefix),infinitive:Y4e(e.root),grammar:n}}(a),u},[])}subjects(r){return this.getNth(r).map(i=>(wu(i),dl(i).subject))}adverbs(r){return this.getNth(r).map(i=>i.match("#Adverb"))}isSingular(r){return this.getNth(r).filter(i=>!0!==dl(i).plural)}isPlural(r){return this.getNth(r).filter(i=>!0===dl(i).plural)}isImperative(r){return this.getNth(r).filter(i=>i.has("#Imperative"))}toInfinitive(r){return this.getNth(r).map(i=>{let s=wu(i);return Sc(i,s),function(t,e){const{toInfinitive:n}=t.methods.two.transform.verb,{root:r,auxiliary:i}=e;let s=i.terms().harden(),o=r.text("normal");if(o=n(o,t.model,Yo(r)),o&&t.replace(r,o,Z4e).tag("Verb").firstTerm().tag("Infinitive"),s.found&&t.remove(s),e.negative.found){t.has("not")||t.prepend("not");let a=eV(t);t.prepend(a)}return t.fullSentence().compute(["freeze","lexicon","preTagger","postTagger","unfreeze","chunks"]),t}(i,s)})}toPresentTense(r){return this.getNth(r).map(i=>{let s=wu(i),o=Sc(i,s);return o.isInfinitive?i:function(t,e,n){return uX.hasOwnProperty(n)&&(t=uX[n](t,e)).fullSentence().compute(["tagger","chunks"]),t}(i,s,o.form)})}toPastTense(r){return this.getNth(r).map(i=>{let s=wu(i),o=Sc(i,s);return o.isInfinitive?i:function(t,e,n){return sX.hasOwnProperty(n)&&(t=sX[n](t,e)).fullSentence().compute(["tagger","chunks"]),t}(i,s,o.form)})}toFutureTense(r){return this.getNth(r).map(i=>{let s=wu(i),o=Sc(i,s);return o.isInfinitive?i:function(t,e,n){return t.has("will")||t.has("going to")||dX.hasOwnProperty(n)&&(t=dX[n](t,e)).fullSentence().compute(["tagger","chunks"]),t}(i,s,o.form)})}toGerund(r){return this.getNth(r).map(i=>{let s=wu(i);return Sc(i,s).isInfinitive?i:function(t,e){const{toInfinitive:n,conjugate:r}=t.methods.two.transform.verb,{root:i,auxiliary:s}=e;if(t.has("#Gerund"))return t;let o=i.text("normal");o=n(o,t.model,Yo(i));let a=r(o,t.model).Gerund;if(a){let u=Zb(t);t.replace(i,a,oHe),t.remove(s),t.prepend(u)}return t.replace("not is","is not"),t.replace("not are","are not"),t.fullSentence().compute(["tagger","chunks"]),t}(i,s)})}toPastParticiple(r){return this.getNth(r).map(i=>{let s=wu(i),o=Sc(i,s);return o.isInfinitive?i:function(t,e,n){return oX.hasOwnProperty(n)?((t=oX[n](t,e)).fullSentence().compute(["tagger","chunks"]),t):((t=rV(t,e)).fullSentence().compute(["tagger","chunks"]),t)}(i,s,o.form)})}conjugate(r){const{conjugate:i,toInfinitive:s}=this.world.methods.two.transform.verb;return this.getNth(r).map(o=>{let a=wu(o),u=Sc(o,a);"imperative"===u.form&&(u.form="simple-present");let l=a.root.text("normal");if(!a.root.has("#Infinitive")){let c=Yo(a.root);l=s(l,o.model,c)||l}return i(l,o.model)},[])}isNegative(){return this.if("#Negative")}isPositive(){return this.ifNo("#Negative")}toPositive(){let r=this.match("do not #Verb");return r.found&&r.remove("do not"),this.remove("#Negative")}toNegative(r){return this.getNth(r).map(i=>{let s=wu(i);return function(t,e,n){if(t.has("#Negative"))return t;if(fX.hasOwnProperty(n))return fX[n](t,e);let r=t.matchOne("be");return r.found?(r.prepend("not"),t):!0===OS(t)?RS(t):(r=t.matchOne("(will|had|have|has|did|does|do|#Modal)"),r.found&&r.append("not"),t)}(i,s,Sc(i,s).form)})}update(r){let i=new e(this.document,r);return i._cache=this._cache,i}}e.prototype.toPast=e.prototype.toPastTense,e.prototype.toPresent=e.prototype.toPresentTense,e.prototype.toFuture=e.prototype.toFutureTense,t.prototype.verbs=function(n){let r=function(t){let e=t.match("<Verb>");return e=e.not("#Conjunction"),e=e.not("#Preposition"),e=e.splitAfter("@hasComma"),e=e.splitAfter("[(do|did|am|was|is|will)] (is|was)",0),e=e.splitBefore("(#Verb && !#Copula) [being] #Verb",0),e=e.splitBefore("#Verb [to be] #Verb",0),e=e.splitAfter("[help] #PresentTense",0),e=e.splitBefore("(#PresentTense|#PastTense) [#Copula]$",0),e=e.splitBefore("(#PresentTense|#PastTense) [will be]$",0),e=e.splitBefore("(#PresentTense|#PastTense) [(had|has)]",0),e=e.not("#Reflexive$"),e=e.not("#Adjective"),e=e.splitAfter("[#PastTense] #PastTense",0),e=e.splitAfter("[#PastTense] #Auxiliary+ #PastTense",0),e=e.splitAfter("#Copula [#Gerund] #PastTense",0),e=e.if("#Verb"),e.has("(#Verb && !#Auxiliary) #Adverb+? #Copula")&&(e=e.splitBefore("#Copula")),e}(this);return r=r.getNth(n),new e(this.document,r.pointer)}}},sV=function(t,e){let n=e.match(t);if(n.found){let r=n.pronouns().refersTo();if(r.found)return r}return e.none()},pX=function(t){if(!t.found)return t;let[e]=t.fullPointer[0];return e&&e>0?t.update([[e-1]]):t.none()},mX=function(t,e){let n=t.people();return n=function(t,e){return"m"===e?t.filter(n=>!n.presumedFemale().found):"f"===e?t.filter(n=>!n.presumedMale().found):t}(n,e),n.found||(n=t.nouns("#Actor"),n.found)?n.last():"f"===e?sV("(she|her|hers)",t):"m"===e?sV("(he|him|his)",t):t.none()},dHe=function(t){let e=t.nouns(),n=e.isPlural().notIf("#Pronoun");if(n.found)return n.last();let r=sV("(they|their|theirs)",t);return r.found?r:(n=e.match("(somebody|nobody|everybody|anybody|someone|noone|everyone|anyone)"),n.found?n.last():t.none())},oV=function(t,e){let n=t.before(),r=e(n);return r.found||(n=pX(t),r=e(n),r.found)||(n=pX(n),r=e(n),r.found)?r:t.none()},fHe={compute:{coreference:function(t){t.pronouns().if("(he|him|his|she|her|hers|they|their|theirs|it|its)").forEach(n=>{let r=null;n.has("(he|him|his)")?r=oV(n,i=>mX(i,"m")):n.has("(she|her|hers)")?r=oV(n,i=>mX(i,"f")):n.has("(they|their|theirs)")&&(r=oV(n,dHe)),r&&r.found&&function(t,e){e&&e.found&&(t.docs[0][0].reference=e.ptrs[0])}(n,r)})}},api:function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Pronouns"}hasReference(){return this.compute("coreference"),this.filter(r=>r.docs[0][0].reference)}refersTo(){return this.compute("coreference"),this.map(r=>{if(!r.found)return r.none();let i=r.docs[0][0];return i.reference?r.update([i.reference]):r.none()})}update(r){let i=new e(this.document,r);return i._cache=this._cache,i}}t.prototype.pronouns=function(n){let r=this.match("#Pronoun");return r=r.getNth(n),new e(r.document,r.pointer)}}};Jo.plugin(UBe),Jo.plugin({api:function(t){class e extends t{constructor(r,i,s){super(r,i,s),this.viewType="Adverbs"}conjugate(r){return this.getNth(r).map(i=>{let s=function(t){return t.compute("root").text("root")}(i);return{Adverb:i.text("normal"),Adjective:s}},[])}json(r={}){const i=this.methods.two.transform.adjective.fromAdverb;return r.normal=!0,this.map(s=>{let o=s.toView().json(r)[0]||{};return o.adverb={adjective:i(o.normal)},o},[])}}t.prototype.adverbs=function(n){let r=this.match("#Adverb");return r=r.getNth(n),new e(r.document,r.pointer)}}}),Jo.plugin(rUe),Jo.plugin(fHe),Jo.plugin(bUe),Jo.plugin(TUe),Jo.plugin(FUe),Jo.plugin(c4e),Jo.plugin(f4e),Jo.plugin(C4e),Jo.plugin(M4e),Jo.plugin(lHe);const gX=Jo;class MS{}class FS{}class xa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof xa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new xa;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof xa?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class pHe{encodeKey(e){return yX(e)}encodeValue(e){return yX(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const gHe=/%(\d[a-f0-9])/gi,yHe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function yX(t){return encodeURIComponent(t).replace(gHe,(e,n)=>yHe[n]??e)}function VS(t){return`${t}`}class uh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pHe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mHe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(VS):[VS(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new uh({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(VS(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class _He{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function _X(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function vX(t){return typeof Blob<"u"&&t instanceof Blob}function bX(t){return typeof FormData<"u"&&t instanceof FormData}class ew{constructor(e,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function vHe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new xa,this.context??=new _He,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new uh,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||_X(this.body)||vX(this.body)||bX(this.body)||function bHe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof uh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bX(this.body)?null:vX(this.body)?this.body.type||null:_X(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof uh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((g,_)=>g.set(_,e.setHeaders[_]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((g,_)=>g.set(_,e.setParams[_]),c)),new ew(n,r,o,{params:c,headers:l,context:h,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}}var lh=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(lh||{});class aV{constructor(e,n=200,r="OK"){this.headers=e.headers||new xa,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class LS extends aV{constructor(e={}){super(e),this.type=lh.ResponseHeader}clone(e={}){return new LS({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hp extends aV{constructor(e={}){super(e),this.type=lh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new hp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ry extends aV{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function uV(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let EX=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof ew)s=n;else{let u,l;u=i.headers instanceof xa?i.headers:new xa(i.headers),i.params&&(l=i.params instanceof uh?i.params:new uh({fromObject:i.params})),s=new ew(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=It(s).pipe(eg(u=>this.handler.handle(u)));if(n instanceof ew||"events"===i.observe)return o;const a=o.pipe(wa(u=>u instanceof hp));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(pt(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(pt(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(pt(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(pt(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new uh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,uV(i,r))}post(n,r,i={}){return this.request("POST",n,uV(i,r))}put(n,r,i={}){return this.request("PUT",n,uV(i,r))}static#e=this.\u0275fac=function(r){return new(r||t)(Se(MS))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const THe=/^\)\]\}',?\n/;function TX(t){if(t.url)return t.url;const e="X-Request-URL".toLocaleLowerCase();return t.headers.get(e)}let lV=(()=>{class t{constructor(){this.fetchImpl=Te(AHe,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=Te(en)}handle(n){return new On(r=>{const i=new AbortController;return this.doRequest(n,i.signal,r).then(cV,s=>r.error(new Ry({error:s}))),()=>i.abort()})}doRequest(n,r,i){var s=this;return(0,Y.A)(function*(){const o=s.createRequestInit(n);let a;try{const v=s.ngZone.runOutsideAngular(()=>s.fetchImpl(n.urlWithParams,{signal:r,...o}));(function CHe(t){t.then(cV,cV)})(v),i.next({type:lh.Sent}),a=yield v}catch(v){return void i.error(new Ry({error:v,status:v.status??0,statusText:v.statusText,url:n.urlWithParams,headers:v.headers}))}const u=new xa(a.headers),l=a.statusText,c=TX(a)??n.urlWithParams;let h=a.status,g=null;if(n.reportProgress&&i.next(new LS({headers:u,status:h,statusText:l,url:c})),a.body){const v=a.headers.get("content-length"),w=[],I=a.body.getReader();let x,O,S=0;const U=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,Y.A)(function*(){for(;;){const{done:de,value:R}=yield I.read();if(de)break;if(w.push(R),S+=R.length,n.reportProgress){O="text"===n.responseType?(O??"")+(x??=new TextDecoder).decode(R,{stream:!0}):void 0;const k=()=>i.next({type:lh.DownloadProgress,total:v?+v:void 0,loaded:S,partialText:O});U?U.run(k):k()}}}));const he=s.concatChunks(w,S);try{const de=a.headers.get("Content-Type")??"";g=s.parseBody(n,he,de)}catch(de){return void i.error(new Ry({error:de,headers:new xa(a.headers),status:a.status,statusText:a.statusText,url:TX(a)??n.urlWithParams}))}}0===h&&(h=g?200:0),h>=200&&h<300?(i.next(new hp({body:g,headers:u,status:h,statusText:l,url:c})),i.complete()):i.error(new Ry({error:g,headers:u,status:h,statusText:l,url:c}))})()}parseBody(n,r,i){switch(n.responseType){case"json":const s=(new TextDecoder).decode(r).replace(THe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){const r={},i=n.withCredentials?"include":void 0;if(n.headers.forEach((s,o)=>r[s]=o.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){const s=n.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i}}concatChunks(n,r){const i=new Uint8Array(r);let s=0;for(const o of n)i.set(o,s),s+=o.length;return i}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();class AHe{}function cV(){}function IX(t,e){return e(t)}function SHe(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const NHe=new Fe(""),tw=new Fe(""),AX=new Fe(""),CX=new Fe("",{providedIn:"root",factory:()=>!0});function PHe(){let t=null;return(e,n)=>{null===t&&(t=(Te(NHe,{optional:!0})??[]).reduceRight(SHe,IX));const r=Te(jl);if(Te(CX)){const s=r.add();return t(e,n).pipe(Xl(()=>r.remove(s)))}return t(e,n)}}let SX=(()=>{class t extends MS{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Te(jl),this.contributeToStability=Te(CX)}handle(n){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(tw),...this.injector.get(AX,[])]));this.chain=r.reduceRight((i,s)=>function DHe(t,e,n){return(r,i)=>no(n,()=>e(r,s=>t(s,i)))}(i,s,this.injector),IX)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Xl(()=>this.pendingTasks.remove(r)))}return this.chain(n,r=>this.backend.handle(r))}static#e=this.\u0275fac=function(r){return new(r||t)(Se(FS),Se(Zi))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const MHe=/^\)\]\}',?\n/;let NX=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new fe(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?vn(r.\u0275loadImpl()):It(null)).pipe(Pr(()=>new On(s=>{const o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((w,I)=>o.setRequestHeader(w,I.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const w=n.detectContentTypeHeader();null!==w&&o.setRequestHeader("Content-Type",w)}if(n.responseType){const w=n.responseType.toLowerCase();o.responseType="json"!==w?w:"text"}const a=n.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const w=o.statusText||"OK",I=new xa(o.getAllResponseHeaders()),S=function FHe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return u=new LS({headers:I,status:o.status,statusText:w,url:S}),u},c=()=>{let{headers:w,status:I,statusText:S,url:x}=l(),O=null;204!==I&&(O=typeof o.response>"u"?o.responseText:o.response),0===I&&(I=O?200:0);let U=I>=200&&I<300;if("json"===n.responseType&&"string"==typeof O){const he=O;O=O.replace(MHe,"");try{O=""!==O?JSON.parse(O):null}catch(de){O=he,U&&(U=!1,O={error:de,text:O})}}U?(s.next(new hp({body:O,headers:w,status:I,statusText:S,url:x||void 0})),s.complete()):s.error(new Ry({error:O,headers:w,status:I,statusText:S,url:x||void 0}))},h=w=>{const{url:I}=l(),S=new Ry({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:I||void 0});s.error(S)};let g=!1;const _=w=>{g||(s.next(l()),g=!0);let I={type:lh.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(I.total=w.total),"text"===n.responseType&&o.responseText&&(I.partialText=o.responseText),s.next(I)},v=w=>{let I={type:lh.UploadProgress,loaded:w.loaded};w.lengthComputable&&(I.total=w.total),s.next(I)};return o.addEventListener("load",c),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),n.reportProgress&&(o.addEventListener("progress",_),null!==a&&o.upload&&o.upload.addEventListener("progress",v)),o.send(a),s.next({type:lh.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",c),o.removeEventListener("timeout",h),n.reportProgress&&(o.removeEventListener("progress",_),null!==a&&o.upload&&o.upload.removeEventListener("progress",v)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||t)(Se(Uz))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const dV=new Fe(""),PX=new Fe("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),kX=new Fe("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class xX{}let $He=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=kz(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i),Se(ya),Se(PX))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();function jHe(t,e){const n=t.url.toLowerCase();if(!Te(dV)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=Te(xX).getToken(),i=Te(kX);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var ch=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(ch||{});function BHe(...t){const e=[EX,NX,SX,{provide:MS,useExisting:SX},{provide:FS,useFactory:()=>Te(lV,{optional:!0})??Te(NX)},{provide:tw,useValue:jHe,multi:!0},{provide:dV,useValue:!0},{provide:xX,useClass:$He}];for(const n of t)e.push(...n.\u0275providers);return Pl(e)}const RX=new Fe("");function UHe(){return function fp(t,e){return{\u0275kind:t,\u0275providers:e}}(ch.LegacyInterceptors,[{provide:RX,useFactory:PHe},{provide:tw,useExisting:RX,multi:!0}])}let HHe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({providers:[BHe(UHe())]})}return t})(),hV=(()=>{class t{constructor(n,r){this.http=n,this.fns=r,this.chunkSize=1e3,this.overlapSize=200,this.maxChunksPerBatch=20,this.progressSubject=new gt(0),this.progress$=this.progressSubject.asObservable(),this.model=null,this.isModelLoaded=!1,this.stopwords=new Set(["a","an","and","are","as","at","be","by","for","from","has","he","in","is","it","its","of","on","that","the","to","was","were","will","with"]),this.initializeModel()}initializeModel(){var n=this;return(0,Y.A)(function*(){try{yield n.loadModel()}catch(r){console.error("Failed to load Universal Sentence Encoder model:",r),console.warn("Falling back to basic text processing without embeddings.")}})()}loadModel(){var n=this;return(0,Y.A)(function*(){try{console.log("Starting to load Universal Sentence Encoder model..."),n.model=yield function nMe(t){return yc(this,void 0,void 0,function(){var e;return _c(this,function(n){switch(n.label){case 0:return[4,(e=new rMe).load(t)];case 1:return n.sent(),[2,e]}})})}(),n.isModelLoaded=!0,console.log("Universal Sentence Encoder model loaded successfully")}catch(r){throw console.error("Error details:",r),n.isModelLoaded=!1,new Error("Model loading failed")}})()}processDocument(n){return this.progressSubject.next(0),this.readTextFile(n).pipe(Si(r=>console.log(`File read successfully. Content length: ${r.length}`)),Ci(r=>this.processText(r)),Xl(()=>this.progressSubject.next(100)),ho(r=>this.handleError("processDocument",r)))}processJsonDataset(n){return this.progressSubject.next(0),this.readJsonFile(n).pipe(Ci(r=>this.processJsonData(r)),Xl(()=>this.progressSubject.next(100)),ho(r=>this.handleError("processJsonDataset",r)))}enrichQuery(n){var r=this;return(0,Y.A)(function*(){const i=yield r.preprocessText(n),s=r.extractKeyTerms(i),o=`${n} Context: ${s.join(", ")}`;return console.log("Enriched Query:",o),o})()}processText(n){var r=this;return(0,Y.A)(function*(){try{const i=yield r.preprocessText(n),s=r.chunkTextWithOverlap(i),o=r.createBatches(s),a=o.length;return vn(o).pipe(Ci((u,l)=>vn(r.vectorizeAndStore(u)).pipe(Si(()=>{const c=Math.min(Math.round((l+1)/a*100),99);r.progressSubject.next(c)}))),function CEe(){return Ot((t,e)=>{(function IEe(t,e){return Ot(RG(t,e,arguments.length>=2,!1,!0))})(AEe,[])(t).subscribe(e)})}(),ho(u=>r.handleError("processText",u)))}catch(i){return pf(()=>new Error(`Text processing failed: ${r.getErrorMessage(i)}`))}})()}preprocessText(n){var r=this;return(0,Y.A)(function*(){const i=gX(n);return i.normalize({whitespace:!0,punctuation:!0,case:!0,unicode:!0,contractions:!0,acronyms:!0,parentheses:!0,quotations:!0,emoji:!0}),i.terms().out("array").filter(a=>!r.stopwords.has(a.toLowerCase())).join(" ")})()}extractKeyTerms(n){const r=gX(n);return r.nouns().concat(r.verbs()).concat(r.adjectives()).out("array")}chunkTextWithOverlap(n){const r=[];for(let i=0;i<n.length;i+=this.chunkSize-this.overlapSize)r.push(n.slice(i,i+this.chunkSize));return r}createBatches(n){const r=[];for(let i=0;i<n.length;i+=this.maxChunksPerBatch)r.push(n.slice(i,i+this.maxChunksPerBatch));return r}vectorizeAndStore(n){var r=this;return(0,Y.A)(function*(){r.model||(yield r.loadModel());try{const i=yield r.model.embed(n),s=yield i.array();return i.dispose(),r.fns.httpsCallable("vectorizeAndStore")({texts:n,embeddings:s})}catch(i){throw console.error("Vectorization failed:",i),new Error(`Vectorization failed: ${r.getErrorMessage(i)}`)}})()}readTextFile(n){return this.http.get(n,{responseType:"text"}).pipe(ho(r=>this.handleError("readTextFile",r)))}readJsonFile(n){return this.http.get(n).pipe(ho(r=>this.handleError("readJsonFile",r)))}processJsonData(n){const r=JSON.stringify(n);return vn(this.processText(r))}handleError(n,r){return console.error(`${n} failed:`,r),pf(()=>new Error(`${n} failed: ${this.getErrorMessage(r)}`))}getErrorMessage(n){return n instanceof Error?n.message:String(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Se(EX),Se(Qx))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XHe=(()=>{class t{constructor(n,r,i){this.functions=n,this.firestore=r,this.textVectorizationService=i,this.timeoutDuration=3e4,this.maxRetries=2,this.sessionKey="ai_session_id",this.visitLogged=!1,this.cache=new Map,this.searchCountSubject=new gt(0),this.visitCountSubject=new gt(0),this.loadingSubject=new gt(!1),this.loading$=this.loadingSubject.asObservable(),this.handleError=s=>{let o="An error occurred in the AI service";return"ETIMEDOUT"===s.code?o="The request to the AI service timed out. Please try again.":"permission-denied"===s.code?o="You do not have permission to use this service.":"unavailable"===s.code?o="The AI service is currently unavailable. Please try again later.":s.message&&(o=s.message),console.error("Error in AiService:",s),this.logError(o,s),pf(()=>new Error(o))},this.initializeCounts()}initializeCounts(){this.getSearchCount().pipe(Yl(1)).subscribe(n=>this.searchCountSubject.next(n)),this.getVisitCount().pipe(Yl(1)).subscribe(n=>this.visitCountSubject.next(n))}askQuestion(n){if(this.loadingSubject.next(!0),this.logSearchQuery(n),this.cache.has(n))return this.loadingSubject.next(!1),this.cache.get(n);const r=vn(this.textVectorizationService.enrichQuery(n)).pipe(Pr(i=>this.functions.httpsCallable("askAI")({question:i}).pipe(Wx(this.timeoutDuration),G5({count:this.maxRetries,delay:(o,a)=>(console.log(`Retrying question (${a}/${this.maxRetries}): ${i}`),It(1e3*Math.pow(2,a)))}),pt(o=>this.processResponse(o,i)))),ho(this.handleError),Si(i=>{console.log("AI Response:",i)}),Xl(()=>this.loadingSubject.next(!1)),vA(1));return this.cache.set(n,r),r}processResponse(n,r){if(!n||!n.answer)throw new Error("Invalid response from AI service");return{...n,enrichedQuestion:r}}getRelevantDocuments(n){return this.functions.httpsCallable("getRelevantDocuments")({topic:n}).pipe(Wx(this.timeoutDuration),G5(this.maxRetries),pt(i=>this.processDocumentsResponse(i)),ho(this.handleError))}processDocumentsResponse(n){if(!n||!Array.isArray(n))throw new Error("Invalid response from document retrieval service");return n}provideFeedback(n,r,i){return this.functions.httpsCallable("provideFeedback")({questionId:n,isHelpful:r,comment:i}).pipe(Wx(5e3),ho(this.handleError))}logSearchQuery(n){this.firestore.collection("searchQueries").add({query:n,timestamp:zs.A.firestore.FieldValue.serverTimestamp()}).then(()=>{this.searchCountSubject.next(this.searchCountSubject.value+1)})}logPageVisit(){if(this.visitLogged)return;const n=this.getOrCreateSessionId(),r=this.firestore.collection("visits").doc(n);r.get().pipe(Yl(1)).subscribe(i=>{i.exists?this.visitLogged=!0:r.set({timestamp:zs.A.firestore.FieldValue.serverTimestamp()}).then(()=>{this.visitLogged=!0,this.visitCountSubject.next(this.visitCountSubject.value+1)})})}getOrCreateSessionId(){let n=localStorage.getItem(this.sessionKey);return n||(n=Math.random().toString(36).substr(2,9),localStorage.setItem(this.sessionKey,n)),n}getSearchCountExt(){return this.searchCountSubject.asObservable()}getVisitCountExt(){return this.visitCountSubject.asObservable()}getSearchCount(){return this.firestore.collection("searchQueries").valueChanges().pipe(pt(n=>n.length))}getVisitCount(){return this.firestore.collection("visits").valueChanges().pipe(pt(n=>n.length))}logError(n,r){this.firestore.collection("errors").add({message:n,error:JSON.stringify(r),timestamp:zs.A.firestore.FieldValue.serverTimestamp()})}clearCache(){this.cache.clear()}getLoadingState(){return this.loading$}static#e=this.\u0275fac=function(r){return new(r||t)(Se(Qx),Se(EM),Se(hV))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const BX="firebasestorage.googleapis.com",UX="storageBucket";class zr extends rn.g{constructor(e,n,r=0){super(fV(e),`Firebase Storage: ${n} (${fV(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fV(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Vr=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Vr||{});function fV(t){return"storage/"+t}function pV(){return new zr(Vr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function HX(){return new zr(Vr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zX(){return new zr(Vr.CANCELED,"User canceled the upload/download.")}function GX(){return new zr(Vr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Oy(t){return new zr(Vr.INVALID_ARGUMENT,t)}function qX(){return new zr(Vr.APP_DELETED,"The Firebase app was deleted.")}function WX(t){return new zr(Vr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nw(t,e){return new zr(Vr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rw(t){throw new zr(Vr.INTERNAL_ERROR,"Internal error: "+t)}class Ds{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ds.makeFromUrl(e,n)}catch{return new Ds(e,"")}if(""===r.path)return r;throw function lze(t){return new zr(Vr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(U){U.path_=decodeURIComponent(U.path)}const h=n.replace(/[.]/g,"\\."),O=[{regex:a,indices:{bucket:1,path:3},postModify:function s(U){"/"===U.path.charAt(U.path.length-1)&&(U.path_=U.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${h}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${n===BX?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let U=0;U<O.length;U++){const he=O[U],de=he.regex.exec(e);if(de){let k=de[he.indices.path];k||(k=""),r=new Ds(de[he.indices.bucket],k),he.postModify(r);break}}if(null==r)throw function uze(t){return new zr(Vr.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class pze{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jS(t){return"string"==typeof t||t instanceof String}function KX(t){return mV()&&t instanceof Blob}function mV(){return typeof Blob<"u"}function gV(t,e,n,r){if(r<e)throw Oy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Oy(`Invalid value for '${t}'. Expected ${n} or less.`)}function Pc(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function QX(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var My=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(My||{});function JX(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),s=-1!==e.indexOf(t);return n||i||s}class bze{constructor(e,n,r,i,s,o,a,u,l,c,h,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,v)=>{this.resolve_=_,this.reject_=v,this.start_()})}start_(){const n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function yze(t){return void 0!==t}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=pV();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?qX():zX():HX())};this.canceled_?n(0,new BS(!1,null,!0)):this.backoffId_=function mze(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let l=!1;function c(...I){l||(l=!0,e.apply(null,I))}function h(I){i=setTimeout(()=>{i=null,t(_,u())},I)}function g(){s&&clearTimeout(s)}function _(I,...S){if(l)return void g();if(I)return g(),void c.call(null,I,...S);if(u()||o)return g(),void c.call(null,I,...S);let O;r<64&&(r*=2),1===a?(a=2,O=0):O=1e3*(r+Math.random()),h(O)}let v=!1;function w(I){v||(v=!0,g(),!l&&(null!==i?(I||(a=2),clearTimeout(i),h(0)):I||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}((r,i)=>{if(i)return void r(!1,new BS(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===My.NO_ERROR,u=s.getStatus();if(!a||JX(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===My.ABORT;return void r(!1,new BS(!1,null,c))}const l=-1!==this.successCodes_.indexOf(u);r(!0,new BS(l,s))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function gze(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class BS{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Sze(...t){const e=function Cze(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(mV())return new Blob(t);throw new zr(Vr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yV{constructor(e,n){this.data=e,this.contentType=n||null}}function _V(t,e){switch(t){case Xo.RAW:return new yV(YX(e));case Xo.BASE64:case Xo.BASE64URL:return new yV(XX(t,e));case Xo.DATA_URL:return new yV(function kze(t){const e=new ZX(t);return e.base64?XX(Xo.BASE64,e.rest):function Pze(t){let e;try{e=decodeURIComponent(t)}catch{throw nw(Xo.DATA_URL,"Malformed data URL.")}return YX(e)}(e.rest)}(e),function xze(t){return new ZX(t).contentType}(e))}throw pV()}function YX(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function XX(t,e){switch(t){case Xo.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw nw(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xo.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw nw(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function Nze(t){if(typeof atob>"u")throw function fze(t){return new zr(Vr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:nw(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ZX{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw nw(Xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function Rze(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class hl{constructor(e,n){let r=0,i="";KX(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(KX(this.data_)){const i=function Dze(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new hl(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new hl(r,!0)}}static getBlob(...e){if(mV()){const n=e.map(r=>r instanceof hl?r.data_:r);return new hl(Sze.apply(null,n))}{const n=e.map(o=>jS(o)?_V(Xo.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new hl(i,!0)}}uploadData(){return this.data_}}function vV(t){let e;try{e=JSON.parse(t)}catch{return null}return function vze(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function eZ(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Fze(t,e){return e}class Ys{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Fze}}let US=null;function iw(){if(US)return US;const t=[];t.push(new Ys("bucket")),t.push(new Ys("generation")),t.push(new Ys("metageneration")),t.push(new Ys("name","fullPath",!0));const n=new Ys("name");n.xform=function e(s,o){return function Vze(t){return!jS(t)||t.length<2?t:eZ(t)}(o)},t.push(n);const i=new Ys("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},t.push(i),t.push(new Ys("timeCreated")),t.push(new Ys("updated")),t.push(new Ys("md5Hash",null,!0)),t.push(new Ys("cacheControl",null,!0)),t.push(new Ys("contentDisposition",null,!0)),t.push(new Ys("contentEncoding",null,!0)),t.push(new Ys("contentLanguage",null,!0)),t.push(new Ys("contentType",null,!0)),t.push(new Ys("metadata","customMetadata",!0)),US=t,US}function tZ(t,e,n){const r=vV(e);return null===r?null:function $ze(t,e,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return function Lze(t,e){Object.defineProperty(t,"ref",{get:function n(){const s=new Ds(t.bucket,t.fullPath);return e._makeStorageReference(s)}})}(r,t),r}(t,r,n)}function bV(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}const nZ="prefixes",rZ="items";class fl{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function pl(t){if(!t)throw pV()}function HS(t,e){return function n(r,i){const s=tZ(t,i,e);return pl(null!==s),s}}function Fy(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function oze(){return new zr(Vr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function sze(){return new zr(Vr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function ize(t){return new zr(Vr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function aze(t){return new zr(Vr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function sw(t){const e=Fy(t);return function n(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function rze(t){return new zr(Vr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),s.serverResponse=i.serverResponse,s}}function iZ(t,e,n){const i=Pc(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new fl(i,"GET",HS(t,n),o);return a.errorHandler=sw(e),a}function Gze(t,e,n,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Pc(e.bucketOnlyServerUrl(),t.host,t._protocol),l=t.maxOperationRetryTime,c=new fl(a,"GET",function Hze(t,e){return function n(r,i){const s=function Uze(t,e,n){const r=vV(n);return null===r?null:function Bze(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[nZ])for(const i of n[nZ]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Ds(e,s));r.prefixes.push(o)}if(n[rZ])for(const i of n[rZ]){const s=t._makeStorageReference(new Ds(e,i.name));r.items.push(s)}return r}(t,e,r)}(t,e,i);return pl(null!==s),s}}(t,e.bucket),l);return c.urlParams=s,c.errorHandler=Fy(e),c}function oZ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function Qze(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class zS{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function wV(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{pl(!1)}return pl(!!n&&-1!==(e||["active"]).indexOf(n)),n}const Zze={STATE_CHANGED:"state_changed"},Xs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function EV(t){switch(t){case"running":case"pausing":case"canceling":return Xs.RUNNING;case"paused":return Xs.PAUSED;case"success":return Xs.SUCCESS;case"canceled":return Xs.CANCELED;default:return Xs.ERROR}}class eGe{constructor(e,n,r){if(function _ze(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Vy(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let lZ=null;class tGe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=My.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=My.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=My.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw rw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class nGe extends tGe{initXhr(){this.xhr_.responseType="text"}}function Tu(){return lZ?lZ():new nGe}class cZ{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=iw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Vr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(JX(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=HX()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Vr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function Jze(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=oZ(e,r,i),a={name:o.fullPath},u=Pc(s,t.host,t._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=bV(o,n),v=new fl(u,"POST",function _(w){let I;wV(w);try{I=w.getResponseHeader("X-Goog-Upload-URL")}catch{pl(!1)}return pl(jS(I)),I},t.maxUploadRetryTime);return v.urlParams=a,v.headers=c,v.body=h,v.errorHandler=Fy(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Tu,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function Yze(t,e,n,r){const u=new fl(n,"POST",function s(l){const c=wV(l,["active","final"]);let h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{pl(!1)}h||pl(!1);const g=Number(h);return pl(!isNaN(g)),new zS(g,r.size(),"final"===c)},t.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=Fy(e),u}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Tu,n,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new zS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Xze(t,e,n,r,i,s,o,a){const u=new zS(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function dze(){return new zr(Vr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=u.total-u.current;let c=l;i>0&&(c=Math.min(c,i));const h=u.current;let _="";_=0===c?"finalize":l===c?"upload, finalize":"upload";const v={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${u.current}`},w=r.slice(h,h+c);if(null===w)throw GX();const O=new fl(n,"POST",function I(U,he){const de=wV(U,["active","final"]),R=u.current+c,k=r.size();let F;return F="final"===de?HS(e,s)(U,he):null,new zS(R,k,"final"===de,F)},e.maxUploadRetryTime);return O.headers=v,O.body=w.uploadData(),O.progressCallback=a||null,O.errorHandler=Fy(t),O}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Tu,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=iZ(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Tu,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function aZ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let O="";for(let U=0;U<2;U++)O+=Math.random().toString().slice(2);return O}();o["Content-Type"]="multipart/related; boundary="+u;const l=oZ(e,r,i),c=bV(l,n),_=hl.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+u+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===_)throw GX();const v={name:l.fullPath},w=Pc(s,t.host,t._protocol),S=t.maxUploadRetryTime,x=new fl(w,"POST",HS(t,n),S);return x.urlParams=v,x.headers=o,x.body=_.uploadData(),x.errorHandler=Fy(e),x}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Tu,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=zX(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=EV(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new eGe(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(EV(this._state)){case Xs.SUCCESS:Vy(this._resolve.bind(null,this.snapshot))();break;case Xs.CANCELED:case Xs.ERROR:Vy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(EV(this._state)){case Xs.RUNNING:case Xs.PAUSED:e.next&&Vy(e.next.bind(e,this.snapshot))();break;case Xs.SUCCESS:e.complete&&Vy(e.complete.bind(e))();break;default:e.error&&Vy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class pp{constructor(e,n){this._service=e,this._location=n instanceof Ds?n:Ds.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new pp(e,n)}get root(){const e=new Ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eZ(this._location.path)}get storage(){return this._service}get parent(){const e=function Oze(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Ds(this._location.bucket,e);return new pp(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw WX(e)}}function hZ(t,e,n){return TV.apply(this,arguments)}function TV(){return TV=(0,Y.A)(function*(t,e,n){const i=yield fZ(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield hZ(t,e,i.nextPageToken))}),TV.apply(this,arguments)}function fZ(t,e){null!=e&&"number"==typeof e.maxResults&&gV("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Gze(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Tu)}function pGe(t){t._throwIfRoot("getDownloadURL");const e=function qze(t,e,n){const i=Pc(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new fl(i,"GET",function zze(t,e){return function n(r,i){const s=tZ(t,i,e);return pl(null!==s),function jze(t,e,n,r){const i=vV(e);if(null===i||!jS(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const h=t.fullPath;return Pc("/b/"+o(t.bucket)+"/o/"+o(h),n,r)+QX({alt:"media",token:l})})[0]}(s,i,t.host,t._protocol)}}(t,n),o);return a.errorHandler=sw(e),a}(t.storage,t._location,iw());return t.storage.makeRequestWithTokens(e,Tu).then(n=>{if(null===n)throw function hze(){return new zr(Vr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function pZ(t,e){const n=function Mze(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Ds(t._location.bucket,n);return new pp(t.storage,r)}function mZ(t,e){if(t instanceof IV){const n=t;if(null==n._bucket)throw function cze(){return new zr(Vr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+UX+"' property when initializing the app?")}();const r=new pp(n,n._bucket);return null!=e?mZ(r,e):r}return void 0!==e?pZ(t,e):t}function _Ge(t,e){if(e&&function gGe(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof IV)return function yGe(t,e){return new pp(t,e)}(t,e);throw Oy("To use ref(service, url), the first argument must be a Storage instance.")}return mZ(t,e)}function gZ(t,e){const n=e?.[UX];return null==n?null:Ds.makeFromBucketSpec(n,t)}class IV{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=BX,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ds.makeFromBucketSpec(i,this._host):gZ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ds.makeFromBucketSpec(this._url,e):gZ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Y.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Y.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pp(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new pze(qX());{const o=function Aze(t,e,n,r,i,s,o=!0){const a=QX(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return function Tze(t,e){e&&(t["X-Firebase-GMPID"]=e)}(l,e),function wze(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(l,n),function Eze(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,s),function Ize(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(l,r),new bze(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){var r=this;return(0,Y.A)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,s).getPromise()})()}}const yZ="@firebase/storage";function bZ(t,e){return _Ge(t=(0,rn.Ku)(t),e)}function DGe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new IV(n,r,i,e,Ju.SDK_VERSION)}!function NGe(){(0,Ju._registerComponent)(new TA.uA("storage",DGe,"PUBLIC").setMultipleInstances(!0)),(0,Ju.registerVersion)(yZ,"0.12.6",""),(0,Ju.registerVersion)(yZ,"0.12.6","esm2017")}();class GS{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class EZ{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new GS(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new GS(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(s="function"==typeof n?o=>n(new GS(o,this,this._ref)):{next:n.next?o=>n.next(new GS(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class TZ{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new kc(e,this._service))}get items(){return this._delegate.items.map(e=>new kc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class kc{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function SGe(t,e){return pZ(t,e)}(this._delegate,e);return new kc(n,this.storage)}get root(){return new kc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new kc(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new EZ(function bGe(t,e,n){return function lGe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new cZ(t,new hl(e),n)}(t=(0,rn.Ku)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=Xo.RAW,r){this._throwIfRoot("putString");const i=_V(n,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new EZ(new cZ(this._delegate,new hl(i.data,!0),s),this)}listAll(){return function IGe(t){return function dGe(t){const e={prefixes:[],items:[]};return hZ(t,e).then(()=>e)}(t=(0,rn.Ku)(t))}(this._delegate).then(e=>new TZ(e,this.storage))}list(e){return function TGe(t,e){return fZ(t=(0,rn.Ku)(t),e)}(this._delegate,e||void 0).then(n=>new TZ(n,this.storage))}getMetadata(){return function wGe(t){return function hGe(t){t._throwIfRoot("getMetadata");const e=iZ(t.storage,t._location,iw());return t.storage.makeRequestWithTokens(e,Tu)}(t=(0,rn.Ku)(t))}(this._delegate)}updateMetadata(e){return function EGe(t,e){return function fGe(t,e){t._throwIfRoot("updateMetadata");const n=function Wze(t,e,n,r){const s=Pc(e.fullServerUrl(),t.host,t._protocol),a=bV(n,r),l=t.maxOperationRetryTime,c=new fl(s,"PATCH",HS(t,r),l);return c.headers={"Content-Type":"application/json; charset=utf-8"},c.body=a,c.errorHandler=sw(e),c}(t.storage,t._location,e,iw());return t.storage.makeRequestWithTokens(n,Tu)}(t=(0,rn.Ku)(t),e)}(this._delegate,e)}getDownloadURL(){return function AGe(t){return pGe(t=(0,rn.Ku)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function CGe(t){return function mGe(t){t._throwIfRoot("deleteObject");const e=function Kze(t,e){const r=Pc(e.fullServerUrl(),t.host,t._protocol),a=new fl(r,"DELETE",function o(u,l){},t.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=sw(e),a}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Tu)}(t=(0,rn.Ku)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw WX(e)}}class IZ{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(AZ(e))throw Oy("ref() expected a child path but got a URL, use refFromURL instead.");return new kc(bZ(this._delegate,e),this)}refFromURL(e){if(!AZ(e))throw Oy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ds.makeFromUrl(e,this._delegate.host)}catch{throw Oy("refFromUrl() expected a valid full URL but got an invalid one.")}return new kc(bZ(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function wZ(t,e,n,r={}){!function vGe(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,rn.Fy)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function AZ(t){return/^[A-Za-z]+:\/\//.test(t)}function RGe(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new IZ(n,r)}function CZ(t){const e=function MGe(t){return new On(e=>{const n=o=>e.next(o);n(t.snapshot);const s=t.on("state_changed",n);return t.then(o=>{n(o),e.complete()},o=>{n(t.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function ZHe(t,e=k0){return Ot((n,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=s;s=null,r.next(l)}};function u(){const l=o+t,c=e.now();if(c<l)return i=this.schedule(void 0,l-c),void r.add(i);a()}n.subscribe(Pt(r,l=>{s=l,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(pt(n=>n.bytesTransferred/n.totalBytes*100))}}function qS(t){return{getDownloadURL:()=>It(void 0).pipe(W5,Pr(()=>t.getDownloadURL()),Gs),getMetadata:()=>It(void 0).pipe(W5,Pr(()=>t.getMetadata()),Gs),delete:()=>vn(t.delete()),child:e=>qS(t.child(e)),updateMetadata:e=>vn(t.updateMetadata(e)),put:(e,n)=>CZ(t.put(e,n)),putString:(e,n,r)=>CZ(t.putString(e,n,r)),list:e=>vn(t.list(e)),listAll:()=>vn(t.listAll())}}!function OGe(t){const e={TaskState:Xs,TaskEvent:Zze,StringFormat:Xo,Storage:IZ,Reference:kc};t.INTERNAL.registerComponent(new TA.uA("storage-compat",RGe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.9")}(zs.A);const FGe=new Fe("angularfire2.storageBucket"),VGe=new Fe("angularfire2.storage.maxUploadRetryTime"),LGe=new Fe("angularfire2.storage.maxOperationRetryTime"),$Ge=new Fe("angularfire2.storage.use-emulator");let SZ=(()=>{class t{storage;constructor(n,r,i,s,o,a,u,l,c,h){const g=R0(n,o,r);this.storage=EA(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{const _=o.runOutsideAngular(()=>g.storage(i||void 0)),v=c;return v&&_.useEmulator(...v),u&&_.setMaxUploadRetryTime(u),l&&_.setMaxOperationRetryTime(l),_},[u,l])}ref(n){return qS(this.storage.ref(n))}refFromURL(n){return qS(this.storage.refFromURL(n))}upload(n,r,i){return qS(this.storage.ref(n)).put(r,i)}static \u0275fac=function(r){return new(r||t)(Se(gg),Se(yg,8),Se(FGe,8),Se(ya),Se(en),Se(wA),Se(VGe,8),Se(LGe,8),Se($Ge,8),Se(bA,8))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),jGe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ri({type:t});static \u0275inj=Jr({})}return t})(),BGe=(()=>{class t{constructor(){zs.A.registerVersion("angularfire",x0.full,"gcs-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ri({type:t});static \u0275inj=Jr({providers:[SZ],imports:[jGe]})}return t})();const UGe=["chatContainer"],HGe=(t,e)=>({"flex justify-end":t,"flex justify-start":e}),zGe=(t,e,n)=>({"bg-accent5 text-black":t,"bg-white text-darkgray":e,"bg-red-100 text-red-800":n});function GGe(t,e){1&t&&vr(0,"i",51)}function qGe(t,e){1&t&&vr(0,"i",52)}function WGe(t,e){if(1&t){const n=Lv();$t(0,"div",53)(1,"button",54),li("click",function(){Fl(n);const i=Ii().$implicit;return Vl(Ii().provideFeedback(i.id,!0))}),vr(2,"i",55),Fn(3," Helpful "),tn(),$t(4,"button",56),li("click",function(){Fl(n);const i=Ii().$implicit;return Vl(Ii().provideFeedback(i.id,!1))}),vr(5,"i",57),Fn(6," Not Helpful "),tn()()}if(2&t){const n=Ii().$implicit;fn(),Bn("disabled","positive"===n.feedback),fn(3),Bn("disabled","negative"===n.feedback)}}function KGe(t,e){if(1&t&&($t(0,"div",42)(1,"div",43)(2,"div",44)(3,"div",45),iu(4,GGe,1,0,"i",46)(5,qGe,1,0,"i",47),$t(6,"div",48)(7,"span",23),Fn(8),tn(),vr(9,"span",49),tn()(),iu(10,WGe,7,2,"div",50),tn()()()),2&t){const n=e.$implicit;fn(),Bn("ngClass",W4(8,HGe,"user"===n.sender,"ai"===n.sender)),fn(),Bn("ngClass",K4(11,zGe,"user"===n.sender,"ai"===n.sender,n.isError)),ns("role","ai"===n.sender?"status":null),fn(2),Bn("ngIf","ai"===n.sender),fn(),Bn("ngIf","user"===n.sender),fn(3),zm("ai"===n.sender?"Alfred says:":"You said:"),fn(),Bn("innerHTML",n.content,gT),fn(),Bn("ngIf","ai"===n.sender&&!n.isError&&n.id)}}function QGe(t,e){1&t&&($t(0,"div",58)(1,"div",59)(2,"div",60),vr(3,"i",61),tn(),$t(4,"span",62),Fn(5,"Alfred is thinking..."),tn()()())}function JGe(t,e){if(1&t&&($t(0,"li",67),vr(1,"i",68),$t(2,"span"),Fn(3),tn()()),2&t){const n=e.$implicit;fn(3),zm(n)}}function YGe(t,e){if(1&t&&($t(0,"div",63)(1,"h2",64),Fn(2,"Relevant Documents"),tn(),$t(3,"ul",65),iu(4,JGe,4,1,"li",66),tn()()),2&t){const n=Ii();fn(4),Bn("ngForOf",n.relevantDocuments)}}const XGe=[{path:"",redirectTo:"/ai-chat",pathMatch:"full"},{path:"ai-chat",component:(()=>{class t{constructor(n,r,i){this.aiService=n,this.storage=r,this.firestore=i,this.question="",this.chatHistory=[],this.isLoading=!1,this.pulseState="inactive",this.relevantDocuments=[],this.visitCount$=this.aiService.getVisitCountExt(),this.searchCount$=this.aiService.getSearchCountExt(),this.loadingSubscription=this.aiService.getLoadingState().subscribe(s=>this.isLoading=s)}ngOnInit(){this.addWelcomeMessage(),this.aiService.logPageVisit()}ngAfterViewChecked(){this.scrollToBottom()}ngOnDestroy(){this.loadingSubscription&&this.loadingSubscription.unsubscribe()}askQuestion(){this.question.trim()&&(this.addUserMessage(this.question),this.pulseState="active",this.getAiResponse())}provideFeedback(n,r){const i=this.chatHistory.find(s=>s.id===n);i&&(i.feedback=r?"positive":"negative",this.aiService.provideFeedback(n,r).subscribe(()=>console.log("Feedback submitted successfully"),s=>console.error("Error submitting feedback:",s)))}addWelcomeMessage(){this.chatHistory.push({content:"<i class='bi bi-emoji-smile mr-2'></i>Hello! I'm Alfred, an AI assistant here to help you with information about the Infrastructure Transparency Index 2024 report for Uganda. What would you like to know?",sender:"ai"})}addUserMessage(n){this.chatHistory.push({content:n,sender:"user"})}getAiResponse(){this.aiService.askQuestion(this.question).pipe(Xl(()=>{this.question="",this.pulseState="inactive"})).subscribe(n=>this.handleAiResponse(n),n=>this.handleError(n))}handleAiResponse(n){const r=this.formatAnswer(n.answer),i=`msg-${Date.now()}`;this.addAiMessage(r,i),this.addContextInfo(n,i)}addAiMessage(n,r){this.chatHistory.push({id:r,content:`<div class="bg-gray-100 rounded-lg p-4 mb-4 shadow-sm">${n}</div>`,sender:"ai"})}addContextInfo(n,r){n.contextRelevance&&this.chatHistory.push({content:`<i class='bi bi-info-circle mr-2'></i>Context Relevance: ${n.contextRelevance}`,sender:"ai",id:`${r}-context`})}formatAnswer(n){let s=n.split("\n\n").map(o=>{if(o.match(/^(\d+\.|-)\s/m)){const a=o.split("\n"),u=a[0].startsWith("-")?"ul":"ol";return`<${u} class="list-disc list-inside mb-4">${a.map(c=>`<li class="ml-5 mb-2">${c.replace(/^(\d+\.|-)\s/,"").trim()}</li>`).join("")}</${u}>`}return`<p class="mb-4">${o}</p>`}).join("");return s=s.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic">$1</em>').replace(/(\w+):/g,'<span class="font-semibold secondary">$1:</span>'),`<div class="flex items-start">\n      <i class="bi bi-chat-left-text mr-2 mt-1 secondary"></i>\n      <div>${s}</div>\n    </div>`}handleError(n){const r=this.createErrorMessage(n);this.chatHistory.push({content:"<i class='bi bi-exclamation-triangle mr-2'></i>"+r,sender:"ai",isError:!0})}createErrorMessage(n){let r="I apologize, but I encountered an issue. ";return n.message.includes("404")?r+="The requested information couldn't be found. Could you please rephrase your question or ask about a different topic?":r+=n.message||"An unexpected error occurred. Please try again later.",r}scrollToBottom(){try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch(n){console.error("Error scrolling to bottom:",n)}}downloadFullReport(){var n=this;return(0,Y.A)(function*(){const i=n.storage.ref("Report-final.pdf");try{const s=yield i.getDownloadURL().toPromise();yield n.firestore.doc("downloads/Report-final.pdf").set({count:zs.A.firestore.FieldValue.increment(1)},{merge:!0});const o=document.createElement("a");o.href=s,o.download="Report-final.pdf",o.target="_blank",o.click()}catch(s){console.error("Error downloading file:",s)}})()}clearChat(){this.chatHistory=[],this.addWelcomeMessage(),this.aiService.clearCache()}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(XHe),Ve(SZ),Ve(EM))};static#t=this.\u0275cmp=Ya({type:t,selectors:[["app-ai-chat"]],viewQuery:function(r,i){if(1&r&&w4(UGe,5),2&r){let s;$P(s=jP())&&(i.chatContainer=s.first)}},standalone:!0,features:[zv],decls:64,vars:13,consts:[["chatContainer",""],[1,"font-inter","bg-lightgray","min-h-screen","p-4","sm:p-6","md:p-8"],[1,"max-w-3xl","mx-auto","bg-accent6","rounded-[1rem]","shadow-xl","overflow-hidden"],[1,"bg-gradient-to-r","from-teal","to-lightblue","text-white","p-6"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-3"],[1,"bi","bi-robot","text-3xl"],[1,"text-2xl","font-semibold","text-darkgray"],[1,"bg-accent3","text-darkgray","px-3","py-1","rounded-full","text-sm","hover:bg-accent5","transition-colors","duration-300","ease-apple-ease-out",3,"click"],[1,"bi","bi-trash","mr-1"],[1,"mt-3","text-sm","opacity-75","text-darkgray"],["role","log","aria-live","polite",1,"h-[calc(100vh-20rem)]","overflow-y-auto","p-4","sm:p-6","bg-gray-50"],["class","mb-6 animate-fade-in",4,"ngFor","ngForOf"],["class","flex justify-start mb-4 animate-fade-in",4,"ngIf"],["class","p-6 bg-gray-100 border-t border-gray-200",4,"ngIf"],[1,"p-6","bg-white","border-t","border-gray-200"],[1,"flex","items-center","space-x-2",3,"ngSubmit"],["for","userInput",1,"sr-only"],[1,"relative","flex-grow"],["id","userInput","type","text","name","question","placeholder","Ask Alfred a question...",1,"w-full","p-3","pr-10","rounded-[1rem]","border","border-gray-300","focus:outline-none","focus:ring-2","focus:ring-teal","transition-ease-out",3,"ngModelChange","ngModel"],[1,"bi","bi-chat-dots","absolute","right-3","top-1/2","transform","-translate-y-1/2","text-gray-400"],["type","submit",1,"bg-accent6","text-white","p-3","rounded-[1rem]","hover:bg-lightblue","focus:outline-none","focus:ring-2","focus:ring-teal","disabled:opacity-50","transition-ease-out","press-effect",3,"disabled"],[1,"bi","bi-send"],[1,"sr-only"],[1,"max-w-3xl","mx-auto","p-8","bg-light-gray"],[1,"text-2xl","font-semibold","text-dark-gray","mb-6","text-center"],[1,"flex","flex-col","md:flex-row","justify-center","space-y-6","md:space-y-0","md:space-x-8"],[1,"bg-white","bg-opacity-80","backdrop-filter","backdrop-blur-lg","p-6","rounded-[1rem]","shadow-md","text-center","transform","transition","duration-300","ease-[cubic-bezier(0.25,","0.1,","0.25,","1)]","hover:translate-y-[-4px]","hover:shadow-lg"],[1,"text-4xl","font-bold","text-teal","mb-3","animate-fade-in"],[1,"text-sm","text-gray","flex","items-center","justify-center"],[1,"bi","bi-eye-fill","mr-2","text-lg"],[1,"bi","bi-search","mr-2","text-lg"],[1,"mt-12","px-6","py-8","bg-primary","border-t","border-accent2"],[1,"max-w-5xl","mx-auto"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","space-y-6","sm:space-y-0"],[1,"flex","flex-col","sm:flex-row","space-y-4","sm:space-y-0","sm:space-x-8"],["routerLink","/overview",1,"flex","items-center","text-accent","hover:text-accent4","transition-colors","duration-300","ease-apple-ease-out","group"],[1,"bi","bi-bar-chart-fill","mr-3","text-lg","group-hover:text-accent6"],[1,"text-sm","font-medium"],[1,"flex","items-center","text-accent","hover:text-accent4","transition-colors","duration-300","ease-apple-ease-out","group","cursor-pointer",3,"click"],[1,"bi","bi-download","mr-3","text-lg","group-hover:text-accent6"],[1,"text-xs","text-accent3"],[1,"mb-6","animate-fade-in"],[3,"ngClass"],[1,"w-full","sm:max-w-[80%]","p-4","rounded-[1rem]","shadow-md",3,"ngClass"],[1,"flex","items-start","space-x-2"],["class","bi bi-robot text-lg mt-1 flex-shrink-0",4,"ngIf"],["class","bi bi-person text-lg mt-1 flex-shrink-0",4,"ngIf"],[1,"flex-grow"],[1,"text-sm","sm:text-base",3,"innerHTML"],["class","mt-3 flex justify-end space-x-2",4,"ngIf"],[1,"bi","bi-robot","text-lg","mt-1","flex-shrink-0"],[1,"bi","bi-person","text-lg","mt-1","flex-shrink-0"],[1,"mt-3","flex","justify-end","space-x-2"],[1,"text-xs","sm:text-sm","px-2","sm:px-3","py-1","rounded-full","bg-green-100","text-green-800","hover:bg-green-200","disabled:opacity-50","transition-ease-out",3,"click","disabled"],[1,"bi","bi-hand-thumbs-up","mr-1"],[1,"text-xs","sm:text-sm","px-2","sm:px-3","py-1","rounded-full","bg-red-100","text-red-800","hover:bg-red-200","disabled:opacity-50","transition-ease-out",3,"click","disabled"],[1,"bi","bi-hand-thumbs-down","mr-1"],[1,"flex","justify-start","mb-4","animate-fade-in"],["role","status",1,"bg-white","text-darkgray","p-4","rounded-[1rem]","shadow-md","flex","items-center","space-x-2"],[1,"animate-bounce"],[1,"bi","bi-three-dots","text-xl"],[1,"text-sm","sm:text-base"],[1,"p-6","bg-gray-100","border-t","border-gray-200"],[1,"text-lg","font-semibold","mb-3","text-darkgray"],[1,"space-y-2"],["class","flex items-center text-sm text-darkgray",4,"ngFor","ngForOf"],[1,"flex","items-center","text-sm","text-darkgray"],[1,"bi","bi-file-text","mr-2"]],template:function(r,i){if(1&r){const s=Lv();$t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),vr(5,"i",6),$t(6,"div")(7,"h1",7),Fn(8,"Alfred"),tn()()(),$t(9,"button",8),li("click",function(){return Fl(s),Vl(i.clearChat())}),vr(10,"i",9),Fn(11,"Clear Chat "),tn()(),$t(12,"p",10),Fn(13,"Developed by CoST to make access to information easy. I'm here to help, but please note that I may not always be correct and my knowledge is limited."),tn()(),$t(14,"div",11,0),iu(16,KGe,11,15,"div",12)(17,QGe,6,0,"div",13),tn(),iu(18,YGe,5,1,"div",14),$t(19,"div",15)(20,"form",16),li("ngSubmit",function(){return Fl(s),Vl(i.askQuestion())}),$t(21,"label",17),Fn(22,"Type your message"),tn(),$t(23,"div",18)(24,"input",19),HP("ngModelChange",function(a){return Fl(s),function j4(t,e){const n=TB(t);return n&&t.set(e),n}(i.question,a)||(i.question=a),Vl(a)}),tn(),vr(25,"i",20),tn(),$t(26,"button",21),vr(27,"i",22),$t(28,"span",23),Fn(29,"Send"),tn()()()()()(),$t(30,"div",24)(31,"h2",25),Fn(32,"Usage Statistics"),tn(),$t(33,"div",26)(34,"div",27)(35,"div",28),Fn(36),KP(37,"async"),tn(),$t(38,"div",29),vr(39,"i",30),$t(40,"span"),Fn(41,"Page Visits"),tn()()(),$t(42,"div",27)(43,"div",28),Fn(44),KP(45,"async"),tn(),$t(46,"div",29),vr(47,"i",31),$t(48,"span"),Fn(49,"Searches Made"),tn()()()()(),$t(50,"footer",32)(51,"div",33)(52,"div",34)(53,"nav",35)(54,"a",36),vr(55,"i",37),$t(56,"span",38),Fn(57,"Interactive Report"),tn()(),$t(58,"a",39),li("click",function(){return Fl(s),Vl(i.downloadFullReport())}),vr(59,"i",40),$t(60,"span",38),Fn(61,"Download Full Report"),tn()()(),$t(62,"p",41),Fn(63," \xa9 2024 Infrastructure Transparency Initiative. All rights reserved. "),tn()()()()}2&r&&(fn(16),Bn("ngForOf",i.chatHistory),fn(),Bn("ngIf",i.isLoading),fn(),Bn("ngIf",i.relevantDocuments.length>0),fn(6),UP("ngModel",i.question),ns("aria-label","Type your message"),fn(2),Bn("disabled",i.isLoading||!i.question.trim()),ns("aria-label","Send message"),fn(10),zm(QP(37,9,i.visitCount$)),fn(8),zm(QP(45,11,i.searchCount$)))},dependencies:[Mk,Rz,Mz,NI,$z,h_e,E5,sA,a5,u5,Lx,yA,E0],styles:[".apple-press-effect[_ngcontent-%COMP%]{transition:transform .1s ease-in-out}.apple-press-effect[_ngcontent-%COMP%]:active{transform:scale(.95)}"],data:{animation:[S0("fadeInOut",[Sd(":enter",[Hs({opacity:0,transform:"translateY(10px)"}),Cd("300ms ease-out",Hs({opacity:1,transform:"translateY(0)"}))]),Sd(":leave",[Cd("300ms ease-in",Hs({opacity:0,transform:"translateY(10px)"}))])]),S0("slideInOut",[Sd(":enter",[Hs({transform:"translateY(100%)"}),Cd("300ms ease-out",Hs({transform:"translateY(0)"}))]),Sd(":leave",[Cd("300ms ease-in",Hs({transform:"translateY(100%)"}))])]),S0("pulse",[D0("inactive",Hs({transform:"scale(1)"})),D0("active",Hs({transform:"scale(1.1)"})),Sd("inactive <=> active",Cd("300ms ease-in-out"))])]}})}return t})()}];let ZGe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({imports:[Ex.forRoot(XGe),Ex]})}return t})();const e6e=()=>({exact:!0});let t6e=(()=>{class t{constructor(n){this.textService=n,this.title="itiReport",this.isMobileMenuOpen=!1,this.processingProgress=0,this.progressSubscription=null}ngOnInit(){this.progressSubscription=this.textService.progress$.subscribe(n=>{this.processingProgress=n,console.log(`Processing progress: ${n}%`)})}ngOnDestroy(){this.progressSubscription&&this.progressSubscription.unsubscribe()}processDocument(){this.textService.processDocument("assets/data/assuranceManual.txt").subscribe({next:n=>{console.log("Document processing complete:",n)},error:n=>{console.error("Error processing document:",n)},complete:()=>{console.log("Document processing operation completed")}})}processJsonDataset(){this.textService.processJsonDataset("assets/projectScores.json").subscribe({next:n=>{console.log("JSON dataset processing complete:",n)},error:n=>{console.error("Error processing JSON dataset:",n)},complete:()=>{console.log("JSON dataset processing operation completed")}})}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}static#e=this.\u0275fac=function(r){return new(r||t)(Ve(hV))};static#t=this.\u0275cmp=Ya({type:t,selectors:[["app-root"]],decls:16,vars:2,consts:[[1,"min-h-screen","flex","flex-col","bg-primary","font-inter"],[1,"bg-white","shadow-apple-sm"],[1,"container","mx-auto","px-4","py-3","flex","justify-between","items-center"],["routerLink","/",1,"text-2xl","font-bold","text-accent"],[1,"flex","space-x-4"],["routerLink","/","routerLinkActive","text-accent6",1,"text-accent3","hover:text-accent6","transition-colors","duration-300",3,"routerLinkActiveOptions"],[1,"bi","bi-house-door","mr-1"],["routerLink","/ai-chat","routerLinkActive","text-accent6",1,"text-accent3","hover:text-accent6","transition-colors","duration-300"],[1,"bi","bi-robot","mr-1"],[1,"flex-grow"]],template:function(r,i){1&r&&($t(0,"div",0)(1,"header",1)(2,"nav",2)(3,"a",3),Fn(4,"ITI Report Uganda (2024)"),tn(),$t(5,"ul",4)(6,"li")(7,"a",5),vr(8,"i",6),Fn(9," Home "),tn()(),$t(10,"li")(11,"a",7),vr(12,"i",8),Fn(13," AI Chat "),tn()()()()(),$t(14,"main",9),vr(15,"router-outlet"),tn()()),2&r&&(fn(7),Bn("routerLinkActiveOptions",function q4(t,e,n){const r=Ms()+t,i=Ee();return i[r]===Gt?$u(i,r,n?e.call(n):e()):function Pv(t,e){return t[e]}(i,r)}(1,e6e)))},dependencies:[cx,E0,S6],data:{animation:[S0("fadeInUp",[Sd(":enter",[Hs({opacity:0,transform:"translateY(20px)"}),Cd("500ms ease-out",Hs({opacity:1,transform:"translateY(0)"}))])])]}})}return t})();const DZ_firebase={apiKey:"AIzaSyAITMAn5KoFfvaIS3tHE_SqYorUoNlqjwY",authDomain:"itiuganda.firebaseapp.com",projectId:"itiuganda",storageBucket:"itiuganda.appspot.com",messagingSenderId:"178195669411",appId:"1:178195669411:web:1a7f51357b2443cefa3a16",measurementId:"G-YPBQDJRE71"};function NZ(t){return new fe(3e3,!1)}function dh(t){switch(t.length){case 0:return new N0;case 1:return t[0];default:return new B5(t)}}function PZ(t,e,n=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(u=>{const l=u.get("offset"),c=l==o,h=c&&a||new Map;u.forEach((g,_)=>{let v=_,w=g;if("offset"!==_)switch(v=t.normalizePropertyName(v,i),w){case"!":w=n.get(_);break;case ec:w=r.get(_);break;default:w=t.normalizeStyleValue(_,v,w,i)}h.set(v,w)}),c||s.push(h),a=h,o=l}),i.length)throw function I6e(t){return new fe(3502,!1)}();return s}function AV(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&CV(n,"start",t)));break;case"done":t.onDone(()=>r(n&&CV(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&CV(n,"destroy",t)))}}function CV(t,e,n){const s=SV(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,n.totalTime??t.totalTime,!!n.disabled),o=t._data;return null!=o&&(s._data=o),s}function SV(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Zo(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function kZ(t){const e=t.indexOf(":");return[t.substring(1,e),t.slice(e+1)]}const F6e=typeof document>"u"?null:document.documentElement;function DV(t){const e=t.parentNode||t.host||null;return e===F6e?null:e}let mp=null,xZ=!1;function RZ(t,e){for(;e;){if(e===t)return!0;e=DV(e)}return!1}function OZ(t,e,n){if(n)return Array.from(t.querySelectorAll(e));const r=t.querySelector(e);return r?[r]:[]}let NV=(()=>{class t{validateStyleProperty(n){return function L6e(t){mp||(mp=function $6e(){return typeof document<"u"?document.body:null}()||{},xZ=!!mp.style&&"WebkitAppearance"in mp.style);let e=!0;return mp.style&&!function V6e(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in mp.style,!e&&xZ&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in mp.style)),e}(n)}containsElement(n,r){return RZ(n,r)}getParentElement(n){return DV(n)}query(n,r,i){return OZ(n,r,i)}computeStyle(n,r,i){return i||""}animate(n,r,i,s,o,a=[],u){return new N0(i,s)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();class PV{static#e=this.NOOP=new NV}class kV{}const B6e=1e3,xV="ng-enter",WS="ng-leave",KS="ng-trigger",QS=".ng-trigger",FZ="ng-animating",RV=".ng-animating";function xc(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OV(parseFloat(e[1]),e[2])}function OV(t,e){return"s"===e?t*B6e:t}function JS(t,e,n){return t.hasOwnProperty("duration")?t:function H6e(t,e,n){let i,s=0,o="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(NZ()),{duration:0,delay:0,easing:""};i=OV(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(s=OV(parseFloat(u),a[4]));const l=a[5];l&&(o=l)}else i=t;if(!n){let a=!1,u=e.length;i<0&&(e.push(function n6e(){return new fe(3100,!1)}()),a=!0),s<0&&(e.push(function r6e(){return new fe(3101,!1)}()),a=!0),a&&e.splice(u,0,NZ())}return{duration:i,delay:s,easing:o}}(t,e,n)}function ml(t,e,n){e.forEach((r,i)=>{const s=FV(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r})}function gp(t,e){e.forEach((n,r)=>{const i=FV(r);t.style[i]=""})}function ow(t){return Array.isArray(t)?1==t.length?t[0]:function f_e(t,e=null){return{type:Bt.Sequence,steps:t,options:e}}(t):t}const MV=new RegExp("{{\\s*(.+?)\\s*}}","g");function LZ(t){let e=[];if("string"==typeof t){let n;for(;n=MV.exec(t);)e.push(n[1]);MV.lastIndex=0}return e}function aw(t,e,n){const r=`${t}`,i=r.replace(MV,(s,o)=>{let a=e[o];return null==a&&(n.push(function s6e(t){return new fe(3003,!1)}()),a=""),a.toString()});return i==r?t:i}const q6e=/-+([a-z0-9])/g;function FV(t){return t.replace(q6e,(...e)=>e[1].toUpperCase())}function ea(t,e,n){switch(e.type){case Bt.Trigger:return t.visitTrigger(e,n);case Bt.State:return t.visitState(e,n);case Bt.Transition:return t.visitTransition(e,n);case Bt.Sequence:return t.visitSequence(e,n);case Bt.Group:return t.visitGroup(e,n);case Bt.Animate:return t.visitAnimate(e,n);case Bt.Keyframes:return t.visitKeyframes(e,n);case Bt.Style:return t.visitStyle(e,n);case Bt.Reference:return t.visitReference(e,n);case Bt.AnimateChild:return t.visitAnimateChild(e,n);case Bt.AnimateRef:return t.visitAnimateRef(e,n);case Bt.Query:return t.visitQuery(e,n);case Bt.Stagger:return t.visitStagger(e,n);default:throw function o6e(t){return new fe(3004,!1)}()}}function VV(t,e){return window.getComputedStyle(t)[e]}const Q6e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class $Z extends kV{normalizePropertyName(e,n){return FV(e)}normalizeStyleValue(e,n,r,i){let s="";const o=r.toString().trim();if(Q6e.has(n)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function a6e(t,e){return new fe(3005,!1)}())}return o+s}}const YS="*";const XS=new Set(["true","1"]),ZS=new Set(["false","0"]);function jZ(t,e){const n=XS.has(t)||ZS.has(t),r=XS.has(e)||ZS.has(e);return(i,s)=>{let o=t==YS||t==i,a=e==YS||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?XS.has(t):ZS.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?XS.has(e):ZS.has(e)),o&&a}}const Z6e=new RegExp("s*:selfs*,?","g");function LV(t,e,n,r){return new e5e(t).build(e,n,r)}class e5e{constructor(e){this._driver=e}build(e,n,r){const i=new r5e(n);return this._resetContextStyleTimingState(i),ea(this,ow(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push(function u6e(){return new fe(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==Bt.State){const u=a,l=u.name;l.toString().split(/\s*,\s*/).forEach(c=>{u.name=c,s.push(this.visitState(u,n))}),u.name=l}else if(a.type==Bt.Transition){const u=this.visitTransition(a,n);r+=u.queryCount,i+=u.depCount,o.push(u)}else n.errors.push(function l6e(){return new fe(3007,!1)}())}),{type:Bt.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){const r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{LZ(u).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&n.errors.push(function c6e(t,e){return new fe(3008,!1)}(0,s.values()))}return{type:Bt.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const r=ea(this,ow(e.animation),n),i=function J6e(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(r=>function Y6e(t,e,n){if(":"==t[0]){const u=function X6e(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(function b6e(t){return new fe(3016,!1)}()),"* => *"}}(t,n);if("function"==typeof u)return void e.push(u);t=u}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(function v6e(t){return new fe(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(jZ(i,o)),"<"==s[0]&&(i!=YS||o!=YS)&&e.push(jZ(o,i))}(r,n,e)):n.push(t),n}(e.expr,n.errors);return{type:Bt.Transition,matchers:i,animation:r,queryCount:n.queryCount,depCount:n.depCount,options:yp(e.options)}}visitSequence(e,n){return{type:Bt.Sequence,steps:e.steps.map(r=>ea(this,r,n)),options:yp(e.options)}}visitGroup(e,n){const r=n.currentTime;let i=0;const s=e.steps.map(o=>{n.currentTime=r;const a=ea(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:Bt.Group,steps:s,options:yp(e.options)}}visitAnimate(e,n){const r=function s5e(t,e){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return $V(JS(t,e).duration,0,"");const n=t;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=$V(0,0,"");return s.dynamic=!0,s.strValue=n,s}const i=JS(n,e);return $V(i.duration,i.delay,i.easing)}(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:Hs({});if(s.type==Bt.Keyframes)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=Hs(l)}n.currentTime+=r.duration+r.delay;const u=this.visitStyle(o,n);u.isEmptyStep=a,i=u}return n.currentAnimateTimings=null,{type:Bt.Animate,timings:r,style:i,options:null}}visitStyle(e,n){const r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ec?r.push(a):n.errors.push(new fe(3002,!1)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let u of a.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:Bt.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){const r=n.currentAnimateTimings;let i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,u)=>{const l=n.collectedStyles.get(n.currentQuerySelector),c=l.get(u);let h=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(n.errors.push(function h6e(t,e,n,r,i){return new fe(3010,!1)}()),h=!1),s=c.startTime),h&&l.set(u,{startTime:s,endTime:i}),n.options&&function G6e(t,e,n){const r=e.params||{},i=LZ(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(function i6e(t){return new fe(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(e,n){const r={type:Bt.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function f6e(){return new fe(3011,!1)}()),r;let s=0;const o=[];let a=!1,u=!1,l=0;const c=e.steps.map(S=>{const x=this._makeStyleAst(S,n);let O=null!=x.offset?x.offset:function i5e(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){const r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}(x.styles),U=0;return null!=O&&(s++,U=x.offset=O),u=u||U<0||U>1,a=a||U<l,l=U,o.push(U),x});u&&n.errors.push(function p6e(){return new fe(3012,!1)}()),a&&n.errors.push(function m6e(){return new fe(3200,!1)}());const h=e.steps.length;let g=0;s>0&&s<h?n.errors.push(function g6e(){return new fe(3202,!1)}()):0==s&&(g=1/(h-1));const _=h-1,v=n.currentTime,w=n.currentAnimateTimings,I=w.duration;return c.forEach((S,x)=>{const O=g>0?x==_?1:g*x:o[x],U=O*I;n.currentTime=v+w.delay+U,w.duration=U,this._validateStyleAst(S,n),S.offset=O,r.styles.push(S)}),r}visitReference(e,n){return{type:Bt.Reference,animation:ea(this,ow(e.animation),n),options:yp(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:Bt.AnimateChild,options:yp(e.options)}}visitAnimateRef(e,n){return{type:Bt.AnimateRef,animation:this.visitReference(e.animation,n),options:yp(e.options)}}visitQuery(e,n){const r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;const[s,o]=function t5e(t){const e=!!t.split(/\s*,\s*/).find(n=>":self"==n);return e&&(t=t.replace(Z6e,"")),t=t.replace(/@\*/g,QS).replace(/@\w+/g,n=>QS+"-"+n.slice(1)).replace(/:animating/g,RV),[t,e]}(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,Zo(n.collectedStyles,n.currentQuerySelector,new Map);const a=ea(this,ow(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:Bt.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:yp(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(function y6e(){return new fe(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:JS(e.timings,n.errors,!0);return{type:Bt.Stagger,animation:ea(this,ow(e.animation),n),timings:r,options:null}}}class r5e{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function yp(t){return t?(t={...t}).params&&(t.params=function n5e(t){return t?{...t}:null}(t.params)):t={},t}function $V(t,e,n){return{duration:t,delay:e,easing:n}}function jV(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class eD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const u5e=new RegExp(":enter","g"),c5e=new RegExp(":leave","g");function BV(t,e,n,r,i,s=new Map,o=new Map,a,u,l=[]){return(new d5e).buildKeyframes(t,e,n,r,i,s,o,a,u,l)}class d5e{buildKeyframes(e,n,r,i,s,o,a,u,l,c=[]){l=l||new eD;const h=new UV(e,n,l,i,s,c,[]);h.options=u;const g=u.delay?xc(u.delay):0;h.currentTimeline.delayNextStep(g),h.currentTimeline.setStyles([o],null,h.errors,u),ea(this,r,h);const _=h.timelines.filter(v=>v.containsAnimation());if(_.length&&a.size){let v;for(let w=_.length-1;w>=0;w--){const I=_[w];if(I.element===n){v=I;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,h.errors,u)}return _.length?_.map(v=>v.buildKeyframes()):[jV(n,[],[],[],0,g,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const r=n.subInstructions.get(n.element);if(r){const i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){const r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:xc(aw(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime;const o=null!=r.duration?xc(r.duration):null,a=null!=r.delay?xc(r.delay):null;return 0!==o&&e.forEach(u=>{const l=n.appendInstructionToTimeline(u,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),ea(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const r=n.subContextCount;let i=n;const s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){i.previousNode.type==Bt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=tD);const o=xc(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ea(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const r=[];let i=n.currentTimeline.currentTime;const s=e.options&&e.options.delay?xc(e.options.delay):0;e.steps.forEach(o=>{const a=n.createSubContext(e.options);s&&a.delayNextStep(s),ea(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const r=e.strValue;return JS(n.params?aw(r,n.params,n.errors):r,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;s.type==Bt.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(u=>{a.forwardTime((u.offset||0)*s),a.setStyles(u.styles,u.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){const r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?xc(i.delay):0;s&&(n.previousNode.type===Bt.Style||0==r&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=tD);let o=r;const a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let u=null;a.forEach((l,c)=>{n.currentQueryIndex=c;const h=n.createSubContext(e.options,l);s&&h.delayNextStep(s),l===n.element&&(u=h.currentTimeline),ea(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),u&&(n.currentTimeline.mergeTimelineCollectedStyles(u),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1);let u=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const c=n.currentTimeline;u&&c.delayNextStep(u);const h=c.currentTime;ea(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}}const tD={};class UV{constructor(e,n,r,i,s,o,a,u){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new nD(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=xc(r.duration)),null!=r.delay&&(i.delay=xc(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=aw(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){const i=n||this.element,s=new UV(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=tD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){const i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new h5e(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(u5e,"."+this._enterClassName)).replace(c5e,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&0==a.length&&o.push(function _6e(t){return new fe(3014,!1)}()),a}}class nD{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new nD(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||ec),this._currentKeyframe.set(n,ec);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);const s=i&&i.params||{},o=function f5e(t,e){const n=new Map;let r;return t.forEach(i=>{if("*"===i){r??=e.keys();for(let s of r)n.set(s,ec)}else for(let[s,o]of i)n.set(s,o)}),n}(e,this._globalTimelineStyles);for(let[a,u]of o){const l=aw(u,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ec),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{const i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const l=new Map([...this._backFill,...a]);l.forEach((c,h)=>{"!"===c?e.add(h):c===ec&&n.add(h)}),r||l.set("offset",u/this.duration),i.push(l)});const s=[...e.values()],o=[...n.values()];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return jV(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class h5e extends nD{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=r+n,a=n/o,u=new Map(e[0]);u.set("offset",0),s.push(u);const l=new Map(e[0]);l.set("offset",HZ(a)),s.push(l);const c=e.length-1;for(let h=1;h<=c;h++){let g=new Map(e[h]);const _=g.get("offset");g.set("offset",HZ((n+_*r)/o)),s.push(g)}r=o,n=0,i="",e=s}return jV(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}function HZ(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}function zZ(t,e,n,r,i,s,o,a,u,l,c,h,g){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:g}}const HV={};class GZ{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return function p5e(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,u,l,c){const h=[],g=this.ast.options&&this.ast.options.params||HV,v=this.buildStyles(r,a&&a.params||HV,h),w=u&&u.params||HV,I=this.buildStyles(i,w,h),S=new Set,x=new Map,O=new Map,U="void"===i,he={params:qZ(w,g),delay:this.ast.options?.delay},de=c?[]:BV(e,n,this.ast.animation,s,o,v,I,he,l,h);let R=0;return de.forEach(k=>{R=Math.max(k.duration+k.delay,R)}),h.length?zZ(n,this._triggerName,r,i,U,v,I,[],[],x,O,R,h):(de.forEach(k=>{const F=k.element,z=Zo(x,F,new Set);k.preStyleProps.forEach(Z=>z.add(Z));const q=Zo(O,F,new Set);k.postStyleProps.forEach(Z=>q.add(Z)),F!==n&&S.add(F)}),zZ(n,this._triggerName,r,i,U,v,I,de,[...S.values()],x,O,R))}}function qZ(t,e){const n={...e};return Object.entries(t).forEach(([r,i])=>{null!=i&&(n[r]=i)}),n}class m5e{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){const r=new Map,i=qZ(e,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=aw(o,i,n));const u=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,u,o,n),r.set(a,o)})}),r}}class y5e{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{this.states.set(i.name,new m5e(i.style,i.options&&i.options.params||{},r))}),WZ(this.states,"true","1"),WZ(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new GZ(e,i,this.states))}),this.fallbackTransition=function _5e(t,e,n){return new GZ(t,{type:Bt.Transition,animation:{type:Bt.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}}function WZ(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}const v5e=new eD;class b5e{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){const r=[],s=LV(this._driver,n,r,[]);if(r.length)throw function A6e(t){return new fe(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,n,r){const i=e.element,s=PZ(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=BV(this._driver,n,s,xV,WS,new Map,new Map,r,v5e,i),o.forEach(c=>{const h=Zo(a,c.element,new Map);c.postStyleProps.forEach(g=>h.set(g,null))})):(i.push(function C6e(){return new fe(3300,!1)}()),o=[]),i.length)throw function S6e(t){return new fe(3504,!1)}();a.forEach((c,h)=>{c.forEach((g,_)=>{c.set(_,this._driver.computeStyle(h,_,ec))})});const l=dh(o.map(c=>{const h=a.get(c.element);return this._buildPlayer(c,new Map,h)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);const r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function D6e(t){return new fe(3301,!1)}();return n}listen(e,n,r,i){const s=SV(n,"","","");return AV(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,n,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const KZ="ng-animate-queued",zV="ng-animate-disabled",A5e=[],QZ={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},C5e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Iu="__ng_removed";class GV{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;const r=e&&e.hasOwnProperty("value");if(this.value=function P5e(t){return t??null}(r?e.value:e),r){const{value:s,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const n=e.params;if(n){const r=this.options.params;Object.keys(n).forEach(i=>{null==r[i]&&(r[i]=n[i])})}}}const uw="void",qV=new GV(uw);class S5e{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ra(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw function N6e(t,e){return new fe(3302,!1)}();if(null==r||0==r.length)throw function P6e(t){return new fe(3303,!1)}();if(!function k5e(t){return"start"==t||"done"==t}(r))throw function k6e(t,e){return new fe(3400,!1)}();const s=Zo(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);const a=Zo(this._engine.statesByElement,e,new Map);return a.has(n)||(Ra(e,KS),Ra(e,KS+"-"+n),a.set(n,qV)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return!this._triggers.has(e)&&(this._triggers.set(e,n),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function x6e(t){return new fe(3401,!1)}();return n}trigger(e,n,r,i=!0){const s=this._getTrigger(n),o=new WV(this.id,n,e);let a=this._engine.statesByElement.get(e);a||(Ra(e,KS),Ra(e,KS+"-"+n),this._engine.statesByElement.set(e,a=new Map));let u=a.get(n);const l=new GV(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),a.set(n,l),u||(u=qV),l.value!==uw&&u.value===l.value){if(!function O5e(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}(u.params,l.params)){const w=[],I=s.matchStyles(u.value,u.params,w),S=s.matchStyles(l.value,l.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{gp(e,I),ml(e,S)})}return}const g=Zo(this._engine.playersByElement,e,[]);g.forEach(w=>{w.namespaceId==this.id&&w.triggerName==n&&w.queued&&w.destroy()});let _=s.matchTransition(u.value,l.value,e,l.params),v=!1;if(!_){if(!i)return;_=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:_,fromState:u,toState:l,player:o,isFallbackTransition:v}),v||(Ra(e,KZ),o.onStart(()=>{Ly(e,KZ)})),o.onDone(()=>{let w=this.players.indexOf(o);w>=0&&this.players.splice(w,1);const I=this._engine.playersByElement.get(e);if(I){let S=I.indexOf(o);S>=0&&I.splice(S,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const r=this._engine.driver.query(e,QS,!0);r.forEach(i=>{if(i[Iu])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((u,l)=>{if(o.set(l,u.value),this._triggers.has(l)){const c=this.trigger(e,l,uw,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&dh(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){const i=new Set;n.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const u=this._triggers.get(o).fallbackTransition,l=r.get(o)||qV,c=new GV(uw),h=new WV(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:l,toState:c,player:h,isFallbackTransition:!0})})}}removeNode(e,n){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{const s=e[Iu];(!s||s===QZ)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){Ra(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const u=SV(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,AV(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class D5e{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r){this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){const r=new S5e(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){const u=i.get(a);if(u){const l=r.indexOf(u);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}return n}trigger(e,n,r,i){if(rD(n)){const s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!rD(n))return;const s=n[Iu];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ra(e,zV)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ly(e,zV))}removeNode(e,n,r){if(rD(n)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);const s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[Iu]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return rD(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,QS,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,RV,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return dh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[Iu];if(n&&n.setForRemoval){if(e[Iu]=QZ,n.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(zV)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ra(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],n.length?dh(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function R6e(t){return new fe(3402,!1)}()}_flushAnimations(e,n){const r=new eD,i=[],s=new Map,o=[],a=new Map,u=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(st=>{c.add(st);const ut=this.driver.query(st,".ng-animate-queued",!0);for(let _t=0;_t<ut.length;_t++)c.add(ut[_t])});const h=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=XZ(g,this.collectedEnterElements),v=new Map;let w=0;_.forEach((st,ut)=>{const _t=xV+w++;v.set(ut,_t),st.forEach(Kt=>Ra(Kt,_t))});const I=[],S=new Set,x=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const ut=this.collectedLeaveElements[st],_t=ut[Iu];_t&&_t.setForRemoval&&(I.push(ut),S.add(ut),_t.hasAnimation?this.driver.query(ut,".ng-star-inserted",!0).forEach(Kt=>S.add(Kt)):x.add(ut))}const O=new Map,U=XZ(g,Array.from(S));U.forEach((st,ut)=>{const _t=WS+w++;O.set(ut,_t),st.forEach(Kt=>Ra(Kt,_t))}),e.push(()=>{_.forEach((st,ut)=>{const _t=v.get(ut);st.forEach(Kt=>Ly(Kt,_t))}),U.forEach((st,ut)=>{const _t=O.get(ut);st.forEach(Kt=>Ly(Kt,_t))}),I.forEach(st=>{this.processLeaveNode(st)})});const he=[],de=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(n).forEach(_t=>{const Kt=_t.player,qr=_t.element;if(he.push(Kt),this.collectedEnterElements.length){const ti=qr[Iu];if(ti&&ti.setForMove){if(ti.previousTriggersValues&&ti.previousTriggersValues.has(_t.triggerName)){const Rc=ti.previousTriggersValues.get(_t.triggerName),wo=this.statesByElement.get(_t.element);if(wo&&wo.has(_t.triggerName)){const Oc=wo.get(_t.triggerName);Oc.value=Rc,wo.set(_t.triggerName,Oc)}}return void Kt.destroy()}}const Oa=!h||!this.driver.containsElement(h,qr),ei=O.get(qr),Ir=v.get(qr),Ar=this._buildInstruction(_t,r,Ir,ei,Oa);if(Ar.errors&&Ar.errors.length)return void de.push(Ar);if(Oa)return Kt.onStart(()=>gp(qr,Ar.fromStyles)),Kt.onDestroy(()=>ml(qr,Ar.toStyles)),void i.push(Kt);if(_t.isFallbackTransition)return Kt.onStart(()=>gp(qr,Ar.fromStyles)),Kt.onDestroy(()=>ml(qr,Ar.toStyles)),void i.push(Kt);const hh=[];Ar.timelines.forEach(ti=>{ti.stretchStartingKeyframe=!0,this.disabledNodes.has(ti.element)||hh.push(ti)}),Ar.timelines=hh,r.append(qr,Ar.timelines),o.push({instruction:Ar,player:Kt,element:qr}),Ar.queriedElements.forEach(ti=>Zo(a,ti,[]).push(Kt)),Ar.preStyleProps.forEach((ti,Rc)=>{if(ti.size){let wo=u.get(Rc);wo||u.set(Rc,wo=new Set),ti.forEach((Oc,fh)=>wo.add(fh))}}),Ar.postStyleProps.forEach((ti,Rc)=>{let wo=l.get(Rc);wo||l.set(Rc,wo=new Set),ti.forEach((Oc,fh)=>wo.add(fh))})});if(de.length){const st=[];de.forEach(ut=>{st.push(function O6e(t,e){return new fe(3505,!1)}())}),he.forEach(ut=>ut.destroy()),this.reportError(st)}const R=new Map,k=new Map;o.forEach(st=>{const ut=st.element;r.has(ut)&&(k.set(ut,ut),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,R))}),i.forEach(st=>{const ut=st.element;this._getPreviousPlayers(ut,!1,st.namespaceId,st.triggerName,null).forEach(Kt=>{Zo(R,ut,[]).push(Kt),Kt.destroy()})});const F=I.filter(st=>eee(st,u,l)),z=new Map;YZ(z,this.driver,x,l,ec).forEach(st=>{eee(st,u,l)&&F.push(st)});const Z=new Map;_.forEach((st,ut)=>{YZ(Z,this.driver,new Set(st),u,"!")}),F.forEach(st=>{const ut=z.get(st),_t=Z.get(st);z.set(st,new Map([...ut?.entries()??[],..._t?.entries()??[]]))});const $=[],Jn=[],Gr={};o.forEach(st=>{const{element:ut,player:_t,instruction:Kt}=st;if(r.has(ut)){if(c.has(ut))return _t.onDestroy(()=>ml(ut,Kt.toStyles)),_t.disabled=!0,_t.overrideTotalTime(Kt.totalTime),void i.push(_t);let qr=Gr;if(k.size>1){let ei=ut;const Ir=[];for(;ei=ei.parentNode;){const Ar=k.get(ei);if(Ar){qr=Ar;break}Ir.push(ei)}Ir.forEach(Ar=>k.set(Ar,qr))}const Oa=this._buildAnimation(_t.namespaceId,Kt,R,s,Z,z);if(_t.setRealPlayer(Oa),qr===Gr)$.push(_t);else{const ei=this.playersByElement.get(qr);ei&&ei.length&&(_t.parentPlayer=dh(ei)),i.push(_t)}}else gp(ut,Kt.fromStyles),_t.onDestroy(()=>ml(ut,Kt.toStyles)),Jn.push(_t),c.has(ut)&&i.push(_t)}),Jn.forEach(st=>{const ut=s.get(st.element);if(ut&&ut.length){const _t=dh(ut);st.setRealPlayer(_t)}}),i.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<I.length;st++){const ut=I[st],_t=ut[Iu];if(Ly(ut,WS),_t&&_t.hasAnimation)continue;let Kt=[];if(a.size){let Oa=a.get(ut);Oa&&Oa.length&&Kt.push(...Oa);let ei=this.driver.query(ut,RV,!0);for(let Ir=0;Ir<ei.length;Ir++){let Ar=a.get(ei[Ir]);Ar&&Ar.length&&Kt.push(...Ar)}}const qr=Kt.filter(Oa=>!Oa.destroyed);qr.length?x5e(this,ut,qr):this.processLeaveNode(ut)}return I.length=0,$.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const ut=this.players.indexOf(st);this.players.splice(ut,1)}),st.play()}),$}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const u=!s||s==uw;a.forEach(l=>{l.queued||!u&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){const s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:n.triggerName;for(const u of n.timelines){const l=u.element,c=l!==s,h=Zo(r,l,[]);this._getPreviousPlayers(l,c,o,a,n.toState).forEach(_=>{const v=_.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),_.destroy(),h.push(_)})}gp(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){const a=n.triggerName,u=n.element,l=[],c=new Set,h=new Set,g=n.timelines.map(v=>{const w=v.element;c.add(w);const I=w[Iu];if(I&&I.removedBeforeQueried)return new N0(v.duration,v.delay);const S=w!==u,x=function R5e(t){const e=[];return ZZ(t,e),e}((r.get(w)||A5e).map(R=>R.getRealPlayer())).filter(R=>!!R.element&&R.element===w),O=s.get(w),U=o.get(w),he=PZ(this._normalizer,v.keyframes,O,U),de=this._buildPlayer(v,he,x);if(v.subTimeline&&i&&h.add(w),S){const R=new WV(e,a,w);R.setRealPlayer(de),l.push(R)}return de});l.forEach(v=>{Zo(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function N5e(t,e,n){let r=t.get(e);if(r){if(r.length){const i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}return r}(this.playersByQueriedElement,v.element,v))}),c.forEach(v=>Ra(v,FZ));const _=dh(g);return _.onDestroy(()=>{c.forEach(v=>Ly(v,FZ)),ml(u,n.toStyles)}),h.forEach(v=>{Zo(i,v,[]).push(_)}),_}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new N0(e.duration,e.delay)}}class WV{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new N0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>AV(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Zo(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function rD(t){return t&&1===t.nodeType}function JZ(t,e){const n=t.style.display;return t.style.display=e??"none",n}function YZ(t,e,n,r,i){const s=[];n.forEach(u=>s.push(JZ(u)));const o=[];r.forEach((u,l)=>{const c=new Map;u.forEach(h=>{const g=e.computeStyle(l,h,i);c.set(h,g),(!g||0==g.length)&&(l[Iu]=C5e,o.push(l))}),t.set(l,c)});let a=0;return n.forEach(u=>JZ(u,s[a++])),o}function XZ(t,e){const n=new Map;if(t.forEach(a=>n.set(a,[])),0==e.length)return n;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let u=s.get(a);if(u)return u;const l=a.parentNode;return u=n.has(l)?l:i.has(l)?1:o(l),s.set(a,u),u}return e.forEach(a=>{const u=o(a);1!==u&&n.get(u).push(a)}),n}function Ra(t,e){t.classList?.add(e)}function Ly(t,e){t.classList?.remove(e)}function x5e(t,e,n){dh(n).onDone(()=>t.processLeaveNode(e))}function ZZ(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof B5?ZZ(r.players,e):e.push(r)}}function eee(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}class lw{constructor(e,n,r){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new D5e(e.body,n,r),this._timelineEngine=new b5e(e.body,n,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,n,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const u=[],c=LV(this._driver,s,u,[]);if(u.length)throw function T6e(t,e){return new fe(3404,!1)}();a=function g5e(t,e,n){return new y5e(t,e,n)}(i,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if("@"==r.charAt(0)){const[s,o]=kZ(r);this._timelineEngine.command(s,n,o,i)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if("@"==r.charAt(0)){const[o,a]=kZ(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class cw{static#e=this.initialStylesByElement=new WeakMap;constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=cw.initialStylesByElement.get(e);i||cw.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&ml(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ml(this._element,this._initialStyles),this._endStyles&&(ml(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(cw.initialStylesByElement.delete(this._element),this._startStyles&&(gp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(gp(this._element,this._endStyles),this._endStyles=null),ml(this._element,this._initialStyles),this._state=3)}}function KV(t){let e=null;return t.forEach((n,r)=>{(function F5e(t){return"display"===t||"position"===t})(r)&&(e=e||new Map,e.set(r,n))}),e}class tee{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:VV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const n="start"===e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class nee{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,n){return RZ(e,n)}getParentElement(e){return DV(e)}query(e,n,r){return OZ(e,n,r)}computeStyle(e,n,r){return VV(e,n)}animate(e,n,r,i,s,o=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const l=new Map,c=o.filter(_=>_ instanceof tee);(function W6e(t,e){return 0===t||0===e})(r,i)&&c.forEach(_=>{_.currentSnapshot.forEach((v,w)=>l.set(w,v))});let h=function z6e(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}(n).map(_=>new Map(_));h=function K6e(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,VV(t,a)))}}return e}(e,h,l);const g=function M5e(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=KV(e[0]),e.length>1&&(r=KV(e[e.length-1]))):e instanceof Map&&(n=KV(e)),n||r?new cw(t,n,r):null}(e,h);return new tee(e,h,u,g)}}const ree="@.disabled";class iee{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){"@"==n.charAt(0)&&n==ree?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class V5e extends iee{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){"@"==n.charAt(0)?"."==n.charAt(1)&&n==ree?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if("@"==n.charAt(0)){const i=function L5e(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(e);let s=n.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function $5e(t){const e=t.indexOf(".");return[t.substring(0,e),t.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,n,r)}}class j5e{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(i,s)=>{const o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,n){const i=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){const l=this._rendererCache;let c=l.get(i);return c||(c=new iee("",i,this.engine,()=>l.delete(i)),l.set(i,c)),c}const s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return n.data.animation.forEach(a),new V5e(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>n(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let B5e=(()=>{class t extends lw{constructor(n,r,i){super(n,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||t)(Se($i),Se(PV),Se(kV))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const see=[{provide:kV,useFactory:function U5e(){return new $Z}},{provide:lw,useClass:B5e},{provide:OT,useFactory:function H5e(t,e,n){return new j5e(t,e,n)},deps:[zk,lw,en]}],QV=[{provide:PV,useFactory:()=>new nee},{provide:i$,useValue:"BrowserAnimations"},...see],oee=[{provide:PV,useClass:NV},{provide:i$,useValue:"NoopAnimations"},...see];let z5e=(()=>{class t{static withConfig(n){return{ngModule:t,providers:n.disableAnimations?oee:QV}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ri({type:t});static#n=this.\u0275inj=Jr({providers:QV,imports:[lG]})}return t})();const aee=["toast-component",""];function G5e(t,e){if(1&t){const n=Lv();$t(0,"button",5),li("click",function(){return Fl(n),Vl(Ii().remove())}),$t(1,"span",6),Fn(2,"\xd7"),tn()()}}function q5e(t,e){if(1&t&&(Fv(0),Fn(1),Vv()),2&t){const n=Ii(2);fn(),ql("[",n.duplicatesCount+1,"]")}}function W5e(t,e){if(1&t&&($t(0,"div"),Fn(1),iu(2,q5e,2,1,"ng-container",4),tn()),2&t){const n=Ii();Gl(n.options.titleClass),ns("aria-label",n.title),fn(),ql(" ",n.title," "),fn(),Bn("ngIf",n.duplicatesCount)}}function K5e(t,e){if(1&t&&vr(0,"div",7),2&t){const n=Ii();Gl(n.options.messageClass),Bn("innerHTML",n.message,gT)}}function Q5e(t,e){if(1&t&&($t(0,"div",8),Fn(1),tn()),2&t){const n=Ii();Gl(n.options.messageClass),ns("aria-label",n.message),fn(),ql(" ",n.message," ")}}function J5e(t,e){if(1&t&&($t(0,"div"),vr(1,"div",9),tn()),2&t){const n=Ii();fn(),Bm("width",n.width()+"%")}}class rqe{_attachedHost;component;viewContainerRef;injector;constructor(e,n){this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class iqe{_attachedPortal;_disposeFn;attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class sqe{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new je;_activate=new je;_manualClose=new je;_resetTimeout=new je;_countDuplicate=new je;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}}class sD{toastId;config;message;title;toastType;toastRef;_onTap=new je;_onAction=new je;constructor(e,n,r,i,s,o){this.toastId=e,this.config=n,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const lee=new Fe("ToastConfig");class oqe extends iqe{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,n,r){super(),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=r}attachComponentPortal(e,n){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let aqe=(()=>{class t{_document=Te($i);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class uqe{_portalHost;constructor(e){this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}}let lqe=(()=>{class t{_overlayContainer=Te(aqe);_componentFactoryResolver=Te(Av);_appRef=Te(Lo);_document=Te($i);_paneElements=new Map;create(n,r){return this._createOverlayRef(this.getPaneElement(n,r))}getPaneElement(n="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[n]||(this._paneElements.get(r)[n]=this._createPaneElement(n,r)),this._paneElements.get(r)[n]}_createPaneElement(n,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(n),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(n){return new oqe(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new uqe(this._createPortalHost(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cee=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig={...n.default,...n.config},n.config.iconClasses&&(this.toastrConfig.iconClasses={...n.default.iconClasses,...n.config.iconClasses})}show(n,r,i={},s=""){return this._preBuildNotification(s,n,r,this.applyConfig(i))}success(n,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",n,r,this.applyConfig(i))}error(n,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",n,r,this.applyConfig(i))}info(n,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",n,r,this.applyConfig(i))}warning(n,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",n,r,this.applyConfig(i))}clear(n){for(const r of this.toasts)if(void 0!==n){if(r.toastId===n)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(n){const r=this._findToast(n);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(n="",r="",i,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===n)&&a.message===r)return a.toastRef.onDuplicate(i,s),a;return null}applyConfig(n={}){return{...this.toastrConfig,...n}}_findToast(n){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===n)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(n,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,r,i,s)):this._buildNotification(n,r,i,s)}_buildNotification(n,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=r;r&&s.enableHtml&&(l=this.sanitizer.sanitize(Mo.HTML,r));const c=new sqe(u),h=new sD(this.index,s,l,i,n,c),_=Br.create({providers:[{provide:sD,useValue:h}],parent:this._injector}),v=new rqe(s.toastComponent,_),w=u.attach(v,s.newestOnTop);c.componentInstance=w.instance;const I={toastId:this.index,title:i||"",message:r||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:w};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{I.toastRef.activate()})),this.toasts.push(I),I}static \u0275fac=function(r){return new(r||t)(Se(lee),Se(lqe),Se(Br),Se(hG),Se(en))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cqe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Lu(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=Lu({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(n=>({...n,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const n=(new Date).getTime();this.width.set((this.hideTime-n)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(i=>100-i),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(n=>({...n,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(n=>({...n,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),r)):this.timeout=setTimeout(()=>n(),r)}outsideInterval(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),r)):this.intervalId=setInterval(()=>n(),r)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(r){return new(r||t)(Ve(cee),Ve(sD),Ve(en))};static \u0275cmp=Ya({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&li("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(OP("@flyInOut",i._state),Gl(i.toastClasses),Bm("display",i.displayStyle))},standalone:!0,features:[zv],attrs:aee,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&iu(0,G5e,3,0,"button",0)(1,W5e,3,5,"div",1)(2,K5e,1,3,"div",2)(3,Q5e,2,4,"div",3)(4,J5e,2,2,"div",4),2&r&&(Bn("ngIf",i.options.closeButton),fn(),Bn("ngIf",i.title),fn(),Bn("ngIf",i.message&&i.options.enableHtml),fn(),Bn("ngIf",i.message&&!i.options.enableHtml),fn(),Bn("ngIf",i.options.progressBar))},dependencies:[NI],encapsulation:2,data:{animation:[S0("flyInOut",[D0("inactive",Hs({opacity:0})),D0("active",Hs({opacity:1})),D0("removed",Hs({opacity:0})),Sd("inactive => active",Cd("{{ easeTime }}ms {{ easing }}")),Sd("active => removed",Cd("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return t})()},dqe=(t={})=>Pl([{provide:lee,useValue:{default:cqe,config:t}}]);let hqe=(()=>{class t{static forRoot(n={}){return{ngModule:t,providers:[dqe(n)]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ri({type:t});static \u0275inj=Jr({})}return t})(),fqe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ri({type:t,bootstrap:[t6e]});static#n=this.\u0275inj=Jr({providers:[hV],imports:[lG,z5e,ZGe,B_e.initializeApp(DZ_firebase),TEe,J_e,BGe,HHe,hqe.forRoot({timeOut:3e3,positionClass:"toast-bottom-right",preventDuplicates:!0}),Mk,Ex]})}return t})();fpe().bootstrapModule(fqe).catch(t=>console.error(t))},929:zt=>{zt.exports=ee;var St=null;try{St=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ee(ie,M,Pe){this.low=0|ie,this.high=0|M,this.unsigned=!!Pe}function P(ie){return!0===(ie&&ie.__isLong__)}Object.defineProperty(ee.prototype,"__isLong__",{value:!0}),ee.isLong=P;var rt={},Ne={};function ae(ie,M){var Pe,W,bt;return M?(bt=0<=(ie>>>=0)&&ie<256)&&(W=Ne[ie])?W:(Pe=tt(ie,(0|ie)<0?-1:0,!0),bt&&(Ne[ie]=Pe),Pe):(bt=-128<=(ie|=0)&&ie<128)&&(W=rt[ie])?W:(Pe=tt(ie,ie<0?-1:0,!1),bt&&(rt[ie]=Pe),Pe)}function dt(ie,M){if(isNaN(ie))return M?ct:mt;if(M){if(ie<0)return ct;if(ie>=ge)return We}else{if(ie<=-$e)return ft;if(ie+1>=$e)return ht}return ie<0?dt(-ie,M).neg():tt(ie%te|0,ie/te|0,M)}function tt(ie,M,Pe){return new ee(ie,M,Pe)}ee.fromInt=ae,ee.fromNumber=dt,ee.fromBits=tt;var lt=Math.pow;function ze(ie,M,Pe){if(0===ie.length)throw Error("empty string");if("NaN"===ie||"Infinity"===ie||"+Infinity"===ie||"-Infinity"===ie)return mt;if("number"==typeof M?(Pe=M,M=!1):M=!!M,(Pe=Pe||10)<2||36<Pe)throw RangeError("radix");var W;if((W=ie.indexOf("-"))>0)throw Error("interior hyphen");if(0===W)return ze(ie.substring(1),M,Pe).neg();for(var bt=dt(lt(Pe,8)),Et=mt,Ut=0;Ut<ie.length;Ut+=8){var pn=Math.min(8,ie.length-Ut),cn=parseInt(ie.substring(Ut,Ut+pn),Pe);if(pn<8){var or=dt(lt(Pe,pn));Et=Et.mul(or).add(dt(cn))}else Et=(Et=Et.mul(bt)).add(dt(cn))}return Et.unsigned=M,Et}function K(ie,M){return"number"==typeof ie?dt(ie,M):"string"==typeof ie?ze(ie,M):tt(ie.low,ie.high,"boolean"==typeof M?M:ie.unsigned)}ee.fromString=ze,ee.fromValue=K;var te=4294967296,ge=te*te,$e=ge/2,qe=ae(1<<24),mt=ae(0);ee.ZERO=mt;var ct=ae(0,!0);ee.UZERO=ct;var vt=ae(1);ee.ONE=vt;var Dn=ae(1,!0);ee.UONE=Dn;var Rn=ae(-1);ee.NEG_ONE=Rn;var ht=tt(-1,2147483647,!1);ee.MAX_VALUE=ht;var We=tt(-1,-1,!0);ee.MAX_UNSIGNED_VALUE=We;var ft=tt(0,-2147483648,!1);ee.MIN_VALUE=ft;var be=ee.prototype;be.toInt=function(){return this.unsigned?this.low>>>0:this.low},be.toNumber=function(){return this.unsigned?(this.high>>>0)*te+(this.low>>>0):this.high*te+(this.low>>>0)},be.toString=function(M){if((M=M||10)<2||36<M)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ft)){var Pe=dt(M),W=this.div(Pe),bt=W.mul(Pe).sub(this);return W.toString(M)+bt.toInt().toString(M)}return"-"+this.neg().toString(M)}for(var Et=dt(lt(M,6),this.unsigned),Ut=this,pn="";;){var cn=Ut.div(Et),Tn=(Ut.sub(cn.mul(Et)).toInt()>>>0).toString(M);if((Ut=cn).isZero())return Tn+pn;for(;Tn.length<6;)Tn="0"+Tn;pn=""+Tn+pn}},be.getHighBits=function(){return this.high},be.getHighBitsUnsigned=function(){return this.high>>>0},be.getLowBits=function(){return this.low},be.getLowBitsUnsigned=function(){return this.low>>>0},be.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ft)?64:this.neg().getNumBitsAbs();for(var M=0!=this.high?this.high:this.low,Pe=31;Pe>0&&!(M&1<<Pe);Pe--);return 0!=this.high?Pe+33:Pe+1},be.isZero=function(){return 0===this.high&&0===this.low},be.eqz=be.isZero,be.isNegative=function(){return!this.unsigned&&this.high<0},be.isPositive=function(){return this.unsigned||this.high>=0},be.isOdd=function(){return!(1&~this.low)},be.isEven=function(){return!(1&this.low)},be.equals=function(M){return P(M)||(M=K(M)),(this.unsigned===M.unsigned||this.high>>>31!=1||M.high>>>31!=1)&&this.high===M.high&&this.low===M.low},be.eq=be.equals,be.notEquals=function(M){return!this.eq(M)},be.neq=be.notEquals,be.ne=be.notEquals,be.lessThan=function(M){return this.comp(M)<0},be.lt=be.lessThan,be.lessThanOrEqual=function(M){return this.comp(M)<=0},be.lte=be.lessThanOrEqual,be.le=be.lessThanOrEqual,be.greaterThan=function(M){return this.comp(M)>0},be.gt=be.greaterThan,be.greaterThanOrEqual=function(M){return this.comp(M)>=0},be.gte=be.greaterThanOrEqual,be.ge=be.greaterThanOrEqual,be.compare=function(M){if(P(M)||(M=K(M)),this.eq(M))return 0;var Pe=this.isNegative(),W=M.isNegative();return Pe&&!W?-1:!Pe&&W?1:this.unsigned?M.high>>>0>this.high>>>0||M.high===this.high&&M.low>>>0>this.low>>>0?-1:1:this.sub(M).isNegative()?-1:1},be.comp=be.compare,be.negate=function(){return!this.unsigned&&this.eq(ft)?ft:this.not().add(vt)},be.neg=be.negate,be.add=function(M){P(M)||(M=K(M));var Tn=0,ue=0,ce=0,ye=0;return ce+=(ye+=(65535&this.low)+(65535&M.low))>>>16,ue+=(ce+=(this.low>>>16)+(M.low>>>16))>>>16,Tn+=(ue+=(65535&this.high)+(65535&M.high))>>>16,Tn+=(this.high>>>16)+(M.high>>>16),tt((ce&=65535)<<16|(ye&=65535),(Tn&=65535)<<16|(ue&=65535),this.unsigned)},be.subtract=function(M){return P(M)||(M=K(M)),this.add(M.neg())},be.sub=be.subtract,be.multiply=function(M){if(this.isZero())return mt;if(P(M)||(M=K(M)),St)return tt(St.mul(this.low,this.high,M.low,M.high),St.get_high(),this.unsigned);if(M.isZero())return mt;if(this.eq(ft))return M.isOdd()?ft:mt;if(M.eq(ft))return this.isOdd()?ft:mt;if(this.isNegative())return M.isNegative()?this.neg().mul(M.neg()):this.neg().mul(M).neg();if(M.isNegative())return this.mul(M.neg()).neg();if(this.lt(qe)&&M.lt(qe))return dt(this.toNumber()*M.toNumber(),this.unsigned);var bt=65535&this.high,Et=this.low>>>16,Ut=65535&this.low,cn=65535&M.high,or=M.low>>>16,Tn=65535&M.low,ue=0,ce=0,ye=0,we=0;return ye+=(we+=Ut*Tn)>>>16,ce+=(ye+=Et*Tn)>>>16,ye&=65535,ce+=(ye+=Ut*or)>>>16,ue+=(ce+=bt*Tn)>>>16,ce&=65535,ue+=(ce+=Et*or)>>>16,ce&=65535,ue+=(ce+=Ut*cn)>>>16,ue+=(this.high>>>16)*Tn+bt*or+Et*cn+Ut*(M.high>>>16),tt((ye&=65535)<<16|(we&=65535),(ue&=65535)<<16|(ce&=65535),this.unsigned)},be.mul=be.multiply,be.divide=function(M){if(P(M)||(M=K(M)),M.isZero())throw Error("division by zero");var W,bt,Et;if(St)return this.unsigned||-2147483648!==this.high||-1!==M.low||-1!==M.high?tt((this.unsigned?St.div_u:St.div_s)(this.low,this.high,M.low,M.high),St.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ct:mt;if(this.unsigned){if(M.unsigned||(M=M.toUnsigned()),M.gt(this))return ct;if(M.gt(this.shru(1)))return Dn;Et=ct}else{if(this.eq(ft))return M.eq(vt)||M.eq(Rn)?ft:M.eq(ft)?vt:(W=this.shr(1).div(M).shl(1)).eq(mt)?M.isNegative()?vt:Rn:(bt=this.sub(M.mul(W)),Et=W.add(bt.div(M)));if(M.eq(ft))return this.unsigned?ct:mt;if(this.isNegative())return M.isNegative()?this.neg().div(M.neg()):this.neg().div(M).neg();if(M.isNegative())return this.div(M.neg()).neg();Et=mt}for(bt=this;bt.gte(M);){W=Math.max(1,Math.floor(bt.toNumber()/M.toNumber()));for(var pn=Math.ceil(Math.log(W)/Math.LN2),cn=pn<=48?1:lt(2,pn-48),or=dt(W),Tn=or.mul(M);Tn.isNegative()||Tn.gt(bt);)Tn=(or=dt(W-=cn,this.unsigned)).mul(M);or.isZero()&&(or=vt),Et=Et.add(or),bt=bt.sub(Tn)}return Et},be.div=be.divide,be.modulo=function(M){return P(M)||(M=K(M)),St?tt((this.unsigned?St.rem_u:St.rem_s)(this.low,this.high,M.low,M.high),St.get_high(),this.unsigned):this.sub(this.div(M).mul(M))},be.mod=be.modulo,be.rem=be.modulo,be.not=function(){return tt(~this.low,~this.high,this.unsigned)},be.and=function(M){return P(M)||(M=K(M)),tt(this.low&M.low,this.high&M.high,this.unsigned)},be.or=function(M){return P(M)||(M=K(M)),tt(this.low|M.low,this.high|M.high,this.unsigned)},be.xor=function(M){return P(M)||(M=K(M)),tt(this.low^M.low,this.high^M.high,this.unsigned)},be.shiftLeft=function(M){return P(M)&&(M=M.toInt()),0==(M&=63)?this:M<32?tt(this.low<<M,this.high<<M|this.low>>>32-M,this.unsigned):tt(0,this.low<<M-32,this.unsigned)},be.shl=be.shiftLeft,be.shiftRight=function(M){return P(M)&&(M=M.toInt()),0==(M&=63)?this:M<32?tt(this.low>>>M|this.high<<32-M,this.high>>M,this.unsigned):tt(this.high>>M-32,this.high>=0?0:-1,this.unsigned)},be.shr=be.shiftRight,be.shiftRightUnsigned=function(M){if(P(M)&&(M=M.toInt()),0==(M&=63))return this;var Pe=this.high;return M<32?tt(this.low>>>M|Pe<<32-M,Pe>>>M,this.unsigned):tt(32===M?Pe:Pe>>>M-32,0,this.unsigned)},be.shru=be.shiftRightUnsigned,be.shr_u=be.shiftRightUnsigned,be.toSigned=function(){return this.unsigned?tt(this.low,this.high,!1):this},be.toUnsigned=function(){return this.unsigned?this:tt(this.low,this.high,!0)},be.toBytes=function(M){return M?this.toBytesLE():this.toBytesBE()},be.toBytesLE=function(){var M=this.high,Pe=this.low;return[255&Pe,Pe>>>8&255,Pe>>>16&255,Pe>>>24,255&M,M>>>8&255,M>>>16&255,M>>>24]},be.toBytesBE=function(){var M=this.high,Pe=this.low;return[M>>>24,M>>>16&255,M>>>8&255,255&M,Pe>>>24,Pe>>>16&255,Pe>>>8&255,255&Pe]},ee.fromBytes=function(M,Pe,W){return W?ee.fromBytesLE(M,Pe):ee.fromBytesBE(M,Pe)},ee.fromBytesLE=function(M,Pe){return new ee(M[0]|M[1]<<8|M[2]<<16|M[3]<<24,M[4]|M[5]<<8|M[6]<<16|M[7]<<24,Pe)},ee.fromBytesBE=function(M,Pe){return new ee(M[4]<<24|M[5]<<16|M[6]<<8|M[7],M[0]<<24|M[1]<<16|M[2]<<8|M[3],Pe)}},814:(zt,St,ee)=>{var P=ee(495),rt=ee(850),Ne=ee(704),ae=ee(114),dt=ee(40),tt=ee(478),lt=ee(454);lt.alea=P,lt.xor128=rt,lt.xorwow=Ne,lt.xorshift7=ae,lt.xor4096=dt,lt.tychei=tt,zt.exports=lt},495:function(zt,St,ee){var P;!function(rt,Ne,ae){function dt(K){var G=this,ne=function ze(){var K=4022871197;return function(ne){ne=String(ne);for(var te=0;te<ne.length;te++){var ge=.02519603282416938*(K+=ne.charCodeAt(te));ge-=K=ge>>>0,K=(ge*=K)>>>0,K+=4294967296*(ge-=K)}return 2.3283064365386963e-10*(K>>>0)}}();G.next=function(){var te=2091639*G.s0+2.3283064365386963e-10*G.c;return G.s0=G.s1,G.s1=G.s2,G.s2=te-(G.c=0|te)},G.c=1,G.s0=ne(" "),G.s1=ne(" "),G.s2=ne(" "),G.s0-=ne(K),G.s0<0&&(G.s0+=1),G.s1-=ne(K),G.s1<0&&(G.s1+=1),G.s2-=ne(K),G.s2<0&&(G.s2+=1),ne=null}function tt(K,G){return G.c=K.c,G.s0=K.s0,G.s1=K.s1,G.s2=K.s2,G}function lt(K,G){var ne=new dt(K),te=G&&G.state,ge=ne.next;return ge.int32=function(){return 4294967296*ne.next()|0},ge.double=function(){return ge()+11102230246251565e-32*(2097152*ge()|0)},ge.quick=ge,te&&("object"==typeof te&&tt(te,ne),ge.state=function(){return tt(ne,{})}),ge}Ne&&Ne.exports?Ne.exports=lt:ee.amdD&&ee.amdO?void 0!==(P=function(){return lt}.call(St,ee,St,Ne))&&(Ne.exports=P):this.alea=lt}(0,zt=ee.nmd(zt))},478:function(zt,St,ee){var P;!function(rt,Ne,ae){function dt(ze){var K=this,G="";K.next=function(){var te=K.b,ge=K.c,$e=K.d,qe=K.a;return te=te<<25^te>>>7^ge,ge=ge-$e|0,$e=$e<<24^$e>>>8^qe,qe=qe-te|0,K.b=te=te<<20^te>>>12^ge,K.c=ge=ge-$e|0,K.d=$e<<16^ge>>>16^qe,K.a=qe-te|0},K.a=0,K.b=0,K.c=-1640531527,K.d=1367130551,ze===Math.floor(ze)?(K.a=ze/4294967296|0,K.b=0|ze):G+=ze;for(var ne=0;ne<G.length+20;ne++)K.b^=0|G.charCodeAt(ne),K.next()}function tt(ze,K){return K.a=ze.a,K.b=ze.b,K.c=ze.c,K.d=ze.d,K}function lt(ze,K){var G=new dt(ze),ne=K&&K.state,te=function(){return(G.next()>>>0)/4294967296};return te.double=function(){do{var qe=((G.next()>>>11)+(G.next()>>>0)/4294967296)/(1<<21)}while(0===qe);return qe},te.int32=G.next,te.quick=te,ne&&("object"==typeof ne&&tt(ne,G),te.state=function(){return tt(G,{})}),te}Ne&&Ne.exports?Ne.exports=lt:ee.amdD&&ee.amdO?void 0!==(P=function(){return lt}.call(St,ee,St,Ne))&&(Ne.exports=P):this.tychei=lt}(0,zt=ee.nmd(zt))},850:function(zt,St,ee){var P;!function(rt,Ne,ae){function dt(ze){var K=this,G="";K.x=0,K.y=0,K.z=0,K.w=0,K.next=function(){var te=K.x^K.x<<11;return K.x=K.y,K.y=K.z,K.z=K.w,K.w^=K.w>>>19^te^te>>>8},ze===(0|ze)?K.x=ze:G+=ze;for(var ne=0;ne<G.length+64;ne++)K.x^=0|G.charCodeAt(ne),K.next()}function tt(ze,K){return K.x=ze.x,K.y=ze.y,K.z=ze.z,K.w=ze.w,K}function lt(ze,K){var G=new dt(ze),ne=K&&K.state,te=function(){return(G.next()>>>0)/4294967296};return te.double=function(){do{var qe=((G.next()>>>11)+(G.next()>>>0)/4294967296)/(1<<21)}while(0===qe);return qe},te.int32=G.next,te.quick=te,ne&&("object"==typeof ne&&tt(ne,G),te.state=function(){return tt(G,{})}),te}Ne&&Ne.exports?Ne.exports=lt:ee.amdD&&ee.amdO?void 0!==(P=function(){return lt}.call(St,ee,St,Ne))&&(Ne.exports=P):this.xor128=lt}(0,zt=ee.nmd(zt))},40:function(zt,St,ee){var P;!function(rt,Ne,ae){function dt(ze){var K=this;K.next=function(){var $e,qe,ne=K.w,te=K.X,ge=K.i;return K.w=ne=ne+1640531527|0,qe=te[ge+34&127],$e=te[ge=ge+1&127],qe^=qe<<13,$e^=$e<<17,qe=te[ge]=(qe^=qe>>>15)^($e^=$e>>>12),K.i=ge,qe+(ne^ne>>>16)|0},function G(ne,te){var ge,$e,qe,mt,ct,vt=[],Dn=128;for(te===(0|te)?($e=te,te=null):(te+="\0",$e=0,Dn=Math.max(Dn,te.length)),qe=0,mt=-32;mt<Dn;++mt)te&&($e^=te.charCodeAt((mt+32)%te.length)),0===mt&&(ct=$e),$e^=$e<<10,$e^=$e>>>15,$e^=$e<<4,$e^=$e>>>13,mt>=0&&(qe=0==(ge=vt[127&mt]^=$e+(ct=ct+1640531527|0))?qe+1:0);for(qe>=128&&(vt[127&(te&&te.length||0)]=-1),qe=127,mt=512;mt>0;--mt)$e=vt[qe+34&127],ge=vt[qe=qe+1&127],$e^=$e<<13,ge^=ge<<17,vt[qe]=($e^=$e>>>15)^(ge^=ge>>>12);ne.w=ct,ne.X=vt,ne.i=qe}(K,ze)}function tt(ze,K){return K.i=ze.i,K.w=ze.w,K.X=ze.X.slice(),K}function lt(ze,K){null==ze&&(ze=+new Date);var G=new dt(ze),ne=K&&K.state,te=function(){return(G.next()>>>0)/4294967296};return te.double=function(){do{var qe=((G.next()>>>11)+(G.next()>>>0)/4294967296)/(1<<21)}while(0===qe);return qe},te.int32=G.next,te.quick=te,ne&&(ne.X&&tt(ne,G),te.state=function(){return tt(G,{})}),te}Ne&&Ne.exports?Ne.exports=lt:ee.amdD&&ee.amdO?void 0!==(P=function(){return lt}.call(St,ee,St,Ne))&&(Ne.exports=P):this.xor4096=lt}(0,zt=ee.nmd(zt))},114:function(zt,St,ee){var P;!function(rt,Ne,ae){function dt(ze){var K=this;K.next=function(){var ge,$e,ne=K.x,te=K.i;return ge=ne[te],$e=(ge^=ge>>>7)^ge<<24,$e^=(ge=ne[te+1&7])^ge>>>10,$e^=(ge=ne[te+3&7])^ge>>>3,$e^=(ge=ne[te+4&7])^ge<<7,ge=ne[te+7&7],ne[te]=$e^=(ge^=ge<<13)^ge<<9,K.i=te+1&7,$e},function G(ne,te){var ge,qe=[];if(te===(0|te))qe[0]=te;else for(te=""+te,ge=0;ge<te.length;++ge)qe[7&ge]=qe[7&ge]<<15^te.charCodeAt(ge)+qe[ge+1&7]<<13;for(;qe.length<8;)qe.push(0);for(ge=0;ge<8&&0===qe[ge];++ge);for(8==ge&&(qe[7]=-1),ne.x=qe,ne.i=0,ge=256;ge>0;--ge)ne.next()}(K,ze)}function tt(ze,K){return K.x=ze.x.slice(),K.i=ze.i,K}function lt(ze,K){null==ze&&(ze=+new Date);var G=new dt(ze),ne=K&&K.state,te=function(){return(G.next()>>>0)/4294967296};return te.double=function(){do{var qe=((G.next()>>>11)+(G.next()>>>0)/4294967296)/(1<<21)}while(0===qe);return qe},te.int32=G.next,te.quick=te,ne&&(ne.x&&tt(ne,G),te.state=function(){return tt(G,{})}),te}Ne&&Ne.exports?Ne.exports=lt:ee.amdD&&ee.amdO?void 0!==(P=function(){return lt}.call(St,ee,St,Ne))&&(Ne.exports=P):this.xorshift7=lt}(0,zt=ee.nmd(zt))},704:function(zt,St,ee){var P;!function(rt,Ne,ae){function dt(ze){var K=this,G="";K.next=function(){var te=K.x^K.x>>>2;return K.x=K.y,K.y=K.z,K.z=K.w,K.w=K.v,(K.d=K.d+362437|0)+(K.v=K.v^K.v<<4^te^te<<1)|0},K.x=0,K.y=0,K.z=0,K.w=0,K.v=0,ze===(0|ze)?K.x=ze:G+=ze;for(var ne=0;ne<G.length+64;ne++)K.x^=0|G.charCodeAt(ne),ne==G.length&&(K.d=K.x<<10^K.x>>>4),K.next()}function tt(ze,K){return K.x=ze.x,K.y=ze.y,K.z=ze.z,K.w=ze.w,K.v=ze.v,K.d=ze.d,K}function lt(ze,K){var G=new dt(ze),ne=K&&K.state,te=function(){return(G.next()>>>0)/4294967296};return te.double=function(){do{var qe=((G.next()>>>11)+(G.next()>>>0)/4294967296)/(1<<21)}while(0===qe);return qe},te.int32=G.next,te.quick=te,ne&&("object"==typeof ne&&tt(ne,G),te.state=function(){return tt(G,{})}),te}Ne&&Ne.exports?Ne.exports=lt:ee.amdD&&ee.amdO?void 0!==(P=function(){return lt}.call(St,ee,St,Ne))&&(Ne.exports=P):this.xorwow=lt}(0,zt=ee.nmd(zt))},454:function(zt,St,ee){var P;!function(rt,Ne,ae){var ge,dt=256,K=ae.pow(dt,6),G=ae.pow(2,52),ne=2*G,te=dt-1;function $e(ht,We,ft){var be=[],ie=vt(ct((We=1==We?{entropy:!0}:We||{}).entropy?[ht,Rn(Ne)]:ht??function Dn(){try{var ht;return ge&&(ht=ge.randomBytes)?ht=ht(dt):(ht=new Uint8Array(dt),(rt.crypto||rt.msCrypto).getRandomValues(ht)),Rn(ht)}catch{var We=rt.navigator,ft=We&&We.plugins;return[+new Date,rt,ft,rt.screen,Rn(Ne)]}}(),3),be),M=new qe(be),Pe=function(){for(var W=M.g(6),bt=K,Et=0;W<G;)W=(W+Et)*dt,bt*=dt,Et=M.g(1);for(;W>=ne;)W/=2,bt/=2,Et>>>=1;return(W+Et)/bt};return Pe.int32=function(){return 0|M.g(4)},Pe.quick=function(){return M.g(4)/4294967296},Pe.double=Pe,vt(Rn(M.S),Ne),(We.pass||ft||function(W,bt,Et,Ut){return Ut&&(Ut.S&&mt(Ut,M),W.state=function(){return mt(M,{})}),Et?(ae.random=W,bt):W})(Pe,ie,"global"in We?We.global:this==ae,We.state)}function qe(ht){var We,ft=ht.length,be=this,ie=0,M=be.i=be.j=0,Pe=be.S=[];for(ft||(ht=[ft++]);ie<dt;)Pe[ie]=ie++;for(ie=0;ie<dt;ie++)Pe[ie]=Pe[M=te&M+ht[ie%ft]+(We=Pe[ie])],Pe[M]=We;(be.g=function(W){for(var bt,Et=0,Ut=be.i,pn=be.j,cn=be.S;W--;)bt=cn[Ut=te&Ut+1],Et=Et*dt+cn[te&(cn[Ut]=cn[pn=te&pn+bt])+(cn[pn]=bt)];return be.i=Ut,be.j=pn,Et})(dt)}function mt(ht,We){return We.i=ht.i,We.j=ht.j,We.S=ht.S.slice(),We}function ct(ht,We){var ie,ft=[],be=typeof ht;if(We&&"object"==be)for(ie in ht)try{ft.push(ct(ht[ie],We-1))}catch{}return ft.length?ft:"string"==be?ht:ht+"\0"}function vt(ht,We){for(var be,ft=ht+"",ie=0;ie<ft.length;)We[te&ie]=te&(be^=19*We[te&ie])+ft.charCodeAt(ie++);return Rn(We)}function Rn(ht){return String.fromCharCode.apply(0,ht)}if(vt(ae.random(),Ne),zt.exports){zt.exports=$e;try{ge=ee(234)}catch{}}else void 0!==(P=function(){return $e}.call(St,ee,St,zt))&&(zt.exports=P)}(typeof self<"u"?self:this,[],Math)},817:()=>{},590:()=>{},234:()=>{},345:(zt,St,ee)=>{"use strict";ee.d(St,{A:()=>qe});var P=ee(76),rt=ee(362),Ne=ee(852),ae=ee(41);class dt{constructor(ct,vt){this._delegate=ct,this.firebase=vt,(0,Ne._addComponent)(ct,new rt.uA("app-compat",()=>this,"PUBLIC")),this.container=ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ct){this._delegate.automaticDataCollectionEnabled=ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ct=>{this._delegate.checkDestroyed(),ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ne.deleteApp)(this._delegate)))}_getService(ct,vt=Ne._DEFAULT_ENTRY_NAME){var Dn;this._delegate.checkDestroyed();const Rn=this._delegate.container.getProvider(ct);return!Rn.isInitialized()&&"EXPLICIT"===(null===(Dn=Rn.getComponent())||void 0===Dn?void 0:Dn.instantiationMode)&&Rn.initialize(),Rn.getImmediate({identifier:vt})}_removeServiceInstance(ct,vt=Ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ct).clearInstance(vt)}_addComponent(ct){(0,Ne._addComponent)(this._delegate,ct)}_addOrOverwriteComponent(ct){(0,Ne._addOrOverwriteComponent)(this._delegate,ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const lt=new P.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function K(){const mt=function ze(mt){const ct={},vt={__esModule:!0,initializeApp:function ht(ie,M={}){const Pe=Ne.initializeApp(ie,M);if((0,P.gR)(ct,Pe.name))return ct[Pe.name];const W=new mt(Pe,vt);return ct[Pe.name]=W,W},app:Rn,registerVersion:Ne.registerVersion,setLogLevel:Ne.setLogLevel,onLog:Ne.onLog,apps:null,SDK_VERSION:Ne.SDK_VERSION,INTERNAL:{registerComponent:function ft(ie){const M=ie.name,Pe=M.replace("-compat","");if(Ne._registerComponent(ie)&&"PUBLIC"===ie.type){const W=(bt=Rn())=>{if("function"!=typeof bt[Pe])throw lt.create("invalid-app-argument",{appName:M});return bt[Pe]()};void 0!==ie.serviceProps&&(0,P.zw)(W,ie.serviceProps),vt[Pe]=W,mt.prototype[Pe]=function(...bt){return this._getService.bind(this,M).apply(this,ie.multipleInstances?bt:[])}}return"PUBLIC"===ie.type?vt[Pe]:null},removeApp:function Dn(ie){delete ct[ie]},useAsService:function be(ie,M){return"serverAuth"===M?null:M},modularAPIs:Ne}};function Rn(ie){if(!(0,P.gR)(ct,ie=ie||Ne._DEFAULT_ENTRY_NAME))throw lt.create("no-app",{appName:ie});return ct[ie]}return vt.default=vt,Object.defineProperty(vt,"apps",{get:function We(){return Object.keys(ct).map(ie=>ct[ie])}}),Rn.App=mt,vt}(dt);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:K,extendNamespace:function ct(vt){(0,P.zw)(mt,vt)},createSubscribe:P.tD,ErrorFactory:P.FA,deepExtend:P.zw}),mt}(),ne=new ae.Vy("@firebase/app-compat");if((0,P.Bd)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=G;!function $e(mt){(0,Ne.registerVersion)("@firebase/app-compat","0.2.37",mt)}()},852:(zt,St,ee)=>{"use strict";ee.r(St),ee.d(St,{FirebaseError:()=>ae.g,SDK_VERSION:()=>oa,_DEFAULT_ENTRY_NAME:()=>ia,_addComponent:()=>sa,_addOrOverwriteComponent:()=>Tp,_apps:()=>cs,_clearComponents:()=>Wi,_components:()=>To,_getProvider:()=>Cu,_isFirebaseApp:()=>yl,_isFirebaseServerApp:()=>Nn,_registerComponent:()=>Va,_removeServiceInstance:()=>La,_serverApps:()=>Eo,deleteApp:()=>Ba,getApp:()=>ja,getApps:()=>_h,initializeApp:()=>$a,initializeServerApp:()=>Io,onLog:()=>j,registerVersion:()=>B,setLogLevel:()=>J});var P=ee(467),rt=ee(362),Ne=ee(41),ae=ee(76);const dt=(pe,re)=>re.some(De=>pe instanceof De);let tt,lt;const G=new WeakMap,ne=new WeakMap,te=new WeakMap,ge=new WeakMap,$e=new WeakMap;let ct={get(pe,re,De){if(pe instanceof IDBTransaction){if("done"===re)return ne.get(pe);if("objectStoreNames"===re)return pe.objectStoreNames||te.get(pe);if("store"===re)return De.objectStoreNames[1]?void 0:De.objectStore(De.objectStoreNames[0])}return ht(pe[re])},set:(pe,re,De)=>(pe[re]=De,!0),has:(pe,re)=>pe instanceof IDBTransaction&&("done"===re||"store"===re)||re in pe};function Rn(pe){return"function"==typeof pe?function Dn(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K(){return lt||(lt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...re){return pe.apply(We(this),re),ht(G.get(this))}:function(...re){return ht(pe.apply(We(this),re))}:function(re,...De){const je=pe.call(We(this),re,...De);return te.set(je,re.sort?re.sort():[re]),ht(je)}}(pe):(pe instanceof IDBTransaction&&function mt(pe){if(ne.has(pe))return;const re=new Promise((De,je)=>{const jt=()=>{pe.removeEventListener("complete",gt),pe.removeEventListener("error",Yt),pe.removeEventListener("abort",Yt)},gt=()=>{De(),jt()},Yt=()=>{je(pe.error||new DOMException("AbortError","AbortError")),jt()};pe.addEventListener("complete",gt),pe.addEventListener("error",Yt),pe.addEventListener("abort",Yt)});ne.set(pe,re)}(pe),dt(pe,function ze(){return tt||(tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,ct):pe)}function ht(pe){if(pe instanceof IDBRequest)return function qe(pe){const re=new Promise((De,je)=>{const jt=()=>{pe.removeEventListener("success",gt),pe.removeEventListener("error",Yt)},gt=()=>{De(ht(pe.result)),jt()},Yt=()=>{je(pe.error),jt()};pe.addEventListener("success",gt),pe.addEventListener("error",Yt)});return re.then(De=>{De instanceof IDBCursor&&G.set(De,pe)}).catch(()=>{}),$e.set(re,pe),re}(pe);if(ge.has(pe))return ge.get(pe);const re=Rn(pe);return re!==pe&&(ge.set(pe,re),$e.set(re,pe)),re}const We=pe=>$e.get(pe),ie=["get","getKey","getAll","getAllKeys","count"],M=["put","add","delete","clear"],Pe=new Map;function W(pe,re){if(!(pe instanceof IDBDatabase)||re in pe||"string"!=typeof re)return;if(Pe.get(re))return Pe.get(re);const De=re.replace(/FromIndex$/,""),je=re!==De,jt=M.includes(De);if(!(De in(je?IDBIndex:IDBObjectStore).prototype)||!jt&&!ie.includes(De))return;const gt=function(){var Yt=(0,P.A)(function*(Ot,...Pt){const Rs=this.transaction(Ot,jt?"readwrite":"readonly");let pt=Rs.store;return je&&(pt=pt.index(Pt.shift())),(yield Promise.all([pt[De](...Pt),jt&&Rs.done]))[0]});return function(Pt){return Yt.apply(this,arguments)}}();return Pe.set(re,gt),gt}!function vt(pe){ct=pe(ct)}(pe=>({...pe,get:(re,De,je)=>W(re,De)||pe.get(re,De,je),has:(re,De)=>!!W(re,De)||pe.has(re,De)}));class bt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(De=>{if(function Et(pe){const re=pe.getComponent();return"VERSION"===re?.type}(De)){const je=De.getImmediate();return`${je.library}/${je.version}`}return null}).filter(De=>De).join(" ")}}const Ut="@firebase/app",pn="0.10.7",cn=new Ne.Vy("@firebase/app"),ia="[DEFAULT]",Ep={[Ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},cs=new Map,Eo=new Map,To=new Map;function sa(pe,re){try{pe.container.addComponent(re)}catch(De){cn.debug(`Component ${re.name} failed to register with FirebaseApp ${pe.name}`,De)}}function Tp(pe,re){pe.container.addOrOverwriteComponent(re)}function Va(pe){const re=pe.name;if(To.has(re))return cn.debug(`There were multiple attempts to register component ${re}.`),!1;To.set(re,pe);for(const De of cs.values())sa(De,pe);for(const De of Eo.values())sa(De,pe);return!0}function Cu(pe,re){const De=pe.container.getProvider("heartbeat").getImmediate({optional:!0});return De&&De.triggerHeartbeat(),pe.container.getProvider(re)}function La(pe,re,De=ia){Cu(pe,re).clearInstance(De)}function yl(pe){return void 0!==pe.options}function Nn(pe){return void 0!==pe.settings}function Wi(){To.clear()}const fi=new ae.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Kr{constructor(re,De,je){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},De),this._name=De.name,this._automaticDataCollectionEnabled=De.automaticDataCollectionEnabled,this._container=je,this.container.addComponent(new rt.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}class Du extends Kr{constructor(re,De,je,jt){const gt=void 0!==De.automaticDataCollectionEnabled&&De.automaticDataCollectionEnabled,Yt={name:je,automaticDataCollectionEnabled:gt};super(void 0!==re.apiKey?re:re.options,Yt,jt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:gt},De),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,De.releaseOnDeref=void 0,B(Ut,pn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(re){this.isDeleted||(this._refCount++,void 0!==re&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(re,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ba(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw fi.create("server-app-deleted")}}const oa="10.12.4";function $a(pe,re={}){let De=pe;"object"!=typeof re&&(re={name:re});const je=Object.assign({name:ia,automaticDataCollectionEnabled:!1},re),jt=je.name;if("string"!=typeof jt||!jt)throw fi.create("bad-app-name",{appName:String(jt)});if(De||(De=(0,ae.T9)()),!De)throw fi.create("no-options");const gt=cs.get(jt);if(gt){if((0,ae.bD)(De,gt.options)&&(0,ae.bD)(je,gt.config))return gt;throw fi.create("duplicate-app",{appName:jt})}const Yt=new rt.h1(jt);for(const Pt of To.values())Yt.addComponent(Pt);const Ot=new Kr(De,je,Yt);return cs.set(jt,Ot),Ot}function Io(pe,re){if((0,ae.Bd)()&&!(0,ae.p7)())throw fi.create("invalid-server-app-environment");let De;void 0===re.automaticDataCollectionEnabled&&(re.automaticDataCollectionEnabled=!1),De=yl(pe)?pe.options:pe;const je=Object.assign(Object.assign({},re),De);if(void 0!==je.releaseOnDeref&&delete je.releaseOnDeref,void 0!==re.releaseOnDeref&&typeof FinalizationRegistry>"u")throw fi.create("finalization-registry-not-supported",{});const gt=""+(Rs=JSON.stringify(je),[...Rs].reduce((pt,Hy)=>Math.imul(31,pt)+Hy.charCodeAt(0)|0,0)),Yt=Eo.get(gt);var Rs;if(Yt)return Yt.incRefCount(re.releaseOnDeref),Yt;const Ot=new rt.h1(gt);for(const Rs of To.values())Ot.addComponent(Rs);const Pt=new Du(De,re,gt,Ot);return Eo.set(gt,Pt),Pt}function ja(pe=ia){const re=cs.get(pe);if(!re&&pe===ia&&(0,ae.T9)())return $a();if(!re)throw fi.create("no-app",{appName:pe});return re}function _h(){return Array.from(cs.values())}function Ba(pe){return _l.apply(this,arguments)}function _l(){return(_l=(0,P.A)(function*(pe){let re=!1;const De=pe.name;cs.has(De)?(re=!0,cs.delete(De)):Eo.has(De)&&pe.decRefCount()<=0&&(Eo.delete(De),re=!0),re&&(yield Promise.all(pe.container.getProviders().map(je=>je.delete())),pe.isDeleted=!0)})).apply(this,arguments)}function B(pe,re,De){var je;let jt=null!==(je=Ep[pe])&&void 0!==je?je:pe;De&&(jt+=`-${De}`);const gt=jt.match(/\s|\//),Yt=re.match(/\s|\//);if(gt||Yt){const Ot=[`Unable to register library "${jt}" with version "${re}":`];return gt&&Ot.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),gt&&Yt&&Ot.push("and"),Yt&&Ot.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void cn.warn(Ot.join(" "))}Va(new rt.uA(`${jt}-version`,()=>({library:jt,version:re}),"VERSION"))}function j(pe,re){if(null!==pe&&"function"!=typeof pe)throw fi.create("invalid-log-argument");(0,Ne.Ey)(pe,re)}function J(pe){(0,Ne.He)(pe)}const Ae="firebase-heartbeat-database",le=1,nt="firebase-heartbeat-store";let Vt=null;function dn(){return Vt||(Vt=function ft(pe,re,{blocked:De,upgrade:je,blocking:jt,terminated:gt}={}){const Yt=indexedDB.open(pe,re),Ot=ht(Yt);return je&&Yt.addEventListener("upgradeneeded",Pt=>{je(ht(Yt.result),Pt.oldVersion,Pt.newVersion,ht(Yt.transaction),Pt)}),De&&Yt.addEventListener("blocked",Pt=>De(Pt.oldVersion,Pt.newVersion,Pt)),Ot.then(Pt=>{gt&&Pt.addEventListener("close",()=>gt()),jt&&Pt.addEventListener("versionchange",Rs=>jt(Rs.oldVersion,Rs.newVersion,Rs))}).catch(()=>{}),Ot}(Ae,le,{upgrade:(pe,re)=>{if(0===re)try{pe.createObjectStore(nt)}catch(De){console.warn(De)}}}).catch(pe=>{throw fi.create("idb-open",{originalErrorMessage:pe.message})})),Vt}function ur(){return(ur=(0,P.A)(function*(pe){try{const De=(yield dn()).transaction(nt),je=yield De.objectStore(nt).get(Ki(pe));return yield De.done,je}catch(re){if(re instanceof ae.g)cn.warn(re.message);else{const De=fi.create("idb-get",{originalErrorMessage:re?.message});cn.warn(De.message)}}})).apply(this,arguments)}function _r(pe,re){return qt.apply(this,arguments)}function qt(){return(qt=(0,P.A)(function*(pe,re){try{const je=(yield dn()).transaction(nt,"readwrite");yield je.objectStore(nt).put(re,Ki(pe)),yield je.done}catch(De){if(De instanceof ae.g)cn.warn(De.message);else{const je=fi.create("idb-set",{originalErrorMessage:De?.message});cn.warn(je.message)}}})).apply(this,arguments)}function Ki(pe){return`${pe.name}!${pe.options.appId}`}class Vc{constructor(re){this.container=re,this._heartbeatsCache=null;const De=this.container.getProvider("app").getImmediate();this._storage=new vh(De),this._heartbeatsCachePromise=this._storage.read().then(je=>(this._heartbeatsCache=je,je))}triggerHeartbeat(){var re=this;return(0,P.A)(function*(){var De,je;const gt=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Yt=xs();if((null!=(null===(De=re._heartbeatsCache)||void 0===De?void 0:De.heartbeats)||(re._heartbeatsCache=yield re._heartbeatsCachePromise,null!=(null===(je=re._heartbeatsCache)||void 0===je?void 0:je.heartbeats)))&&re._heartbeatsCache.lastSentHeartbeatDate!==Yt&&!re._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Yt))return re._heartbeatsCache.heartbeats.push({date:Yt,agent:gt}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(Ot=>{const Pt=new Date(Ot.date).valueOf();return Date.now()-Pt<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,P.A)(function*(){var De;if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null==(null===(De=re._heartbeatsCache)||void 0===De?void 0:De.heartbeats)||0===re._heartbeatsCache.heartbeats.length)return"";const je=xs(),{heartbeatsToSend:jt,unsentEntries:gt}=function bl(pe,re=1024){const De=[];let je=pe.slice();for(const jt of pe){const gt=De.find(Yt=>Yt.agent===jt.agent);if(gt){if(gt.dates.push(jt.date),On(De)>re){gt.dates.pop();break}}else if(De.push({agent:jt.agent,dates:[jt.date]}),On(De)>re){De.pop();break}je=je.slice(1)}return{heartbeatsToSend:De,unsentEntries:je}}(re._heartbeatsCache.heartbeats),Yt=(0,ae.Uj)(JSON.stringify({version:2,heartbeats:jt}));return re._heartbeatsCache.lastSentHeartbeatDate=je,gt.length>0?(re._heartbeatsCache.heartbeats=gt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),Yt})()}}function xs(){return(new Date).toISOString().substring(0,10)}class vh{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.A)(function*(){return!!(0,ae.zW)()&&(0,ae.eX)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,P.A)(function*(){if(yield re._canUseIndexedDBPromise){const je=yield function Oi(pe){return ur.apply(this,arguments)}(re.app);return je?.heartbeats?je:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(re){var De=this;return(0,P.A)(function*(){var je;if(yield De._canUseIndexedDBPromise){const gt=yield De.read();return _r(De.app,{lastSentHeartbeatDate:null!==(je=re.lastSentHeartbeatDate)&&void 0!==je?je:gt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var De=this;return(0,P.A)(function*(){var je;if(yield De._canUseIndexedDBPromise){const gt=yield De.read();return _r(De.app,{lastSentHeartbeatDate:null!==(je=re.lastSentHeartbeatDate)&&void 0!==je?je:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...re.heartbeats]})}})()}}function On(pe){return(0,ae.Uj)(JSON.stringify({version:2,heartbeats:pe})).length}!function Ua(pe){Va(new rt.uA("platform-logger",re=>new bt(re),"PRIVATE")),Va(new rt.uA("heartbeat",re=>new Vc(re),"PRIVATE")),B(Ut,pn,pe),B(Ut,pn,"esm2017"),B("fire-js","")}("")},362:(zt,St,ee)=>{"use strict";ee.d(St,{h1:()=>ze,uA:()=>Ne});var P=ee(467),rt=ee(76);class Ne{constructor(G,ne,te){this.name=G,this.instanceFactory=ne,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class dt{constructor(G,ne){this.name=G,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const ne=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(ne)){const te=new rt.cY;if(this.instancesDeferred.set(ne,te),this.isInitialized(ne)||this.shouldAutoInitialize())try{const ge=this.getOrInitializeService({instanceIdentifier:ne});ge&&te.resolve(ge)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(G){var ne;const te=this.normalizeInstanceIdentifier(G?.identifier),ge=null!==(ne=G?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch($e){if(ge)return null;throw $e}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function lt(K){return"EAGER"===K.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[ne,te]of this.instancesDeferred.entries()){const ge=this.normalizeInstanceIdentifier(ne);try{const $e=this.getOrInitializeService({instanceIdentifier:ge});te.resolve($e)}catch{}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,P.A)(function*(){const ne=Array.from(G.instances.values());yield Promise.all([...ne.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...ne.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:ne={}}=G,te=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ge=this.getOrInitializeService({instanceIdentifier:te,options:ne});for(const[$e,qe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier($e)&&qe.resolve(ge);return ge}onInit(G,ne){var te;const ge=this.normalizeInstanceIdentifier(ne),$e=null!==(te=this.onInitCallbacks.get(ge))&&void 0!==te?te:new Set;$e.add(G),this.onInitCallbacks.set(ge,$e);const qe=this.instances.get(ge);return qe&&G(qe,ge),()=>{$e.delete(G)}}invokeOnInitCallbacks(G,ne){const te=this.onInitCallbacks.get(ne);if(te)for(const ge of te)try{ge(G,ne)}catch{}}getOrInitializeService({instanceIdentifier:G,options:ne={}}){let te=this.instances.get(G);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(K=G,K===ae?void 0:K),options:ne}),this.instances.set(G,te),this.instancesOptions.set(G,ne),this.invokeOnInitCallbacks(te,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,te)}catch{}var K;return te||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ze{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const ne=this.getProvider(G.name);if(ne.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);ne.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const ne=new dt(G,this);return this.providers.set(G,ne),ne}getProviders(){return Array.from(this.providers.values())}}},41:(zt,St,ee)=>{"use strict";ee.d(St,{$b:()=>rt,Ey:()=>K,He:()=>ze,Vy:()=>lt});const P=[];var rt=function(G){return G[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",G}(rt||{});const Ne={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},ae=rt.INFO,dt={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},tt=(G,ne,...te)=>{if(ne<G.logLevel)return;const ge=(new Date).toISOString(),$e=dt[ne];if(!$e)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[$e](`[${ge}]  ${G.name}:`,...te)};class lt{constructor(ne){this.name=ne,this._logLevel=ae,this._logHandler=tt,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in rt))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?Ne[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...ne),this._logHandler(this,rt.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...ne),this._logHandler(this,rt.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...ne),this._logHandler(this,rt.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...ne),this._logHandler(this,rt.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...ne),this._logHandler(this,rt.ERROR,...ne)}}function ze(G){P.forEach(ne=>{ne.setLogLevel(G)})}function K(G,ne){for(const te of P){let ge=null;ne&&ne.level&&(ge=Ne[ne.level]),te.userLogHandler=null===G?null:($e,qe,...mt)=>{const ct=mt.map(vt=>{if(null==vt)return null;if("string"==typeof vt)return vt;if("number"==typeof vt||"boolean"==typeof vt)return vt.toString();if(vt instanceof Error)return vt.message;try{return JSON.stringify(vt)}catch{return null}}).filter(vt=>vt).join(" ");qe>=(ge??$e.logLevel)&&G({level:rt[qe].toLowerCase(),message:ct,args:mt,type:$e.name})}}}},492:(zt,St,ee)=>{"use strict";ee.r(St);var P=ee(467),rt=ee(345),Ne=ee(852),ae=ee(76),dt=ee(41),tt=ee(635),lt=ee(362);const K={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const qe=function ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},mt=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new ae.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dn=new dt.Vy("@firebase/auth");function ht(m,...d){Dn.logLevel<=dt.$b.ERROR&&Dn.error(`Auth (${Ne.SDK_VERSION}): ${m}`,...d)}function We(m,...d){throw Pe(m,...d)}function ft(m,...d){return Pe(m,...d)}function be(m,d,f){const y=Object.assign(Object.assign({},mt()),{[d]:f});return new ae.FA("auth","Firebase",y).create(d,{appName:m.name})}function ie(m){return be(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M(m,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&We(m,"argument-error"),be(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(m,...d){if("string"!=typeof m){const f=d[0],y=[...d.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(f,...y)}return ct.create(m,...d)}function W(m,d,...f){if(!m)throw Pe(d,...f)}function bt(m){const d="INTERNAL ASSERTION FAILED: "+m;throw ht(d),new Error(d)}function Et(m,d){m||bt(d)}function Ut(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function pn(){return"http:"===cn()||"https:"===cn()}function cn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class ue{constructor(d,f){this.shortDelay=d,this.longDelay=f,Et(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,ae.jZ)()||(0,ae.lV)()}get(){return function or(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pn()||(0,ae.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ce(m,d){Et(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class ye{static initialize(d,f,y){this.fetchImpl=d,f&&(this.headersImpl=f),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const we={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Be=new ue(3e4,6e4);function Ce(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function Ze(m,d,f,y){return an.apply(this,arguments)}function an(){return(an=(0,P.A)(function*(m,d,f,y,E={}){return Oe(m,E,(0,P.A)(function*(){let C={},V={};y&&("GET"===d?V=y:C={body:JSON.stringify(y)});const Q=(0,ae.Am)(Object.assign({key:m.config.apiKey},V)).slice(1),Ie=yield m._getAdditionalHeaders();return Ie["Content-Type"]="application/json",m.languageCode&&(Ie["X-Firebase-Locale"]=m.languageCode),ye.fetch()(Qt(m,m.config.apiHost,f,Q),Object.assign({method:d,headers:Ie,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function Oe(m,d,f){return ve.apply(this,arguments)}function ve(){return(ve=(0,P.A)(function*(m,d,f){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},we),d);try{const E=new un(m),C=yield Promise.race([f(),E.promise]);E.clearNetworkTimeout();const V=yield C.json();if("needConfirmation"in V)throw mn(m,"account-exists-with-different-credential",V);if(C.ok&&!("errorMessage"in V))return V;{const Q=C.ok?V.errorMessage:V.error.message,[Ie,Ge]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ie)throw mn(m,"credential-already-in-use",V);if("EMAIL_EXISTS"===Ie)throw mn(m,"email-already-in-use",V);if("USER_DISABLED"===Ie)throw mn(m,"user-disabled",V);const ot=y[Ie]||Ie.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw be(m,ot,Ge);We(m,ot)}}catch(E){if(E instanceof ae.g)throw E;We(m,"network-request-failed",{message:String(E)})}})).apply(this,arguments)}function Re(m,d,f,y){return it.apply(this,arguments)}function it(){return(it=(0,P.A)(function*(m,d,f,y,E={}){const C=yield Ze(m,d,f,y,E);return"mfaPendingCredential"in C&&We(m,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function Qt(m,d,f,y){const E=`${d}${f}?${y}`;return m.config.emulator?ce(m.config,E):`${m.config.apiScheme}://${E}`}function Nt(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class un{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,y)=>{this.timer=setTimeout(()=>y(ft(this.auth,"network-request-failed")),Be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mn(m,d,f){const y={appName:m.name};f.email&&(y.email=f.email),f.phoneNumber&&(y.phoneNumber=f.phoneNumber);const E=ft(m,d,y);return E.customData._tokenResponse=f,E}function ar(m){return void 0!==m&&void 0!==m.getResponse}function Wr(m){return void 0!==m&&void 0!==m.enterprise}class Ma{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return Nt(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function ra(){return(ra=(0,P.A)(function*(m){return(yield Ze(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gl(m,d){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,P.A)(function*(m,d){return Ze(m,"GET","/v2/recaptchaConfig",Ce(m,d))})).apply(this,arguments)}function ia(){return(ia=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function cs(){return(cs=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Eo(m,d){return To.apply(this,arguments)}function To(){return(To=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function sa(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Cu(){return(Cu=(0,P.A)(function*(m,d=!1){const f=(0,ae.Ku)(m),y=yield f.getIdToken(d),E=yl(y);W(E&&E.exp&&E.auth_time&&E.iat,f.auth,"internal-error");const C="object"==typeof E.firebase?E.firebase:void 0,V=C?.sign_in_provider;return{claims:E,token:y,authTime:sa(La(E.auth_time)),issuedAtTime:sa(La(E.iat)),expirationTime:sa(La(E.exp)),signInProvider:V||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function La(m){return 1e3*Number(m)}function yl(m){const[d,f,y]=m.split(".");if(void 0===d||void 0===f||void 0===y)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const E=(0,ae.u)(f);return E?JSON.parse(E):(ht("Failed to decode base64 JWT payload"),null)}catch(E){return ht("Caught error parsing JWT payload as JSON",E?.toString()),null}}function Nn(m){const d=yl(m);return W(d,"internal-error"),W(typeof d.exp<"u","internal-error"),W(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function Wi(m,d){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.A)(function*(m,d,f=!1){if(f)return d;try{return yield d}catch(y){throw y instanceof ae.g&&function fi({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class Kr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const E=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,E)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const y=this.getInterval(d);this.timerId=setTimeout((0,P.A)(function*(){yield f.iteration()}),y)}iteration(){var d=this;return(0,P.A)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class Du{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=sa(this.lastLoginAt),this.creationTime=sa(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function oa(m){return $a.apply(this,arguments)}function $a(){return($a=(0,P.A)(function*(m){var d;const f=m.auth,y=yield m.getIdToken(),E=yield Wi(m,Eo(f,{idToken:y}));W(E?.users.length,f,"internal-error");const C=E.users[0];m._notifyReloadListener(C);const V=null!==(d=C.providerUserInfo)&&void 0!==d&&d.length?Ba(C.providerUserInfo):[],Q=function _h(m,d){return[...m.filter(y=>!d.some(E=>E.providerId===y.providerId)),...d]}(m.providerData,V),ot=!!m.isAnonymous&&!(m.email&&C.passwordHash||Q?.length),Ke={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:Q,metadata:new Du(C.createdAt,C.lastLoginAt),isAnonymous:ot};Object.assign(m,Ke)})).apply(this,arguments)}function ja(){return(ja=(0,P.A)(function*(m){const d=(0,ae.Ku)(m);yield oa(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ba(m){return m.map(d=>{var{providerId:f}=d,y=(0,tt.Tt)(d,["providerId"]);return{providerId:f,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function B(){return(B=(0,P.A)(function*(m,d){const f=yield Oe(m,{},(0,P.A)(function*(){const y=(0,ae.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:E,apiKey:C}=m.config,V=Qt(m,E,"/v1/token",`key=${C}`),Q=yield m._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",ye.fetch()(V,{method:"POST",headers:Q,body:y})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function J(){return(J=(0,P.A)(function*(m,d){return Ze(m,"POST","/v2/accounts:revokeToken",Ce(m,d))})).apply(this,arguments)}class Ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){W(d.idToken,"internal-error"),W(typeof d.idToken<"u","internal-error"),W(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):Nn(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}updateFromIdToken(d){W(0!==d.length,"internal-error");const f=Nn(d);this.updateTokensAndExpiration(d,null,f)}getToken(d,f=!1){var y=this;return(0,P.A)(function*(){return f||!y.accessToken||y.isExpired?(W(y.refreshToken,d,"user-token-expired"),y.refreshToken?(yield y.refresh(d,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var y=this;return(0,P.A)(function*(){const{accessToken:E,refreshToken:C,expiresIn:V}=yield function _l(m,d){return B.apply(this,arguments)}(d,f);y.updateTokensAndExpiration(E,C,Number(V))})()}updateTokensAndExpiration(d,f,y){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(d,f){const{refreshToken:y,accessToken:E,expirationTime:C}=f,V=new Ae;return y&&(W("string"==typeof y,"internal-error",{appName:d}),V.refreshToken=y),E&&(W("string"==typeof E,"internal-error",{appName:d}),V.accessToken=E),C&&(W("number"==typeof C,"internal-error",{appName:d}),V.expirationTime=C),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Ae,this.toJSON())}_performRefresh(){return bt("not implemented")}}function le(m,d){W("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class nt{constructor(d){var{uid:f,auth:y,stsTokenManager:E}=d,C=(0,tt.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=y,this.stsTokenManager=E,this.accessToken=E.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new Du(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,P.A)(function*(){const y=yield Wi(f,f.stsTokenManager.getToken(f.auth,d));return W(y,f.auth,"internal-error"),f.accessToken!==y&&(f.accessToken=y,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),y})()}getIdTokenResult(d){return function Va(m){return Cu.apply(this,arguments)}(this,d)}reload(){return function Io(m){return ja.apply(this,arguments)}(this)}_assign(d){this!==d&&(W(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new nt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var y=this;return(0,P.A)(function*(){let E=!1;d.idToken&&d.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(d),E=!0),f&&(yield oa(y)),yield y.auth._persistUserIfCurrent(y),E&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var d=this;return(0,P.A)(function*(){if((0,Ne._isFirebaseServerApp)(d.auth.app))return Promise.reject(ie(d.auth));const f=yield d.getIdToken();return yield Wi(d,function yh(m,d){return ia.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var y,E,C,V,Q,Ie,Ge,ot;const Ke=null!==(y=f.displayName)&&void 0!==y?y:void 0,cr=null!==(E=f.email)&&void 0!==E?E:void 0,oo=null!==(C=f.phoneNumber)&&void 0!==C?C:void 0,Hh=null!==(V=f.photoURL)&&void 0!==V?V:void 0,dd=null!==(Q=f.tenantId)&&void 0!==Q?Q:void 0,zh=null!==(Ie=f._redirectEventId)&&void 0!==Ie?Ie:void 0,Gh=null!==(Ge=f.createdAt)&&void 0!==Ge?Ge:void 0,qh=null!==(ot=f.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:Wh,emailVerified:ma,isAnonymous:Rt,providerData:hd,stsTokenManager:om}=f;W(Wh&&om,d,"internal-error");const zE=Ae.fromJSON(this.name,om);W("string"==typeof Wh,d,"internal-error"),le(Ke,d.name),le(cr,d.name),W("boolean"==typeof ma,d,"internal-error"),W("boolean"==typeof Rt,d,"internal-error"),le(oo,d.name),le(Hh,d.name),le(dd,d.name),le(zh,d.name),le(Gh,d.name),le(qh,d.name);const GE=new nt({uid:Wh,auth:d,email:cr,emailVerified:ma,displayName:Ke,isAnonymous:Rt,photoURL:Hh,phoneNumber:oo,tenantId:dd,stsTokenManager:zE,createdAt:Gh,lastLoginAt:qh});return hd&&Array.isArray(hd)&&(GE.providerData=hd.map(x1=>Object.assign({},x1))),zh&&(GE._redirectEventId=zh),GE}static _fromIdTokenResponse(d,f,y=!1){return(0,P.A)(function*(){const E=new Ae;E.updateFromServerResponse(f);const C=new nt({uid:f.localId,auth:d,stsTokenManager:E,isAnonymous:y});return yield oa(C),C})()}static _fromGetAccountInfoResponse(d,f,y){return(0,P.A)(function*(){const E=f.users[0];W(void 0!==E.localId,"internal-error");const C=void 0!==E.providerUserInfo?Ba(E.providerUserInfo):[],V=!(E.email&&E.passwordHash||C?.length),Q=new Ae;Q.updateFromIdToken(y);const Ie=new nt({uid:E.localId,auth:d,stsTokenManager:Q,isAnonymous:V}),Ge={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:C,metadata:new Du(E.createdAt,E.lastLoginAt),isAnonymous:!(E.email&&E.passwordHash||C?.length)};return Object.assign(Ie,Ge),Ie})()}}const Vt=new Map;function dn(m){Et(m instanceof Function,"Expected a class definition");let d=Vt.get(m);return d?(Et(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Vt.set(m,d),d)}const ur=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.A)(function*(){return!0})()}_set(f,y){var E=this;return(0,P.A)(function*(){E.storage[f]=y})()}_get(f){var y=this;return(0,P.A)(function*(){const E=y.storage[f];return void 0===E?null:E})()}_remove(f){var y=this;return(0,P.A)(function*(){delete y.storage[f]})()}_addListener(f,y){}_removeListener(f,y){}}return m.type="NONE",m})();function _r(m,d,f){return`firebase:${m}:${d}:${f}`}class qt{constructor(d,f,y){this.persistence=d,this.auth=f,this.userKey=y;const{config:E,name:C}=this.auth;this.fullUserKey=_r(this.userKey,E.apiKey,C),this.fullPersistenceKey=_r("persistence",E.apiKey,C),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,P.A)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?nt._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,P.A)(function*(){if(f.persistence===d)return;const y=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,y?f.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,y="authUser"){return(0,P.A)(function*(){if(!f.length)return new qt(dn(ur),d,y);const E=(yield Promise.all(f.map(function(){var Ge=(0,P.A)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let C=E[0]||dn(ur);const V=_r(y,d.config.apiKey,d.name);let Q=null;for(const Ge of f)try{const ot=yield Ge._get(V);if(ot){const Ke=nt._fromJSON(d,ot);Ge!==C&&(Q=Ke),C=Ge;break}}catch{}const Ie=E.filter(Ge=>Ge._shouldAllowMigration);return C._shouldAllowMigration&&Ie.length?(C=Ie[0],Q&&(yield C._set(V,Q.toJSON())),yield Promise.all(f.map(function(){var Ge=(0,P.A)(function*(ot){if(ot!==C)try{yield ot._remove(V)}catch{}});return function(ot){return Ge.apply(this,arguments)}}())),new qt(C,d,y)):new qt(C,d,y)})()}}function Ki(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(xs(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Ao(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(vh(d))return"Blackberry";if(On(d))return"Webos";if(vl(d))return"Safari";if((d.includes("chrome/")||Vc(d))&&!d.includes("edge/"))return"Chrome";if(bl(d))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function Ao(m=(0,ae.ZQ)()){return/firefox\//i.test(m)}function vl(m=(0,ae.ZQ)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Vc(m=(0,ae.ZQ)()){return/crios\//i.test(m)}function xs(m=(0,ae.ZQ)()){return/iemobile/i.test(m)}function bl(m=(0,ae.ZQ)()){return/android/i.test(m)}function vh(m=(0,ae.ZQ)()){return/blackberry/i.test(m)}function On(m=(0,ae.ZQ)()){return/webos/i.test(m)}function Ua(m=(0,ae.ZQ)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function je(m=(0,ae.ZQ)()){return Ua(m)||bl(m)||On(m)||vh(m)||/windows phone/i.test(m)||xs(m)}function gt(m,d=[]){let f;switch(m){case"Browser":f=Ki((0,ae.ZQ)());break;case"Worker":f=`${Ki((0,ae.ZQ)())}-${m}`;break;default:f=m}const y=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${Ne.SDK_VERSION}/${y}`}class Yt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const y=C=>new Promise((V,Q)=>{try{V(d(C))}catch(Ie){Q(Ie)}});y.onAbort=f,this.queue.push(y);const E=this.queue.length-1;return()=>{this.queue[E]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,P.A)(function*(){if(f.auth.currentUser===d)return;const y=[];try{for(const E of f.queue)yield E(d),E.onAbort&&y.push(E.onAbort)}catch(E){y.reverse();for(const C of y)try{C()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:E?.message})}})()}}function Pt(){return(Pt=(0,P.A)(function*(m,d={}){return Ze(m,"GET","/v2/passwordPolicy",Ce(m,d))})).apply(this,arguments)}class pt{constructor(d){var f,y,E,C;const V=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=V.minPasswordLength)&&void 0!==f?f:6,V.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=V.maxPasswordLength),void 0!==V.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=V.containsLowercaseCharacter),void 0!==V.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=V.containsUppercaseCharacter),void 0!==V.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=V.containsNumericCharacter),void 0!==V.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=V.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(E=null===(y=d.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==E?E:"",this.forceUpgradeOnSignin=null!==(C=d.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,y,E,C,V,Q;const Ie={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Ie),this.validatePasswordCharacterOptions(d,Ie),Ie.isValid&&(Ie.isValid=null===(f=Ie.meetsMinPasswordLength)||void 0===f||f),Ie.isValid&&(Ie.isValid=null===(y=Ie.meetsMaxPasswordLength)||void 0===y||y),Ie.isValid&&(Ie.isValid=null===(E=Ie.containsLowercaseLetter)||void 0===E||E),Ie.isValid&&(Ie.isValid=null===(C=Ie.containsUppercaseLetter)||void 0===C||C),Ie.isValid&&(Ie.isValid=null===(V=Ie.containsNumericCharacter)||void 0===V||V),Ie.isValid&&(Ie.isValid=null===(Q=Ie.containsNonAlphanumericCharacter)||void 0===Q||Q),Ie}validatePasswordLengthOptions(d,f){const y=this.customStrengthOptions.minPasswordLength,E=this.customStrengthOptions.maxPasswordLength;y&&(f.meetsMinPasswordLength=d.length>=y),E&&(f.meetsMaxPasswordLength=d.length<=E)}validatePasswordCharacterOptions(d,f){let y;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let E=0;E<d.length;E++)y=d.charAt(E),this.updatePasswordCharacterOptionsStatuses(f,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(d,f,y,E,C){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=E)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=C))}}class Hy{constructor(d,f,y,E){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zy(this),this.idTokenSubscription=new zy(this),this.beforeStateQueue=new Yt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(d,f){var y=this;return f&&(this._popupRedirectResolver=dn(f)),this._initializationPromise=this.queue((0,P.A)(function*(){var E,C;if(!y._deleted&&(y.persistenceManager=yield qt.create(y,d),!y._deleted)){if(null!==(E=y._popupRedirectResolver)&&void 0!==E&&E._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(f),y.lastNotifiedUid=(null===(C=y.currentUser)||void 0===C?void 0:C.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,P.A)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(d){var f=this;return(0,P.A)(function*(){try{const y=yield Eo(f,{idToken:d}),E=yield nt._fromGetAccountInfoResponse(f,y,d);yield f.directlySetCurrentUser(E)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var f=this;return(0,P.A)(function*(){var y;if((0,Ne._isFirebaseServerApp)(f.app)){const Q=f.app.settings.authIdToken;return Q?new Promise(Ie=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(Q).then(Ie,Ie))}):f.directlySetCurrentUser(null)}const E=yield f.assertedPersistence.getCurrentUser();let C=E,V=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Q=null===(y=f.redirectUser)||void 0===y?void 0:y._redirectEventId,Ie=C?._redirectEventId,Ge=yield f.tryRedirectSignIn(d);(!Q||Q===Ie)&&Ge?.user&&(C=Ge.user,V=!0)}if(!C)return f.directlySetCurrentUser(null);if(!C._redirectEventId){if(V)try{yield f.beforeStateQueue.runMiddleware(C)}catch(Q){C=E,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Q))}return C?f.reloadAndSetCurrentUserOrClear(C):f.directlySetCurrentUser(null)}return W(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===C._redirectEventId?f.directlySetCurrentUser(C):f.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(d){var f=this;return(0,P.A)(function*(){let y=null;try{y=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,P.A)(function*(){try{yield oa(d)}catch(y){if("auth/network-request-failed"!==y?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Tn(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,P.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,P.A)(function*(){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(ie(f));const y=d?(0,ae.Ku)(d):null;return y&&W(y.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(y&&y._clone(f))})()}_updateCurrentUser(d,f=!1){var y=this;return(0,P.A)(function*(){if(!y._deleted)return d&&W(y.tenantId===d.tenantId,y,"tenant-id-mismatch"),f||(yield y.beforeStateQueue.runMiddleware(d)),y.queue((0,P.A)(function*(){yield y.directlySetCurrentUser(d),y.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,P.A)(function*(){return(0,Ne._isFirebaseServerApp)(d.app)?Promise.reject(ie(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var f=this;return(0,Ne._isFirebaseServerApp)(this.app)?Promise.reject(ie(this)):this.queue((0,P.A)(function*(){yield f.assertedPersistence.setPersistence(dn(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,P.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const y=f._getPasswordPolicyInternal();return y.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,P.A)(function*(){const f=yield function Ot(m){return Pt.apply(this,arguments)}(d),y=new pt(f);null===d.tenantId?d._projectPasswordPolicy=y:d._tenantPasswordPolicies[d.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new ae.FA("auth","Firebase",d())}onAuthStateChanged(d,f,y){return this.registerStateListener(this.authStateSubscription,d,f,y)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,y){return this.registerStateListener(this.idTokenSubscription,d,f,y)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const y=this.onAuthStateChanged(()=>{y(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,P.A)(function*(){if(f.currentUser){const y=yield f.currentUser.getIdToken(),E={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:y};null!=f.tenantId&&(E.tenantId=f.tenantId),yield function j(m,d){return J.apply(this,arguments)}(f,E)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var y=this;return(0,P.A)(function*(){const E=yield y.getOrInitRedirectPersistenceManager(f);return null===d?E.removeCurrentUser():E.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,P.A)(function*(){if(!f.redirectPersistenceManager){const y=d&&dn(d)||f._popupRedirectResolver;W(y,f,"argument-error"),f.redirectPersistenceManager=yield qt.create(f,[dn(y._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,P.A)(function*(){var y,E;return f._isInitialized&&(yield f.queue((0,P.A)(function*(){}))),(null===(y=f._currentUser)||void 0===y?void 0:y._redirectEventId)===d?f._currentUser:(null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,P.A)(function*(){if(d===f.currentUser)return f.queue((0,P.A)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,y,E){if(this._deleted)return()=>{};const C="function"==typeof f?f:f.next.bind(f);let V=!1;const Q=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(Q,this,"internal-error"),Q.then(()=>{V||C(this.currentUser)}),"function"==typeof f){const Ie=d.addObserver(f,y,E);return()=>{V=!0,Ie()}}{const Ie=d.addObserver(f);return()=>{V=!0,Ie()}}}directlySetCurrentUser(d){var f=this;return(0,P.A)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=gt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,P.A)(function*(){var f;const y={"X-Client-Version":d.clientVersion};d.app.options.appId&&(y["X-Firebase-gmpid"]=d.app.options.appId);const E=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();E&&(y["X-Firebase-Client"]=E);const C=yield d._getAppCheckToken();return C&&(y["X-Firebase-AppCheck"]=C),y})()}_getAppCheckToken(){var d=this;return(0,P.A)(function*(){var f;const y=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return y?.error&&function Rn(m,...d){Dn.logLevel<=dt.$b.WARN&&Dn.warn(`Auth (${Ne.SDK_VERSION}): ${m}`,...d)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function Mn(m){return(0,ae.Ku)(m)}class zy{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,ae.tD)(f=>this.observer=f)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Lc={loadJS:()=>(0,P.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bh(m){return Lc.loadJS(m)}function At(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Gy{constructor(d){this.type="recaptcha-enterprise",this.auth=Mn(d)}verify(d="verify",f=!1){var y=this;return(0,P.A)(function*(){function C(){return C=(0,P.A)(function*(Q){if(!f){if(null==Q.tenantId&&null!=Q._agentRecaptchaConfig)return Q._agentRecaptchaConfig.siteKey;if(null!=Q.tenantId&&void 0!==Q._tenantRecaptchaConfigs[Q.tenantId])return Q._tenantRecaptchaConfigs[Q.tenantId].siteKey}return new Promise(function(){var Ie=(0,P.A)(function*(Ge,ot){gl(Q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ke=>{if(void 0!==Ke.recaptchaKey){const cr=new Ma(Ke);return null==Q.tenantId?Q._agentRecaptchaConfig=cr:Q._tenantRecaptchaConfigs[Q.tenantId]=cr,Ge(cr.siteKey)}ot(new Error("recaptcha Enterprise site key undefined"))}).catch(Ke=>{ot(Ke)})});return function(Ge,ot){return Ie.apply(this,arguments)}}())}),C.apply(this,arguments)}function V(Q,Ie,Ge){const ot=window.grecaptcha;Wr(ot)?ot.enterprise.ready(()=>{ot.enterprise.execute(Q,{action:d}).then(Ke=>{Ie(Ke)}).catch(()=>{Ie("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Q,Ie)=>{(function E(Q){return C.apply(this,arguments)})(y.auth).then(Ge=>{if(!f&&Wr(window.grecaptcha))V(Ge,Q,Ie);else{if(typeof window>"u")return void Ie(new Error("RecaptchaVerifier is only supported in browser"));let ot=function ED(){return Lc.recaptchaEnterpriseScript}();0!==ot.length&&(ot+=Ge),bh(ot).then(()=>{V(Ge,Q,Ie)}).catch(Ke=>{Ie(Ke)})}}).catch(Ge=>{Ie(Ge)})})})()}}function Cw(m,d,f){return qy.apply(this,arguments)}function qy(){return(qy=(0,P.A)(function*(m,d,f,y=!1){const E=new Gy(m);let C;try{C=yield E.verify(f)}catch{C=yield E.verify(f,!0)}const V=Object.assign({},d);return Object.assign(V,y?{captchaResp:C}:{captchaResponse:C}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V})).apply(this,arguments)}function wh(m,d,f,y){return Sw.apply(this,arguments)}function Sw(){return Sw=(0,P.A)(function*(m,d,f,y){var E;if(null!==(E=m._getRecaptchaConfig())&&void 0!==E&&E.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield Cw(m,d,f,"getOobCode"===f);return y(m,C)}return y(m,d).catch(function(){var C=(0,P.A)(function*(V){if("auth/missing-recaptcha-token"===V.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Q=yield Cw(m,d,f,"getOobCode"===f);return y(m,Q)}return Promise.reject(V)});return function(V){return C.apply(this,arguments)}}())}),Sw.apply(this,arguments)}function Pw(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function kw(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class Nu{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return bt("not implemented")}_getIdTokenResponse(d){return bt("not implemented")}_linkToIdToken(d,f){return bt("not implemented")}_getReauthenticationResolver(d){return bt("not implemented")}}function xw(m,d){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:resetPassword",Ce(m,d))})).apply(this,arguments)}function Rw(){return(Rw=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function CL(m,d){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Ow(){return(Ow=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:update",Ce(m,d))})).apply(this,arguments)}function SL(m,d){return Jy.apply(this,arguments)}function Jy(){return(Jy=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signInWithPassword",Ce(m,d))})).apply(this,arguments)}function Ip(m,d){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:sendOobCode",Ce(m,d))})).apply(this,arguments)}function Xy(){return(Xy=(0,P.A)(function*(m,d){return Ip(m,d)})).apply(this,arguments)}function CD(m,d){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,P.A)(function*(m,d){return Ip(m,d)})).apply(this,arguments)}function NL(m,d){return e_.apply(this,arguments)}function e_(){return(e_=(0,P.A)(function*(m,d){return Ip(m,d)})).apply(this,arguments)}function t_(){return(t_=(0,P.A)(function*(m,d){return Ip(m,d)})).apply(this,arguments)}function Ap(){return(Ap=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signInWithEmailLink",Ce(m,d))})).apply(this,arguments)}function n_(){return(n_=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signInWithEmailLink",Ce(m,d))})).apply(this,arguments)}class Eh extends Nu{constructor(d,f,y,E=null){super("password",y),this._email=d,this._password=f,this._tenantId=E}static _fromEmailAndPassword(d,f){return new Eh(d,f,"password")}static _fromEmailAndCode(d,f,y=null){return new Eh(d,f,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,P.A)(function*(){switch(f.signInMethod){case"password":return wh(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",SL);case"emailLink":return function Mw(m,d){return Ap.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:We(d,"internal-error")}})()}_linkToIdToken(d,f){var y=this;return(0,P.A)(function*(){switch(y.signInMethod){case"password":return wh(d,{idToken:f,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CL);case"emailLink":return function Fw(m,d){return n_.apply(this,arguments)}(d,{idToken:f,email:y._email,oobCode:y._password});default:We(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Ha(m,d){return r_.apply(this,arguments)}function r_(){return(r_=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signInWithIdp",Ce(m,d))})).apply(this,arguments)}class za extends Nu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new za(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):We("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:E}=f,C=(0,tt.Tt)(f,["providerId","signInMethod"]);if(!y||!E)return null;const V=new za(y,E);return V.idToken=C.idToken||void 0,V.accessToken=C.accessToken||void 0,V.secret=C.secret,V.nonce=C.nonce,V.pendingToken=C.pendingToken||null,V}_getIdTokenResponse(d){return Ha(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,Ha(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ha(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,ae.Am)(f)}return d}}function Vw(){return(Vw=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:sendVerificationCode",Ce(m,d))})).apply(this,arguments)}function aa(){return(aa=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signInWithPhoneNumber",Ce(m,d))})).apply(this,arguments)}function $c(){return($c=(0,P.A)(function*(m,d){const f=yield Re(m,"POST","/v1/accounts:signInWithPhoneNumber",Ce(m,d));if(f.temporaryProof)throw mn(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const $w={USER_NOT_FOUND:"user-not-found"};function Cp(){return(Cp=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signInWithPhoneNumber",Ce(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),$w)})).apply(this,arguments)}class Pu extends Nu{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new Pu({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new Pu({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function PD(m,d){return aa.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Lw(m,d){return $c.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function jw(m,d){return Cp.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:y,verificationCode:E}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:y,code:E}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:y,phoneNumber:E,temporaryProof:C}=d;return y||f||E||C?new Pu({verificationId:f,verificationCode:y,phoneNumber:E,temporaryProof:C}):null}}class Th{constructor(d){var f,y,E,C,V,Q;const Ie=(0,ae.I9)((0,ae.hp)(d)),Ge=null!==(f=Ie.apiKey)&&void 0!==f?f:null,ot=null!==(y=Ie.oobCode)&&void 0!==y?y:null,Ke=function kD(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(E=Ie.mode)&&void 0!==E?E:null);W(Ge&&ot&&Ke,"argument-error"),this.apiKey=Ge,this.operation=Ke,this.code=ot,this.continueUrl=null!==(C=Ie.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(V=Ie.languageCode)&&void 0!==V?V:null,this.tenantId=null!==(Q=Ie.tenantId)&&void 0!==Q?Q:null}static parseLink(d){const f=function xD(m){const d=(0,ae.I9)((0,ae.hp)(m)).link,f=d?(0,ae.I9)((0,ae.hp)(d)).deep_link_id:null,y=(0,ae.I9)((0,ae.hp)(m)).deep_link_id;return(y?(0,ae.I9)((0,ae.hp)(y)).link:null)||y||f||d||m}(d);try{return new Th(f)}catch{return null}}}let Sp=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,y){return Eh._fromEmailAndPassword(f,y)}static credentialWithLink(f,y){const E=Th.parseLink(y);return W(E,"argument-error"),Eh._fromEmailAndCode(f,E.code,E.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Co{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ih extends Co{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ga extends Ih{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return W("providerId"in f&&"signInMethod"in f,"argument-error"),za._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return W(d.idToken||d.accessToken,"argument-error"),za._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ga.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ga.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:y,oauthTokenSecret:E,pendingToken:C,nonce:V,providerId:Q}=d;if(!y&&!E&&!f&&!C||!Q)return null;try{return new Ga(Q)._credential({idToken:f,accessToken:y,nonce:V,pendingToken:C})}catch{return null}}}let Bw=(()=>{class m extends Ih{constructor(){super("facebook.com")}static credential(f){return za._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Uw=(()=>{class m extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(f,y){return za._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:E}=f;if(!y&&!E)return null;try{return m.credential(y,E)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),RD=(()=>{class m extends Ih{constructor(){super("github.com")}static credential(f){return za._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class wl extends Nu{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Ha(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,Ha(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ha(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:E,pendingToken:C}=f;return y&&E&&C&&y===E?new wl(y,C):null}static _create(d,f){return new wl(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dp extends Co{constructor(d){W(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Dp.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Dp.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=wl.fromJSON(d);return W(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:y}=d;if(!f||!y)return null;try{return wl._create(y,f)}catch{return null}}}let zw=(()=>{class m extends Ih{constructor(){super("twitter.com")}static credential(f,y){return za._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:y,oauthTokenSecret:E}=f;if(!y||!E)return null;try{return m.credential(y,E)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function OD(m,d){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signUp",Ce(m,d))})).apply(this,arguments)}class to{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,y,E=!1){return(0,P.A)(function*(){const C=yield nt._fromIdTokenResponse(d,y,E),V=Gw(y);return new to({user:C,providerId:V,_tokenResponse:y,operationType:f})})()}static _forOperation(d,f,y){return(0,P.A)(function*(){yield d._updateTokensIfNecessary(y,!0);const E=Gw(y);return new to({user:d,providerId:E,_tokenResponse:y,operationType:f})})()}}function Gw(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function s_(){return(s_=(0,P.A)(function*(m){var d;if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const f=Mn(m);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new to({user:f.currentUser,providerId:null,operationType:"signIn"});const y=yield OD(f,{returnSecureToken:!0}),E=yield to._fromIdTokenResponse(f,"signIn",y,!0);return yield f._updateCurrentUser(E.user),E})).apply(this,arguments)}class jc extends ae.g{constructor(d,f,y,E){var C;super(f.code,f.message),this.operationType=y,this.user=E,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:d.name,tenantId:null!==(C=d.tenantId)&&void 0!==C?C:void 0,_serverResponse:f.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(d,f,y,E){return new jc(d,f,y,E)}}function qw(m,d,f,y){return("reauthenticate"===d?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?jc._fromErrorAndOperation(m,C,d,y):C})}function FD(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function Ww(){return Ww=(0,P.A)(function*(m,d){const f=(0,ae.Ku)(m);yield a_(!0,f,d);const{providerUserInfo:y}=yield function Ep(m,d){return cs.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),E=FD(y||[]);return f.providerData=f.providerData.filter(C=>E.has(C.providerId)),E.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Ww.apply(this,arguments)}function Np(m,d){return o_.apply(this,arguments)}function o_(){return(o_=(0,P.A)(function*(m,d,f=!1){const y=yield Wi(m,d._linkToIdToken(m.auth,yield m.getIdToken()),f);return to._forOperation(m,"link",y)})).apply(this,arguments)}function a_(m,d,f){return u_.apply(this,arguments)}function u_(){return(u_=(0,P.A)(function*(m,d,f){yield oa(d);const E=!1===m?"provider-already-linked":"no-such-provider";W(FD(d.providerData).has(f)===m,d.auth,E)})).apply(this,arguments)}function LD(m,d){return l_.apply(this,arguments)}function l_(){return(l_=(0,P.A)(function*(m,d,f=!1){const{auth:y}=m;if((0,Ne._isFirebaseServerApp)(y.app))return Promise.reject(ie(y));const E="reauthenticate";try{const C=yield Wi(m,qw(y,E,d,m),f);W(C.idToken,y,"internal-error");const V=yl(C.idToken);W(V,y,"internal-error");const{sub:Q}=V;return W(m.uid===Q,y,"user-mismatch"),to._forOperation(m,E,C)}catch(C){throw"auth/user-not-found"===C?.code&&We(y,"user-mismatch"),C}})).apply(this,arguments)}function $D(m,d){return c_.apply(this,arguments)}function c_(){return(c_=(0,P.A)(function*(m,d,f=!1){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const y="signIn",E=yield qw(m,y,d),C=yield to._fromIdTokenResponse(m,y,E);return f||(yield m._updateCurrentUser(C.user)),C})).apply(this,arguments)}function Pp(m,d){return d_.apply(this,arguments)}function d_(){return(d_=(0,P.A)(function*(m,d){return $D(Mn(m),d)})).apply(this,arguments)}function Kw(m,d){return qa.apply(this,arguments)}function qa(){return(qa=(0,P.A)(function*(m,d){const f=(0,ae.Ku)(m);return yield a_(!1,f,d.providerId),Np(f,d)})).apply(this,arguments)}function jD(m,d){return Qw.apply(this,arguments)}function Qw(){return(Qw=(0,P.A)(function*(m,d){return LD((0,ae.Ku)(m),d)})).apply(this,arguments)}function Ch(){return(Ch=(0,P.A)(function*(m,d){return Re(m,"POST","/v1/accounts:signInWithCustomToken",Ce(m,d))})).apply(this,arguments)}function h_(){return h_=(0,P.A)(function*(m,d){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const f=Mn(m),y=yield function Jw(m,d){return Ch.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),E=yield to._fromIdTokenResponse(f,"signIn",y);return yield f._updateCurrentUser(E.user),E}),h_.apply(this,arguments)}class Sh{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?kp._fromServerResponse(d,f):"totpInfo"in f?Yw._fromServerResponse(d,f):We(d,"internal-error")}}class kp extends Sh{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new kp(f)}}class Yw extends Sh{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new Yw(f)}}function f_(m,d,f){var y;W((null===(y=f.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),W(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(W(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(W(f.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Xw(m){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,P.A)(function*(m){const d=Mn(m);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function eE(){return(eE=(0,P.A)(function*(m,d,f){const y=Mn(m),E={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&f_(y,E,f),yield wh(y,E,"getOobCode",CD)})).apply(this,arguments)}function tE(){return tE=(0,P.A)(function*(m,d,f){yield xw((0,ae.Ku)(m),{oobCode:d,newPassword:f}).catch(function(){var y=(0,P.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&Xw(m),E});return function(E){return y.apply(this,arguments)}}())}),tE.apply(this,arguments)}function fe(){return fe=(0,P.A)(function*(m,d){yield function AD(m,d){return Ow.apply(this,arguments)}((0,ae.Ku)(m),{oobCode:d})}),fe.apply(this,arguments)}function El(m,d){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,P.A)(function*(m,d){const f=(0,ae.Ku)(m),y=yield xw(f,{oobCode:d}),E=y.requestType;switch(W(E,f,"internal-error"),E){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(y.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(y.mfaInfo,f,"internal-error");default:W(y.email,f,"internal-error")}let C=null;return y.mfaInfo&&(C=Sh._fromServerResponse(Mn(f),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:C},operation:E}})).apply(this,arguments)}function iE(){return(iE=(0,P.A)(function*(m,d){const{data:f}=yield El((0,ae.Ku)(m),d);return f.email})).apply(this,arguments)}function xp(){return(xp=(0,P.A)(function*(m,d,f){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const y=Mn(m),V=yield wh(y,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OD).catch(Ie=>{throw"auth/password-does-not-meet-requirements"===Ie.code&&Xw(m),Ie}),Q=yield to._fromIdTokenResponse(y,"signIn",V);return yield y._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function ku(){return(ku=(0,P.A)(function*(m,d,f){const y=Mn(m),E={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function C(V,Q){W(Q.handleCodeInApp,y,"argument-error"),Q&&f_(y,V,Q)})(E,f),yield wh(y,E,"getOobCode",NL)})).apply(this,arguments)}function Dh(){return(Dh=(0,P.A)(function*(m,d,f){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const y=(0,ae.Ku)(m),E=Sp.credentialWithLink(d,f||Ut());return W(E._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),Pp(y,E)})).apply(this,arguments)}function oE(){return(oE=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:createAuthUri",Ce(m,d))})).apply(this,arguments)}function aE(){return aE=(0,P.A)(function*(m,d){const y={identifier:d,continueUri:pn()?Ut():"http://localhost"},{signinMethods:E}=yield function zc(m,d){return oE.apply(this,arguments)}((0,ae.Ku)(m),y);return E||[]}),aE.apply(this,arguments)}function In(){return In=(0,P.A)(function*(m,d){const f=(0,ae.Ku)(m),E={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&f_(f.auth,E,d);const{email:C}=yield function DL(m,d){return Xy.apply(this,arguments)}(f.auth,E);C!==m.email&&(yield m.reload())}),In.apply(this,arguments)}function Lr(){return Lr=(0,P.A)(function*(m,d,f){const y=(0,ae.Ku)(m),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};f&&f_(y.auth,C,f);const{email:V}=yield function SD(m,d){return t_.apply(this,arguments)}(y.auth,C);V!==m.email&&(yield m.reload())}),Lr.apply(this,arguments)}function uE(){return(uE=(0,P.A)(function*(m,d){return Ze(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function $n(){return $n=(0,P.A)(function*(m,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const y=(0,ae.Ku)(m),C={idToken:yield y.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},V=yield Wi(y,function p_(m,d){return uE.apply(this,arguments)}(y.auth,C));y.displayName=V.displayName||null,y.photoURL=V.photoUrl||null;const Q=y.providerData.find(({providerId:Ie})=>"password"===Ie);Q&&(Q.displayName=y.displayName,Q.photoURL=y.photoURL),yield y._updateTokensIfNecessary(V)}),$n.apply(this,arguments)}function ds(m,d,f){return lE.apply(this,arguments)}function lE(){return lE=(0,P.A)(function*(m,d,f){const{auth:y}=m,C={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(C.email=d),f&&(C.password=f);const V=yield Wi(m,function ID(m,d){return Rw.apply(this,arguments)}(y,C));yield m._updateTokensIfNecessary(V,!0)}),lE.apply(this,arguments)}class Nh{constructor(d,f,y={}){this.isNewUser=d,this.providerId=f,this.profile=y}}class Ka extends Nh{constructor(d,f,y,E){super(d,f,y),this.username=E}}class ML extends Nh{constructor(d,f){super(d,"facebook.com",f)}}class FL extends Ka{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class VL extends Nh{constructor(d,f){super(d,"google.com",f)}}class LL extends Ka{constructor(d,f,y){super(d,"twitter.com",f,y)}}function GD(m){const{user:d,_tokenResponse:f}=m;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function zD(m){var d,f;if(!m)return null;const{providerId:y}=m,E=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},C=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const V=null===(f=null===(d=yl(m.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(V)return new Nh(C,"anonymous"!==V&&"custom"!==V?V:null)}if(!y)return null;switch(y){case"facebook.com":return new ML(C,E);case"github.com":return new FL(C,E);case"google.com":return new VL(C,E);case"twitter.com":return new LL(C,E,m.screenName||null);case"custom":case"anonymous":return new Nh(C,null);default:return new Nh(C,y,E)}}(f)}class ua{constructor(d,f,y){this.type=d,this.credential=f,this.user=y}static _fromIdtoken(d,f){return new ua("enroll",d,f)}static _fromMfaPendingCredential(d){return new ua("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,y;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ua._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(y=d.multiFactorSession)&&void 0!==y&&y.idToken)return ua._fromIdtoken(d.multiFactorSession.idToken)}return null}}class m_{constructor(d,f,y){this.session=d,this.hints=f,this.signInResolver=y}static _fromError(d,f){const y=Mn(d),E=f.customData._serverResponse,C=(E.mfaInfo||[]).map(Q=>Sh._fromServerResponse(y,Q));W(E.mfaPendingCredential,y,"internal-error");const V=ua._fromMfaPendingCredential(E.mfaPendingCredential);return new m_(V,C,function(){var Q=(0,P.A)(function*(Ie){const Ge=yield Ie._process(y,V);delete E.mfaInfo,delete E.mfaPendingCredential;const ot=Object.assign(Object.assign({},E),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(f.operationType){case"signIn":const Ke=yield to._fromIdTokenResponse(y,f.operationType,ot);return yield y._updateCurrentUser(Ke.user),Ke;case"reauthenticate":return W(f.user,y,"internal-error"),to._forOperation(f.user,f.operationType,ot);default:We(y,"internal-error")}});return function(Ie){return Q.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,P.A)(function*(){return f.signInResolver(d)})()}}class __{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(y=>Sh._fromServerResponse(d.auth,y)))})}static _fromUser(d){return new __(d)}getSession(){var d=this;return(0,P.A)(function*(){return ua._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var y=this;return(0,P.A)(function*(){const E=d,C=yield y.getSession(),V=yield Wi(y.user,E._process(y.user.auth,C,f));return yield y.user._updateTokensIfNecessary(V),y.user.reload()})()}unenroll(d){var f=this;return(0,P.A)(function*(){const y="string"==typeof d?d:d.uid,E=yield f.user.getIdToken();try{const C=yield Wi(f.user,function dE(m,d){return Ze(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Ce(m,d))}(f.user.auth,{idToken:E,mfaEnrollmentId:y}));f.enrolledFactors=f.enrolledFactors.filter(({uid:V})=>V!==y),yield f.user._updateTokensIfNecessary(C),yield f.user.reload()}catch(C){throw C}})()}}const Fe=new WeakMap,Gc="__sak";class b_{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const T_=(()=>{class m extends b_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,y)=>this.onStorageEvent(f,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function w_(){const m=(0,ae.ZQ)();return vl(m)||Ua(m)}()&&function jt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=je(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const y of Object.keys(this.listeners)){const E=this.storage.getItem(y),C=this.localCache[y];E!==C&&f(y,C,E)}}onStorageEvent(f,y=!1){if(!f.key)return void this.forAllChangedKeys((Q,Ie,Ge)=>{this.notifyListeners(Q,Ge)});const E=f.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(E);if(f.newValue!==Q)null!==f.newValue?this.storage.setItem(E,f.newValue):this.storage.removeItem(E);else if(this.localCache[E]===f.newValue&&!y)return}const C=()=>{const Q=this.storage.getItem(E);!y&&this.localCache[E]===Q||this.notifyListeners(E,Q)},V=this.storage.getItem(E);!function De(){return(0,ae.lT)()&&10===document.documentMode}()||V===f.newValue||f.newValue===f.oldValue?C():setTimeout(C,10)}notifyListeners(f,y){this.localCache[f]=y;const E=this.listeners[f];if(E)for(const C of Array.from(E))C(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,y,E)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:y,newValue:E}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,y){var E=()=>super._set,C=this;return(0,P.A)(function*(){yield E().call(C,f,y),C.localCache[f]=JSON.stringify(y)})()}_get(f){var y=()=>super._get,E=this;return(0,P.A)(function*(){const C=yield y().call(E,f);return E.localCache[f]=JSON.stringify(C),C})()}_remove(f){var y=()=>super._remove,E=this;return(0,P.A)(function*(){yield y().call(E,f),delete E.localCache[f]})()}}return m.type="LOCAL",m})(),Tl=(()=>{class m extends b_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,y){}_removeListener(f,y){}}return m.type="SESSION",m})();let Ph=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const y=this.receivers.find(C=>C.isListeningto(f));if(y)return y;const E=new m(f);return this.receivers.push(E),E}isListeningto(f){return this.eventTarget===f}handleEvent(f){var y=this;return(0,P.A)(function*(){const E=f,{eventId:C,eventType:V,data:Q}=E.data,Ie=y.handlersMap[V];if(!Ie?.size)return;E.ports[0].postMessage({status:"ack",eventId:C,eventType:V});const Ge=Array.from(Ie).map(function(){var Ke=(0,P.A)(function*(cr){return cr(E.origin,Q)});return function(cr){return Ke.apply(this,arguments)}}()),ot=yield function I_(m){return Promise.all(m.map(function(){var d=(0,P.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(y){return{fulfilled:!1,reason:y}}});return function(f){return d.apply(this,arguments)}}()))}(Ge);E.ports[0].postMessage({status:"done",eventId:C,eventType:V,response:ot})})()}_subscribe(f,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(y)}_unsubscribe(f,y){this.handlersMap[f]&&y&&this.handlersMap[f].delete(y),(!y||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Il(m="",d=10){let f="";for(let y=0;y<d;y++)f+=Math.floor(10*Math.random());return m+f}class A_{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,y=50){var E=this;return(0,P.A)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let V,Q;return new Promise((Ie,Ge)=>{const ot=Il("",20);C.port1.start();const Ke=setTimeout(()=>{Ge(new Error("unsupported_event"))},y);Q={messageChannel:C,onMessage(cr){const oo=cr;if(oo.data.eventId===ot)switch(oo.data.status){case"ack":clearTimeout(Ke),V=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(V),Ie(oo.data.response);break;default:clearTimeout(Ke),clearTimeout(V),Ge(new Error("invalid_response"))}}},E.handlers.add(Q),C.port1.addEventListener("message",Q.onMessage),E.target.postMessage({eventType:d,eventId:ot,data:f},[C.port2])}).finally(()=>{Q&&E.removeMessageHandler(Q)})})()}}function $r(){return window}function Al(){return typeof $r().WorkerGlobalScope<"u"&&"function"==typeof $r().importScripts}function Lt(){return(Lt=(0,P.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fE="firebaseLocalStorageDb",C_="firebaseLocalStorage",pE="fbase_key";class Cl{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Jt(m,d){return m.transaction([C_],d?"readwrite":"readonly").objectStore(C_)}function Mp(){const m=indexedDB.open(fE,1);return new Promise((d,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(C_,{keyPath:pE})}catch(E){f(E)}}),m.addEventListener("success",(0,P.A)(function*(){const y=m.result;y.objectStoreNames.contains(C_)?d(y):(y.close(),yield function S_(){const m=indexedDB.deleteDatabase(fE);return new Cl(m).toPromise()}(),d(yield Mp()))}))})}function Ji(m,d,f){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,P.A)(function*(m,d,f){const y=Jt(m,!0).put({[pE]:d,value:f});return new Cl(y).toPromise()})).apply(this,arguments)}function mE(){return(mE=(0,P.A)(function*(m,d){const f=Jt(m,!1).get(d),y=yield new Cl(f).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function qc(m,d){const f=Jt(m,!0).delete(d);return new Cl(f).toPromise()}const Wc=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,P.A)(function*(){return f.db||(f.db=yield Mp()),f.db})()}_withRetries(f){var y=this;return(0,P.A)(function*(){let E=0;for(;;)try{const C=yield y._openDb();return yield f(C)}catch(C){if(E++>3)throw C;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,P.A)(function*(){return Al()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,P.A)(function*(){f.receiver=Ph._getInstance(function BL(){return Al()?self:null}()),f.receiver._subscribe("keyChanged",function(){var y=(0,P.A)(function*(E,C){return{keyProcessed:(yield f._poll()).includes(C.key)}});return function(E,C){return y.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var y=(0,P.A)(function*(E,C){return["keyChanged"]});return function(E,C){return y.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,P.A)(function*(){var y,E;if(f.activeServiceWorker=yield function hE(){return Lt.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new A_(f.activeServiceWorker);const C=yield f.sender._send("ping",{},800);C&&null!==(y=C[0])&&void 0!==y&&y.fulfilled&&null!==(E=C[0])&&void 0!==E&&E.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var y=this;return(0,P.A)(function*(){if(y.sender&&y.activeServiceWorker&&function An(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:f},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,P.A)(function*(){try{if(!indexedDB)return!1;const f=yield Mp();return yield Ji(f,Gc,"1"),yield qc(f,Gc),!0}catch{}return!1})()}_withPendingWrite(f){var y=this;return(0,P.A)(function*(){y.pendingWrites++;try{yield f()}finally{y.pendingWrites--}})()}_set(f,y){var E=this;return(0,P.A)(function*(){return E._withPendingWrite((0,P.A)(function*(){return yield E._withRetries(C=>Ji(C,f,y)),E.localCache[f]=y,E.notifyServiceWorker(f)}))})()}_get(f){var y=this;return(0,P.A)(function*(){const E=yield y._withRetries(C=>function UL(m,d){return mE.apply(this,arguments)}(C,f));return y.localCache[f]=E,E})()}_remove(f){var y=this;return(0,P.A)(function*(){return y._withPendingWrite((0,P.A)(function*(){return yield y._withRetries(E=>qc(E,f)),delete y.localCache[f],y.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,P.A)(function*(){const y=yield f._withRetries(V=>{const Q=Jt(V,!1).getAll();return new Cl(Q).toPromise()});if(!y)return[];if(0!==f.pendingWrites)return[];const E=[],C=new Set;if(0!==y.length)for(const{fbase_key:V,value:Q}of y)C.add(V),JSON.stringify(f.localCache[V])!==JSON.stringify(Q)&&(f.notifyListeners(V,Q),E.push(V));for(const V of Object.keys(f.localCache))f.localCache[V]&&!C.has(V)&&(f.notifyListeners(V,null),E.push(V));return E})()}notifyListeners(f,y){this.localCache[f]=y;const E=this.listeners[f];if(E)for(const C of Array.from(E))C(y)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,P.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),Lp=1e12;class Se{constructor(d){this.auth=d,this.counter=Lp,this._widgets=new Map}render(d,f){const y=this.counter;return this._widgets.set(y,new yE(d,this.auth.name,f||{})),this.counter++,y}reset(d){var f;const y=d||Lp;null===(f=this._widgets.get(y))||void 0===f||f.delete(),this._widgets.delete(y)}getResponse(d){var f;return(null===(f=this._widgets.get(d||Lp))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,P.A)(function*(){var y;return null===(y=f._widgets.get(d||Lp))||void 0===y||y.execute(),""})()}}class yE{constructor(d,f,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const E="string"==typeof d?document.getElementById(d):d;W(E,"argument-error",{appName:f}),this.container=E,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Te(m){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qc=At("rcb"),N_=new ue(3e4,6e4);class kh{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=$r().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return W(function YD(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&ar($r().grecaptcha)?Promise.resolve($r().grecaptcha):new Promise((y,E)=>{const C=$r().setTimeout(()=>{E(ft(d,"network-request-failed"))},N_.get());$r()[Qc]=()=>{$r().clearTimeout(C),delete $r()[Qc];const Q=$r().grecaptcha;if(!Q||!ar(Q))return void E(ft(d,"internal-error"));const Ie=Q.render;Q.render=(Ge,ot)=>{const Ke=Ie(Ge,ot);return this.counter++,Ke},this.hostLanguage=f,y(Q)},bh(`${function wD(){return Lc.recaptchaV2Script}()}?${(0,ae.Am)({onload:Qc,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(C),E(ft(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=$r().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class XD{load(d){return(0,P.A)(function*(){return new Se(d)})()}clearedOneInstance(){}}const _E="recaptcha",ZD={theme:"light",type:"image"};class xh{constructor(d,f,y=Object.assign({},ZD)){this.parameters=y,this.type=_E,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(d),this.isInvisible="invisible"===this.parameters.size,W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const E="string"==typeof f?document.getElementById(f):f;W(E,this.auth,"argument-error"),this.container=E,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new XD:new kh,this.validateStartingState()}verify(){var d=this;return(0,P.A)(function*(){d.assertNotDestroyed();const f=yield d.render(),y=d.getAssertedRecaptcha();return y.getResponse(f)||new Promise(C=>{const V=Q=>{Q&&(d.tokenChangeListeners.delete(V),C(Q))};d.tokenChangeListeners.add(V),d.isInvisible&&y.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(y=>y(f)),"function"==typeof d)d(f);else if("string"==typeof d){const y=$r()[d];"function"==typeof y&&y(f)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,P.A)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const y=document.createElement("div");f.appendChild(y),f=y}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,P.A)(function*(){W(pn()&&!Al(),d.auth,"internal-error"),yield function e1(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function na(m){return ra.apply(this,arguments)}(d.auth);W(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jc{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=Pu._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function Ja(){return(Ja=(0,P.A)(function*(m,d,f){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const y=Mn(m),E=yield Sl(y,d,(0,ae.Ku)(f));return new Jc(E,C=>Pp(y,C))})).apply(this,arguments)}function Mi(){return(Mi=(0,P.A)(function*(m,d,f){const y=(0,ae.Ku)(m);yield a_(!1,y,"phone");const E=yield Sl(y.auth,d,(0,ae.Ku)(f));return new Jc(E,C=>Kw(y,C))})).apply(this,arguments)}function $p(){return($p=(0,P.A)(function*(m,d,f){const y=(0,ae.Ku)(m);if((0,Ne._isFirebaseServerApp)(y.auth.app))return Promise.reject(ie(y.auth));const E=yield Sl(y.auth,d,(0,ae.Ku)(f));return new Jc(E,C=>jD(y,C))})).apply(this,arguments)}function Sl(m,d,f){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,P.A)(function*(m,d,f){var y;const E=yield f.verify();try{let C;if(W("string"==typeof E,m,"argument-error"),W(f.type===_E,m,"argument-error"),C="string"==typeof d?{phoneNumber:d}:d,"session"in C){const V=C.session;if("phoneNumber"in C)return W("enroll"===V.type,m,"internal-error"),(yield function qD(m,d){return Ze(m,"POST","/v2/accounts/mfaEnrollment:start",Ce(m,d))}(m,{idToken:V.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:E}})).phoneSessionInfo.sessionInfo;{W("signin"===V.type,m,"internal-error");const Q=(null===(y=C.multiFactorHint)||void 0===y?void 0:y.uid)||C.multiFactorUid;return W(Q,m,"missing-multi-factor-info"),(yield function QD(m,d){return Ze(m,"POST","/v2/accounts/mfaSignIn:start",Ce(m,d))}(m,{mfaPendingCredential:V.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:E}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:V}=yield function ND(m,d){return Vw.apply(this,arguments)}(m,{phoneNumber:C.phoneNumber,recaptchaToken:E});return V}}finally{f._reset()}}),Xc.apply(this,arguments)}function vE(){return(vE=(0,P.A)(function*(m,d){const f=(0,ae.Ku)(m);if((0,Ne._isFirebaseServerApp)(f.auth.app))return Promise.reject(ie(f.auth));yield Np(f,d)})).apply(this,arguments)}let Zc=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=Mn(f)}verifyPhoneNumber(f,y){return Sl(this.auth,f,(0,ae.Ku)(y))}static credential(f,y){return Pu._fromVerification(f,y)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:y,temporaryProof:E}=f;return y&&E?Pu._fromTokenResponse(y,E):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function ed(m,d){return d?dn(d):(W(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Yi extends Nu{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Ha(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Ha(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Ha(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function k_(m){return $D(m.auth,new Yi(m),m.bypassAuthState)}function td(m){const{auth:d,user:f}=m;return W(f,d,"internal-error"),LD(f,new Yi(m),m.bypassAuthState)}function zL(m){return jp.apply(this,arguments)}function jp(){return(jp=(0,P.A)(function*(m){const{auth:d,user:f}=m;return W(f,d,"internal-error"),Np(f,new Yi(m),m.bypassAuthState)})).apply(this,arguments)}class So{constructor(d,f,y,E,C=!1){this.auth=d,this.resolver=y,this.user=E,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,P.A)(function*(y,E){d.pendingPromise={resolve:y,reject:E};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(C){d.reject(C)}});return function(y,E){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,P.A)(function*(){const{urlResponse:y,sessionId:E,postBody:C,tenantId:V,error:Q,type:Ie}=d;if(Q)return void f.reject(Q);const Ge={auth:f.auth,requestUri:y,sessionId:E,tenantId:V||void 0,postBody:C||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ie)(Ge))}catch(ot){f.reject(ot)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return k_;case"linkViaPopup":case"linkViaRedirect":return zL;case"reauthViaPopup":case"reauthViaRedirect":return td;default:We(this.auth,"internal-error")}}resolve(d){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _n=new ue(2e3,1e4);function Bp(){return(Bp=(0,P.A)(function*(m,d,f){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ft(m,"operation-not-supported-in-this-environment"));const y=Mn(m);M(m,d,Co);const E=ed(y,f);return new la(y,"signInViaPopup",d,E).executeNotNull()})).apply(this,arguments)}function nd(){return(nd=(0,P.A)(function*(m,d,f){const y=(0,ae.Ku)(m);if((0,Ne._isFirebaseServerApp)(y.auth.app))return Promise.reject(ft(y.auth,"operation-not-supported-in-this-environment"));M(y.auth,d,Co);const E=ed(y.auth,f);return new la(y.auth,"reauthViaPopup",d,E,y).executeNotNull()})).apply(this,arguments)}function Os(){return(Os=(0,P.A)(function*(m,d,f){const y=(0,ae.Ku)(m);M(y.auth,d,Co);const E=ed(y.auth,f);return new la(y.auth,"linkViaPopup",d,E,y).executeNotNull()})).apply(this,arguments)}let la=(()=>{class m extends So{constructor(f,y,E,C,V){super(f,y,C,V),this.provider=E,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,P.A)(function*(){const y=yield f.execute();return W(y,f.auth,"internal-error"),y})()}onExecution(){var f=this;return(0,P.A)(function*(){Et(1===f.filter.length,"Popup operations only handle one event");const y=Il();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],y),f.authWindow.associatedEvent=y,f.resolver._originValidation(f.auth).catch(E=>{f.reject(E)}),f.resolver._isIframeWebStorageSupported(f.auth,E=>{E||f.reject(ft(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var y,E;this.pollId=null!==(E=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==E&&E.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,_n.get())};f()}}return m.currentPopupAction=null,m})();const r1="pendingRedirect",Dl=new Map;class bE extends So{constructor(d,f,y=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,y),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,P.A)(function*(){let y=Dl.get(f.auth._key());if(!y){try{const C=(yield function wE(m,d){return Nl.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;y=()=>Promise.resolve(C)}catch(E){y=()=>Promise.reject(E)}Dl.set(f.auth._key(),y)}return f.bypassAuthState||Dl.set(f.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,y=this;return(0,P.A)(function*(){if("signInViaRedirect"===d.type)return f().call(y,d);if("unknown"!==d.type){if(d.eventId){const E=yield y.auth._redirectUserForId(d.eventId);if(E)return y.user=E,f().call(y,d);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,P.A)(function*(){})()}cleanUp(){}}function Nl(){return(Nl=(0,P.A)(function*(m,d){const f=TE(d),y=EE(m);if(!(yield y._isAvailable()))return!1;const E="true"===(yield y._get(f));return yield y._remove(f),E})).apply(this,arguments)}function Hp(m,d){return zp.apply(this,arguments)}function zp(){return(zp=(0,P.A)(function*(m,d){return EE(m)._set(TE(d),"true")})).apply(this,arguments)}function Rh(m,d){Dl.set(m._key(),d)}function EE(m){return dn(m._redirectPersistence)}function TE(m){return _r(r1,m.config.apiKey,m.name)}function No(m,d,f){return function s1(m,d,f){return Gp.apply(this,arguments)}(m,d,f)}function Gp(){return(Gp=(0,P.A)(function*(m,d,f){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const y=Mn(m);M(m,d,Co),yield y._initializationPromise;const E=ed(y,f);return yield Hp(E,y),E._openRedirect(y,d,"signInViaRedirect")})).apply(this,arguments)}function o1(m,d,f){return function a1(m,d,f){return R_.apply(this,arguments)}(m,d,f)}function R_(){return(R_=(0,P.A)(function*(m,d,f){const y=(0,ae.Ku)(m);if(M(y.auth,d,Co),(0,Ne._isFirebaseServerApp)(y.auth.app))return Promise.reject(ie(y.auth));yield y.auth._initializationPromise;const E=ed(y.auth,f);yield Hp(E,y.auth);const C=yield AE(y);return E._openRedirect(y.auth,d,"reauthViaRedirect",C)})).apply(this,arguments)}function u1(m,d,f){return function IE(m,d,f){return O_.apply(this,arguments)}(m,d,f)}function O_(){return(O_=(0,P.A)(function*(m,d,f){const y=(0,ae.Ku)(m);M(y.auth,d,Co),yield y.auth._initializationPromise;const E=ed(y.auth,f);yield a_(!1,y,d.providerId),yield Hp(E,y.auth);const C=yield AE(y);return E._openRedirect(y.auth,d,"linkViaRedirect",C)})).apply(this,arguments)}function M_(){return(M_=(0,P.A)(function*(m,d){return yield Mn(m)._initializationPromise,Ya(m,d,!1)})).apply(this,arguments)}function Ya(m,d){return F_.apply(this,arguments)}function F_(){return(F_=(0,P.A)(function*(m,d,f=!1){if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(ie(m));const y=Mn(m),E=ed(y,d),V=yield new bE(y,E,f).execute();return V&&!f&&(delete V.user._redirectEventId,yield y._persistUserIfCurrent(V.user),yield y._setRedirectUser(null,d)),V})).apply(this,arguments)}function AE(m){return ri.apply(this,arguments)}function ri(){return(ri=(0,P.A)(function*(m){const d=Il(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class Mt{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(d,y)&&(f=!0,this.sendToConsumer(d,y),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function ii(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xt(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var y;if(d.error&&!Xt(d)){const E=(null===(y=d.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";f.onError(ft(this.auth,E))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const y=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&y}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xi(d))}saveEventToCache(d){this.cachedEventUids.add(Xi(d)),this.lastProcessedEventTime=Date.now()}}function Xi(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function Xt({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function pi(m){return ca.apply(this,arguments)}function ca(){return(ca=(0,P.A)(function*(m,d={}){return Ze(m,"GET","/v1/projects",d)})).apply(this,arguments)}const Fi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SE=/^https?/;function rd(){return(rd=(0,P.A)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield pi(m);for(const f of d)try{if(c1(f))return}catch{}We(m,"unauthorized-domain")})).apply(this,arguments)}function c1(m){const d=Ut(),{protocol:f,hostname:y}=new URL(d);if(m.startsWith("chrome-extension://")){const V=new URL(m);return""===V.hostname&&""===y?"chrome-extension:"===f&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&V.hostname===y}if(!SE.test(f))return!1;if(Fi.test(m))return y===m;const E=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+E+"|"+E+")$","i").test(y)}const d1=new ue(3e4,6e4);function Pl(){const m=$r().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let id=null;const qp=new ue(5e3,15e3),GL="__/auth/iframe",V_="emulator/auth/iframe",f1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PE(m){const d=m.config;W(d.authDomain,m,"auth-domain-config-required");const f=d.emulator?ce(d,V_):`https://${m.config.authDomain}/${GL}`,y={apiKey:d.apiKey,appName:m.name,v:Ne.SDK_VERSION},E=L_.get(m.config.apiHost);E&&(y.eid=E);const C=m._getFrameworks();return C.length&&(y.fw=C.join(",")),`${f}?${(0,ae.Am)(y).slice(1)}`}function Xa(){return Xa=(0,P.A)(function*(m){const d=yield function NE(m){return id=id||function h1(m){return new Promise((d,f)=>{var y,E,C;function V(){Pl(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Pl(),f(ft(m,"network-request-failed"))},timeout:d1.get()})}if(null!==(E=null===(y=$r().gapi)||void 0===y?void 0:y.iframes)&&void 0!==E&&E.Iframe)d(gapi.iframes.getContext());else{if(null===(C=$r().gapi)||void 0===C||!C.load){const Q=At("iframefcb");return $r()[Q]=()=>{gapi.load?V():f(ft(m,"network-request-failed"))},bh(`${function wL(){return Lc.gapiScript}()}?onload=${Q}`).catch(Ie=>f(Ie))}V()}}).catch(d=>{throw id=null,d})}(m),id}(m),f=$r().gapi;return W(f,m,"internal-error"),d.open({where:document.body,url:PE(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f1,dontclear:!0},y=>new Promise(function(){var E=(0,P.A)(function*(C,V){yield y.restyle({setHideOnLeave:!1});const Q=ft(m,"network-request-failed"),Ie=$r().setTimeout(()=>{V(Q)},qp.get());function Ge(){$r().clearTimeout(Ie),C(y)}y.ping(Ge).then(Ge,()=>{V(Q)})});return function(C,V){return E.apply(this,arguments)}}()))}),Xa.apply(this,arguments)}const p1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Oh{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const B_="__/auth/handler",g1="emulator/auth/handler",y1=encodeURIComponent("fac");function Kp(m,d,f,y,E,C){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,P.A)(function*(m,d,f,y,E,C){W(m.config.authDomain,m,"auth-domain-config-required"),W(m.config.apiKey,m,"invalid-api-key");const V={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:y,v:Ne.SDK_VERSION,eventId:E};if(d instanceof Co){d.setDefaultLanguage(m.languageCode),V.providerId=d.providerId||"",(0,ae.Im)(d.getCustomParameters())||(V.customParameters=JSON.stringify(d.getCustomParameters()));for(const[ot,Ke]of Object.entries(C||{}))V[ot]=Ke}if(d instanceof Ih){const ot=d.getScopes().filter(Ke=>""!==Ke);ot.length>0&&(V.scopes=ot.join(","))}m.tenantId&&(V.tid=m.tenantId);const Q=V;for(const ot of Object.keys(Q))void 0===Q[ot]&&delete Q[ot];const Ie=yield m._getAppCheckToken(),Ge=Ie?`#${y1}=${encodeURIComponent(Ie)}`:"";return`${function _1({config:m}){return m.emulator?ce(m,g1):`https://${m.authDomain}/${B_}`}(m)}?${(0,ae.Am)(Q).slice(1)}${Ge}`})).apply(this,arguments)}const U_="webStorageSupport",Qp=class v1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tl,this._completeRedirectFn=Ya,this._overrideRedirectResult=Rh}_openPopup(d,f,y,E){var C=this;return(0,P.A)(function*(){var V;Et(null===(V=C.eventManagers[d._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const Q=yield Kp(d,f,y,Ut(),E);return function Zi(m,d,f,y=500,E=600){const C=Math.max((window.screen.availHeight-E)/2,0).toString(),V=Math.max((window.screen.availWidth-y)/2,0).toString();let Q="";const Ie=Object.assign(Object.assign({},p1),{width:y.toString(),height:E.toString(),top:C,left:V}),Ge=(0,ae.ZQ)().toLowerCase();f&&(Q=Vc(Ge)?"_blank":f),Ao(Ge)&&(d=d||"http://localhost",Ie.scrollbars="yes");const ot=Object.entries(Ie).reduce((cr,[oo,Hh])=>`${cr}${oo}=${Hh},`,"");if(function re(m=(0,ae.ZQ)()){var d;return Ua(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Ge)&&"_self"!==Q)return function sd(m,d){const f=document.createElement("a");f.href=m,f.target=d;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(y)}(d||"",Q),new Oh(null);const Ke=window.open(d||"",Q,ot);W(Ke,m,"popup-blocked");try{Ke.focus()}catch{}return new Oh(Ke)}(d,Q,Il())})()}_openRedirect(d,f,y,E){var C=this;return(0,P.A)(function*(){return yield C._originValidation(d),function Qa(m){$r().location.href=m}(yield Kp(d,f,y,Ut(),E)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:E,promise:C}=this.eventManagers[f];return E?Promise.resolve(E):(Et(C,"If manager is not set, promise should be"),C)}const y=this.initAndGetManager(d);return this.eventManagers[f]={promise:y},y.catch(()=>{delete this.eventManagers[f]}),y}initAndGetManager(d){var f=this;return(0,P.A)(function*(){const y=yield function kE(m){return Xa.apply(this,arguments)}(d),E=new Mt(d);return y.register("authEvent",C=>(W(C?.authEvent,d,"invalid-auth-event"),{status:E.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:E},f.iframes[d._key()]=y,E})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(U_,{type:U_},E=>{var C;const V=null===(C=E?.[0])||void 0===C?void 0:C[U_];void 0!==V&&f(!!V),We(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function DE(m){return rd.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return je()||vl()||Ua()}};class no{constructor(d){this.factorId=d}_process(d,f,y){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,y);case"signin":return this._finalizeSignIn(d,f.credential);default:return bt("unexpected MultiFactorSessionType")}}}class Jp extends no{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Jp(d)}_finalizeEnroll(d,f,y){return function Op(m,d){return Ze(m,"POST","/v2/accounts/mfaEnrollment:finalize",Ce(m,d))}(d,{idToken:f,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function gE(m,d){return Ze(m,"POST","/v2/accounts/mfaSignIn:finalize",Ce(m,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yp=(()=>{class m{constructor(){}static assertion(f){return Jp._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var z_="@firebase/auth";class Fh{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,P.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(y=>{d(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Pn(){return window}(0,ae.XA)("authIdTokenMaxAge"),function Aw(m){Lc=m}({loadJS:m=>new Promise((d,f)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=d,y.onerror=E=>{const C=ft("internal-error");C.customData=E,f(C)},y.type="text/javascript",y.charset="UTF-8",function Xp(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function w1(m){(0,Ne._registerComponent)(new lt.uA("auth",(d,{options:f})=>{const y=d.getProvider("app").getImmediate(),E=d.getProvider("heartbeat"),C=d.getProvider("app-check-internal"),{apiKey:V,authDomain:Q}=y.options;W(V&&!V.includes(":"),"invalid-api-key",{appName:y.name});const Ie={apiKey:V,authDomain:Q,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gt(m)},Ge=new Hy(y,E,C,Ie);return function IL(m,d){const f=d?.persistence||[],y=(Array.isArray(f)?f:[f]).map(dn);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(y,d?.popupRedirectResolver)}(Ge,f),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,y)=>{d.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new lt.uA("auth-internal",d=>{const f=Mn(d.getProvider("auth").getImmediate());return new Fh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(z_,"1.7.5",function b1(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,Ne.registerVersion)(z_,"1.7.5","esm2017")}("Browser");function Dr(){return Dr=(0,P.A)(function*(m,d,f){var y;const{BuildInfo:E}=Pn();Et(d.sessionId,"AuthEvent did not contain a session ID");const C=yield function da(m){return kt.apply(this,arguments)}(d.sessionId),V={};return Ua()?V.ibi=E.packageName:bl()?V.apn=E.packageName:We(m,"operation-not-supported-in-this-environment"),E.displayName&&(V.appDisplayName=E.displayName),V.sessionId=C,Kp(m,f,d.type,void 0,null!==(y=d.eventId)&&void 0!==y?y:void 0,V)}),Dr.apply(this,arguments)}function si(){return(si=(0,P.A)(function*(m){const{BuildInfo:d}=Pn(),f={};Ua()?f.iosBundleId=d.packageName:bl()?f.androidPackageName=d.packageName:We(m,"operation-not-supported-in-this-environment"),yield pi(m,f)})).apply(this,arguments)}function jn(){return(jn=(0,P.A)(function*(m,d,f){const{cordova:y}=Pn();let E=()=>{};try{yield new Promise((C,V)=>{let Q=null;function Ie(){var Ke;C();const cr=null===(Ke=y.plugins.browsertab)||void 0===Ke?void 0:Ke.close;"function"==typeof cr&&cr(),"function"==typeof f?.close&&f.close()}function Ge(){Q||(Q=window.setTimeout(()=>{V(ft(m,"redirect-cancelled-by-user"))},2e3))}function ot(){"visible"===document?.visibilityState&&Ge()}d.addPassiveListener(Ie),document.addEventListener("resume",Ge,!1),bl()&&document.addEventListener("visibilitychange",ot,!1),E=()=>{d.removePassiveListener(Ie),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",ot,!1),Q&&window.clearTimeout(Q)}})}finally{E()}})).apply(this,arguments)}function kt(){return(kt=(0,P.A)(function*(m){const d=function Vh(m){if(Et(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),f=new Uint8Array(d);for(let y=0;y<m.length;y++)f[y]=m.charCodeAt(y);return f}(m),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(E=>E.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ad extends Mt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,P.A)(function*(){yield d.initPromise})()}}function xl(m){return ko.apply(this,arguments)}function ko(){return(ko=(0,P.A)(function*(m){const d=yield ha()._get(ld(m));return d&&(yield ha()._remove(ld(m))),d})).apply(this,arguments)}function VE(){const m=[];for(let f=0;f<20;f++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function ha(){return dn(T_)}function ld(m){return _r("authEvent",m.config.apiKey,m.name)}function cd(m){if(!m?.includes("?"))return{};const[d,...f]=m.split("?");return(0,ae.I9)(f.join("?"))}const Zp=class fa{constructor(){this._redirectPersistence=Tl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ya,this._overrideRedirectResult=Rh}_initialize(d){var f=this;return(0,P.A)(function*(){const y=d._key();let E=f.eventManagers.get(y);return E||(E=new ad(d),f.eventManagers.set(y,E),f.attachCallbackListeners(d,E)),E})()}_openPopup(d){We(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,y,E){var C=this;return(0,P.A)(function*(){!function Yr(m){var d,f,y,E,C,V,Q,Ie,Ge,ot;const Ke=Pn();W("function"==typeof(null===(d=Ke?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),W(typeof(null===(f=Ke?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),W("function"==typeof(null===(C=null===(E=null===(y=Ke?.cordova)||void 0===y?void 0:y.plugins)||void 0===E?void 0:E.browsertab)||void 0===C?void 0:C.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(Ie=null===(Q=null===(V=Ke?.cordova)||void 0===V?void 0:V.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===Ie?void 0:Ie.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(ot=null===(Ge=Ke?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===ot?void 0:ot.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const V=yield C._initialize(d);yield V.initialized(),V.resetRedirect(),function i1(){Dl.clear()}(),yield C._originValidation(d);const Q=function lr(m,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:VE(),postBody:null,tenantId:m.tenantId,error:ft(m,"no-auth-event")}}(d,y,E);yield function kl(m,d){return ha()._set(ld(m),d)}(d,Q);const Ie=yield function Ct(m,d,f){return Dr.apply(this,arguments)}(d,Q,f),Ge=yield function es(m){const{cordova:d}=Pn();return new Promise(f=>{d.plugins.browsertab.isAvailable(y=>{let E=null;y?d.plugins.browsertab.openUrl(m):E=d.InAppBrowser.open(m,function pe(m=(0,ae.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(E)})})}(Ie);return function od(m,d,f){return jn.apply(this,arguments)}(d,V,Ge)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Po(m){return si.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:y,handleOpenURL:E,BuildInfo:C}=Pn(),V=setTimeout((0,P.A)(function*(){yield xl(d),f.onEvent(Rl())}),500),Q=function(){var ot=(0,P.A)(function*(Ke){clearTimeout(V);const cr=yield xl(d);let oo=null;cr&&Ke?.url&&(oo=function ud(m,d){var f,y;const E=function yt(m){const d=cd(m),f=d.link?decodeURIComponent(d.link):void 0,y=cd(f).link,E=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return cd(E).link||E||y||f||m}(d);if(E.includes("/__/auth/callback")){const C=cd(E),V=C.firebaseError?function ro(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(C.firebaseError)):null,Q=null===(y=null===(f=V?.code)||void 0===f?void 0:f.split("auth/"))||void 0===y?void 0:y[1],Ie=Q?ft(Q):null;return Ie?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Ie,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:E,postBody:null}}return null}(cr,Ke.url)),f.onEvent(oo||Rl())});return function(cr){return ot.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,Q);const Ie=E,Ge=`${C.packageName.toLowerCase()}://`;Pn().handleOpenURL=function(){var ot=(0,P.A)(function*(Ke){if(Ke.toLowerCase().startsWith(Ge)&&Q({url:Ke}),"function"==typeof Ie)try{Ie(Ke)}catch(cr){console.error(cr)}});return function(Ke){return ot.apply(this,arguments)}}()}};function Rl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ft("no-auth-event")}}function Ol(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function $h(m=(0,ae.ZQ)()){return!("file:"!==Ol()&&"ionic:"!==Ol()&&"capacitor:"!==Ol()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function tm(){try{const m=self.localStorage,d=Il();if(m)return m.setItem(d,"1"),m.removeItem(d),!function C1(m=(0,ae.ZQ)()){return function jh(){return(0,ae.lT)()&&11===document?.documentMode}()||function A1(m=(0,ae.ZQ)()){return/Edge\/\d+/.test(m)}(m)}()||(0,ae.zW)()}catch{return nm()&&(0,ae.zW)()}return!1}function nm(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function G_(){return(function Ml(){return"http:"===Ol()||"https:"===Ol()}()||(0,ae.sr)()||$h())&&!function xo(){return(0,ae.lV)()||(0,ae.Ll)()}()&&tm()&&!nm()}function rm(){return $h()&&typeof document<"u"}function LE(){return(LE=(0,P.A)(function*(){return!!rm()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const so={LOCAL:"local",NONE:"none",SESSION:"session"},im=W,S1="persistence";function $E(m){return jE.apply(this,arguments)}function jE(){return(jE=(0,P.A)(function*(m){yield m._initializationPromise;const d=D1(),f=_r(S1,m.config.apiKey,m.name);d&&d.setItem(f,m._getPersistence())})).apply(this,arguments)}function D1(){var m;try{return(null===(m=function WL(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const JL=W;class Za{constructor(){this.browserResolver=dn(Qp),this.cordovaResolver=dn(Zp),this.underlyingResolver=null,this._redirectPersistence=Tl,this._completeRedirectFn=Ya,this._overrideRedirectResult=Rh}_initialize(d){var f=this;return(0,P.A)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,y,E){var C=this;return(0,P.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openPopup(d,f,y,E)})()}_openRedirect(d,f,y,E){var C=this;return(0,P.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openRedirect(d,f,y,E)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return rm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return JL(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,P.A)(function*(){if(d.underlyingResolver)return;const f=yield function qL(){return LE.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function q_(m){return m.unwrap()}function XL(m){return N1(m)}function N1(m){const{_tokenResponse:d}=m instanceof ae.g?m.customData:m;if(!d)return null;if(!(m instanceof ae.g)&&"temporaryProof"in d&&"phoneNumber"in d)return Zc.credentialFromResult(m);const f=d.providerId;if(!f||f===K.PASSWORD)return null;let y;switch(f){case K.GOOGLE:y=Uw;break;case K.FACEBOOK:y=Bw;break;case K.GITHUB:y=RD;break;case K.TWITTER:y=zw;break;default:const{oauthIdToken:E,oauthAccessToken:C,oauthTokenSecret:V,pendingToken:Q,nonce:Ie}=d;return C||V||E||Q?Q?f.startsWith("saml.")?wl._create(f,Q):za._fromParams({providerId:f,signInMethod:f,pendingToken:Q,idToken:E,accessToken:C}):new Ga(f).credential({idToken:E,accessToken:C,rawNonce:Ie}):null}return m instanceof ae.g?y.credentialFromError(m):y.credentialFromResult(m)}function hs(m,d){return d.catch(f=>{throw f instanceof ae.g&&function ZL(m,d){var f;const y=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new BE(m,function cE(m,d){var f;const y=(0,ae.Ku)(m),E=d;return W(d.customData.operationType,y,"argument-error"),W(null===(f=E.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,y,"argument-error"),m_._fromError(y,E)}(m,d));else if(y){const E=N1(d),C=d;E&&(C.credential=E,C.tenantId=y.tenantId||void 0,C.email=y.email||void 0,C.phoneNumber=y.phoneNumber||void 0)}}(m,f),f}).then(f=>{const E=f.user;return{operationType:f.operationType,credential:XL(f),additionalUserInfo:GD(f),user:eu.getOrCreate(E)}})}function sm(m,d){return fs.apply(this,arguments)}function fs(){return(fs=(0,P.A)(function*(m,d){const f=yield d;return{verificationId:f.verificationId,confirm:y=>hs(m,f.confirm(y))}})).apply(this,arguments)}class BE{constructor(d,f){this.resolver=f,this.auth=function YL(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return hs(q_(this.auth),this.resolver.resolveSignIn(d))}}class eu{constructor(d){this._delegate=d,this.multiFactor=function v_(m){const d=(0,ae.Ku)(m);return Fe.has(d)||Fe.set(d,__._fromUser(d)),Fe.get(d)}(d)}static getOrCreate(d){return eu.USER_MAP.has(d)||eu.USER_MAP.set(d,new eu(d)),eu.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,P.A)(function*(){return hs(f.auth,Kw(f._delegate,d))})()}linkWithPhoneNumber(d,f){var y=this;return(0,P.A)(function*(){return sm(y.auth,function n1(m,d,f){return Mi.apply(this,arguments)}(y._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,P.A)(function*(){return hs(f.auth,function Up(m,d,f){return Os.apply(this,arguments)}(f._delegate,d,Za))})()}linkWithRedirect(d){var f=this;return(0,P.A)(function*(){return yield $E(Mn(f.auth)),u1(f._delegate,d,Za)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,P.A)(function*(){return hs(f.auth,jD(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return sm(this.auth,function Yc(m,d,f){return $p.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return hs(this.auth,function x_(m,d,f){return nd.apply(this,arguments)}(this._delegate,d,Za))}reauthenticateWithRedirect(d){var f=this;return(0,P.A)(function*(){return yield $E(Mn(f.auth)),o1(f._delegate,d,Za)})()}sendEmailVerification(d){return function OL(m,d){return In.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,P.A)(function*(){return yield function VD(m,d){return Ww.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function xt(m,d){const f=(0,ae.Ku)(m);return(0,Ne._isFirebaseServerApp)(f.auth.app)?Promise.reject(ie(f.auth)):ds(f,d,null)}(this._delegate,d)}updatePassword(d){return function Rp(m,d){return ds((0,ae.Ku)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function P_(m,d){return vE.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function HD(m,d){return $n.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function UD(m,d,f){return Lr.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}eu.USER_MAP=new WeakMap;const Bh=W;let W_=(()=>{class m{constructor(f,y){if(this.app=f,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:E}=f.options;Bh(E,"invalid-api-key",{appName:f.name}),Bh(E,"invalid-api-key",{appName:f.name});const C=typeof window<"u"?Za:void 0;this._delegate=y.initialize({options:{persistence:P1(E,f.name),popupRedirectResolver:C}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?eu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,y){!function Nw(m,d,f){const y=Mn(m);W(y._canInitEmulator,y,"emulator-config-failed"),W(/^https?:\/\//.test(d),y,"invalid-emulator-scheme");const E=!!f?.disableWarnings,C=Pw(d),{host:V,port:Q}=function AL(m){const d=Pw(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!f)return{host:"",port:null};const y=f[2].split("@").pop()||"",E=/^(\[[^\]]+\])(:|$)/.exec(y);if(E){const C=E[1];return{host:C,port:kw(y.substr(C.length+1))}}{const[C,V]=y.split(":");return{host:C,port:kw(V)}}}(d);y.config.emulator={url:`${C}//${V}${null===Q?"":`:${Q}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:V,port:Q,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:E})}),E||function Wy(){function m(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,y)}applyActionCode(f){return function nE(m,d){return fe.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return El(this._delegate,f)}confirmPasswordReset(f,y){return function xL(m,d,f){return tE.apply(this,arguments)}(this._delegate,f,y)}createUserWithEmailAndPassword(f,y){var E=this;return(0,P.A)(function*(){return hs(E._delegate,function RL(m,d,f){return xp.apply(this,arguments)}(E._delegate,f,y))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Gn(m,d){return aE.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Hc(m,d){const f=Th.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,P.A)(function*(){Bh(G_(),f._delegate,"operation-not-supported-in-this-environment");const y=yield function l1(m,d){return M_.apply(this,arguments)}(f._delegate,Za);return y?hs(f._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function jr(m,d){Mn(m)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,y,E){const{next:C,error:V,complete:Q}=K_(f,y,E);return this._delegate.onAuthStateChanged(C,V,Q)}onIdTokenChanged(f,y,E){const{next:C,error:V,complete:Q}=K_(f,y,E);return this._delegate.onIdTokenChanged(C,V,Q)}sendSignInLinkToEmail(f,y){return function Uc(m,d,f){return ku.apply(this,arguments)}(this._delegate,f,y)}sendPasswordResetEmail(f,y){return function kL(m,d,f){return eE.apply(this,arguments)}(this._delegate,f,y||void 0)}setPersistence(f){var y=this;return(0,P.A)(function*(){let E;switch(function KL(m,d){im(Object.values(so).includes(d),m,"invalid-persistence-type"),(0,ae.lV)()?im(d!==so.SESSION,m,"unsupported-persistence-type"):(0,ae.Ll)()?im(d===so.NONE,m,"unsupported-persistence-type"):nm()?im(d===so.NONE||d===so.LOCAL&&(0,ae.zW)(),m,"unsupported-persistence-type"):im(d===so.NONE||tm(),m,"unsupported-persistence-type")}(y._delegate,f),f){case so.SESSION:E=Tl;break;case so.LOCAL:E=(yield dn(Wc)._isAvailable())?Wc:T_;break;case so.NONE:E=ur;break;default:return We("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(E)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return hs(this._delegate,function MD(m){return s_.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return hs(this._delegate,Pp(this._delegate,f))}signInWithCustomToken(f){return hs(this._delegate,function BD(m,d){return h_.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,y){return hs(this._delegate,function Wa(m,d,f){return(0,Ne._isFirebaseServerApp)(m.app)?Promise.reject(ie(m)):Pp((0,ae.Ku)(m),Sp.credential(d,f)).catch(function(){var y=(0,P.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&Xw(m),E});return function(E){return y.apply(this,arguments)}}())}(this._delegate,f,y))}signInWithEmailLink(f,y){return hs(this._delegate,function sE(m,d,f){return Dh.apply(this,arguments)}(this._delegate,f,y))}signInWithPhoneNumber(f,y){return sm(this._delegate,function t1(m,d,f){return Ja.apply(this,arguments)}(this._delegate,f,y))}signInWithPopup(f){var y=this;return(0,P.A)(function*(){return Bh(G_(),y._delegate,"operation-not-supported-in-this-environment"),hs(y._delegate,function Do(m,d,f){return Bp.apply(this,arguments)}(y._delegate,f,Za))})()}signInWithRedirect(f){var y=this;return(0,P.A)(function*(){return Bh(G_(),y._delegate,"operation-not-supported-in-this-environment"),yield $E(y._delegate),No(y._delegate,f,Za)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function rE(m,d){return iE.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=so,m})();function K_(m,d,f){let y=m;"function"!=typeof m&&({next:y,error:d,complete:f}=m);const E=y;return{next:V=>E(V&&eu.getOrCreate(V)),error:d,complete:f}}function P1(m,d){const f=function QL(m,d){const f=D1();if(!f)return[];const y=_r(S1,m,d);switch(f.getItem(y)){case so.NONE:return[ur];case so.LOCAL:return[Wc,Tl];case so.SESSION:return[Tl];default:return[]}}(m,d);if(typeof self<"u"&&!f.includes(Wc)&&f.push(Wc),typeof window<"u")for(const y of[T_,Tl])f.includes(y)||f.push(y);return f.includes(ur)||f.push(ur),f}class Uh{constructor(){this.providerId="phone",this._delegate=new Zc(q_(rt.A.auth()))}static credential(d,f){return Zc.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Uh.PHONE_SIGN_IN_METHOD=Zc.PHONE_SIGN_IN_METHOD,Uh.PROVIDER_ID=Zc.PROVIDER_ID;const k1=W;class pa{constructor(d,f,y=rt.A.app()){var E;k1(null===(E=y.options)||void 0===E?void 0:E.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new xh(y.auth(),d,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function HE(m){m.INTERNAL.registerComponent(new lt.uA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),y=d.getProvider("auth");return new W_(f,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Sp,FacebookAuthProvider:Bw,GithubAuthProvider:RD,GoogleAuthProvider:Uw,OAuthProvider:Ga,SAMLAuthProvider:Dp,PhoneAuthProvider:Uh,PhoneMultiFactorGenerator:Yp,RecaptchaVerifier:pa,TwitterAuthProvider:zw,Auth:W_,AuthCredential:Nu,Error:ae.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.10")}(rt.A)},900:(zt,St,ee)=>{"use strict";ee.r(St);var P=ee(345),rt=ee(467),Ne=ee(852),ae=ee(76),dt=ee(362);const tt="type.googleapis.com/google.protobuf.Int64Value",lt="type.googleapis.com/google.protobuf.UInt64Value";function ze(Oe,ve){const Re={};for(const it in Oe)Oe.hasOwnProperty(it)&&(Re[it]=ve(Oe[it]));return Re}function K(Oe){if(null==Oe)return null;if(Oe instanceof Number&&(Oe=Oe.valueOf()),"number"==typeof Oe&&isFinite(Oe)||!0===Oe||!1===Oe||"[object String]"===Object.prototype.toString.call(Oe))return Oe;if(Oe instanceof Date)return Oe.toISOString();if(Array.isArray(Oe))return Oe.map(ve=>K(ve));if("function"==typeof Oe||"object"==typeof Oe)return ze(Oe,ve=>K(ve));throw new Error("Data cannot be encoded in JSON: "+Oe)}function G(Oe){if(null==Oe)return Oe;if(Oe["@type"])switch(Oe["@type"]){case tt:case lt:{const ve=Number(Oe.value);if(isNaN(ve))throw new Error("Data cannot be decoded from JSON: "+Oe);return ve}default:throw new Error("Data cannot be decoded from JSON: "+Oe)}return Array.isArray(Oe)?Oe.map(ve=>G(ve)):"function"==typeof Oe||"object"==typeof Oe?ze(Oe,ve=>G(ve)):Oe}const ne="functions",te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ae.g{constructor(ve,Re,it){super(`${ne}/${ve}`,Re||""),this.details=it}}class mt{constructor(ve,Re,it){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=ve.getImmediate({optional:!0}),this.messaging=Re.getImmediate({optional:!0}),this.auth||ve.get().then(Qt=>this.auth=Qt,()=>{}),this.messaging||Re.get().then(Qt=>this.messaging=Qt,()=>{}),this.appCheck||it.get().then(Qt=>this.appCheck=Qt,()=>{})}getAuthToken(){var ve=this;return(0,rt.A)(function*(){if(ve.auth)try{const Re=yield ve.auth.getToken();return Re?.accessToken}catch{return}})()}getMessagingToken(){var ve=this;return(0,rt.A)(function*(){if(ve.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield ve.messaging.getToken()}catch{return}})()}getAppCheckToken(ve){var Re=this;return(0,rt.A)(function*(){if(Re.appCheck){const it=ve?yield Re.appCheck.getLimitedUseToken():yield Re.appCheck.getToken();return it.error?null:it.token}return null})()}getContext(ve){var Re=this;return(0,rt.A)(function*(){return{authToken:yield Re.getAuthToken(),messagingToken:yield Re.getMessagingToken(),appCheckToken:yield Re.getAppCheckToken(ve)}})()}}const ct="us-central1";class Dn{constructor(ve,Re,it,Qt,Nt=ct,un){this.app=ve,this.fetchImpl=un,this.emulatorOrigin=null,this.contextProvider=new mt(Re,it,Qt),this.cancelAllRequests=new Promise(mn=>{this.deleteService=()=>Promise.resolve(mn())});try{const mn=new URL(Nt);this.customDomain=mn.origin,this.region=ct}catch{this.customDomain=null,this.region=Nt}}_delete(){return this.deleteService()}_url(ve){const Re=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${Re}/${this.region}/${ve}`:null!==this.customDomain?`${this.customDomain}/${ve}`:`https://${this.region}-${Re}.cloudfunctions.net/${ve}`}}function ft(Oe,ve,Re,it){return be.apply(this,arguments)}function be(){return(be=(0,rt.A)(function*(Oe,ve,Re,it){let Qt;Re["Content-Type"]="application/json";try{Qt=yield it(Oe,{method:"POST",body:JSON.stringify(ve),headers:Re})}catch{return{status:0,json:null}}let Nt=null;try{Nt=yield Qt.json()}catch{}return{status:Qt.status,json:Nt}})).apply(this,arguments)}function M(Oe,ve,Re,it){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,rt.A)(function*(Oe,ve,Re,it){const Qt={data:Re=K(Re)},Nt={},un=yield Oe.contextProvider.getContext(it.limitedUseAppCheckTokens);un.authToken&&(Nt.Authorization="Bearer "+un.authToken),un.messagingToken&&(Nt["Firebase-Instance-ID-Token"]=un.messagingToken),null!==un.appCheckToken&&(Nt["X-Firebase-AppCheck"]=un.appCheckToken);const ar=function vt(Oe){let ve=null;return{promise:new Promise((Re,it)=>{ve=setTimeout(()=>{it(new ge("deadline-exceeded","deadline-exceeded"))},Oe)}),cancel:()=>{ve&&clearTimeout(ve)}}}(it.timeout||7e4),Wr=yield Promise.race([ft(ve,Qt,Nt,Oe.fetchImpl),ar.promise,Oe.cancelAllRequests]);if(ar.cancel(),!Wr)throw new ge("cancelled","Firebase Functions instance was deleted.");const Ma=function qe(Oe,ve){let Qt,Re=function $e(Oe){if(Oe>=200&&Oe<300)return"ok";switch(Oe){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(Oe),it=Re;try{const Nt=ve&&ve.error;if(Nt){const un=Nt.status;if("string"==typeof un){if(!te[un])return new ge("internal","internal");Re=te[un],it=un}const mn=Nt.message;"string"==typeof mn&&(it=mn),Qt=Nt.details,void 0!==Qt&&(Qt=G(Qt))}}catch{}return"ok"===Re?null:new ge(Re,it,Qt)}(Wr.status,Wr.json);if(Ma)throw Ma;if(!Wr.json)throw new ge("internal","Response is not valid JSON object.");let na=Wr.json.data;if(typeof na>"u"&&(na=Wr.json.result),typeof na>"u")throw new ge("internal","Response is missing data field.");return{data:G(na)}})).apply(this,arguments)}const W="@firebase/functions";function Tn(Oe,ve,Re){!function Rn(Oe,ve,Re){Oe.emulatorOrigin=`http://${ve}:${Re}`}((0,ae.Ku)(Oe),ve,Re)}!function cn(Oe,ve){(0,Ne._registerComponent)(new dt.uA(ne,(it,{instanceIdentifier:Qt})=>{const Nt=it.getProvider("app").getImmediate(),un=it.getProvider("auth-internal"),mn=it.getProvider("messaging-internal"),ar=it.getProvider("app-check-internal");return new Dn(Nt,un,mn,ar,Qt,Oe)},"PUBLIC").setMultipleInstances(!0)),(0,Ne.registerVersion)(W,"0.11.6",ve),(0,Ne.registerVersion)(W,"0.11.6","esm2017")}(fetch.bind(self));class Be{constructor(ve,Re){this.app=ve,this._delegate=Re,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(ve,Re){return function ue(Oe,ve,Re){return function ht(Oe,ve,Re){return it=>function ie(Oe,ve,Re,it){const Qt=Oe._url(ve);return M(Oe,Qt,Re,it)}(Oe,ve,it,Re||{})}((0,ae.Ku)(Oe),ve,Re)}(this._delegate,ve,Re)}httpsCallableFromURL(ve,Re){return function ce(Oe,ve,Re){return function We(Oe,ve,Re){return it=>M(Oe,ve,it,Re||{})}((0,ae.Ku)(Oe),ve,Re)}(this._delegate,ve,Re)}useFunctionsEmulator(ve){const Re=ve.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(null==Re)throw new ae.g("functions","No origin provided to useFunctionsEmulator()");if(null==Re[2])throw new ae.g("functions","Port missing in origin provided to useFunctionsEmulator()");return Tn(this._delegate,Re[1],Number(Re[2]))}useEmulator(ve,Re){return Tn(this._delegate,ve,Re)}}const Ze=(Oe,{instanceIdentifier:ve})=>{const Re=Oe.getProvider("app-compat").getImmediate(),it=Oe.getProvider("functions").getImmediate({identifier:ve??"us-central1"});return new Be(Re,it)};(function an(){const Oe={Functions:Be};P.A.INTERNAL.registerComponent(new dt.uA("functions-compat",Ze,"PUBLIC").setServiceProps(Oe).setMultipleInstances(!0))})(),P.A.registerVersion("@firebase/functions-compat","0.3.12")},467:(zt,St,ee)=>{"use strict";function P(Ne,ae,dt,tt,lt,ze,K){try{var G=Ne[ze](K),ne=G.value}catch(te){return void dt(te)}G.done?ae(ne):Promise.resolve(ne).then(tt,lt)}function rt(Ne){return function(){var ae=this,dt=arguments;return new Promise(function(tt,lt){var ze=Ne.apply(ae,dt);function K(ne){P(ze,tt,lt,K,G,"next",ne)}function G(ne){P(ze,tt,lt,K,G,"throw",ne)}K(void 0)})}}ee.d(St,{A:()=>rt})},635:(zt,St,ee)=>{"use strict";function ae(ue,ce){var ye={};for(var we in ue)Object.prototype.hasOwnProperty.call(ue,we)&&ce.indexOf(we)<0&&(ye[we]=ue[we]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(we=Object.getOwnPropertySymbols(ue);Be<we.length;Be++)ce.indexOf(we[Be])<0&&Object.prototype.propertyIsEnumerable.call(ue,we[Be])&&(ye[we[Be]]=ue[we[Be]])}return ye}function te(ue,ce,ye,we){return new(ye||(ye=Promise))(function(Ce,Ze){function an(Re){try{ve(we.next(Re))}catch(it){Ze(it)}}function Oe(Re){try{ve(we.throw(Re))}catch(it){Ze(it)}}function ve(Re){Re.done?Ce(Re.value):function Be(Ce){return Ce instanceof ye?Ce:new ye(function(Ze){Ze(Ce)})}(Re.value).then(an,Oe)}ve((we=we.apply(ue,ce||[])).next())})}function ht(ue){return this instanceof ht?(this.v=ue,this):new ht(ue)}function We(ue,ce,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,we=ye.apply(ue,ce||[]),Ce=[];return Be={},an("next"),an("throw"),an("return",function Ze(Nt){return function(un){return Promise.resolve(un).then(Nt,it)}}),Be[Symbol.asyncIterator]=function(){return this},Be;function an(Nt,un){we[Nt]&&(Be[Nt]=function(mn){return new Promise(function(ar,Wr){Ce.push([Nt,mn,ar,Wr])>1||Oe(Nt,mn)})},un&&(Be[Nt]=un(Be[Nt])))}function Oe(Nt,un){try{!function ve(Nt){Nt.value instanceof ht?Promise.resolve(Nt.value.v).then(Re,it):Qt(Ce[0][2],Nt)}(we[Nt](un))}catch(mn){Qt(Ce[0][3],mn)}}function Re(Nt){Oe("next",Nt)}function it(Nt){Oe("throw",Nt)}function Qt(Nt,un){Nt(un),Ce.shift(),Ce.length&&Oe(Ce[0][0],Ce[0][1])}}function be(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,ce=ue[Symbol.asyncIterator];return ce?ce.call(ue):(ue=function mt(ue){var ce="function"==typeof Symbol&&Symbol.iterator,ye=ce&&ue[ce],we=0;if(ye)return ye.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&we>=ue.length&&(ue=void 0),{value:ue&&ue[we++],done:!ue}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),ye={},we("next"),we("throw"),we("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function we(Ce){ye[Ce]=ue[Ce]&&function(Ze){return new Promise(function(an,Oe){!function Be(Ce,Ze,an,Oe){Promise.resolve(Oe).then(function(ve){Ce({value:ve,done:an})},Ze)}(an,Oe,(Ze=ue[Ce](Ze)).done,Ze.value)})}}}ee.d(St,{AQ:()=>We,N3:()=>ht,Tt:()=>ae,sH:()=>te,xN:()=>be}),"function"==typeof SuppressedError&&SuppressedError}},zt=>{zt(zt.s=104)}]);