<div class="max-w-2xl mx-auto p-8 apple-card bg-primary-100 dark:bg-background-dark">
    <h1 class="text-3xl font-bold mb-4 text-center text-accent-300 dark:text-text-dark apple-text-shadow">
        Document Vectorization
    </h1>
    <p class="mb-8 text-center text-accent-100 dark:text-text-dark">
        Upload and process your documents for enhanced AI interactions.
    </p>

    <div class="mb-6">
        <input type="file" (change)="onFileSelected($event)" accept=".txt,.doc,.docx,.pdf" id="fileInput" class="hidden" #fileInput>
        <label for="fileInput" class="block w-full py-4 px-6 text-center bg-primary-200 dark:bg-accent-400 text-accent-300 dark:text-text-dark rounded-apple cursor-pointer hover:bg-primary-300 dark:hover:bg-accent-300 transition-colors duration-250 ease-apple border-2 border-dashed border-accent6 apple-hover-lift">
            <i class="bi bi-cloud-upload text-2xl mr-2"></i>
            <span class="font-semibold">{{ selectedFile ? selectedFile.name : 'Choose a file to upload' }}</span>
        </label>
    </div>

    <button (click)="uploadFile()" [disabled]="!selectedFile || isProcessing"
            class="w-full py-4 px-6 bg-accent6 text-primary-100 rounded-apple font-bold hover:bg-accent6/80 transition-all duration-250 ease-apple disabled:bg-accent-100 disabled:cursor-not-allowed shadow-apple-md apple-button">
        <i class="bi" [ngClass]="{'bi-arrow-up-circle': !isProcessing, 'bi-arrow-repeat animate-apple-spin': isProcessing}"></i>
        {{ isProcessing ? 'Processing Document...' : 'Upload and Process' }}
    </button>

    <div *ngIf="isProcessing" class="mt-8 animate-apple-fade-in">
        <div class="relative pt-1">
            <div class="mb-2 text-center">
        <span class="text-3xl font-bold text-accent6 dark:text-accent6">
          {{ processingProgress?.percentage.toFixed(0) || 0 }}%
        </span>
            </div>
            <div class="overflow-hidden h-4 mb-4 text-xs flex rounded-apple-full bg-accent6/20 relative">
                <div [style.width.%]="processingProgress?.percentage || 0"
                     class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-accent6 transition-all duration-600 ease-apple-out">
                </div>
                <div class="absolute inset-0 flex items-center justify-center">
          <span class="text-xs font-semibold text-primary-100 dark:text-text-dark mix-blend-difference">
            Progress
          </span>
                </div>
            </div>
        </div>
        <div class="text-center mt-2 text-sm text-accent-100 dark:text-text-dark">
            Processed {{ processingProgress?.processedChunks || 0 }} of {{ processingProgress?.totalChunks || 0 }} chunks
        </div>
        <div class="flex justify-center items-center space-x-2 mt-4">
            <div class="w-3 h-3 bg-accent6 rounded-apple-full animate-apple-bounce" style="animation-delay: 0s"></div>
            <div class="w-3 h-3 bg-accent6 rounded-apple-full animate-apple-bounce" style="animation-delay: 0.2s"></div>
            <div class="w-3 h-3 bg-accent6 rounded-apple-full animate-apple-bounce" style="animation-delay: 0.4s"></div>
        </div>
    </div>
</div>
